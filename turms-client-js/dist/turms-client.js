/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 139);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(129);
/* harmony import */ var core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_0__);


var RequestUtil = function () {
  function RequestUtil() {}

  RequestUtil.wrapValueIfNotNull = function (value) {
    return value ? {
      value: value
    } : undefined;
  };

  RequestUtil.wrapTimeIfNotNull = function (value) {
    return value ? {
      value: value.getTime()
    } : undefined;
  };

  RequestUtil.isFalsy = function (value) {
    return typeof value === 'undefined' || value === null || value === [];
  };

  RequestUtil.isTruthy = function (value) {
    return !this.isFalsy(value);
  };

  RequestUtil.throwIfEmpty = function (value) {
    if (Object.keys(value).length === 0) {
      throw this.ERROR;
    }
  };

  RequestUtil.throwIfAnyFalsy = function () {
    var values = [];

    for (var _i = 0; _i < arguments.length; _i++) {
      values[_i] = arguments[_i];
    }

    if (this.isFalsy(values)) {
      throw this.ERROR;
    } else {
      for (var _a = 0, values_1 = values; _a < values_1.length; _a++) {
        var value = values_1[_a];

        if (this.isFalsy(value)) {
          throw this.ERROR;
        }
      }
    }
  };

  RequestUtil.throwIfAllFalsy = function () {
    var values = [];

    for (var _i = 0; _i < arguments.length; _i++) {
      values[_i] = arguments[_i];
    }

    if (RequestUtil.areAllFalsy(values)) {
      throw this.ERROR;
    }
  };

  RequestUtil.areAllFalsy = function () {
    var values = [];

    for (var _i = 0; _i < arguments.length; _i++) {
      values[_i] = arguments[_i];
    }

    if (this.isFalsy(values)) {
      return true;
    } else {
      for (var _a = 0, values_2 = values; _a < values_2.length; _a++) {
        var value = values_2[_a];

        if (this.isTruthy(value)) {
          return false;
        }
      }

      return true;
    }
  };

  RequestUtil.ERROR = new Error("Illegal parameters");
  return RequestUtil;
}();

/* harmony default export */ __webpack_exports__["a"] = (RequestUtil);

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(203);
/* harmony import */ var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(205);
/* harmony import */ var core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(206);
/* harmony import */ var core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(18);
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(207);
/* harmony import */ var core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(129);
/* harmony import */ var core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(24);
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_ends_with__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(209);
/* harmony import */ var core_js_modules_es_string_ends_with__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_ends_with__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(211);
/* harmony import */ var core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(51);
/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_9__);











function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

var NotificationUtil = function () {
  function NotificationUtil() {}

  NotificationUtil.transform = function (data, parentKey) {
    if (typeof data !== 'undefined' && data !== null) {
      if (typeof parentKey === 'string' && (parentKey.endsWith('Date') || parentKey.endsWith('_date') || parentKey === 'date') && typeof data === 'string') {
        return new Date(parseInt(data));
      } else if (_typeof(data) === 'object') {
        var keys = Object.keys(data);

        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
          var key = keys_1[_i];

          if ((key === 'value' || key === 'values') && keys.length === 1) {
            return data[key];
          } else {
            data[key] = this.transform(data[key], key);
          }
        }
      }
    }

    return data;
  };

  NotificationUtil.getFirstArrayAndTransform = function (data) {
    var _this = this;

    if (_typeof(data) === 'object') {
      for (var _i = 0, _a = Object.keys(data); _i < _a.length; _i++) {
        var key = _a[_i];
        var item = data[key];

        if (item instanceof Array) {
          item = item.map(function (value) {
            return _this.transform(value);
          });
          return item;
        }
      }
    }
  };

  NotificationUtil.transformDate = function (date) {
    if (date && typeof date.value === 'string') {
      return new Date(date.value);
    }
  };

  NotificationUtil.getIdsWithVersion = function (notification) {
    return {
      ids: notification.data.idsWithVersion.values,
      lastUpdatedDate: notification.data.idsWithVersion.lastUpdatedDate && notification.data.idsWithVersion.lastUpdatedDate.value ? new Date(notification.data.idsWithVersion.lastUpdatedDate.value) : null
    };
  };

  return NotificationUtil;
}();

/* harmony default export */ __webpack_exports__["a"] = (NotificationUtil);

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var check = function (it) {
  return it && it.Math == Math && it;
};

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
module.exports =
  // eslint-disable-next-line no-undef
  check(typeof globalThis == 'object' && globalThis) ||
  check(typeof window == 'object' && window) ||
  check(typeof self == 'object' && self) ||
  check(typeof global == 'object' && global) ||
  // eslint-disable-next-line no-new-func
  Function('return this')();

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(38)))

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_ARRAY_BUFFER = __webpack_require__(110);
var DESCRIPTORS = __webpack_require__(10);
var global = __webpack_require__(2);
var isObject = __webpack_require__(8);
var has = __webpack_require__(7);
var classof = __webpack_require__(49);
var createNonEnumerableProperty = __webpack_require__(15);
var redefine = __webpack_require__(19);
var defineProperty = __webpack_require__(12).f;
var getPrototypeOf = __webpack_require__(48);
var setPrototypeOf = __webpack_require__(34);
var wellKnownSymbol = __webpack_require__(5);
var uid = __webpack_require__(41);

var Int8Array = global.Int8Array;
var Int8ArrayPrototype = Int8Array && Int8Array.prototype;
var Uint8ClampedArray = global.Uint8ClampedArray;
var Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;
var TypedArray = Int8Array && getPrototypeOf(Int8Array);
var TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);
var ObjectPrototype = Object.prototype;
var isPrototypeOf = ObjectPrototype.isPrototypeOf;

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');
// Fixing native typed arrays in Opera Presto crashes the browser, see #595
var NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';
var TYPED_ARRAY_TAG_REQIRED = false;
var NAME;

var TypedArrayConstructorsList = {
  Int8Array: 1,
  Uint8Array: 1,
  Uint8ClampedArray: 1,
  Int16Array: 2,
  Uint16Array: 2,
  Int32Array: 4,
  Uint32Array: 4,
  Float32Array: 4,
  Float64Array: 8
};

var isView = function isView(it) {
  var klass = classof(it);
  return klass === 'DataView' || has(TypedArrayConstructorsList, klass);
};

var isTypedArray = function (it) {
  return isObject(it) && has(TypedArrayConstructorsList, classof(it));
};

var aTypedArray = function (it) {
  if (isTypedArray(it)) return it;
  throw TypeError('Target is not a typed array');
};

var aTypedArrayConstructor = function (C) {
  if (setPrototypeOf) {
    if (isPrototypeOf.call(TypedArray, C)) return C;
  } else for (var ARRAY in TypedArrayConstructorsList) if (has(TypedArrayConstructorsList, NAME)) {
    var TypedArrayConstructor = global[ARRAY];
    if (TypedArrayConstructor && (C === TypedArrayConstructor || isPrototypeOf.call(TypedArrayConstructor, C))) {
      return C;
    }
  } throw TypeError('Target is not a typed array constructor');
};

var exportTypedArrayMethod = function (KEY, property, forced) {
  if (!DESCRIPTORS) return;
  if (forced) for (var ARRAY in TypedArrayConstructorsList) {
    var TypedArrayConstructor = global[ARRAY];
    if (TypedArrayConstructor && has(TypedArrayConstructor.prototype, KEY)) {
      delete TypedArrayConstructor.prototype[KEY];
    }
  }
  if (!TypedArrayPrototype[KEY] || forced) {
    redefine(TypedArrayPrototype, KEY, forced ? property
      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property);
  }
};

var exportTypedArrayStaticMethod = function (KEY, property, forced) {
  var ARRAY, TypedArrayConstructor;
  if (!DESCRIPTORS) return;
  if (setPrototypeOf) {
    if (forced) for (ARRAY in TypedArrayConstructorsList) {
      TypedArrayConstructor = global[ARRAY];
      if (TypedArrayConstructor && has(TypedArrayConstructor, KEY)) {
        delete TypedArrayConstructor[KEY];
      }
    }
    if (!TypedArray[KEY] || forced) {
      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable
      try {
        return redefine(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && Int8Array[KEY] || property);
      } catch (error) { /* empty */ }
    } else return;
  }
  for (ARRAY in TypedArrayConstructorsList) {
    TypedArrayConstructor = global[ARRAY];
    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {
      redefine(TypedArrayConstructor, KEY, property);
    }
  }
};

for (NAME in TypedArrayConstructorsList) {
  if (!global[NAME]) NATIVE_ARRAY_BUFFER_VIEWS = false;
}

// WebKit bug - typed arrays constructors prototype is Object.prototype
if (!NATIVE_ARRAY_BUFFER_VIEWS || typeof TypedArray != 'function' || TypedArray === Function.prototype) {
  // eslint-disable-next-line no-shadow
  TypedArray = function TypedArray() {
    throw TypeError('Incorrect invocation');
  };
  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {
    if (global[NAME]) setPrototypeOf(global[NAME], TypedArray);
  }
}

if (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {
  TypedArrayPrototype = TypedArray.prototype;
  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {
    if (global[NAME]) setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);
  }
}

// WebKit bug - one more object in Uint8ClampedArray prototype chain
if (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {
  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);
}

if (DESCRIPTORS && !has(TypedArrayPrototype, TO_STRING_TAG)) {
  TYPED_ARRAY_TAG_REQIRED = true;
  defineProperty(TypedArrayPrototype, TO_STRING_TAG, { get: function () {
    return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;
  } });
  for (NAME in TypedArrayConstructorsList) if (global[NAME]) {
    createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);
  }
}

module.exports = {
  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,
  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQIRED && TYPED_ARRAY_TAG,
  aTypedArray: aTypedArray,
  aTypedArrayConstructor: aTypedArrayConstructor,
  exportTypedArrayMethod: exportTypedArrayMethod,
  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,
  isView: isView,
  isTypedArray: isTypedArray,
  TypedArray: TypedArray,
  TypedArrayPrototype: TypedArrayPrototype
};


/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return !!exec();
  } catch (error) {
    return true;
  }
};


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var shared = __webpack_require__(52);
var has = __webpack_require__(7);
var uid = __webpack_require__(41);
var NATIVE_SYMBOL = __webpack_require__(55);
var USE_SYMBOL_AS_UID = __webpack_require__(92);

var WellKnownSymbolsStore = shared('wks');
var Symbol = global.Symbol;
var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;

module.exports = function (name) {
  if (!has(WellKnownSymbolsStore, name)) {
    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];
    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);
  } return WellKnownSymbolsStore[name];
};


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/*eslint-disable block-scoped-var, id-length, no-control-regex, no-magic-numbers, no-prototype-builtins, no-redeclare, no-shadow, no-var, sort-vars*/


var $protobuf = __webpack_require__(186);

// Common aliases
var $Reader = $protobuf.Reader, $Writer = $protobuf.Writer, $util = $protobuf.util;

// Exported root namespace
var $root = $protobuf.roots["default"] || ($protobuf.roots["default"] = {});

$root.im = (function() {

    /**
     * Namespace im.
     * @exports im
     * @namespace
     */
    var im = {};

    im.turms = (function() {

        /**
         * Namespace turms.
         * @memberof im
         * @namespace
         */
        var turms = {};

        turms.proto = (function() {

            /**
             * Namespace proto.
             * @memberof im.turms
             * @namespace
             */
            var proto = {};

            /**
             * ChatType enum.
             * @name im.turms.proto.ChatType
             * @enum {string}
             * @property {number} PRIVATE=0 PRIVATE value
             * @property {number} GROUP=1 GROUP value
             */
            proto.ChatType = (function() {
                var valuesById = {}, values = Object.create(valuesById);
                values[valuesById[0] = "PRIVATE"] = 0;
                values[valuesById[1] = "GROUP"] = 1;
                return values;
            })();

            /**
             * DeviceType enum.
             * @name im.turms.proto.DeviceType
             * @enum {string}
             * @property {number} DESKTOP=0 DESKTOP value
             * @property {number} BROWSER=1 BROWSER value
             * @property {number} IOS=2 IOS value
             * @property {number} ANDROID=3 ANDROID value
             * @property {number} OTHERS=4 OTHERS value
             * @property {number} UNKNOWN=5 UNKNOWN value
             */
            proto.DeviceType = (function() {
                var valuesById = {}, values = Object.create(valuesById);
                values[valuesById[0] = "DESKTOP"] = 0;
                values[valuesById[1] = "BROWSER"] = 1;
                values[valuesById[2] = "IOS"] = 2;
                values[valuesById[3] = "ANDROID"] = 3;
                values[valuesById[4] = "OTHERS"] = 4;
                values[valuesById[5] = "UNKNOWN"] = 5;
                return values;
            })();

            /**
             * GroupMemberRole enum.
             * @name im.turms.proto.GroupMemberRole
             * @enum {string}
             * @property {number} OWNER=0 OWNER value
             * @property {number} MANAGER=1 MANAGER value
             * @property {number} MEMBER=2 MEMBER value
             * @property {number} GUEST=3 GUEST value
             * @property {number} ANONYMOUS_GUEST=4 ANONYMOUS_GUEST value
             */
            proto.GroupMemberRole = (function() {
                var valuesById = {}, values = Object.create(valuesById);
                values[valuesById[0] = "OWNER"] = 0;
                values[valuesById[1] = "MANAGER"] = 1;
                values[valuesById[2] = "MEMBER"] = 2;
                values[valuesById[3] = "GUEST"] = 3;
                values[valuesById[4] = "ANONYMOUS_GUEST"] = 4;
                return values;
            })();

            /**
             * MessageDeliveryStatus enum.
             * @name im.turms.proto.MessageDeliveryStatus
             * @enum {string}
             * @property {number} READY=0 READY value
             * @property {number} SENDING=1 SENDING value
             * @property {number} RECEIVED=2 RECEIVED value
             * @property {number} RECALLING=3 RECALLING value
             * @property {number} RECALLED=4 RECALLED value
             */
            proto.MessageDeliveryStatus = (function() {
                var valuesById = {}, values = Object.create(valuesById);
                values[valuesById[0] = "READY"] = 0;
                values[valuesById[1] = "SENDING"] = 1;
                values[valuesById[2] = "RECEIVED"] = 2;
                values[valuesById[3] = "RECALLING"] = 3;
                values[valuesById[4] = "RECALLED"] = 4;
                return values;
            })();

            /**
             * ProfileAccessStrategy enum.
             * @name im.turms.proto.ProfileAccessStrategy
             * @enum {string}
             * @property {number} ALL=0 ALL value
             * @property {number} ALL_EXCEPT_BLACKLISTED_USERS=1 ALL_EXCEPT_BLACKLISTED_USERS value
             * @property {number} FRIENDS=2 FRIENDS value
             */
            proto.ProfileAccessStrategy = (function() {
                var valuesById = {}, values = Object.create(valuesById);
                values[valuesById[0] = "ALL"] = 0;
                values[valuesById[1] = "ALL_EXCEPT_BLACKLISTED_USERS"] = 1;
                values[valuesById[2] = "FRIENDS"] = 2;
                return values;
            })();

            /**
             * RequestStatus enum.
             * @name im.turms.proto.RequestStatus
             * @enum {string}
             * @property {number} PENDING=0 PENDING value
             * @property {number} ACCEPTED=1 ACCEPTED value
             * @property {number} ACCEPTED_WITHOUT_CONFIRM=2 ACCEPTED_WITHOUT_CONFIRM value
             * @property {number} DECLINED=3 DECLINED value
             * @property {number} IGNORED=4 IGNORED value
             * @property {number} EXPIRED=5 EXPIRED value
             * @property {number} CANCELED=6 CANCELED value
             */
            proto.RequestStatus = (function() {
                var valuesById = {}, values = Object.create(valuesById);
                values[valuesById[0] = "PENDING"] = 0;
                values[valuesById[1] = "ACCEPTED"] = 1;
                values[valuesById[2] = "ACCEPTED_WITHOUT_CONFIRM"] = 2;
                values[valuesById[3] = "DECLINED"] = 3;
                values[valuesById[4] = "IGNORED"] = 4;
                values[valuesById[5] = "EXPIRED"] = 5;
                values[valuesById[6] = "CANCELED"] = 6;
                return values;
            })();

            /**
             * ResponseAction enum.
             * @name im.turms.proto.ResponseAction
             * @enum {string}
             * @property {number} ACCEPT=0 ACCEPT value
             * @property {number} DECLINE=1 DECLINE value
             * @property {number} IGNORE=2 IGNORE value
             */
            proto.ResponseAction = (function() {
                var valuesById = {}, values = Object.create(valuesById);
                values[valuesById[0] = "ACCEPT"] = 0;
                values[valuesById[1] = "DECLINE"] = 1;
                values[valuesById[2] = "IGNORE"] = 2;
                return values;
            })();

            /**
             * UserStatus enum.
             * @name im.turms.proto.UserStatus
             * @enum {string}
             * @property {number} AVAILABLE=0 AVAILABLE value
             * @property {number} OFFLINE=1 OFFLINE value
             * @property {number} INVISIBLE=2 INVISIBLE value
             * @property {number} BUSY=3 BUSY value
             * @property {number} DO_NOT_DISTURB=4 DO_NOT_DISTURB value
             * @property {number} AWAY=5 AWAY value
             * @property {number} BE_RIGHT_BACK=6 BE_RIGHT_BACK value
             */
            proto.UserStatus = (function() {
                var valuesById = {}, values = Object.create(valuesById);
                values[valuesById[0] = "AVAILABLE"] = 0;
                values[valuesById[1] = "OFFLINE"] = 1;
                values[valuesById[2] = "INVISIBLE"] = 2;
                values[valuesById[3] = "BUSY"] = 3;
                values[valuesById[4] = "DO_NOT_DISTURB"] = 4;
                values[valuesById[5] = "AWAY"] = 5;
                values[valuesById[6] = "BE_RIGHT_BACK"] = 6;
                return values;
            })();

            proto.Int64ValuesWithVersion = (function() {

                /**
                 * Properties of an Int64ValuesWithVersion.
                 * @memberof im.turms.proto
                 * @interface IInt64ValuesWithVersion
                 * @property {Array.<string>|null} [values] Int64ValuesWithVersion values
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] Int64ValuesWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new Int64ValuesWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents an Int64ValuesWithVersion.
                 * @implements IInt64ValuesWithVersion
                 * @constructor
                 * @param {im.turms.proto.IInt64ValuesWithVersion=} [properties] Properties to set
                 */
                function Int64ValuesWithVersion(properties) {
                    this.values = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * Int64ValuesWithVersion values.
                 * @member {Array.<string>} values
                 * @memberof im.turms.proto.Int64ValuesWithVersion
                 * @instance
                 */
                Int64ValuesWithVersion.prototype.values = $util.emptyArray;

                /**
                 * Int64ValuesWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.Int64ValuesWithVersion
                 * @instance
                 */
                Int64ValuesWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified Int64ValuesWithVersion message. Does not implicitly {@link im.turms.proto.Int64ValuesWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.Int64ValuesWithVersion
                 * @static
                 * @param {im.turms.proto.IInt64ValuesWithVersion} message Int64ValuesWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                Int64ValuesWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.values != null && message.values.length) {
                        writer.uint32(/* id 1, wireType 2 =*/10).fork();
                        for (var i = 0; i < message.values.length; ++i)
                            writer.int64(message.values[i]);
                        writer.ldelim();
                    }
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an Int64ValuesWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.Int64ValuesWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.Int64ValuesWithVersion} Int64ValuesWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                Int64ValuesWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.Int64ValuesWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.values && message.values.length))
                                message.values = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.values.push(reader.int64().toString());
                            } else
                                message.values.push(reader.int64().toString());
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return Int64ValuesWithVersion;
            })();

            proto.Int64Values = (function() {

                /**
                 * Properties of an Int64Values.
                 * @memberof im.turms.proto
                 * @interface IInt64Values
                 * @property {Array.<string>|null} [values] Int64Values values
                 */

                /**
                 * Constructs a new Int64Values.
                 * @memberof im.turms.proto
                 * @classdesc Represents an Int64Values.
                 * @implements IInt64Values
                 * @constructor
                 * @param {im.turms.proto.IInt64Values=} [properties] Properties to set
                 */
                function Int64Values(properties) {
                    this.values = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * Int64Values values.
                 * @member {Array.<string>} values
                 * @memberof im.turms.proto.Int64Values
                 * @instance
                 */
                Int64Values.prototype.values = $util.emptyArray;

                /**
                 * Encodes the specified Int64Values message. Does not implicitly {@link im.turms.proto.Int64Values.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.Int64Values
                 * @static
                 * @param {im.turms.proto.IInt64Values} message Int64Values message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                Int64Values.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.values != null && message.values.length) {
                        writer.uint32(/* id 1, wireType 2 =*/10).fork();
                        for (var i = 0; i < message.values.length; ++i)
                            writer.int64(message.values[i]);
                        writer.ldelim();
                    }
                    return writer;
                };

                /**
                 * Decodes an Int64Values message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.Int64Values
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.Int64Values} Int64Values
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                Int64Values.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.Int64Values();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.values && message.values.length))
                                message.values = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.values.push(reader.int64().toString());
                            } else
                                message.values.push(reader.int64().toString());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return Int64Values;
            })();

            proto.AudioFile = (function() {

                /**
                 * Properties of an AudioFile.
                 * @memberof im.turms.proto
                 * @interface IAudioFile
                 * @property {im.turms.proto.AudioFile.IDescription|null} [description] AudioFile description
                 * @property {google.protobuf.IBytesValue|null} [data] AudioFile data
                 */

                /**
                 * Constructs a new AudioFile.
                 * @memberof im.turms.proto
                 * @classdesc Represents an AudioFile.
                 * @implements IAudioFile
                 * @constructor
                 * @param {im.turms.proto.IAudioFile=} [properties] Properties to set
                 */
                function AudioFile(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * AudioFile description.
                 * @member {im.turms.proto.AudioFile.IDescription|null|undefined} description
                 * @memberof im.turms.proto.AudioFile
                 * @instance
                 */
                AudioFile.prototype.description = null;

                /**
                 * AudioFile data.
                 * @member {google.protobuf.IBytesValue|null|undefined} data
                 * @memberof im.turms.proto.AudioFile
                 * @instance
                 */
                AudioFile.prototype.data = null;

                /**
                 * Encodes the specified AudioFile message. Does not implicitly {@link im.turms.proto.AudioFile.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.AudioFile
                 * @static
                 * @param {im.turms.proto.IAudioFile} message AudioFile message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                AudioFile.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.description != null && Object.hasOwnProperty.call(message, "description"))
                        $root.im.turms.proto.AudioFile.Description.encode(message.description, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.data != null && Object.hasOwnProperty.call(message, "data"))
                        $root.google.protobuf.BytesValue.encode(message.data, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an AudioFile message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.AudioFile
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.AudioFile} AudioFile
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                AudioFile.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.AudioFile();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.description = $root.im.turms.proto.AudioFile.Description.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.data = $root.google.protobuf.BytesValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                AudioFile.Description = (function() {

                    /**
                     * Properties of a Description.
                     * @memberof im.turms.proto.AudioFile
                     * @interface IDescription
                     * @property {string|null} [url] Description url
                     * @property {google.protobuf.IInt32Value|null} [duration] Description duration
                     * @property {google.protobuf.IInt32Value|null} [size] Description size
                     * @property {google.protobuf.IStringValue|null} [format] Description format
                     */

                    /**
                     * Constructs a new Description.
                     * @memberof im.turms.proto.AudioFile
                     * @classdesc Represents a Description.
                     * @implements IDescription
                     * @constructor
                     * @param {im.turms.proto.AudioFile.IDescription=} [properties] Properties to set
                     */
                    function Description(properties) {
                        if (properties)
                            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                                if (properties[keys[i]] != null)
                                    this[keys[i]] = properties[keys[i]];
                    }

                    /**
                     * Description url.
                     * @member {string} url
                     * @memberof im.turms.proto.AudioFile.Description
                     * @instance
                     */
                    Description.prototype.url = "";

                    /**
                     * Description duration.
                     * @member {google.protobuf.IInt32Value|null|undefined} duration
                     * @memberof im.turms.proto.AudioFile.Description
                     * @instance
                     */
                    Description.prototype.duration = null;

                    /**
                     * Description size.
                     * @member {google.protobuf.IInt32Value|null|undefined} size
                     * @memberof im.turms.proto.AudioFile.Description
                     * @instance
                     */
                    Description.prototype.size = null;

                    /**
                     * Description format.
                     * @member {google.protobuf.IStringValue|null|undefined} format
                     * @memberof im.turms.proto.AudioFile.Description
                     * @instance
                     */
                    Description.prototype.format = null;

                    /**
                     * Encodes the specified Description message. Does not implicitly {@link im.turms.proto.AudioFile.Description.verify|verify} messages.
                     * @function encode
                     * @memberof im.turms.proto.AudioFile.Description
                     * @static
                     * @param {im.turms.proto.AudioFile.IDescription} message Description message or plain object to encode
                     * @param {$protobuf.Writer} [writer] Writer to encode to
                     * @returns {$protobuf.Writer} Writer
                     */
                    Description.encode = function encode(message, writer) {
                        if (!writer)
                            writer = $Writer.create();
                        if (message.url != null && Object.hasOwnProperty.call(message, "url"))
                            writer.uint32(/* id 1, wireType 2 =*/10).string(message.url);
                        if (message.duration != null && Object.hasOwnProperty.call(message, "duration"))
                            $root.google.protobuf.Int32Value.encode(message.duration, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                        if (message.size != null && Object.hasOwnProperty.call(message, "size"))
                            $root.google.protobuf.Int32Value.encode(message.size, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                        if (message.format != null && Object.hasOwnProperty.call(message, "format"))
                            $root.google.protobuf.StringValue.encode(message.format, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                        return writer;
                    };

                    /**
                     * Decodes a Description message from the specified reader or buffer.
                     * @function decode
                     * @memberof im.turms.proto.AudioFile.Description
                     * @static
                     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                     * @param {number} [length] Message length if known beforehand
                     * @returns {im.turms.proto.AudioFile.Description} Description
                     * @throws {Error} If the payload is not a reader or valid buffer
                     * @throws {$protobuf.util.ProtocolError} If required fields are missing
                     */
                    Description.decode = function decode(reader, length) {
                        if (!(reader instanceof $Reader))
                            reader = $Reader.create(reader);
                        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.AudioFile.Description();
                        while (reader.pos < end) {
                            var tag = reader.uint32();
                            switch (tag >>> 3) {
                            case 1:
                                message.url = reader.string();
                                break;
                            case 2:
                                message.duration = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                                break;
                            case 3:
                                message.size = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                                break;
                            case 4:
                                message.format = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                                break;
                            default:
                                reader.skipType(tag & 7);
                                break;
                            }
                        }
                        return message;
                    };

                    return Description;
                })();

                return AudioFile;
            })();

            proto.File = (function() {

                /**
                 * Properties of a File.
                 * @memberof im.turms.proto
                 * @interface IFile
                 * @property {im.turms.proto.File.IDescription|null} [description] File description
                 * @property {google.protobuf.IBytesValue|null} [data] File data
                 */

                /**
                 * Constructs a new File.
                 * @memberof im.turms.proto
                 * @classdesc Represents a File.
                 * @implements IFile
                 * @constructor
                 * @param {im.turms.proto.IFile=} [properties] Properties to set
                 */
                function File(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * File description.
                 * @member {im.turms.proto.File.IDescription|null|undefined} description
                 * @memberof im.turms.proto.File
                 * @instance
                 */
                File.prototype.description = null;

                /**
                 * File data.
                 * @member {google.protobuf.IBytesValue|null|undefined} data
                 * @memberof im.turms.proto.File
                 * @instance
                 */
                File.prototype.data = null;

                /**
                 * Encodes the specified File message. Does not implicitly {@link im.turms.proto.File.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.File
                 * @static
                 * @param {im.turms.proto.IFile} message File message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                File.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.description != null && Object.hasOwnProperty.call(message, "description"))
                        $root.im.turms.proto.File.Description.encode(message.description, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.data != null && Object.hasOwnProperty.call(message, "data"))
                        $root.google.protobuf.BytesValue.encode(message.data, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a File message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.File
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.File} File
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                File.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.File();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.description = $root.im.turms.proto.File.Description.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.data = $root.google.protobuf.BytesValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                File.Description = (function() {

                    /**
                     * Properties of a Description.
                     * @memberof im.turms.proto.File
                     * @interface IDescription
                     * @property {string|null} [url] Description url
                     * @property {google.protobuf.IInt32Value|null} [size] Description size
                     * @property {google.protobuf.IStringValue|null} [format] Description format
                     */

                    /**
                     * Constructs a new Description.
                     * @memberof im.turms.proto.File
                     * @classdesc Represents a Description.
                     * @implements IDescription
                     * @constructor
                     * @param {im.turms.proto.File.IDescription=} [properties] Properties to set
                     */
                    function Description(properties) {
                        if (properties)
                            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                                if (properties[keys[i]] != null)
                                    this[keys[i]] = properties[keys[i]];
                    }

                    /**
                     * Description url.
                     * @member {string} url
                     * @memberof im.turms.proto.File.Description
                     * @instance
                     */
                    Description.prototype.url = "";

                    /**
                     * Description size.
                     * @member {google.protobuf.IInt32Value|null|undefined} size
                     * @memberof im.turms.proto.File.Description
                     * @instance
                     */
                    Description.prototype.size = null;

                    /**
                     * Description format.
                     * @member {google.protobuf.IStringValue|null|undefined} format
                     * @memberof im.turms.proto.File.Description
                     * @instance
                     */
                    Description.prototype.format = null;

                    /**
                     * Encodes the specified Description message. Does not implicitly {@link im.turms.proto.File.Description.verify|verify} messages.
                     * @function encode
                     * @memberof im.turms.proto.File.Description
                     * @static
                     * @param {im.turms.proto.File.IDescription} message Description message or plain object to encode
                     * @param {$protobuf.Writer} [writer] Writer to encode to
                     * @returns {$protobuf.Writer} Writer
                     */
                    Description.encode = function encode(message, writer) {
                        if (!writer)
                            writer = $Writer.create();
                        if (message.url != null && Object.hasOwnProperty.call(message, "url"))
                            writer.uint32(/* id 1, wireType 2 =*/10).string(message.url);
                        if (message.size != null && Object.hasOwnProperty.call(message, "size"))
                            $root.google.protobuf.Int32Value.encode(message.size, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                        if (message.format != null && Object.hasOwnProperty.call(message, "format"))
                            $root.google.protobuf.StringValue.encode(message.format, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                        return writer;
                    };

                    /**
                     * Decodes a Description message from the specified reader or buffer.
                     * @function decode
                     * @memberof im.turms.proto.File.Description
                     * @static
                     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                     * @param {number} [length] Message length if known beforehand
                     * @returns {im.turms.proto.File.Description} Description
                     * @throws {Error} If the payload is not a reader or valid buffer
                     * @throws {$protobuf.util.ProtocolError} If required fields are missing
                     */
                    Description.decode = function decode(reader, length) {
                        if (!(reader instanceof $Reader))
                            reader = $Reader.create(reader);
                        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.File.Description();
                        while (reader.pos < end) {
                            var tag = reader.uint32();
                            switch (tag >>> 3) {
                            case 1:
                                message.url = reader.string();
                                break;
                            case 2:
                                message.size = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                                break;
                            case 3:
                                message.format = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                                break;
                            default:
                                reader.skipType(tag & 7);
                                break;
                            }
                        }
                        return message;
                    };

                    return Description;
                })();

                return File;
            })();

            proto.ImageFile = (function() {

                /**
                 * Properties of an ImageFile.
                 * @memberof im.turms.proto
                 * @interface IImageFile
                 * @property {im.turms.proto.ImageFile.IDescription|null} [description] ImageFile description
                 * @property {google.protobuf.IBytesValue|null} [data] ImageFile data
                 */

                /**
                 * Constructs a new ImageFile.
                 * @memberof im.turms.proto
                 * @classdesc Represents an ImageFile.
                 * @implements IImageFile
                 * @constructor
                 * @param {im.turms.proto.IImageFile=} [properties] Properties to set
                 */
                function ImageFile(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * ImageFile description.
                 * @member {im.turms.proto.ImageFile.IDescription|null|undefined} description
                 * @memberof im.turms.proto.ImageFile
                 * @instance
                 */
                ImageFile.prototype.description = null;

                /**
                 * ImageFile data.
                 * @member {google.protobuf.IBytesValue|null|undefined} data
                 * @memberof im.turms.proto.ImageFile
                 * @instance
                 */
                ImageFile.prototype.data = null;

                /**
                 * Encodes the specified ImageFile message. Does not implicitly {@link im.turms.proto.ImageFile.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.ImageFile
                 * @static
                 * @param {im.turms.proto.IImageFile} message ImageFile message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                ImageFile.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.description != null && Object.hasOwnProperty.call(message, "description"))
                        $root.im.turms.proto.ImageFile.Description.encode(message.description, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.data != null && Object.hasOwnProperty.call(message, "data"))
                        $root.google.protobuf.BytesValue.encode(message.data, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an ImageFile message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.ImageFile
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.ImageFile} ImageFile
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                ImageFile.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.ImageFile();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.description = $root.im.turms.proto.ImageFile.Description.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.data = $root.google.protobuf.BytesValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                ImageFile.Description = (function() {

                    /**
                     * Properties of a Description.
                     * @memberof im.turms.proto.ImageFile
                     * @interface IDescription
                     * @property {string|null} [url] Description url
                     * @property {google.protobuf.IBoolValue|null} [original] Description original
                     * @property {google.protobuf.IInt32Value|null} [imageSize] Description imageSize
                     * @property {google.protobuf.IInt32Value|null} [fileSize] Description fileSize
                     */

                    /**
                     * Constructs a new Description.
                     * @memberof im.turms.proto.ImageFile
                     * @classdesc Represents a Description.
                     * @implements IDescription
                     * @constructor
                     * @param {im.turms.proto.ImageFile.IDescription=} [properties] Properties to set
                     */
                    function Description(properties) {
                        if (properties)
                            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                                if (properties[keys[i]] != null)
                                    this[keys[i]] = properties[keys[i]];
                    }

                    /**
                     * Description url.
                     * @member {string} url
                     * @memberof im.turms.proto.ImageFile.Description
                     * @instance
                     */
                    Description.prototype.url = "";

                    /**
                     * Description original.
                     * @member {google.protobuf.IBoolValue|null|undefined} original
                     * @memberof im.turms.proto.ImageFile.Description
                     * @instance
                     */
                    Description.prototype.original = null;

                    /**
                     * Description imageSize.
                     * @member {google.protobuf.IInt32Value|null|undefined} imageSize
                     * @memberof im.turms.proto.ImageFile.Description
                     * @instance
                     */
                    Description.prototype.imageSize = null;

                    /**
                     * Description fileSize.
                     * @member {google.protobuf.IInt32Value|null|undefined} fileSize
                     * @memberof im.turms.proto.ImageFile.Description
                     * @instance
                     */
                    Description.prototype.fileSize = null;

                    /**
                     * Encodes the specified Description message. Does not implicitly {@link im.turms.proto.ImageFile.Description.verify|verify} messages.
                     * @function encode
                     * @memberof im.turms.proto.ImageFile.Description
                     * @static
                     * @param {im.turms.proto.ImageFile.IDescription} message Description message or plain object to encode
                     * @param {$protobuf.Writer} [writer] Writer to encode to
                     * @returns {$protobuf.Writer} Writer
                     */
                    Description.encode = function encode(message, writer) {
                        if (!writer)
                            writer = $Writer.create();
                        if (message.url != null && Object.hasOwnProperty.call(message, "url"))
                            writer.uint32(/* id 1, wireType 2 =*/10).string(message.url);
                        if (message.original != null && Object.hasOwnProperty.call(message, "original"))
                            $root.google.protobuf.BoolValue.encode(message.original, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                        if (message.imageSize != null && Object.hasOwnProperty.call(message, "imageSize"))
                            $root.google.protobuf.Int32Value.encode(message.imageSize, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                        if (message.fileSize != null && Object.hasOwnProperty.call(message, "fileSize"))
                            $root.google.protobuf.Int32Value.encode(message.fileSize, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                        return writer;
                    };

                    /**
                     * Decodes a Description message from the specified reader or buffer.
                     * @function decode
                     * @memberof im.turms.proto.ImageFile.Description
                     * @static
                     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                     * @param {number} [length] Message length if known beforehand
                     * @returns {im.turms.proto.ImageFile.Description} Description
                     * @throws {Error} If the payload is not a reader or valid buffer
                     * @throws {$protobuf.util.ProtocolError} If required fields are missing
                     */
                    Description.decode = function decode(reader, length) {
                        if (!(reader instanceof $Reader))
                            reader = $Reader.create(reader);
                        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.ImageFile.Description();
                        while (reader.pos < end) {
                            var tag = reader.uint32();
                            switch (tag >>> 3) {
                            case 1:
                                message.url = reader.string();
                                break;
                            case 2:
                                message.original = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                                break;
                            case 3:
                                message.imageSize = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                                break;
                            case 4:
                                message.fileSize = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                                break;
                            default:
                                reader.skipType(tag & 7);
                                break;
                            }
                        }
                        return message;
                    };

                    return Description;
                })();

                return ImageFile;
            })();

            proto.VideoFile = (function() {

                /**
                 * Properties of a VideoFile.
                 * @memberof im.turms.proto
                 * @interface IVideoFile
                 * @property {im.turms.proto.VideoFile.IDescription|null} [description] VideoFile description
                 * @property {google.protobuf.IBytesValue|null} [data] VideoFile data
                 */

                /**
                 * Constructs a new VideoFile.
                 * @memberof im.turms.proto
                 * @classdesc Represents a VideoFile.
                 * @implements IVideoFile
                 * @constructor
                 * @param {im.turms.proto.IVideoFile=} [properties] Properties to set
                 */
                function VideoFile(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * VideoFile description.
                 * @member {im.turms.proto.VideoFile.IDescription|null|undefined} description
                 * @memberof im.turms.proto.VideoFile
                 * @instance
                 */
                VideoFile.prototype.description = null;

                /**
                 * VideoFile data.
                 * @member {google.protobuf.IBytesValue|null|undefined} data
                 * @memberof im.turms.proto.VideoFile
                 * @instance
                 */
                VideoFile.prototype.data = null;

                /**
                 * Encodes the specified VideoFile message. Does not implicitly {@link im.turms.proto.VideoFile.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.VideoFile
                 * @static
                 * @param {im.turms.proto.IVideoFile} message VideoFile message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                VideoFile.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.description != null && Object.hasOwnProperty.call(message, "description"))
                        $root.im.turms.proto.VideoFile.Description.encode(message.description, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.data != null && Object.hasOwnProperty.call(message, "data"))
                        $root.google.protobuf.BytesValue.encode(message.data, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a VideoFile message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.VideoFile
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.VideoFile} VideoFile
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                VideoFile.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.VideoFile();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.description = $root.im.turms.proto.VideoFile.Description.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.data = $root.google.protobuf.BytesValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                VideoFile.Description = (function() {

                    /**
                     * Properties of a Description.
                     * @memberof im.turms.proto.VideoFile
                     * @interface IDescription
                     * @property {string|null} [url] Description url
                     * @property {google.protobuf.IInt32Value|null} [duration] Description duration
                     * @property {google.protobuf.IInt32Value|null} [size] Description size
                     * @property {google.protobuf.IStringValue|null} [format] Description format
                     */

                    /**
                     * Constructs a new Description.
                     * @memberof im.turms.proto.VideoFile
                     * @classdesc Represents a Description.
                     * @implements IDescription
                     * @constructor
                     * @param {im.turms.proto.VideoFile.IDescription=} [properties] Properties to set
                     */
                    function Description(properties) {
                        if (properties)
                            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                                if (properties[keys[i]] != null)
                                    this[keys[i]] = properties[keys[i]];
                    }

                    /**
                     * Description url.
                     * @member {string} url
                     * @memberof im.turms.proto.VideoFile.Description
                     * @instance
                     */
                    Description.prototype.url = "";

                    /**
                     * Description duration.
                     * @member {google.protobuf.IInt32Value|null|undefined} duration
                     * @memberof im.turms.proto.VideoFile.Description
                     * @instance
                     */
                    Description.prototype.duration = null;

                    /**
                     * Description size.
                     * @member {google.protobuf.IInt32Value|null|undefined} size
                     * @memberof im.turms.proto.VideoFile.Description
                     * @instance
                     */
                    Description.prototype.size = null;

                    /**
                     * Description format.
                     * @member {google.protobuf.IStringValue|null|undefined} format
                     * @memberof im.turms.proto.VideoFile.Description
                     * @instance
                     */
                    Description.prototype.format = null;

                    /**
                     * Encodes the specified Description message. Does not implicitly {@link im.turms.proto.VideoFile.Description.verify|verify} messages.
                     * @function encode
                     * @memberof im.turms.proto.VideoFile.Description
                     * @static
                     * @param {im.turms.proto.VideoFile.IDescription} message Description message or plain object to encode
                     * @param {$protobuf.Writer} [writer] Writer to encode to
                     * @returns {$protobuf.Writer} Writer
                     */
                    Description.encode = function encode(message, writer) {
                        if (!writer)
                            writer = $Writer.create();
                        if (message.url != null && Object.hasOwnProperty.call(message, "url"))
                            writer.uint32(/* id 1, wireType 2 =*/10).string(message.url);
                        if (message.duration != null && Object.hasOwnProperty.call(message, "duration"))
                            $root.google.protobuf.Int32Value.encode(message.duration, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                        if (message.size != null && Object.hasOwnProperty.call(message, "size"))
                            $root.google.protobuf.Int32Value.encode(message.size, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                        if (message.format != null && Object.hasOwnProperty.call(message, "format"))
                            $root.google.protobuf.StringValue.encode(message.format, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                        return writer;
                    };

                    /**
                     * Decodes a Description message from the specified reader or buffer.
                     * @function decode
                     * @memberof im.turms.proto.VideoFile.Description
                     * @static
                     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                     * @param {number} [length] Message length if known beforehand
                     * @returns {im.turms.proto.VideoFile.Description} Description
                     * @throws {Error} If the payload is not a reader or valid buffer
                     * @throws {$protobuf.util.ProtocolError} If required fields are missing
                     */
                    Description.decode = function decode(reader, length) {
                        if (!(reader instanceof $Reader))
                            reader = $Reader.create(reader);
                        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.VideoFile.Description();
                        while (reader.pos < end) {
                            var tag = reader.uint32();
                            switch (tag >>> 3) {
                            case 1:
                                message.url = reader.string();
                                break;
                            case 2:
                                message.duration = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                                break;
                            case 3:
                                message.size = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                                break;
                            case 4:
                                message.format = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                                break;
                            default:
                                reader.skipType(tag & 7);
                                break;
                            }
                        }
                        return message;
                    };

                    return Description;
                })();

                return VideoFile;
            })();

            proto.GroupInvitation = (function() {

                /**
                 * Properties of a GroupInvitation.
                 * @memberof im.turms.proto
                 * @interface IGroupInvitation
                 * @property {google.protobuf.IInt64Value|null} [id] GroupInvitation id
                 * @property {google.protobuf.IInt64Value|null} [creationDate] GroupInvitation creationDate
                 * @property {google.protobuf.IStringValue|null} [content] GroupInvitation content
                 * @property {im.turms.proto.RequestStatus|null} [status] GroupInvitation status
                 * @property {google.protobuf.IInt64Value|null} [expirationDate] GroupInvitation expirationDate
                 * @property {google.protobuf.IInt64Value|null} [groupId] GroupInvitation groupId
                 * @property {google.protobuf.IInt64Value|null} [inviterId] GroupInvitation inviterId
                 * @property {google.protobuf.IInt64Value|null} [inviteeId] GroupInvitation inviteeId
                 */

                /**
                 * Constructs a new GroupInvitation.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupInvitation.
                 * @implements IGroupInvitation
                 * @constructor
                 * @param {im.turms.proto.IGroupInvitation=} [properties] Properties to set
                 */
                function GroupInvitation(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupInvitation id.
                 * @member {google.protobuf.IInt64Value|null|undefined} id
                 * @memberof im.turms.proto.GroupInvitation
                 * @instance
                 */
                GroupInvitation.prototype.id = null;

                /**
                 * GroupInvitation creationDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} creationDate
                 * @memberof im.turms.proto.GroupInvitation
                 * @instance
                 */
                GroupInvitation.prototype.creationDate = null;

                /**
                 * GroupInvitation content.
                 * @member {google.protobuf.IStringValue|null|undefined} content
                 * @memberof im.turms.proto.GroupInvitation
                 * @instance
                 */
                GroupInvitation.prototype.content = null;

                /**
                 * GroupInvitation status.
                 * @member {im.turms.proto.RequestStatus} status
                 * @memberof im.turms.proto.GroupInvitation
                 * @instance
                 */
                GroupInvitation.prototype.status = 0;

                /**
                 * GroupInvitation expirationDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} expirationDate
                 * @memberof im.turms.proto.GroupInvitation
                 * @instance
                 */
                GroupInvitation.prototype.expirationDate = null;

                /**
                 * GroupInvitation groupId.
                 * @member {google.protobuf.IInt64Value|null|undefined} groupId
                 * @memberof im.turms.proto.GroupInvitation
                 * @instance
                 */
                GroupInvitation.prototype.groupId = null;

                /**
                 * GroupInvitation inviterId.
                 * @member {google.protobuf.IInt64Value|null|undefined} inviterId
                 * @memberof im.turms.proto.GroupInvitation
                 * @instance
                 */
                GroupInvitation.prototype.inviterId = null;

                /**
                 * GroupInvitation inviteeId.
                 * @member {google.protobuf.IInt64Value|null|undefined} inviteeId
                 * @memberof im.turms.proto.GroupInvitation
                 * @instance
                 */
                GroupInvitation.prototype.inviteeId = null;

                /**
                 * Encodes the specified GroupInvitation message. Does not implicitly {@link im.turms.proto.GroupInvitation.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupInvitation
                 * @static
                 * @param {im.turms.proto.IGroupInvitation} message GroupInvitation message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupInvitation.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                        $root.google.protobuf.Int64Value.encode(message.id, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.creationDate != null && Object.hasOwnProperty.call(message, "creationDate"))
                        $root.google.protobuf.Int64Value.encode(message.creationDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.content != null && Object.hasOwnProperty.call(message, "content"))
                        $root.google.protobuf.StringValue.encode(message.content, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.status != null && Object.hasOwnProperty.call(message, "status"))
                        writer.uint32(/* id 4, wireType 0 =*/32).int32(message.status);
                    if (message.expirationDate != null && Object.hasOwnProperty.call(message, "expirationDate"))
                        $root.google.protobuf.Int64Value.encode(message.expirationDate, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        $root.google.protobuf.Int64Value.encode(message.groupId, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.inviterId != null && Object.hasOwnProperty.call(message, "inviterId"))
                        $root.google.protobuf.Int64Value.encode(message.inviterId, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    if (message.inviteeId != null && Object.hasOwnProperty.call(message, "inviteeId"))
                        $root.google.protobuf.Int64Value.encode(message.inviteeId, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a GroupInvitation message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupInvitation
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupInvitation} GroupInvitation
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupInvitation.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupInvitation();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.id = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.creationDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.content = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.status = reader.int32();
                            break;
                        case 5:
                            message.expirationDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.groupId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.inviterId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 8:
                            message.inviteeId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupInvitation;
            })();

            proto.GroupInvitationsWithVersion = (function() {

                /**
                 * Properties of a GroupInvitationsWithVersion.
                 * @memberof im.turms.proto
                 * @interface IGroupInvitationsWithVersion
                 * @property {Array.<im.turms.proto.IGroupInvitation>|null} [groupInvitations] GroupInvitationsWithVersion groupInvitations
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] GroupInvitationsWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new GroupInvitationsWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupInvitationsWithVersion.
                 * @implements IGroupInvitationsWithVersion
                 * @constructor
                 * @param {im.turms.proto.IGroupInvitationsWithVersion=} [properties] Properties to set
                 */
                function GroupInvitationsWithVersion(properties) {
                    this.groupInvitations = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupInvitationsWithVersion groupInvitations.
                 * @member {Array.<im.turms.proto.IGroupInvitation>} groupInvitations
                 * @memberof im.turms.proto.GroupInvitationsWithVersion
                 * @instance
                 */
                GroupInvitationsWithVersion.prototype.groupInvitations = $util.emptyArray;

                /**
                 * GroupInvitationsWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.GroupInvitationsWithVersion
                 * @instance
                 */
                GroupInvitationsWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified GroupInvitationsWithVersion message. Does not implicitly {@link im.turms.proto.GroupInvitationsWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupInvitationsWithVersion
                 * @static
                 * @param {im.turms.proto.IGroupInvitationsWithVersion} message GroupInvitationsWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupInvitationsWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupInvitations != null && message.groupInvitations.length)
                        for (var i = 0; i < message.groupInvitations.length; ++i)
                            $root.im.turms.proto.GroupInvitation.encode(message.groupInvitations[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a GroupInvitationsWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupInvitationsWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupInvitationsWithVersion} GroupInvitationsWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupInvitationsWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupInvitationsWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.groupInvitations && message.groupInvitations.length))
                                message.groupInvitations = [];
                            message.groupInvitations.push($root.im.turms.proto.GroupInvitation.decode(reader, reader.uint32()));
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupInvitationsWithVersion;
            })();

            proto.GroupJoinQuestion = (function() {

                /**
                 * Properties of a GroupJoinQuestion.
                 * @memberof im.turms.proto
                 * @interface IGroupJoinQuestion
                 * @property {google.protobuf.IInt64Value|null} [id] GroupJoinQuestion id
                 * @property {google.protobuf.IInt64Value|null} [groupId] GroupJoinQuestion groupId
                 * @property {google.protobuf.IStringValue|null} [question] GroupJoinQuestion question
                 * @property {Array.<google.protobuf.IStringValue>|null} [answers] GroupJoinQuestion answers
                 * @property {google.protobuf.IInt32Value|null} [score] GroupJoinQuestion score
                 */

                /**
                 * Constructs a new GroupJoinQuestion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupJoinQuestion.
                 * @implements IGroupJoinQuestion
                 * @constructor
                 * @param {im.turms.proto.IGroupJoinQuestion=} [properties] Properties to set
                 */
                function GroupJoinQuestion(properties) {
                    this.answers = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupJoinQuestion id.
                 * @member {google.protobuf.IInt64Value|null|undefined} id
                 * @memberof im.turms.proto.GroupJoinQuestion
                 * @instance
                 */
                GroupJoinQuestion.prototype.id = null;

                /**
                 * GroupJoinQuestion groupId.
                 * @member {google.protobuf.IInt64Value|null|undefined} groupId
                 * @memberof im.turms.proto.GroupJoinQuestion
                 * @instance
                 */
                GroupJoinQuestion.prototype.groupId = null;

                /**
                 * GroupJoinQuestion question.
                 * @member {google.protobuf.IStringValue|null|undefined} question
                 * @memberof im.turms.proto.GroupJoinQuestion
                 * @instance
                 */
                GroupJoinQuestion.prototype.question = null;

                /**
                 * GroupJoinQuestion answers.
                 * @member {Array.<google.protobuf.IStringValue>} answers
                 * @memberof im.turms.proto.GroupJoinQuestion
                 * @instance
                 */
                GroupJoinQuestion.prototype.answers = $util.emptyArray;

                /**
                 * GroupJoinQuestion score.
                 * @member {google.protobuf.IInt32Value|null|undefined} score
                 * @memberof im.turms.proto.GroupJoinQuestion
                 * @instance
                 */
                GroupJoinQuestion.prototype.score = null;

                /**
                 * Encodes the specified GroupJoinQuestion message. Does not implicitly {@link im.turms.proto.GroupJoinQuestion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupJoinQuestion
                 * @static
                 * @param {im.turms.proto.IGroupJoinQuestion} message GroupJoinQuestion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupJoinQuestion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                        $root.google.protobuf.Int64Value.encode(message.id, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        $root.google.protobuf.Int64Value.encode(message.groupId, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.question != null && Object.hasOwnProperty.call(message, "question"))
                        $root.google.protobuf.StringValue.encode(message.question, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.answers != null && message.answers.length)
                        for (var i = 0; i < message.answers.length; ++i)
                            $root.google.protobuf.StringValue.encode(message.answers[i], writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.score != null && Object.hasOwnProperty.call(message, "score"))
                        $root.google.protobuf.Int32Value.encode(message.score, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a GroupJoinQuestion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupJoinQuestion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupJoinQuestion} GroupJoinQuestion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupJoinQuestion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupJoinQuestion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.id = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.groupId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.question = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            if (!(message.answers && message.answers.length))
                                message.answers = [];
                            message.answers.push($root.google.protobuf.StringValue.decode(reader, reader.uint32()));
                            break;
                        case 5:
                            message.score = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupJoinQuestion;
            })();

            proto.GroupJoinQuestionsAnswerResult = (function() {

                /**
                 * Properties of a GroupJoinQuestionsAnswerResult.
                 * @memberof im.turms.proto
                 * @interface IGroupJoinQuestionsAnswerResult
                 * @property {number|null} [score] GroupJoinQuestionsAnswerResult score
                 * @property {Array.<string>|null} [questionsIds] GroupJoinQuestionsAnswerResult questionsIds
                 * @property {boolean|null} [joined] GroupJoinQuestionsAnswerResult joined
                 */

                /**
                 * Constructs a new GroupJoinQuestionsAnswerResult.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupJoinQuestionsAnswerResult.
                 * @implements IGroupJoinQuestionsAnswerResult
                 * @constructor
                 * @param {im.turms.proto.IGroupJoinQuestionsAnswerResult=} [properties] Properties to set
                 */
                function GroupJoinQuestionsAnswerResult(properties) {
                    this.questionsIds = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupJoinQuestionsAnswerResult score.
                 * @member {number} score
                 * @memberof im.turms.proto.GroupJoinQuestionsAnswerResult
                 * @instance
                 */
                GroupJoinQuestionsAnswerResult.prototype.score = 0;

                /**
                 * GroupJoinQuestionsAnswerResult questionsIds.
                 * @member {Array.<string>} questionsIds
                 * @memberof im.turms.proto.GroupJoinQuestionsAnswerResult
                 * @instance
                 */
                GroupJoinQuestionsAnswerResult.prototype.questionsIds = $util.emptyArray;

                /**
                 * GroupJoinQuestionsAnswerResult joined.
                 * @member {boolean} joined
                 * @memberof im.turms.proto.GroupJoinQuestionsAnswerResult
                 * @instance
                 */
                GroupJoinQuestionsAnswerResult.prototype.joined = false;

                /**
                 * Encodes the specified GroupJoinQuestionsAnswerResult message. Does not implicitly {@link im.turms.proto.GroupJoinQuestionsAnswerResult.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupJoinQuestionsAnswerResult
                 * @static
                 * @param {im.turms.proto.IGroupJoinQuestionsAnswerResult} message GroupJoinQuestionsAnswerResult message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupJoinQuestionsAnswerResult.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.score != null && Object.hasOwnProperty.call(message, "score"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int32(message.score);
                    if (message.questionsIds != null && message.questionsIds.length) {
                        writer.uint32(/* id 2, wireType 2 =*/18).fork();
                        for (var i = 0; i < message.questionsIds.length; ++i)
                            writer.int64(message.questionsIds[i]);
                        writer.ldelim();
                    }
                    if (message.joined != null && Object.hasOwnProperty.call(message, "joined"))
                        writer.uint32(/* id 3, wireType 0 =*/24).bool(message.joined);
                    return writer;
                };

                /**
                 * Decodes a GroupJoinQuestionsAnswerResult message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupJoinQuestionsAnswerResult
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupJoinQuestionsAnswerResult} GroupJoinQuestionsAnswerResult
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupJoinQuestionsAnswerResult.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupJoinQuestionsAnswerResult();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.score = reader.int32();
                            break;
                        case 2:
                            if (!(message.questionsIds && message.questionsIds.length))
                                message.questionsIds = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.questionsIds.push(reader.int64().toString());
                            } else
                                message.questionsIds.push(reader.int64().toString());
                            break;
                        case 3:
                            message.joined = reader.bool();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupJoinQuestionsAnswerResult;
            })();

            proto.GroupJoinQuestionsWithVersion = (function() {

                /**
                 * Properties of a GroupJoinQuestionsWithVersion.
                 * @memberof im.turms.proto
                 * @interface IGroupJoinQuestionsWithVersion
                 * @property {Array.<im.turms.proto.IGroupJoinQuestion>|null} [groupJoinQuestions] GroupJoinQuestionsWithVersion groupJoinQuestions
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] GroupJoinQuestionsWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new GroupJoinQuestionsWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupJoinQuestionsWithVersion.
                 * @implements IGroupJoinQuestionsWithVersion
                 * @constructor
                 * @param {im.turms.proto.IGroupJoinQuestionsWithVersion=} [properties] Properties to set
                 */
                function GroupJoinQuestionsWithVersion(properties) {
                    this.groupJoinQuestions = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupJoinQuestionsWithVersion groupJoinQuestions.
                 * @member {Array.<im.turms.proto.IGroupJoinQuestion>} groupJoinQuestions
                 * @memberof im.turms.proto.GroupJoinQuestionsWithVersion
                 * @instance
                 */
                GroupJoinQuestionsWithVersion.prototype.groupJoinQuestions = $util.emptyArray;

                /**
                 * GroupJoinQuestionsWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.GroupJoinQuestionsWithVersion
                 * @instance
                 */
                GroupJoinQuestionsWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified GroupJoinQuestionsWithVersion message. Does not implicitly {@link im.turms.proto.GroupJoinQuestionsWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupJoinQuestionsWithVersion
                 * @static
                 * @param {im.turms.proto.IGroupJoinQuestionsWithVersion} message GroupJoinQuestionsWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupJoinQuestionsWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupJoinQuestions != null && message.groupJoinQuestions.length)
                        for (var i = 0; i < message.groupJoinQuestions.length; ++i)
                            $root.im.turms.proto.GroupJoinQuestion.encode(message.groupJoinQuestions[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a GroupJoinQuestionsWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupJoinQuestionsWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupJoinQuestionsWithVersion} GroupJoinQuestionsWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupJoinQuestionsWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupJoinQuestionsWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.groupJoinQuestions && message.groupJoinQuestions.length))
                                message.groupJoinQuestions = [];
                            message.groupJoinQuestions.push($root.im.turms.proto.GroupJoinQuestion.decode(reader, reader.uint32()));
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupJoinQuestionsWithVersion;
            })();

            proto.GroupJoinRequest = (function() {

                /**
                 * Properties of a GroupJoinRequest.
                 * @memberof im.turms.proto
                 * @interface IGroupJoinRequest
                 * @property {google.protobuf.IInt64Value|null} [id] GroupJoinRequest id
                 * @property {google.protobuf.IInt64Value|null} [creationDate] GroupJoinRequest creationDate
                 * @property {google.protobuf.IStringValue|null} [content] GroupJoinRequest content
                 * @property {im.turms.proto.RequestStatus|null} [status] GroupJoinRequest status
                 * @property {google.protobuf.IInt64Value|null} [expirationDate] GroupJoinRequest expirationDate
                 * @property {google.protobuf.IInt64Value|null} [groupId] GroupJoinRequest groupId
                 * @property {google.protobuf.IInt64Value|null} [requesterId] GroupJoinRequest requesterId
                 * @property {google.protobuf.IInt64Value|null} [responderId] GroupJoinRequest responderId
                 */

                /**
                 * Constructs a new GroupJoinRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupJoinRequest.
                 * @implements IGroupJoinRequest
                 * @constructor
                 * @param {im.turms.proto.IGroupJoinRequest=} [properties] Properties to set
                 */
                function GroupJoinRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupJoinRequest id.
                 * @member {google.protobuf.IInt64Value|null|undefined} id
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @instance
                 */
                GroupJoinRequest.prototype.id = null;

                /**
                 * GroupJoinRequest creationDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} creationDate
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @instance
                 */
                GroupJoinRequest.prototype.creationDate = null;

                /**
                 * GroupJoinRequest content.
                 * @member {google.protobuf.IStringValue|null|undefined} content
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @instance
                 */
                GroupJoinRequest.prototype.content = null;

                /**
                 * GroupJoinRequest status.
                 * @member {im.turms.proto.RequestStatus} status
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @instance
                 */
                GroupJoinRequest.prototype.status = 0;

                /**
                 * GroupJoinRequest expirationDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} expirationDate
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @instance
                 */
                GroupJoinRequest.prototype.expirationDate = null;

                /**
                 * GroupJoinRequest groupId.
                 * @member {google.protobuf.IInt64Value|null|undefined} groupId
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @instance
                 */
                GroupJoinRequest.prototype.groupId = null;

                /**
                 * GroupJoinRequest requesterId.
                 * @member {google.protobuf.IInt64Value|null|undefined} requesterId
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @instance
                 */
                GroupJoinRequest.prototype.requesterId = null;

                /**
                 * GroupJoinRequest responderId.
                 * @member {google.protobuf.IInt64Value|null|undefined} responderId
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @instance
                 */
                GroupJoinRequest.prototype.responderId = null;

                /**
                 * Encodes the specified GroupJoinRequest message. Does not implicitly {@link im.turms.proto.GroupJoinRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @static
                 * @param {im.turms.proto.IGroupJoinRequest} message GroupJoinRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupJoinRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                        $root.google.protobuf.Int64Value.encode(message.id, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.creationDate != null && Object.hasOwnProperty.call(message, "creationDate"))
                        $root.google.protobuf.Int64Value.encode(message.creationDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.content != null && Object.hasOwnProperty.call(message, "content"))
                        $root.google.protobuf.StringValue.encode(message.content, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.status != null && Object.hasOwnProperty.call(message, "status"))
                        writer.uint32(/* id 4, wireType 0 =*/32).int32(message.status);
                    if (message.expirationDate != null && Object.hasOwnProperty.call(message, "expirationDate"))
                        $root.google.protobuf.Int64Value.encode(message.expirationDate, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        $root.google.protobuf.Int64Value.encode(message.groupId, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.requesterId != null && Object.hasOwnProperty.call(message, "requesterId"))
                        $root.google.protobuf.Int64Value.encode(message.requesterId, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    if (message.responderId != null && Object.hasOwnProperty.call(message, "responderId"))
                        $root.google.protobuf.Int64Value.encode(message.responderId, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a GroupJoinRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupJoinRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupJoinRequest} GroupJoinRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupJoinRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupJoinRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.id = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.creationDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.content = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.status = reader.int32();
                            break;
                        case 5:
                            message.expirationDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.groupId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.requesterId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 8:
                            message.responderId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupJoinRequest;
            })();

            proto.GroupJoinRequestsWithVersion = (function() {

                /**
                 * Properties of a GroupJoinRequestsWithVersion.
                 * @memberof im.turms.proto
                 * @interface IGroupJoinRequestsWithVersion
                 * @property {Array.<im.turms.proto.IGroupJoinRequest>|null} [groupJoinRequests] GroupJoinRequestsWithVersion groupJoinRequests
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] GroupJoinRequestsWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new GroupJoinRequestsWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupJoinRequestsWithVersion.
                 * @implements IGroupJoinRequestsWithVersion
                 * @constructor
                 * @param {im.turms.proto.IGroupJoinRequestsWithVersion=} [properties] Properties to set
                 */
                function GroupJoinRequestsWithVersion(properties) {
                    this.groupJoinRequests = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupJoinRequestsWithVersion groupJoinRequests.
                 * @member {Array.<im.turms.proto.IGroupJoinRequest>} groupJoinRequests
                 * @memberof im.turms.proto.GroupJoinRequestsWithVersion
                 * @instance
                 */
                GroupJoinRequestsWithVersion.prototype.groupJoinRequests = $util.emptyArray;

                /**
                 * GroupJoinRequestsWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.GroupJoinRequestsWithVersion
                 * @instance
                 */
                GroupJoinRequestsWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified GroupJoinRequestsWithVersion message. Does not implicitly {@link im.turms.proto.GroupJoinRequestsWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupJoinRequestsWithVersion
                 * @static
                 * @param {im.turms.proto.IGroupJoinRequestsWithVersion} message GroupJoinRequestsWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupJoinRequestsWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupJoinRequests != null && message.groupJoinRequests.length)
                        for (var i = 0; i < message.groupJoinRequests.length; ++i)
                            $root.im.turms.proto.GroupJoinRequest.encode(message.groupJoinRequests[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a GroupJoinRequestsWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupJoinRequestsWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupJoinRequestsWithVersion} GroupJoinRequestsWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupJoinRequestsWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupJoinRequestsWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.groupJoinRequests && message.groupJoinRequests.length))
                                message.groupJoinRequests = [];
                            message.groupJoinRequests.push($root.im.turms.proto.GroupJoinRequest.decode(reader, reader.uint32()));
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupJoinRequestsWithVersion;
            })();

            proto.GroupMember = (function() {

                /**
                 * Properties of a GroupMember.
                 * @memberof im.turms.proto
                 * @interface IGroupMember
                 * @property {google.protobuf.IInt64Value|null} [groupId] GroupMember groupId
                 * @property {google.protobuf.IInt64Value|null} [userId] GroupMember userId
                 * @property {google.protobuf.IStringValue|null} [name] GroupMember name
                 * @property {im.turms.proto.GroupMemberRole|null} [role] GroupMember role
                 * @property {google.protobuf.IInt64Value|null} [joinDate] GroupMember joinDate
                 * @property {google.protobuf.IInt64Value|null} [muteEndDate] GroupMember muteEndDate
                 * @property {im.turms.proto.UserStatus|null} [userStatus] GroupMember userStatus
                 * @property {Array.<im.turms.proto.DeviceType>|null} [usingDeviceTypes] GroupMember usingDeviceTypes
                 */

                /**
                 * Constructs a new GroupMember.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupMember.
                 * @implements IGroupMember
                 * @constructor
                 * @param {im.turms.proto.IGroupMember=} [properties] Properties to set
                 */
                function GroupMember(properties) {
                    this.usingDeviceTypes = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupMember groupId.
                 * @member {google.protobuf.IInt64Value|null|undefined} groupId
                 * @memberof im.turms.proto.GroupMember
                 * @instance
                 */
                GroupMember.prototype.groupId = null;

                /**
                 * GroupMember userId.
                 * @member {google.protobuf.IInt64Value|null|undefined} userId
                 * @memberof im.turms.proto.GroupMember
                 * @instance
                 */
                GroupMember.prototype.userId = null;

                /**
                 * GroupMember name.
                 * @member {google.protobuf.IStringValue|null|undefined} name
                 * @memberof im.turms.proto.GroupMember
                 * @instance
                 */
                GroupMember.prototype.name = null;

                /**
                 * GroupMember role.
                 * @member {im.turms.proto.GroupMemberRole} role
                 * @memberof im.turms.proto.GroupMember
                 * @instance
                 */
                GroupMember.prototype.role = 0;

                /**
                 * GroupMember joinDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} joinDate
                 * @memberof im.turms.proto.GroupMember
                 * @instance
                 */
                GroupMember.prototype.joinDate = null;

                /**
                 * GroupMember muteEndDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} muteEndDate
                 * @memberof im.turms.proto.GroupMember
                 * @instance
                 */
                GroupMember.prototype.muteEndDate = null;

                /**
                 * GroupMember userStatus.
                 * @member {im.turms.proto.UserStatus} userStatus
                 * @memberof im.turms.proto.GroupMember
                 * @instance
                 */
                GroupMember.prototype.userStatus = 0;

                /**
                 * GroupMember usingDeviceTypes.
                 * @member {Array.<im.turms.proto.DeviceType>} usingDeviceTypes
                 * @memberof im.turms.proto.GroupMember
                 * @instance
                 */
                GroupMember.prototype.usingDeviceTypes = $util.emptyArray;

                /**
                 * Encodes the specified GroupMember message. Does not implicitly {@link im.turms.proto.GroupMember.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupMember
                 * @static
                 * @param {im.turms.proto.IGroupMember} message GroupMember message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupMember.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        $root.google.protobuf.Int64Value.encode(message.groupId, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.userId != null && Object.hasOwnProperty.call(message, "userId"))
                        $root.google.protobuf.Int64Value.encode(message.userId, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        $root.google.protobuf.StringValue.encode(message.name, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.role != null && Object.hasOwnProperty.call(message, "role"))
                        writer.uint32(/* id 4, wireType 0 =*/32).int32(message.role);
                    if (message.joinDate != null && Object.hasOwnProperty.call(message, "joinDate"))
                        $root.google.protobuf.Int64Value.encode(message.joinDate, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.muteEndDate != null && Object.hasOwnProperty.call(message, "muteEndDate"))
                        $root.google.protobuf.Int64Value.encode(message.muteEndDate, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.userStatus != null && Object.hasOwnProperty.call(message, "userStatus"))
                        writer.uint32(/* id 7, wireType 0 =*/56).int32(message.userStatus);
                    if (message.usingDeviceTypes != null && message.usingDeviceTypes.length) {
                        writer.uint32(/* id 8, wireType 2 =*/66).fork();
                        for (var i = 0; i < message.usingDeviceTypes.length; ++i)
                            writer.int32(message.usingDeviceTypes[i]);
                        writer.ldelim();
                    }
                    return writer;
                };

                /**
                 * Decodes a GroupMember message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupMember
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupMember} GroupMember
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupMember.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupMember();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.userId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.name = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.role = reader.int32();
                            break;
                        case 5:
                            message.joinDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.muteEndDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.userStatus = reader.int32();
                            break;
                        case 8:
                            if (!(message.usingDeviceTypes && message.usingDeviceTypes.length))
                                message.usingDeviceTypes = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.usingDeviceTypes.push(reader.int32());
                            } else
                                message.usingDeviceTypes.push(reader.int32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupMember;
            })();

            proto.GroupMembersWithVersion = (function() {

                /**
                 * Properties of a GroupMembersWithVersion.
                 * @memberof im.turms.proto
                 * @interface IGroupMembersWithVersion
                 * @property {Array.<im.turms.proto.IGroupMember>|null} [groupMembers] GroupMembersWithVersion groupMembers
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] GroupMembersWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new GroupMembersWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupMembersWithVersion.
                 * @implements IGroupMembersWithVersion
                 * @constructor
                 * @param {im.turms.proto.IGroupMembersWithVersion=} [properties] Properties to set
                 */
                function GroupMembersWithVersion(properties) {
                    this.groupMembers = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupMembersWithVersion groupMembers.
                 * @member {Array.<im.turms.proto.IGroupMember>} groupMembers
                 * @memberof im.turms.proto.GroupMembersWithVersion
                 * @instance
                 */
                GroupMembersWithVersion.prototype.groupMembers = $util.emptyArray;

                /**
                 * GroupMembersWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.GroupMembersWithVersion
                 * @instance
                 */
                GroupMembersWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified GroupMembersWithVersion message. Does not implicitly {@link im.turms.proto.GroupMembersWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupMembersWithVersion
                 * @static
                 * @param {im.turms.proto.IGroupMembersWithVersion} message GroupMembersWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupMembersWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupMembers != null && message.groupMembers.length)
                        for (var i = 0; i < message.groupMembers.length; ++i)
                            $root.im.turms.proto.GroupMember.encode(message.groupMembers[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a GroupMembersWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupMembersWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupMembersWithVersion} GroupMembersWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupMembersWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupMembersWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.groupMembers && message.groupMembers.length))
                                message.groupMembers = [];
                            message.groupMembers.push($root.im.turms.proto.GroupMember.decode(reader, reader.uint32()));
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupMembersWithVersion;
            })();

            proto.Group = (function() {

                /**
                 * Properties of a Group.
                 * @memberof im.turms.proto
                 * @interface IGroup
                 * @property {google.protobuf.IInt64Value|null} [id] Group id
                 * @property {google.protobuf.IInt64Value|null} [typeId] Group typeId
                 * @property {google.protobuf.IInt64Value|null} [creatorId] Group creatorId
                 * @property {google.protobuf.IInt64Value|null} [ownerId] Group ownerId
                 * @property {google.protobuf.IStringValue|null} [name] Group name
                 * @property {google.protobuf.IStringValue|null} [intro] Group intro
                 * @property {google.protobuf.IStringValue|null} [announcement] Group announcement
                 * @property {google.protobuf.IStringValue|null} [profilePictureUrl] Group profilePictureUrl
                 * @property {google.protobuf.IInt64Value|null} [creationDate] Group creationDate
                 * @property {google.protobuf.IInt64Value|null} [deletionDate] Group deletionDate
                 * @property {google.protobuf.IInt64Value|null} [muteEndDate] Group muteEndDate
                 * @property {google.protobuf.IBoolValue|null} [active] Group active
                 */

                /**
                 * Constructs a new Group.
                 * @memberof im.turms.proto
                 * @classdesc Represents a Group.
                 * @implements IGroup
                 * @constructor
                 * @param {im.turms.proto.IGroup=} [properties] Properties to set
                 */
                function Group(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * Group id.
                 * @member {google.protobuf.IInt64Value|null|undefined} id
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.id = null;

                /**
                 * Group typeId.
                 * @member {google.protobuf.IInt64Value|null|undefined} typeId
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.typeId = null;

                /**
                 * Group creatorId.
                 * @member {google.protobuf.IInt64Value|null|undefined} creatorId
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.creatorId = null;

                /**
                 * Group ownerId.
                 * @member {google.protobuf.IInt64Value|null|undefined} ownerId
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.ownerId = null;

                /**
                 * Group name.
                 * @member {google.protobuf.IStringValue|null|undefined} name
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.name = null;

                /**
                 * Group intro.
                 * @member {google.protobuf.IStringValue|null|undefined} intro
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.intro = null;

                /**
                 * Group announcement.
                 * @member {google.protobuf.IStringValue|null|undefined} announcement
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.announcement = null;

                /**
                 * Group profilePictureUrl.
                 * @member {google.protobuf.IStringValue|null|undefined} profilePictureUrl
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.profilePictureUrl = null;

                /**
                 * Group creationDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} creationDate
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.creationDate = null;

                /**
                 * Group deletionDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} deletionDate
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.deletionDate = null;

                /**
                 * Group muteEndDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} muteEndDate
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.muteEndDate = null;

                /**
                 * Group active.
                 * @member {google.protobuf.IBoolValue|null|undefined} active
                 * @memberof im.turms.proto.Group
                 * @instance
                 */
                Group.prototype.active = null;

                /**
                 * Encodes the specified Group message. Does not implicitly {@link im.turms.proto.Group.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.Group
                 * @static
                 * @param {im.turms.proto.IGroup} message Group message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                Group.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                        $root.google.protobuf.Int64Value.encode(message.id, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.typeId != null && Object.hasOwnProperty.call(message, "typeId"))
                        $root.google.protobuf.Int64Value.encode(message.typeId, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.creatorId != null && Object.hasOwnProperty.call(message, "creatorId"))
                        $root.google.protobuf.Int64Value.encode(message.creatorId, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.ownerId != null && Object.hasOwnProperty.call(message, "ownerId"))
                        $root.google.protobuf.Int64Value.encode(message.ownerId, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        $root.google.protobuf.StringValue.encode(message.name, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.intro != null && Object.hasOwnProperty.call(message, "intro"))
                        $root.google.protobuf.StringValue.encode(message.intro, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.announcement != null && Object.hasOwnProperty.call(message, "announcement"))
                        $root.google.protobuf.StringValue.encode(message.announcement, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    if (message.profilePictureUrl != null && Object.hasOwnProperty.call(message, "profilePictureUrl"))
                        $root.google.protobuf.StringValue.encode(message.profilePictureUrl, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                    if (message.creationDate != null && Object.hasOwnProperty.call(message, "creationDate"))
                        $root.google.protobuf.Int64Value.encode(message.creationDate, writer.uint32(/* id 9, wireType 2 =*/74).fork()).ldelim();
                    if (message.deletionDate != null && Object.hasOwnProperty.call(message, "deletionDate"))
                        $root.google.protobuf.Int64Value.encode(message.deletionDate, writer.uint32(/* id 10, wireType 2 =*/82).fork()).ldelim();
                    if (message.muteEndDate != null && Object.hasOwnProperty.call(message, "muteEndDate"))
                        $root.google.protobuf.Int64Value.encode(message.muteEndDate, writer.uint32(/* id 11, wireType 2 =*/90).fork()).ldelim();
                    if (message.active != null && Object.hasOwnProperty.call(message, "active"))
                        $root.google.protobuf.BoolValue.encode(message.active, writer.uint32(/* id 12, wireType 2 =*/98).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a Group message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.Group
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.Group} Group
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                Group.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.Group();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.id = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.typeId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.creatorId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.ownerId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.name = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.intro = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.announcement = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 8:
                            message.profilePictureUrl = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 9:
                            message.creationDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 10:
                            message.deletionDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 11:
                            message.muteEndDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 12:
                            message.active = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return Group;
            })();

            proto.GroupsWithVersion = (function() {

                /**
                 * Properties of a GroupsWithVersion.
                 * @memberof im.turms.proto
                 * @interface IGroupsWithVersion
                 * @property {Array.<im.turms.proto.IGroup>|null} [groups] GroupsWithVersion groups
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] GroupsWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new GroupsWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a GroupsWithVersion.
                 * @implements IGroupsWithVersion
                 * @constructor
                 * @param {im.turms.proto.IGroupsWithVersion=} [properties] Properties to set
                 */
                function GroupsWithVersion(properties) {
                    this.groups = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * GroupsWithVersion groups.
                 * @member {Array.<im.turms.proto.IGroup>} groups
                 * @memberof im.turms.proto.GroupsWithVersion
                 * @instance
                 */
                GroupsWithVersion.prototype.groups = $util.emptyArray;

                /**
                 * GroupsWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.GroupsWithVersion
                 * @instance
                 */
                GroupsWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified GroupsWithVersion message. Does not implicitly {@link im.turms.proto.GroupsWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.GroupsWithVersion
                 * @static
                 * @param {im.turms.proto.IGroupsWithVersion} message GroupsWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                GroupsWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groups != null && message.groups.length)
                        for (var i = 0; i < message.groups.length; ++i)
                            $root.im.turms.proto.Group.encode(message.groups[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a GroupsWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.GroupsWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.GroupsWithVersion} GroupsWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                GroupsWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.GroupsWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.groups && message.groups.length))
                                message.groups = [];
                            message.groups.push($root.im.turms.proto.Group.decode(reader, reader.uint32()));
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return GroupsWithVersion;
            })();

            proto.MessageStatus = (function() {

                /**
                 * Properties of a MessageStatus.
                 * @memberof im.turms.proto
                 * @interface IMessageStatus
                 * @property {google.protobuf.IInt64Value|null} [messageId] MessageStatus messageId
                 * @property {google.protobuf.IInt64Value|null} [toUserId] MessageStatus toUserId
                 * @property {im.turms.proto.MessageDeliveryStatus|null} [deliveryStatus] MessageStatus deliveryStatus
                 * @property {google.protobuf.IInt64Value|null} [receptionDate] MessageStatus receptionDate
                 * @property {google.protobuf.IInt64Value|null} [readDate] MessageStatus readDate
                 * @property {google.protobuf.IInt64Value|null} [recallDate] MessageStatus recallDate
                 */

                /**
                 * Constructs a new MessageStatus.
                 * @memberof im.turms.proto
                 * @classdesc Represents a MessageStatus.
                 * @implements IMessageStatus
                 * @constructor
                 * @param {im.turms.proto.IMessageStatus=} [properties] Properties to set
                 */
                function MessageStatus(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * MessageStatus messageId.
                 * @member {google.protobuf.IInt64Value|null|undefined} messageId
                 * @memberof im.turms.proto.MessageStatus
                 * @instance
                 */
                MessageStatus.prototype.messageId = null;

                /**
                 * MessageStatus toUserId.
                 * @member {google.protobuf.IInt64Value|null|undefined} toUserId
                 * @memberof im.turms.proto.MessageStatus
                 * @instance
                 */
                MessageStatus.prototype.toUserId = null;

                /**
                 * MessageStatus deliveryStatus.
                 * @member {im.turms.proto.MessageDeliveryStatus} deliveryStatus
                 * @memberof im.turms.proto.MessageStatus
                 * @instance
                 */
                MessageStatus.prototype.deliveryStatus = 0;

                /**
                 * MessageStatus receptionDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} receptionDate
                 * @memberof im.turms.proto.MessageStatus
                 * @instance
                 */
                MessageStatus.prototype.receptionDate = null;

                /**
                 * MessageStatus readDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} readDate
                 * @memberof im.turms.proto.MessageStatus
                 * @instance
                 */
                MessageStatus.prototype.readDate = null;

                /**
                 * MessageStatus recallDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} recallDate
                 * @memberof im.turms.proto.MessageStatus
                 * @instance
                 */
                MessageStatus.prototype.recallDate = null;

                /**
                 * Encodes the specified MessageStatus message. Does not implicitly {@link im.turms.proto.MessageStatus.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.MessageStatus
                 * @static
                 * @param {im.turms.proto.IMessageStatus} message MessageStatus message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                MessageStatus.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.messageId != null && Object.hasOwnProperty.call(message, "messageId"))
                        $root.google.protobuf.Int64Value.encode(message.messageId, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.toUserId != null && Object.hasOwnProperty.call(message, "toUserId"))
                        $root.google.protobuf.Int64Value.encode(message.toUserId, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.deliveryStatus != null && Object.hasOwnProperty.call(message, "deliveryStatus"))
                        writer.uint32(/* id 3, wireType 0 =*/24).int32(message.deliveryStatus);
                    if (message.receptionDate != null && Object.hasOwnProperty.call(message, "receptionDate"))
                        $root.google.protobuf.Int64Value.encode(message.receptionDate, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.readDate != null && Object.hasOwnProperty.call(message, "readDate"))
                        $root.google.protobuf.Int64Value.encode(message.readDate, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.recallDate != null && Object.hasOwnProperty.call(message, "recallDate"))
                        $root.google.protobuf.Int64Value.encode(message.recallDate, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a MessageStatus message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.MessageStatus
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.MessageStatus} MessageStatus
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                MessageStatus.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.MessageStatus();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.messageId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.toUserId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.deliveryStatus = reader.int32();
                            break;
                        case 4:
                            message.receptionDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.readDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.recallDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return MessageStatus;
            })();

            proto.MessageStatuses = (function() {

                /**
                 * Properties of a MessageStatuses.
                 * @memberof im.turms.proto
                 * @interface IMessageStatuses
                 * @property {Array.<im.turms.proto.IMessageStatus>|null} [messageStatuses] MessageStatuses messageStatuses
                 */

                /**
                 * Constructs a new MessageStatuses.
                 * @memberof im.turms.proto
                 * @classdesc Represents a MessageStatuses.
                 * @implements IMessageStatuses
                 * @constructor
                 * @param {im.turms.proto.IMessageStatuses=} [properties] Properties to set
                 */
                function MessageStatuses(properties) {
                    this.messageStatuses = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * MessageStatuses messageStatuses.
                 * @member {Array.<im.turms.proto.IMessageStatus>} messageStatuses
                 * @memberof im.turms.proto.MessageStatuses
                 * @instance
                 */
                MessageStatuses.prototype.messageStatuses = $util.emptyArray;

                /**
                 * Encodes the specified MessageStatuses message. Does not implicitly {@link im.turms.proto.MessageStatuses.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.MessageStatuses
                 * @static
                 * @param {im.turms.proto.IMessageStatuses} message MessageStatuses message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                MessageStatuses.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.messageStatuses != null && message.messageStatuses.length)
                        for (var i = 0; i < message.messageStatuses.length; ++i)
                            $root.im.turms.proto.MessageStatus.encode(message.messageStatuses[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a MessageStatuses message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.MessageStatuses
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.MessageStatuses} MessageStatuses
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                MessageStatuses.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.MessageStatuses();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.messageStatuses && message.messageStatuses.length))
                                message.messageStatuses = [];
                            message.messageStatuses.push($root.im.turms.proto.MessageStatus.decode(reader, reader.uint32()));
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return MessageStatuses;
            })();

            proto.Message = (function() {

                /**
                 * Properties of a Message.
                 * @memberof im.turms.proto
                 * @interface IMessage
                 * @property {google.protobuf.IInt64Value|null} [id] Message id
                 * @property {google.protobuf.IInt64Value|null} [deliveryDate] Message deliveryDate
                 * @property {google.protobuf.IInt64Value|null} [deletionDate] Message deletionDate
                 * @property {google.protobuf.IStringValue|null} [text] Message text
                 * @property {google.protobuf.IInt64Value|null} [senderId] Message senderId
                 * @property {google.protobuf.IInt64Value|null} [groupId] Message groupId
                 * @property {google.protobuf.IBoolValue|null} [isSystemMessage] Message isSystemMessage
                 * @property {google.protobuf.IInt64Value|null} [recipientId] Message recipientId
                 * @property {Array.<google.protobuf.IBytesValue>|null} [records] Message records
                 */

                /**
                 * Constructs a new Message.
                 * @memberof im.turms.proto
                 * @classdesc Represents a Message.
                 * @implements IMessage
                 * @constructor
                 * @param {im.turms.proto.IMessage=} [properties] Properties to set
                 */
                function Message(properties) {
                    this.records = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * Message id.
                 * @member {google.protobuf.IInt64Value|null|undefined} id
                 * @memberof im.turms.proto.Message
                 * @instance
                 */
                Message.prototype.id = null;

                /**
                 * Message deliveryDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} deliveryDate
                 * @memberof im.turms.proto.Message
                 * @instance
                 */
                Message.prototype.deliveryDate = null;

                /**
                 * Message deletionDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} deletionDate
                 * @memberof im.turms.proto.Message
                 * @instance
                 */
                Message.prototype.deletionDate = null;

                /**
                 * Message text.
                 * @member {google.protobuf.IStringValue|null|undefined} text
                 * @memberof im.turms.proto.Message
                 * @instance
                 */
                Message.prototype.text = null;

                /**
                 * Message senderId.
                 * @member {google.protobuf.IInt64Value|null|undefined} senderId
                 * @memberof im.turms.proto.Message
                 * @instance
                 */
                Message.prototype.senderId = null;

                /**
                 * Message groupId.
                 * @member {google.protobuf.IInt64Value|null|undefined} groupId
                 * @memberof im.turms.proto.Message
                 * @instance
                 */
                Message.prototype.groupId = null;

                /**
                 * Message isSystemMessage.
                 * @member {google.protobuf.IBoolValue|null|undefined} isSystemMessage
                 * @memberof im.turms.proto.Message
                 * @instance
                 */
                Message.prototype.isSystemMessage = null;

                /**
                 * Message recipientId.
                 * @member {google.protobuf.IInt64Value|null|undefined} recipientId
                 * @memberof im.turms.proto.Message
                 * @instance
                 */
                Message.prototype.recipientId = null;

                /**
                 * Message records.
                 * @member {Array.<google.protobuf.IBytesValue>} records
                 * @memberof im.turms.proto.Message
                 * @instance
                 */
                Message.prototype.records = $util.emptyArray;

                /**
                 * Encodes the specified Message message. Does not implicitly {@link im.turms.proto.Message.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.Message
                 * @static
                 * @param {im.turms.proto.IMessage} message Message message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                Message.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                        $root.google.protobuf.Int64Value.encode(message.id, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.deliveryDate != null && Object.hasOwnProperty.call(message, "deliveryDate"))
                        $root.google.protobuf.Int64Value.encode(message.deliveryDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.deletionDate != null && Object.hasOwnProperty.call(message, "deletionDate"))
                        $root.google.protobuf.Int64Value.encode(message.deletionDate, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.text != null && Object.hasOwnProperty.call(message, "text"))
                        $root.google.protobuf.StringValue.encode(message.text, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.senderId != null && Object.hasOwnProperty.call(message, "senderId"))
                        $root.google.protobuf.Int64Value.encode(message.senderId, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        $root.google.protobuf.Int64Value.encode(message.groupId, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.isSystemMessage != null && Object.hasOwnProperty.call(message, "isSystemMessage"))
                        $root.google.protobuf.BoolValue.encode(message.isSystemMessage, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    if (message.recipientId != null && Object.hasOwnProperty.call(message, "recipientId"))
                        $root.google.protobuf.Int64Value.encode(message.recipientId, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                    if (message.records != null && message.records.length)
                        for (var i = 0; i < message.records.length; ++i)
                            $root.google.protobuf.BytesValue.encode(message.records[i], writer.uint32(/* id 9, wireType 2 =*/74).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a Message message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.Message
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.Message} Message
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                Message.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.Message();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.id = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.deliveryDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.deletionDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.text = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.senderId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.groupId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.isSystemMessage = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        case 8:
                            message.recipientId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 9:
                            if (!(message.records && message.records.length))
                                message.records = [];
                            message.records.push($root.google.protobuf.BytesValue.decode(reader, reader.uint32()));
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return Message;
            })();

            proto.MessagesWithTotalList = (function() {

                /**
                 * Properties of a MessagesWithTotalList.
                 * @memberof im.turms.proto
                 * @interface IMessagesWithTotalList
                 * @property {Array.<im.turms.proto.IMessagesWithTotal>|null} [messagesWithTotalList] MessagesWithTotalList messagesWithTotalList
                 */

                /**
                 * Constructs a new MessagesWithTotalList.
                 * @memberof im.turms.proto
                 * @classdesc Represents a MessagesWithTotalList.
                 * @implements IMessagesWithTotalList
                 * @constructor
                 * @param {im.turms.proto.IMessagesWithTotalList=} [properties] Properties to set
                 */
                function MessagesWithTotalList(properties) {
                    this.messagesWithTotalList = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * MessagesWithTotalList messagesWithTotalList.
                 * @member {Array.<im.turms.proto.IMessagesWithTotal>} messagesWithTotalList
                 * @memberof im.turms.proto.MessagesWithTotalList
                 * @instance
                 */
                MessagesWithTotalList.prototype.messagesWithTotalList = $util.emptyArray;

                /**
                 * Encodes the specified MessagesWithTotalList message. Does not implicitly {@link im.turms.proto.MessagesWithTotalList.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.MessagesWithTotalList
                 * @static
                 * @param {im.turms.proto.IMessagesWithTotalList} message MessagesWithTotalList message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                MessagesWithTotalList.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.messagesWithTotalList != null && message.messagesWithTotalList.length)
                        for (var i = 0; i < message.messagesWithTotalList.length; ++i)
                            $root.im.turms.proto.MessagesWithTotal.encode(message.messagesWithTotalList[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a MessagesWithTotalList message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.MessagesWithTotalList
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.MessagesWithTotalList} MessagesWithTotalList
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                MessagesWithTotalList.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.MessagesWithTotalList();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.messagesWithTotalList && message.messagesWithTotalList.length))
                                message.messagesWithTotalList = [];
                            message.messagesWithTotalList.push($root.im.turms.proto.MessagesWithTotal.decode(reader, reader.uint32()));
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return MessagesWithTotalList;
            })();

            proto.MessagesWithTotal = (function() {

                /**
                 * Properties of a MessagesWithTotal.
                 * @memberof im.turms.proto
                 * @interface IMessagesWithTotal
                 * @property {number|null} [total] MessagesWithTotal total
                 * @property {im.turms.proto.ChatType|null} [chatType] MessagesWithTotal chatType
                 * @property {string|null} [fromId] MessagesWithTotal fromId
                 * @property {Array.<im.turms.proto.IMessage>|null} [messages] MessagesWithTotal messages
                 */

                /**
                 * Constructs a new MessagesWithTotal.
                 * @memberof im.turms.proto
                 * @classdesc Represents a MessagesWithTotal.
                 * @implements IMessagesWithTotal
                 * @constructor
                 * @param {im.turms.proto.IMessagesWithTotal=} [properties] Properties to set
                 */
                function MessagesWithTotal(properties) {
                    this.messages = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * MessagesWithTotal total.
                 * @member {number} total
                 * @memberof im.turms.proto.MessagesWithTotal
                 * @instance
                 */
                MessagesWithTotal.prototype.total = 0;

                /**
                 * MessagesWithTotal chatType.
                 * @member {im.turms.proto.ChatType} chatType
                 * @memberof im.turms.proto.MessagesWithTotal
                 * @instance
                 */
                MessagesWithTotal.prototype.chatType = 0;

                /**
                 * MessagesWithTotal fromId.
                 * @member {string} fromId
                 * @memberof im.turms.proto.MessagesWithTotal
                 * @instance
                 */
                MessagesWithTotal.prototype.fromId = "0";

                /**
                 * MessagesWithTotal messages.
                 * @member {Array.<im.turms.proto.IMessage>} messages
                 * @memberof im.turms.proto.MessagesWithTotal
                 * @instance
                 */
                MessagesWithTotal.prototype.messages = $util.emptyArray;

                /**
                 * Encodes the specified MessagesWithTotal message. Does not implicitly {@link im.turms.proto.MessagesWithTotal.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.MessagesWithTotal
                 * @static
                 * @param {im.turms.proto.IMessagesWithTotal} message MessagesWithTotal message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                MessagesWithTotal.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.total != null && Object.hasOwnProperty.call(message, "total"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int32(message.total);
                    if (message.chatType != null && Object.hasOwnProperty.call(message, "chatType"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int32(message.chatType);
                    if (message.fromId != null && Object.hasOwnProperty.call(message, "fromId"))
                        writer.uint32(/* id 3, wireType 0 =*/24).int64(message.fromId);
                    if (message.messages != null && message.messages.length)
                        for (var i = 0; i < message.messages.length; ++i)
                            $root.im.turms.proto.Message.encode(message.messages[i], writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a MessagesWithTotal message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.MessagesWithTotal
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.MessagesWithTotal} MessagesWithTotal
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                MessagesWithTotal.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.MessagesWithTotal();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.total = reader.int32();
                            break;
                        case 2:
                            message.chatType = reader.int32();
                            break;
                        case 3:
                            message.fromId = reader.int64().toString();
                            break;
                        case 4:
                            if (!(message.messages && message.messages.length))
                                message.messages = [];
                            message.messages.push($root.im.turms.proto.Message.decode(reader, reader.uint32()));
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return MessagesWithTotal;
            })();

            proto.Messages = (function() {

                /**
                 * Properties of a Messages.
                 * @memberof im.turms.proto
                 * @interface IMessages
                 * @property {Array.<im.turms.proto.IMessage>|null} [messages] Messages messages
                 */

                /**
                 * Constructs a new Messages.
                 * @memberof im.turms.proto
                 * @classdesc Represents a Messages.
                 * @implements IMessages
                 * @constructor
                 * @param {im.turms.proto.IMessages=} [properties] Properties to set
                 */
                function Messages(properties) {
                    this.messages = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * Messages messages.
                 * @member {Array.<im.turms.proto.IMessage>} messages
                 * @memberof im.turms.proto.Messages
                 * @instance
                 */
                Messages.prototype.messages = $util.emptyArray;

                /**
                 * Encodes the specified Messages message. Does not implicitly {@link im.turms.proto.Messages.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.Messages
                 * @static
                 * @param {im.turms.proto.IMessages} message Messages message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                Messages.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.messages != null && message.messages.length)
                        for (var i = 0; i < message.messages.length; ++i)
                            $root.im.turms.proto.Message.encode(message.messages[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a Messages message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.Messages
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.Messages} Messages
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                Messages.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.Messages();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.messages && message.messages.length))
                                message.messages = [];
                            message.messages.push($root.im.turms.proto.Message.decode(reader, reader.uint32()));
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return Messages;
            })();

            proto.Acknowledge = (function() {

                /**
                 * Properties of an Acknowledge.
                 * @memberof im.turms.proto
                 * @interface IAcknowledge
                 * @property {string|null} [deliveryDate] Acknowledge deliveryDate
                 * @property {google.protobuf.IInt64Value|null} [messageId] Acknowledge messageId
                 */

                /**
                 * Constructs a new Acknowledge.
                 * @memberof im.turms.proto
                 * @classdesc Represents an Acknowledge.
                 * @implements IAcknowledge
                 * @constructor
                 * @param {im.turms.proto.IAcknowledge=} [properties] Properties to set
                 */
                function Acknowledge(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * Acknowledge deliveryDate.
                 * @member {string} deliveryDate
                 * @memberof im.turms.proto.Acknowledge
                 * @instance
                 */
                Acknowledge.prototype.deliveryDate = "0";

                /**
                 * Acknowledge messageId.
                 * @member {google.protobuf.IInt64Value|null|undefined} messageId
                 * @memberof im.turms.proto.Acknowledge
                 * @instance
                 */
                Acknowledge.prototype.messageId = null;

                /**
                 * Encodes the specified Acknowledge message. Does not implicitly {@link im.turms.proto.Acknowledge.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.Acknowledge
                 * @static
                 * @param {im.turms.proto.IAcknowledge} message Acknowledge message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                Acknowledge.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.deliveryDate != null && Object.hasOwnProperty.call(message, "deliveryDate"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.deliveryDate);
                    if (message.messageId != null && Object.hasOwnProperty.call(message, "messageId"))
                        $root.google.protobuf.Int64Value.encode(message.messageId, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an Acknowledge message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.Acknowledge
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.Acknowledge} Acknowledge
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                Acknowledge.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.Acknowledge();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.deliveryDate = reader.int64().toString();
                            break;
                        case 2:
                            message.messageId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return Acknowledge;
            })();

            proto.Session = (function() {

                /**
                 * Properties of a Session.
                 * @memberof im.turms.proto
                 * @interface ISession
                 * @property {string|null} [sessionId] Session sessionId
                 * @property {string|null} [address] Session address
                 */

                /**
                 * Constructs a new Session.
                 * @memberof im.turms.proto
                 * @classdesc Represents a Session.
                 * @implements ISession
                 * @constructor
                 * @param {im.turms.proto.ISession=} [properties] Properties to set
                 */
                function Session(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * Session sessionId.
                 * @member {string} sessionId
                 * @memberof im.turms.proto.Session
                 * @instance
                 */
                Session.prototype.sessionId = "";

                /**
                 * Session address.
                 * @member {string} address
                 * @memberof im.turms.proto.Session
                 * @instance
                 */
                Session.prototype.address = "";

                /**
                 * Encodes the specified Session message. Does not implicitly {@link im.turms.proto.Session.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.Session
                 * @static
                 * @param {im.turms.proto.ISession} message Session message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                Session.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.sessionId != null && Object.hasOwnProperty.call(message, "sessionId"))
                        writer.uint32(/* id 1, wireType 2 =*/10).string(message.sessionId);
                    if (message.address != null && Object.hasOwnProperty.call(message, "address"))
                        writer.uint32(/* id 2, wireType 2 =*/18).string(message.address);
                    return writer;
                };

                /**
                 * Decodes a Session message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.Session
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.Session} Session
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                Session.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.Session();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.sessionId = reader.string();
                            break;
                        case 2:
                            message.address = reader.string();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return Session;
            })();

            proto.UserFriendRequest = (function() {

                /**
                 * Properties of a UserFriendRequest.
                 * @memberof im.turms.proto
                 * @interface IUserFriendRequest
                 * @property {google.protobuf.IInt64Value|null} [id] UserFriendRequest id
                 * @property {google.protobuf.IInt64Value|null} [creationDate] UserFriendRequest creationDate
                 * @property {google.protobuf.IStringValue|null} [content] UserFriendRequest content
                 * @property {im.turms.proto.RequestStatus|null} [requestStatus] UserFriendRequest requestStatus
                 * @property {google.protobuf.IStringValue|null} [reason] UserFriendRequest reason
                 * @property {google.protobuf.IInt64Value|null} [expirationDate] UserFriendRequest expirationDate
                 * @property {google.protobuf.IInt64Value|null} [requesterId] UserFriendRequest requesterId
                 * @property {google.protobuf.IInt64Value|null} [recipientId] UserFriendRequest recipientId
                 */

                /**
                 * Constructs a new UserFriendRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UserFriendRequest.
                 * @implements IUserFriendRequest
                 * @constructor
                 * @param {im.turms.proto.IUserFriendRequest=} [properties] Properties to set
                 */
                function UserFriendRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UserFriendRequest id.
                 * @member {google.protobuf.IInt64Value|null|undefined} id
                 * @memberof im.turms.proto.UserFriendRequest
                 * @instance
                 */
                UserFriendRequest.prototype.id = null;

                /**
                 * UserFriendRequest creationDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} creationDate
                 * @memberof im.turms.proto.UserFriendRequest
                 * @instance
                 */
                UserFriendRequest.prototype.creationDate = null;

                /**
                 * UserFriendRequest content.
                 * @member {google.protobuf.IStringValue|null|undefined} content
                 * @memberof im.turms.proto.UserFriendRequest
                 * @instance
                 */
                UserFriendRequest.prototype.content = null;

                /**
                 * UserFriendRequest requestStatus.
                 * @member {im.turms.proto.RequestStatus} requestStatus
                 * @memberof im.turms.proto.UserFriendRequest
                 * @instance
                 */
                UserFriendRequest.prototype.requestStatus = 0;

                /**
                 * UserFriendRequest reason.
                 * @member {google.protobuf.IStringValue|null|undefined} reason
                 * @memberof im.turms.proto.UserFriendRequest
                 * @instance
                 */
                UserFriendRequest.prototype.reason = null;

                /**
                 * UserFriendRequest expirationDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} expirationDate
                 * @memberof im.turms.proto.UserFriendRequest
                 * @instance
                 */
                UserFriendRequest.prototype.expirationDate = null;

                /**
                 * UserFriendRequest requesterId.
                 * @member {google.protobuf.IInt64Value|null|undefined} requesterId
                 * @memberof im.turms.proto.UserFriendRequest
                 * @instance
                 */
                UserFriendRequest.prototype.requesterId = null;

                /**
                 * UserFriendRequest recipientId.
                 * @member {google.protobuf.IInt64Value|null|undefined} recipientId
                 * @memberof im.turms.proto.UserFriendRequest
                 * @instance
                 */
                UserFriendRequest.prototype.recipientId = null;

                /**
                 * Encodes the specified UserFriendRequest message. Does not implicitly {@link im.turms.proto.UserFriendRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UserFriendRequest
                 * @static
                 * @param {im.turms.proto.IUserFriendRequest} message UserFriendRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UserFriendRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                        $root.google.protobuf.Int64Value.encode(message.id, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.creationDate != null && Object.hasOwnProperty.call(message, "creationDate"))
                        $root.google.protobuf.Int64Value.encode(message.creationDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.content != null && Object.hasOwnProperty.call(message, "content"))
                        $root.google.protobuf.StringValue.encode(message.content, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.requestStatus != null && Object.hasOwnProperty.call(message, "requestStatus"))
                        writer.uint32(/* id 4, wireType 0 =*/32).int32(message.requestStatus);
                    if (message.reason != null && Object.hasOwnProperty.call(message, "reason"))
                        $root.google.protobuf.StringValue.encode(message.reason, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.expirationDate != null && Object.hasOwnProperty.call(message, "expirationDate"))
                        $root.google.protobuf.Int64Value.encode(message.expirationDate, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.requesterId != null && Object.hasOwnProperty.call(message, "requesterId"))
                        $root.google.protobuf.Int64Value.encode(message.requesterId, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    if (message.recipientId != null && Object.hasOwnProperty.call(message, "recipientId"))
                        $root.google.protobuf.Int64Value.encode(message.recipientId, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a UserFriendRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UserFriendRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UserFriendRequest} UserFriendRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UserFriendRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UserFriendRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.id = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.creationDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.content = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.requestStatus = reader.int32();
                            break;
                        case 5:
                            message.reason = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.expirationDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.requesterId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 8:
                            message.recipientId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UserFriendRequest;
            })();

            proto.UserFriendRequestsWithVersion = (function() {

                /**
                 * Properties of a UserFriendRequestsWithVersion.
                 * @memberof im.turms.proto
                 * @interface IUserFriendRequestsWithVersion
                 * @property {Array.<im.turms.proto.IUserFriendRequest>|null} [userFriendRequests] UserFriendRequestsWithVersion userFriendRequests
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] UserFriendRequestsWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new UserFriendRequestsWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UserFriendRequestsWithVersion.
                 * @implements IUserFriendRequestsWithVersion
                 * @constructor
                 * @param {im.turms.proto.IUserFriendRequestsWithVersion=} [properties] Properties to set
                 */
                function UserFriendRequestsWithVersion(properties) {
                    this.userFriendRequests = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UserFriendRequestsWithVersion userFriendRequests.
                 * @member {Array.<im.turms.proto.IUserFriendRequest>} userFriendRequests
                 * @memberof im.turms.proto.UserFriendRequestsWithVersion
                 * @instance
                 */
                UserFriendRequestsWithVersion.prototype.userFriendRequests = $util.emptyArray;

                /**
                 * UserFriendRequestsWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.UserFriendRequestsWithVersion
                 * @instance
                 */
                UserFriendRequestsWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified UserFriendRequestsWithVersion message. Does not implicitly {@link im.turms.proto.UserFriendRequestsWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UserFriendRequestsWithVersion
                 * @static
                 * @param {im.turms.proto.IUserFriendRequestsWithVersion} message UserFriendRequestsWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UserFriendRequestsWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userFriendRequests != null && message.userFriendRequests.length)
                        for (var i = 0; i < message.userFriendRequests.length; ++i)
                            $root.im.turms.proto.UserFriendRequest.encode(message.userFriendRequests[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a UserFriendRequestsWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UserFriendRequestsWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UserFriendRequestsWithVersion} UserFriendRequestsWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UserFriendRequestsWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UserFriendRequestsWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.userFriendRequests && message.userFriendRequests.length))
                                message.userFriendRequests = [];
                            message.userFriendRequests.push($root.im.turms.proto.UserFriendRequest.decode(reader, reader.uint32()));
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UserFriendRequestsWithVersion;
            })();

            proto.UserInfo = (function() {

                /**
                 * Properties of a UserInfo.
                 * @memberof im.turms.proto
                 * @interface IUserInfo
                 * @property {google.protobuf.IInt64Value|null} [id] UserInfo id
                 * @property {google.protobuf.IStringValue|null} [name] UserInfo name
                 * @property {google.protobuf.IStringValue|null} [intro] UserInfo intro
                 * @property {google.protobuf.IStringValue|null} [profilePictureUrl] UserInfo profilePictureUrl
                 * @property {google.protobuf.IInt64Value|null} [registrationDate] UserInfo registrationDate
                 * @property {google.protobuf.IInt64Value|null} [deletionDate] UserInfo deletionDate
                 * @property {google.protobuf.IBoolValue|null} [active] UserInfo active
                 * @property {im.turms.proto.ProfileAccessStrategy|null} [profileAccessStrategy] UserInfo profileAccessStrategy
                 */

                /**
                 * Constructs a new UserInfo.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UserInfo.
                 * @implements IUserInfo
                 * @constructor
                 * @param {im.turms.proto.IUserInfo=} [properties] Properties to set
                 */
                function UserInfo(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UserInfo id.
                 * @member {google.protobuf.IInt64Value|null|undefined} id
                 * @memberof im.turms.proto.UserInfo
                 * @instance
                 */
                UserInfo.prototype.id = null;

                /**
                 * UserInfo name.
                 * @member {google.protobuf.IStringValue|null|undefined} name
                 * @memberof im.turms.proto.UserInfo
                 * @instance
                 */
                UserInfo.prototype.name = null;

                /**
                 * UserInfo intro.
                 * @member {google.protobuf.IStringValue|null|undefined} intro
                 * @memberof im.turms.proto.UserInfo
                 * @instance
                 */
                UserInfo.prototype.intro = null;

                /**
                 * UserInfo profilePictureUrl.
                 * @member {google.protobuf.IStringValue|null|undefined} profilePictureUrl
                 * @memberof im.turms.proto.UserInfo
                 * @instance
                 */
                UserInfo.prototype.profilePictureUrl = null;

                /**
                 * UserInfo registrationDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} registrationDate
                 * @memberof im.turms.proto.UserInfo
                 * @instance
                 */
                UserInfo.prototype.registrationDate = null;

                /**
                 * UserInfo deletionDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} deletionDate
                 * @memberof im.turms.proto.UserInfo
                 * @instance
                 */
                UserInfo.prototype.deletionDate = null;

                /**
                 * UserInfo active.
                 * @member {google.protobuf.IBoolValue|null|undefined} active
                 * @memberof im.turms.proto.UserInfo
                 * @instance
                 */
                UserInfo.prototype.active = null;

                /**
                 * UserInfo profileAccessStrategy.
                 * @member {im.turms.proto.ProfileAccessStrategy} profileAccessStrategy
                 * @memberof im.turms.proto.UserInfo
                 * @instance
                 */
                UserInfo.prototype.profileAccessStrategy = 0;

                /**
                 * Encodes the specified UserInfo message. Does not implicitly {@link im.turms.proto.UserInfo.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UserInfo
                 * @static
                 * @param {im.turms.proto.IUserInfo} message UserInfo message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UserInfo.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.id != null && Object.hasOwnProperty.call(message, "id"))
                        $root.google.protobuf.Int64Value.encode(message.id, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        $root.google.protobuf.StringValue.encode(message.name, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.intro != null && Object.hasOwnProperty.call(message, "intro"))
                        $root.google.protobuf.StringValue.encode(message.intro, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.profilePictureUrl != null && Object.hasOwnProperty.call(message, "profilePictureUrl"))
                        $root.google.protobuf.StringValue.encode(message.profilePictureUrl, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.registrationDate != null && Object.hasOwnProperty.call(message, "registrationDate"))
                        $root.google.protobuf.Int64Value.encode(message.registrationDate, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.deletionDate != null && Object.hasOwnProperty.call(message, "deletionDate"))
                        $root.google.protobuf.Int64Value.encode(message.deletionDate, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.active != null && Object.hasOwnProperty.call(message, "active"))
                        $root.google.protobuf.BoolValue.encode(message.active, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    if (message.profileAccessStrategy != null && Object.hasOwnProperty.call(message, "profileAccessStrategy"))
                        writer.uint32(/* id 8, wireType 0 =*/64).int32(message.profileAccessStrategy);
                    return writer;
                };

                /**
                 * Decodes a UserInfo message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UserInfo
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UserInfo} UserInfo
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UserInfo.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UserInfo();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.id = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.name = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.intro = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.profilePictureUrl = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.registrationDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.deletionDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.active = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        case 8:
                            message.profileAccessStrategy = reader.int32();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UserInfo;
            })();

            proto.UserLocation = (function() {

                /**
                 * Properties of a UserLocation.
                 * @memberof im.turms.proto
                 * @interface IUserLocation
                 * @property {number|null} [latitude] UserLocation latitude
                 * @property {number|null} [longitude] UserLocation longitude
                 * @property {google.protobuf.IStringValue|null} [name] UserLocation name
                 * @property {google.protobuf.IStringValue|null} [address] UserLocation address
                 * @property {google.protobuf.IInt64Value|null} [timestamp] UserLocation timestamp
                 */

                /**
                 * Constructs a new UserLocation.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UserLocation.
                 * @implements IUserLocation
                 * @constructor
                 * @param {im.turms.proto.IUserLocation=} [properties] Properties to set
                 */
                function UserLocation(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UserLocation latitude.
                 * @member {number} latitude
                 * @memberof im.turms.proto.UserLocation
                 * @instance
                 */
                UserLocation.prototype.latitude = 0;

                /**
                 * UserLocation longitude.
                 * @member {number} longitude
                 * @memberof im.turms.proto.UserLocation
                 * @instance
                 */
                UserLocation.prototype.longitude = 0;

                /**
                 * UserLocation name.
                 * @member {google.protobuf.IStringValue|null|undefined} name
                 * @memberof im.turms.proto.UserLocation
                 * @instance
                 */
                UserLocation.prototype.name = null;

                /**
                 * UserLocation address.
                 * @member {google.protobuf.IStringValue|null|undefined} address
                 * @memberof im.turms.proto.UserLocation
                 * @instance
                 */
                UserLocation.prototype.address = null;

                /**
                 * UserLocation timestamp.
                 * @member {google.protobuf.IInt64Value|null|undefined} timestamp
                 * @memberof im.turms.proto.UserLocation
                 * @instance
                 */
                UserLocation.prototype.timestamp = null;

                /**
                 * Encodes the specified UserLocation message. Does not implicitly {@link im.turms.proto.UserLocation.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UserLocation
                 * @static
                 * @param {im.turms.proto.IUserLocation} message UserLocation message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UserLocation.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.latitude != null && Object.hasOwnProperty.call(message, "latitude"))
                        writer.uint32(/* id 1, wireType 5 =*/13).float(message.latitude);
                    if (message.longitude != null && Object.hasOwnProperty.call(message, "longitude"))
                        writer.uint32(/* id 2, wireType 5 =*/21).float(message.longitude);
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        $root.google.protobuf.StringValue.encode(message.name, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.address != null && Object.hasOwnProperty.call(message, "address"))
                        $root.google.protobuf.StringValue.encode(message.address, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.timestamp != null && Object.hasOwnProperty.call(message, "timestamp"))
                        $root.google.protobuf.Int64Value.encode(message.timestamp, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a UserLocation message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UserLocation
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UserLocation} UserLocation
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UserLocation.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UserLocation();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.latitude = reader.float();
                            break;
                        case 2:
                            message.longitude = reader.float();
                            break;
                        case 3:
                            message.name = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.address = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.timestamp = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UserLocation;
            })();

            proto.UserRelationshipGroup = (function() {

                /**
                 * Properties of a UserRelationshipGroup.
                 * @memberof im.turms.proto
                 * @interface IUserRelationshipGroup
                 * @property {number|null} [index] UserRelationshipGroup index
                 * @property {string|null} [name] UserRelationshipGroup name
                 */

                /**
                 * Constructs a new UserRelationshipGroup.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UserRelationshipGroup.
                 * @implements IUserRelationshipGroup
                 * @constructor
                 * @param {im.turms.proto.IUserRelationshipGroup=} [properties] Properties to set
                 */
                function UserRelationshipGroup(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UserRelationshipGroup index.
                 * @member {number} index
                 * @memberof im.turms.proto.UserRelationshipGroup
                 * @instance
                 */
                UserRelationshipGroup.prototype.index = 0;

                /**
                 * UserRelationshipGroup name.
                 * @member {string} name
                 * @memberof im.turms.proto.UserRelationshipGroup
                 * @instance
                 */
                UserRelationshipGroup.prototype.name = "";

                /**
                 * Encodes the specified UserRelationshipGroup message. Does not implicitly {@link im.turms.proto.UserRelationshipGroup.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UserRelationshipGroup
                 * @static
                 * @param {im.turms.proto.IUserRelationshipGroup} message UserRelationshipGroup message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UserRelationshipGroup.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.index != null && Object.hasOwnProperty.call(message, "index"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int32(message.index);
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        writer.uint32(/* id 2, wireType 2 =*/18).string(message.name);
                    return writer;
                };

                /**
                 * Decodes a UserRelationshipGroup message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UserRelationshipGroup
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UserRelationshipGroup} UserRelationshipGroup
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UserRelationshipGroup.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UserRelationshipGroup();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.index = reader.int32();
                            break;
                        case 2:
                            message.name = reader.string();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UserRelationshipGroup;
            })();

            proto.UserRelationshipGroupsWithVersion = (function() {

                /**
                 * Properties of a UserRelationshipGroupsWithVersion.
                 * @memberof im.turms.proto
                 * @interface IUserRelationshipGroupsWithVersion
                 * @property {Array.<im.turms.proto.IUserRelationshipGroup>|null} [userRelationshipGroups] UserRelationshipGroupsWithVersion userRelationshipGroups
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] UserRelationshipGroupsWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new UserRelationshipGroupsWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UserRelationshipGroupsWithVersion.
                 * @implements IUserRelationshipGroupsWithVersion
                 * @constructor
                 * @param {im.turms.proto.IUserRelationshipGroupsWithVersion=} [properties] Properties to set
                 */
                function UserRelationshipGroupsWithVersion(properties) {
                    this.userRelationshipGroups = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UserRelationshipGroupsWithVersion userRelationshipGroups.
                 * @member {Array.<im.turms.proto.IUserRelationshipGroup>} userRelationshipGroups
                 * @memberof im.turms.proto.UserRelationshipGroupsWithVersion
                 * @instance
                 */
                UserRelationshipGroupsWithVersion.prototype.userRelationshipGroups = $util.emptyArray;

                /**
                 * UserRelationshipGroupsWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.UserRelationshipGroupsWithVersion
                 * @instance
                 */
                UserRelationshipGroupsWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified UserRelationshipGroupsWithVersion message. Does not implicitly {@link im.turms.proto.UserRelationshipGroupsWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UserRelationshipGroupsWithVersion
                 * @static
                 * @param {im.turms.proto.IUserRelationshipGroupsWithVersion} message UserRelationshipGroupsWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UserRelationshipGroupsWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userRelationshipGroups != null && message.userRelationshipGroups.length)
                        for (var i = 0; i < message.userRelationshipGroups.length; ++i)
                            $root.im.turms.proto.UserRelationshipGroup.encode(message.userRelationshipGroups[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a UserRelationshipGroupsWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UserRelationshipGroupsWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UserRelationshipGroupsWithVersion} UserRelationshipGroupsWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UserRelationshipGroupsWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UserRelationshipGroupsWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.userRelationshipGroups && message.userRelationshipGroups.length))
                                message.userRelationshipGroups = [];
                            message.userRelationshipGroups.push($root.im.turms.proto.UserRelationshipGroup.decode(reader, reader.uint32()));
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UserRelationshipGroupsWithVersion;
            })();

            proto.UserRelationship = (function() {

                /**
                 * Properties of a UserRelationship.
                 * @memberof im.turms.proto
                 * @interface IUserRelationship
                 * @property {google.protobuf.IInt64Value|null} [ownerId] UserRelationship ownerId
                 * @property {google.protobuf.IInt64Value|null} [relatedUserId] UserRelationship relatedUserId
                 * @property {google.protobuf.IBoolValue|null} [isBlocked] UserRelationship isBlocked
                 * @property {google.protobuf.IInt64Value|null} [groupIndex] UserRelationship groupIndex
                 * @property {google.protobuf.IInt64Value|null} [establishmentDate] UserRelationship establishmentDate
                 */

                /**
                 * Constructs a new UserRelationship.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UserRelationship.
                 * @implements IUserRelationship
                 * @constructor
                 * @param {im.turms.proto.IUserRelationship=} [properties] Properties to set
                 */
                function UserRelationship(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UserRelationship ownerId.
                 * @member {google.protobuf.IInt64Value|null|undefined} ownerId
                 * @memberof im.turms.proto.UserRelationship
                 * @instance
                 */
                UserRelationship.prototype.ownerId = null;

                /**
                 * UserRelationship relatedUserId.
                 * @member {google.protobuf.IInt64Value|null|undefined} relatedUserId
                 * @memberof im.turms.proto.UserRelationship
                 * @instance
                 */
                UserRelationship.prototype.relatedUserId = null;

                /**
                 * UserRelationship isBlocked.
                 * @member {google.protobuf.IBoolValue|null|undefined} isBlocked
                 * @memberof im.turms.proto.UserRelationship
                 * @instance
                 */
                UserRelationship.prototype.isBlocked = null;

                /**
                 * UserRelationship groupIndex.
                 * @member {google.protobuf.IInt64Value|null|undefined} groupIndex
                 * @memberof im.turms.proto.UserRelationship
                 * @instance
                 */
                UserRelationship.prototype.groupIndex = null;

                /**
                 * UserRelationship establishmentDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} establishmentDate
                 * @memberof im.turms.proto.UserRelationship
                 * @instance
                 */
                UserRelationship.prototype.establishmentDate = null;

                /**
                 * Encodes the specified UserRelationship message. Does not implicitly {@link im.turms.proto.UserRelationship.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UserRelationship
                 * @static
                 * @param {im.turms.proto.IUserRelationship} message UserRelationship message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UserRelationship.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.ownerId != null && Object.hasOwnProperty.call(message, "ownerId"))
                        $root.google.protobuf.Int64Value.encode(message.ownerId, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.relatedUserId != null && Object.hasOwnProperty.call(message, "relatedUserId"))
                        $root.google.protobuf.Int64Value.encode(message.relatedUserId, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.isBlocked != null && Object.hasOwnProperty.call(message, "isBlocked"))
                        $root.google.protobuf.BoolValue.encode(message.isBlocked, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.groupIndex != null && Object.hasOwnProperty.call(message, "groupIndex"))
                        $root.google.protobuf.Int64Value.encode(message.groupIndex, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.establishmentDate != null && Object.hasOwnProperty.call(message, "establishmentDate"))
                        $root.google.protobuf.Int64Value.encode(message.establishmentDate, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a UserRelationship message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UserRelationship
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UserRelationship} UserRelationship
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UserRelationship.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UserRelationship();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.ownerId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.relatedUserId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.isBlocked = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.groupIndex = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.establishmentDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UserRelationship;
            })();

            proto.UserRelationshipsWithVersion = (function() {

                /**
                 * Properties of a UserRelationshipsWithVersion.
                 * @memberof im.turms.proto
                 * @interface IUserRelationshipsWithVersion
                 * @property {Array.<im.turms.proto.IUserRelationship>|null} [userRelationships] UserRelationshipsWithVersion userRelationships
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] UserRelationshipsWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new UserRelationshipsWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UserRelationshipsWithVersion.
                 * @implements IUserRelationshipsWithVersion
                 * @constructor
                 * @param {im.turms.proto.IUserRelationshipsWithVersion=} [properties] Properties to set
                 */
                function UserRelationshipsWithVersion(properties) {
                    this.userRelationships = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UserRelationshipsWithVersion userRelationships.
                 * @member {Array.<im.turms.proto.IUserRelationship>} userRelationships
                 * @memberof im.turms.proto.UserRelationshipsWithVersion
                 * @instance
                 */
                UserRelationshipsWithVersion.prototype.userRelationships = $util.emptyArray;

                /**
                 * UserRelationshipsWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.UserRelationshipsWithVersion
                 * @instance
                 */
                UserRelationshipsWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified UserRelationshipsWithVersion message. Does not implicitly {@link im.turms.proto.UserRelationshipsWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UserRelationshipsWithVersion
                 * @static
                 * @param {im.turms.proto.IUserRelationshipsWithVersion} message UserRelationshipsWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UserRelationshipsWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userRelationships != null && message.userRelationships.length)
                        for (var i = 0; i < message.userRelationships.length; ++i)
                            $root.im.turms.proto.UserRelationship.encode(message.userRelationships[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a UserRelationshipsWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UserRelationshipsWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UserRelationshipsWithVersion} UserRelationshipsWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UserRelationshipsWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UserRelationshipsWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.userRelationships && message.userRelationships.length))
                                message.userRelationships = [];
                            message.userRelationships.push($root.im.turms.proto.UserRelationship.decode(reader, reader.uint32()));
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UserRelationshipsWithVersion;
            })();

            proto.UserStatusDetail = (function() {

                /**
                 * Properties of a UserStatusDetail.
                 * @memberof im.turms.proto
                 * @interface IUserStatusDetail
                 * @property {string|null} [userId] UserStatusDetail userId
                 * @property {im.turms.proto.UserStatus|null} [userStatus] UserStatusDetail userStatus
                 * @property {Array.<im.turms.proto.DeviceType>|null} [usingDeviceTypes] UserStatusDetail usingDeviceTypes
                 */

                /**
                 * Constructs a new UserStatusDetail.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UserStatusDetail.
                 * @implements IUserStatusDetail
                 * @constructor
                 * @param {im.turms.proto.IUserStatusDetail=} [properties] Properties to set
                 */
                function UserStatusDetail(properties) {
                    this.usingDeviceTypes = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UserStatusDetail userId.
                 * @member {string} userId
                 * @memberof im.turms.proto.UserStatusDetail
                 * @instance
                 */
                UserStatusDetail.prototype.userId = "0";

                /**
                 * UserStatusDetail userStatus.
                 * @member {im.turms.proto.UserStatus} userStatus
                 * @memberof im.turms.proto.UserStatusDetail
                 * @instance
                 */
                UserStatusDetail.prototype.userStatus = 0;

                /**
                 * UserStatusDetail usingDeviceTypes.
                 * @member {Array.<im.turms.proto.DeviceType>} usingDeviceTypes
                 * @memberof im.turms.proto.UserStatusDetail
                 * @instance
                 */
                UserStatusDetail.prototype.usingDeviceTypes = $util.emptyArray;

                /**
                 * Encodes the specified UserStatusDetail message. Does not implicitly {@link im.turms.proto.UserStatusDetail.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UserStatusDetail
                 * @static
                 * @param {im.turms.proto.IUserStatusDetail} message UserStatusDetail message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UserStatusDetail.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userId != null && Object.hasOwnProperty.call(message, "userId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.userId);
                    if (message.userStatus != null && Object.hasOwnProperty.call(message, "userStatus"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int32(message.userStatus);
                    if (message.usingDeviceTypes != null && message.usingDeviceTypes.length) {
                        writer.uint32(/* id 3, wireType 2 =*/26).fork();
                        for (var i = 0; i < message.usingDeviceTypes.length; ++i)
                            writer.int32(message.usingDeviceTypes[i]);
                        writer.ldelim();
                    }
                    return writer;
                };

                /**
                 * Decodes a UserStatusDetail message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UserStatusDetail
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UserStatusDetail} UserStatusDetail
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UserStatusDetail.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UserStatusDetail();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.userId = reader.int64().toString();
                            break;
                        case 2:
                            message.userStatus = reader.int32();
                            break;
                        case 3:
                            if (!(message.usingDeviceTypes && message.usingDeviceTypes.length))
                                message.usingDeviceTypes = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.usingDeviceTypes.push(reader.int32());
                            } else
                                message.usingDeviceTypes.push(reader.int32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UserStatusDetail;
            })();

            proto.UsersInfosWithVersion = (function() {

                /**
                 * Properties of a UsersInfosWithVersion.
                 * @memberof im.turms.proto
                 * @interface IUsersInfosWithVersion
                 * @property {Array.<im.turms.proto.IUserInfo>|null} [userInfos] UsersInfosWithVersion userInfos
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] UsersInfosWithVersion lastUpdatedDate
                 */

                /**
                 * Constructs a new UsersInfosWithVersion.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UsersInfosWithVersion.
                 * @implements IUsersInfosWithVersion
                 * @constructor
                 * @param {im.turms.proto.IUsersInfosWithVersion=} [properties] Properties to set
                 */
                function UsersInfosWithVersion(properties) {
                    this.userInfos = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UsersInfosWithVersion userInfos.
                 * @member {Array.<im.turms.proto.IUserInfo>} userInfos
                 * @memberof im.turms.proto.UsersInfosWithVersion
                 * @instance
                 */
                UsersInfosWithVersion.prototype.userInfos = $util.emptyArray;

                /**
                 * UsersInfosWithVersion lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.UsersInfosWithVersion
                 * @instance
                 */
                UsersInfosWithVersion.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified UsersInfosWithVersion message. Does not implicitly {@link im.turms.proto.UsersInfosWithVersion.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UsersInfosWithVersion
                 * @static
                 * @param {im.turms.proto.IUsersInfosWithVersion} message UsersInfosWithVersion message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UsersInfosWithVersion.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userInfos != null && message.userInfos.length)
                        for (var i = 0; i < message.userInfos.length; ++i)
                            $root.im.turms.proto.UserInfo.encode(message.userInfos[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a UsersInfosWithVersion message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UsersInfosWithVersion
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UsersInfosWithVersion} UsersInfosWithVersion
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UsersInfosWithVersion.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UsersInfosWithVersion();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.userInfos && message.userInfos.length))
                                message.userInfos = [];
                            message.userInfos.push($root.im.turms.proto.UserInfo.decode(reader, reader.uint32()));
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UsersInfosWithVersion;
            })();

            proto.UsersOnlineStatuses = (function() {

                /**
                 * Properties of a UsersOnlineStatuses.
                 * @memberof im.turms.proto
                 * @interface IUsersOnlineStatuses
                 * @property {Array.<im.turms.proto.IUserStatusDetail>|null} [userStatuses] UsersOnlineStatuses userStatuses
                 */

                /**
                 * Constructs a new UsersOnlineStatuses.
                 * @memberof im.turms.proto
                 * @classdesc Represents a UsersOnlineStatuses.
                 * @implements IUsersOnlineStatuses
                 * @constructor
                 * @param {im.turms.proto.IUsersOnlineStatuses=} [properties] Properties to set
                 */
                function UsersOnlineStatuses(properties) {
                    this.userStatuses = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UsersOnlineStatuses userStatuses.
                 * @member {Array.<im.turms.proto.IUserStatusDetail>} userStatuses
                 * @memberof im.turms.proto.UsersOnlineStatuses
                 * @instance
                 */
                UsersOnlineStatuses.prototype.userStatuses = $util.emptyArray;

                /**
                 * Encodes the specified UsersOnlineStatuses message. Does not implicitly {@link im.turms.proto.UsersOnlineStatuses.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UsersOnlineStatuses
                 * @static
                 * @param {im.turms.proto.IUsersOnlineStatuses} message UsersOnlineStatuses message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UsersOnlineStatuses.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userStatuses != null && message.userStatuses.length)
                        for (var i = 0; i < message.userStatuses.length; ++i)
                            $root.im.turms.proto.UserStatusDetail.encode(message.userStatuses[i], writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a UsersOnlineStatuses message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UsersOnlineStatuses
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UsersOnlineStatuses} UsersOnlineStatuses
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UsersOnlineStatuses.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UsersOnlineStatuses();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.userStatuses && message.userStatuses.length))
                                message.userStatuses = [];
                            message.userStatuses.push($root.im.turms.proto.UserStatusDetail.decode(reader, reader.uint32()));
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UsersOnlineStatuses;
            })();

            proto.TurmsNotification = (function() {

                /**
                 * Properties of a TurmsNotification.
                 * @memberof im.turms.proto
                 * @interface ITurmsNotification
                 * @property {google.protobuf.IInt64Value|null} [requestId] TurmsNotification requestId
                 * @property {google.protobuf.IInt32Value|null} [code] TurmsNotification code
                 * @property {google.protobuf.IStringValue|null} [reason] TurmsNotification reason
                 * @property {im.turms.proto.TurmsNotification.IData|null} [data] TurmsNotification data
                 * @property {im.turms.proto.ITurmsRequest|null} [relayedRequest] TurmsNotification relayedRequest
                 * @property {google.protobuf.IInt64Value|null} [requesterId] TurmsNotification requesterId
                 */

                /**
                 * Constructs a new TurmsNotification.
                 * @memberof im.turms.proto
                 * @classdesc Represents a TurmsNotification.
                 * @implements ITurmsNotification
                 * @constructor
                 * @param {im.turms.proto.ITurmsNotification=} [properties] Properties to set
                 */
                function TurmsNotification(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * TurmsNotification requestId.
                 * @member {google.protobuf.IInt64Value|null|undefined} requestId
                 * @memberof im.turms.proto.TurmsNotification
                 * @instance
                 */
                TurmsNotification.prototype.requestId = null;

                /**
                 * TurmsNotification code.
                 * @member {google.protobuf.IInt32Value|null|undefined} code
                 * @memberof im.turms.proto.TurmsNotification
                 * @instance
                 */
                TurmsNotification.prototype.code = null;

                /**
                 * TurmsNotification reason.
                 * @member {google.protobuf.IStringValue|null|undefined} reason
                 * @memberof im.turms.proto.TurmsNotification
                 * @instance
                 */
                TurmsNotification.prototype.reason = null;

                /**
                 * TurmsNotification data.
                 * @member {im.turms.proto.TurmsNotification.IData|null|undefined} data
                 * @memberof im.turms.proto.TurmsNotification
                 * @instance
                 */
                TurmsNotification.prototype.data = null;

                /**
                 * TurmsNotification relayedRequest.
                 * @member {im.turms.proto.ITurmsRequest|null|undefined} relayedRequest
                 * @memberof im.turms.proto.TurmsNotification
                 * @instance
                 */
                TurmsNotification.prototype.relayedRequest = null;

                /**
                 * TurmsNotification requesterId.
                 * @member {google.protobuf.IInt64Value|null|undefined} requesterId
                 * @memberof im.turms.proto.TurmsNotification
                 * @instance
                 */
                TurmsNotification.prototype.requesterId = null;

                /**
                 * Encodes the specified TurmsNotification message. Does not implicitly {@link im.turms.proto.TurmsNotification.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.TurmsNotification
                 * @static
                 * @param {im.turms.proto.ITurmsNotification} message TurmsNotification message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                TurmsNotification.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.requestId != null && Object.hasOwnProperty.call(message, "requestId"))
                        $root.google.protobuf.Int64Value.encode(message.requestId, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.code != null && Object.hasOwnProperty.call(message, "code"))
                        $root.google.protobuf.Int32Value.encode(message.code, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.reason != null && Object.hasOwnProperty.call(message, "reason"))
                        $root.google.protobuf.StringValue.encode(message.reason, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.data != null && Object.hasOwnProperty.call(message, "data"))
                        $root.im.turms.proto.TurmsNotification.Data.encode(message.data, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.relayedRequest != null && Object.hasOwnProperty.call(message, "relayedRequest"))
                        $root.im.turms.proto.TurmsRequest.encode(message.relayedRequest, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.requesterId != null && Object.hasOwnProperty.call(message, "requesterId"))
                        $root.google.protobuf.Int64Value.encode(message.requesterId, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a TurmsNotification message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.TurmsNotification
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.TurmsNotification} TurmsNotification
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                TurmsNotification.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.TurmsNotification();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.requestId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.code = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.reason = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.data = $root.im.turms.proto.TurmsNotification.Data.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.relayedRequest = $root.im.turms.proto.TurmsRequest.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.requesterId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                TurmsNotification.Data = (function() {

                    /**
                     * Properties of a Data.
                     * @memberof im.turms.proto.TurmsNotification
                     * @interface IData
                     * @property {im.turms.proto.IInt64Values|null} [ids] Data ids
                     * @property {im.turms.proto.IInt64ValuesWithVersion|null} [idsWithVersion] Data idsWithVersion
                     * @property {google.protobuf.IBoolValue|null} [success] Data success
                     * @property {im.turms.proto.IAcknowledge|null} [acknowledge] Data acknowledge
                     * @property {im.turms.proto.ISession|null} [session] Data session
                     * @property {im.turms.proto.IMessages|null} [messages] Data messages
                     * @property {im.turms.proto.IMessageStatuses|null} [messageStatuses] Data messageStatuses
                     * @property {im.turms.proto.IMessagesWithTotalList|null} [messagesWithTotalList] Data messagesWithTotalList
                     * @property {im.turms.proto.IUsersInfosWithVersion|null} [usersInfosWithVersion] Data usersInfosWithVersion
                     * @property {im.turms.proto.IUsersOnlineStatuses|null} [usersOnlineStatuses] Data usersOnlineStatuses
                     * @property {im.turms.proto.IUserFriendRequestsWithVersion|null} [userFriendRequestsWithVersion] Data userFriendRequestsWithVersion
                     * @property {im.turms.proto.IUserRelationshipGroupsWithVersion|null} [userRelationshipGroupsWithVersion] Data userRelationshipGroupsWithVersion
                     * @property {im.turms.proto.IUserRelationshipsWithVersion|null} [userRelationshipsWithVersion] Data userRelationshipsWithVersion
                     * @property {im.turms.proto.IGroupInvitationsWithVersion|null} [groupInvitationsWithVersion] Data groupInvitationsWithVersion
                     * @property {im.turms.proto.IGroupJoinQuestionsAnswerResult|null} [groupJoinQuestionAnswerResult] Data groupJoinQuestionAnswerResult
                     * @property {im.turms.proto.IGroupJoinRequestsWithVersion|null} [groupJoinRequestsWithVersion] Data groupJoinRequestsWithVersion
                     * @property {im.turms.proto.IGroupJoinQuestionsWithVersion|null} [groupJoinQuestionsWithVersion] Data groupJoinQuestionsWithVersion
                     * @property {im.turms.proto.IGroupMembersWithVersion|null} [groupMembersWithVersion] Data groupMembersWithVersion
                     * @property {im.turms.proto.IGroupsWithVersion|null} [groupsWithVersion] Data groupsWithVersion
                     */

                    /**
                     * Constructs a new Data.
                     * @memberof im.turms.proto.TurmsNotification
                     * @classdesc Represents a Data.
                     * @implements IData
                     * @constructor
                     * @param {im.turms.proto.TurmsNotification.IData=} [properties] Properties to set
                     */
                    function Data(properties) {
                        if (properties)
                            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                                if (properties[keys[i]] != null)
                                    this[keys[i]] = properties[keys[i]];
                    }

                    /**
                     * Data ids.
                     * @member {im.turms.proto.IInt64Values|null|undefined} ids
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.ids = null;

                    /**
                     * Data idsWithVersion.
                     * @member {im.turms.proto.IInt64ValuesWithVersion|null|undefined} idsWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.idsWithVersion = null;

                    /**
                     * Data success.
                     * @member {google.protobuf.IBoolValue|null|undefined} success
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.success = null;

                    /**
                     * Data acknowledge.
                     * @member {im.turms.proto.IAcknowledge|null|undefined} acknowledge
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.acknowledge = null;

                    /**
                     * Data session.
                     * @member {im.turms.proto.ISession|null|undefined} session
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.session = null;

                    /**
                     * Data messages.
                     * @member {im.turms.proto.IMessages|null|undefined} messages
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.messages = null;

                    /**
                     * Data messageStatuses.
                     * @member {im.turms.proto.IMessageStatuses|null|undefined} messageStatuses
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.messageStatuses = null;

                    /**
                     * Data messagesWithTotalList.
                     * @member {im.turms.proto.IMessagesWithTotalList|null|undefined} messagesWithTotalList
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.messagesWithTotalList = null;

                    /**
                     * Data usersInfosWithVersion.
                     * @member {im.turms.proto.IUsersInfosWithVersion|null|undefined} usersInfosWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.usersInfosWithVersion = null;

                    /**
                     * Data usersOnlineStatuses.
                     * @member {im.turms.proto.IUsersOnlineStatuses|null|undefined} usersOnlineStatuses
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.usersOnlineStatuses = null;

                    /**
                     * Data userFriendRequestsWithVersion.
                     * @member {im.turms.proto.IUserFriendRequestsWithVersion|null|undefined} userFriendRequestsWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.userFriendRequestsWithVersion = null;

                    /**
                     * Data userRelationshipGroupsWithVersion.
                     * @member {im.turms.proto.IUserRelationshipGroupsWithVersion|null|undefined} userRelationshipGroupsWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.userRelationshipGroupsWithVersion = null;

                    /**
                     * Data userRelationshipsWithVersion.
                     * @member {im.turms.proto.IUserRelationshipsWithVersion|null|undefined} userRelationshipsWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.userRelationshipsWithVersion = null;

                    /**
                     * Data groupInvitationsWithVersion.
                     * @member {im.turms.proto.IGroupInvitationsWithVersion|null|undefined} groupInvitationsWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.groupInvitationsWithVersion = null;

                    /**
                     * Data groupJoinQuestionAnswerResult.
                     * @member {im.turms.proto.IGroupJoinQuestionsAnswerResult|null|undefined} groupJoinQuestionAnswerResult
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.groupJoinQuestionAnswerResult = null;

                    /**
                     * Data groupJoinRequestsWithVersion.
                     * @member {im.turms.proto.IGroupJoinRequestsWithVersion|null|undefined} groupJoinRequestsWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.groupJoinRequestsWithVersion = null;

                    /**
                     * Data groupJoinQuestionsWithVersion.
                     * @member {im.turms.proto.IGroupJoinQuestionsWithVersion|null|undefined} groupJoinQuestionsWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.groupJoinQuestionsWithVersion = null;

                    /**
                     * Data groupMembersWithVersion.
                     * @member {im.turms.proto.IGroupMembersWithVersion|null|undefined} groupMembersWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.groupMembersWithVersion = null;

                    /**
                     * Data groupsWithVersion.
                     * @member {im.turms.proto.IGroupsWithVersion|null|undefined} groupsWithVersion
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Data.prototype.groupsWithVersion = null;

                    // OneOf field names bound to virtual getters and setters
                    var $oneOfFields;

                    /**
                     * Data kind.
                     * @member {"ids"|"idsWithVersion"|"success"|"acknowledge"|"session"|"messages"|"messageStatuses"|"messagesWithTotalList"|"usersInfosWithVersion"|"usersOnlineStatuses"|"userFriendRequestsWithVersion"|"userRelationshipGroupsWithVersion"|"userRelationshipsWithVersion"|"groupInvitationsWithVersion"|"groupJoinQuestionAnswerResult"|"groupJoinRequestsWithVersion"|"groupJoinQuestionsWithVersion"|"groupMembersWithVersion"|"groupsWithVersion"|undefined} kind
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @instance
                     */
                    Object.defineProperty(Data.prototype, "kind", {
                        get: $util.oneOfGetter($oneOfFields = ["ids", "idsWithVersion", "success", "acknowledge", "session", "messages", "messageStatuses", "messagesWithTotalList", "usersInfosWithVersion", "usersOnlineStatuses", "userFriendRequestsWithVersion", "userRelationshipGroupsWithVersion", "userRelationshipsWithVersion", "groupInvitationsWithVersion", "groupJoinQuestionAnswerResult", "groupJoinRequestsWithVersion", "groupJoinQuestionsWithVersion", "groupMembersWithVersion", "groupsWithVersion"]),
                        set: $util.oneOfSetter($oneOfFields)
                    });

                    /**
                     * Encodes the specified Data message. Does not implicitly {@link im.turms.proto.TurmsNotification.Data.verify|verify} messages.
                     * @function encode
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @static
                     * @param {im.turms.proto.TurmsNotification.IData} message Data message or plain object to encode
                     * @param {$protobuf.Writer} [writer] Writer to encode to
                     * @returns {$protobuf.Writer} Writer
                     */
                    Data.encode = function encode(message, writer) {
                        if (!writer)
                            writer = $Writer.create();
                        if (message.ids != null && Object.hasOwnProperty.call(message, "ids"))
                            $root.im.turms.proto.Int64Values.encode(message.ids, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                        if (message.idsWithVersion != null && Object.hasOwnProperty.call(message, "idsWithVersion"))
                            $root.im.turms.proto.Int64ValuesWithVersion.encode(message.idsWithVersion, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                        if (message.success != null && Object.hasOwnProperty.call(message, "success"))
                            $root.google.protobuf.BoolValue.encode(message.success, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                        if (message.acknowledge != null && Object.hasOwnProperty.call(message, "acknowledge"))
                            $root.im.turms.proto.Acknowledge.encode(message.acknowledge, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                        if (message.session != null && Object.hasOwnProperty.call(message, "session"))
                            $root.im.turms.proto.Session.encode(message.session, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                        if (message.messages != null && Object.hasOwnProperty.call(message, "messages"))
                            $root.im.turms.proto.Messages.encode(message.messages, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                        if (message.messageStatuses != null && Object.hasOwnProperty.call(message, "messageStatuses"))
                            $root.im.turms.proto.MessageStatuses.encode(message.messageStatuses, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                        if (message.messagesWithTotalList != null && Object.hasOwnProperty.call(message, "messagesWithTotalList"))
                            $root.im.turms.proto.MessagesWithTotalList.encode(message.messagesWithTotalList, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                        if (message.usersInfosWithVersion != null && Object.hasOwnProperty.call(message, "usersInfosWithVersion"))
                            $root.im.turms.proto.UsersInfosWithVersion.encode(message.usersInfosWithVersion, writer.uint32(/* id 9, wireType 2 =*/74).fork()).ldelim();
                        if (message.usersOnlineStatuses != null && Object.hasOwnProperty.call(message, "usersOnlineStatuses"))
                            $root.im.turms.proto.UsersOnlineStatuses.encode(message.usersOnlineStatuses, writer.uint32(/* id 10, wireType 2 =*/82).fork()).ldelim();
                        if (message.userFriendRequestsWithVersion != null && Object.hasOwnProperty.call(message, "userFriendRequestsWithVersion"))
                            $root.im.turms.proto.UserFriendRequestsWithVersion.encode(message.userFriendRequestsWithVersion, writer.uint32(/* id 11, wireType 2 =*/90).fork()).ldelim();
                        if (message.userRelationshipGroupsWithVersion != null && Object.hasOwnProperty.call(message, "userRelationshipGroupsWithVersion"))
                            $root.im.turms.proto.UserRelationshipGroupsWithVersion.encode(message.userRelationshipGroupsWithVersion, writer.uint32(/* id 12, wireType 2 =*/98).fork()).ldelim();
                        if (message.userRelationshipsWithVersion != null && Object.hasOwnProperty.call(message, "userRelationshipsWithVersion"))
                            $root.im.turms.proto.UserRelationshipsWithVersion.encode(message.userRelationshipsWithVersion, writer.uint32(/* id 13, wireType 2 =*/106).fork()).ldelim();
                        if (message.groupInvitationsWithVersion != null && Object.hasOwnProperty.call(message, "groupInvitationsWithVersion"))
                            $root.im.turms.proto.GroupInvitationsWithVersion.encode(message.groupInvitationsWithVersion, writer.uint32(/* id 14, wireType 2 =*/114).fork()).ldelim();
                        if (message.groupJoinQuestionAnswerResult != null && Object.hasOwnProperty.call(message, "groupJoinQuestionAnswerResult"))
                            $root.im.turms.proto.GroupJoinQuestionsAnswerResult.encode(message.groupJoinQuestionAnswerResult, writer.uint32(/* id 15, wireType 2 =*/122).fork()).ldelim();
                        if (message.groupJoinRequestsWithVersion != null && Object.hasOwnProperty.call(message, "groupJoinRequestsWithVersion"))
                            $root.im.turms.proto.GroupJoinRequestsWithVersion.encode(message.groupJoinRequestsWithVersion, writer.uint32(/* id 16, wireType 2 =*/130).fork()).ldelim();
                        if (message.groupJoinQuestionsWithVersion != null && Object.hasOwnProperty.call(message, "groupJoinQuestionsWithVersion"))
                            $root.im.turms.proto.GroupJoinQuestionsWithVersion.encode(message.groupJoinQuestionsWithVersion, writer.uint32(/* id 17, wireType 2 =*/138).fork()).ldelim();
                        if (message.groupMembersWithVersion != null && Object.hasOwnProperty.call(message, "groupMembersWithVersion"))
                            $root.im.turms.proto.GroupMembersWithVersion.encode(message.groupMembersWithVersion, writer.uint32(/* id 18, wireType 2 =*/146).fork()).ldelim();
                        if (message.groupsWithVersion != null && Object.hasOwnProperty.call(message, "groupsWithVersion"))
                            $root.im.turms.proto.GroupsWithVersion.encode(message.groupsWithVersion, writer.uint32(/* id 19, wireType 2 =*/154).fork()).ldelim();
                        return writer;
                    };

                    /**
                     * Decodes a Data message from the specified reader or buffer.
                     * @function decode
                     * @memberof im.turms.proto.TurmsNotification.Data
                     * @static
                     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                     * @param {number} [length] Message length if known beforehand
                     * @returns {im.turms.proto.TurmsNotification.Data} Data
                     * @throws {Error} If the payload is not a reader or valid buffer
                     * @throws {$protobuf.util.ProtocolError} If required fields are missing
                     */
                    Data.decode = function decode(reader, length) {
                        if (!(reader instanceof $Reader))
                            reader = $Reader.create(reader);
                        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.TurmsNotification.Data();
                        while (reader.pos < end) {
                            var tag = reader.uint32();
                            switch (tag >>> 3) {
                            case 1:
                                message.ids = $root.im.turms.proto.Int64Values.decode(reader, reader.uint32());
                                break;
                            case 2:
                                message.idsWithVersion = $root.im.turms.proto.Int64ValuesWithVersion.decode(reader, reader.uint32());
                                break;
                            case 3:
                                message.success = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                                break;
                            case 4:
                                message.acknowledge = $root.im.turms.proto.Acknowledge.decode(reader, reader.uint32());
                                break;
                            case 5:
                                message.session = $root.im.turms.proto.Session.decode(reader, reader.uint32());
                                break;
                            case 6:
                                message.messages = $root.im.turms.proto.Messages.decode(reader, reader.uint32());
                                break;
                            case 7:
                                message.messageStatuses = $root.im.turms.proto.MessageStatuses.decode(reader, reader.uint32());
                                break;
                            case 8:
                                message.messagesWithTotalList = $root.im.turms.proto.MessagesWithTotalList.decode(reader, reader.uint32());
                                break;
                            case 9:
                                message.usersInfosWithVersion = $root.im.turms.proto.UsersInfosWithVersion.decode(reader, reader.uint32());
                                break;
                            case 10:
                                message.usersOnlineStatuses = $root.im.turms.proto.UsersOnlineStatuses.decode(reader, reader.uint32());
                                break;
                            case 11:
                                message.userFriendRequestsWithVersion = $root.im.turms.proto.UserFriendRequestsWithVersion.decode(reader, reader.uint32());
                                break;
                            case 12:
                                message.userRelationshipGroupsWithVersion = $root.im.turms.proto.UserRelationshipGroupsWithVersion.decode(reader, reader.uint32());
                                break;
                            case 13:
                                message.userRelationshipsWithVersion = $root.im.turms.proto.UserRelationshipsWithVersion.decode(reader, reader.uint32());
                                break;
                            case 14:
                                message.groupInvitationsWithVersion = $root.im.turms.proto.GroupInvitationsWithVersion.decode(reader, reader.uint32());
                                break;
                            case 15:
                                message.groupJoinQuestionAnswerResult = $root.im.turms.proto.GroupJoinQuestionsAnswerResult.decode(reader, reader.uint32());
                                break;
                            case 16:
                                message.groupJoinRequestsWithVersion = $root.im.turms.proto.GroupJoinRequestsWithVersion.decode(reader, reader.uint32());
                                break;
                            case 17:
                                message.groupJoinQuestionsWithVersion = $root.im.turms.proto.GroupJoinQuestionsWithVersion.decode(reader, reader.uint32());
                                break;
                            case 18:
                                message.groupMembersWithVersion = $root.im.turms.proto.GroupMembersWithVersion.decode(reader, reader.uint32());
                                break;
                            case 19:
                                message.groupsWithVersion = $root.im.turms.proto.GroupsWithVersion.decode(reader, reader.uint32());
                                break;
                            default:
                                reader.skipType(tag & 7);
                                break;
                            }
                        }
                        return message;
                    };

                    return Data;
                })();

                return TurmsNotification;
            })();

            proto.CreateGroupBlacklistedUserRequest = (function() {

                /**
                 * Properties of a CreateGroupBlacklistedUserRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateGroupBlacklistedUserRequest
                 * @property {string|null} [groupId] CreateGroupBlacklistedUserRequest groupId
                 * @property {string|null} [blacklistedUserId] CreateGroupBlacklistedUserRequest blacklistedUserId
                 */

                /**
                 * Constructs a new CreateGroupBlacklistedUserRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateGroupBlacklistedUserRequest.
                 * @implements ICreateGroupBlacklistedUserRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateGroupBlacklistedUserRequest=} [properties] Properties to set
                 */
                function CreateGroupBlacklistedUserRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateGroupBlacklistedUserRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.CreateGroupBlacklistedUserRequest
                 * @instance
                 */
                CreateGroupBlacklistedUserRequest.prototype.groupId = "0";

                /**
                 * CreateGroupBlacklistedUserRequest blacklistedUserId.
                 * @member {string} blacklistedUserId
                 * @memberof im.turms.proto.CreateGroupBlacklistedUserRequest
                 * @instance
                 */
                CreateGroupBlacklistedUserRequest.prototype.blacklistedUserId = "0";

                /**
                 * Encodes the specified CreateGroupBlacklistedUserRequest message. Does not implicitly {@link im.turms.proto.CreateGroupBlacklistedUserRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateGroupBlacklistedUserRequest
                 * @static
                 * @param {im.turms.proto.ICreateGroupBlacklistedUserRequest} message CreateGroupBlacklistedUserRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateGroupBlacklistedUserRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.blacklistedUserId != null && Object.hasOwnProperty.call(message, "blacklistedUserId"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int64(message.blacklistedUserId);
                    return writer;
                };

                /**
                 * Decodes a CreateGroupBlacklistedUserRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateGroupBlacklistedUserRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateGroupBlacklistedUserRequest} CreateGroupBlacklistedUserRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateGroupBlacklistedUserRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateGroupBlacklistedUserRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.blacklistedUserId = reader.int64().toString();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateGroupBlacklistedUserRequest;
            })();

            proto.DeleteGroupBlacklistedUserRequest = (function() {

                /**
                 * Properties of a DeleteGroupBlacklistedUserRequest.
                 * @memberof im.turms.proto
                 * @interface IDeleteGroupBlacklistedUserRequest
                 * @property {string|null} [groupId] DeleteGroupBlacklistedUserRequest groupId
                 * @property {string|null} [unblacklistedUserId] DeleteGroupBlacklistedUserRequest unblacklistedUserId
                 */

                /**
                 * Constructs a new DeleteGroupBlacklistedUserRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a DeleteGroupBlacklistedUserRequest.
                 * @implements IDeleteGroupBlacklistedUserRequest
                 * @constructor
                 * @param {im.turms.proto.IDeleteGroupBlacklistedUserRequest=} [properties] Properties to set
                 */
                function DeleteGroupBlacklistedUserRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * DeleteGroupBlacklistedUserRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.DeleteGroupBlacklistedUserRequest
                 * @instance
                 */
                DeleteGroupBlacklistedUserRequest.prototype.groupId = "0";

                /**
                 * DeleteGroupBlacklistedUserRequest unblacklistedUserId.
                 * @member {string} unblacklistedUserId
                 * @memberof im.turms.proto.DeleteGroupBlacklistedUserRequest
                 * @instance
                 */
                DeleteGroupBlacklistedUserRequest.prototype.unblacklistedUserId = "0";

                /**
                 * Encodes the specified DeleteGroupBlacklistedUserRequest message. Does not implicitly {@link im.turms.proto.DeleteGroupBlacklistedUserRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.DeleteGroupBlacklistedUserRequest
                 * @static
                 * @param {im.turms.proto.IDeleteGroupBlacklistedUserRequest} message DeleteGroupBlacklistedUserRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                DeleteGroupBlacklistedUserRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.unblacklistedUserId != null && Object.hasOwnProperty.call(message, "unblacklistedUserId"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int64(message.unblacklistedUserId);
                    return writer;
                };

                /**
                 * Decodes a DeleteGroupBlacklistedUserRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.DeleteGroupBlacklistedUserRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.DeleteGroupBlacklistedUserRequest} DeleteGroupBlacklistedUserRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                DeleteGroupBlacklistedUserRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.DeleteGroupBlacklistedUserRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.unblacklistedUserId = reader.int64().toString();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return DeleteGroupBlacklistedUserRequest;
            })();

            proto.QueryGroupBlacklistedUsersIdsRequest = (function() {

                /**
                 * Properties of a QueryGroupBlacklistedUsersIdsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryGroupBlacklistedUsersIdsRequest
                 * @property {string|null} [groupId] QueryGroupBlacklistedUsersIdsRequest groupId
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryGroupBlacklistedUsersIdsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryGroupBlacklistedUsersIdsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryGroupBlacklistedUsersIdsRequest.
                 * @implements IQueryGroupBlacklistedUsersIdsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryGroupBlacklistedUsersIdsRequest=} [properties] Properties to set
                 */
                function QueryGroupBlacklistedUsersIdsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryGroupBlacklistedUsersIdsRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.QueryGroupBlacklistedUsersIdsRequest
                 * @instance
                 */
                QueryGroupBlacklistedUsersIdsRequest.prototype.groupId = "0";

                /**
                 * QueryGroupBlacklistedUsersIdsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryGroupBlacklistedUsersIdsRequest
                 * @instance
                 */
                QueryGroupBlacklistedUsersIdsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryGroupBlacklistedUsersIdsRequest message. Does not implicitly {@link im.turms.proto.QueryGroupBlacklistedUsersIdsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryGroupBlacklistedUsersIdsRequest
                 * @static
                 * @param {im.turms.proto.IQueryGroupBlacklistedUsersIdsRequest} message QueryGroupBlacklistedUsersIdsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryGroupBlacklistedUsersIdsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryGroupBlacklistedUsersIdsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryGroupBlacklistedUsersIdsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryGroupBlacklistedUsersIdsRequest} QueryGroupBlacklistedUsersIdsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryGroupBlacklistedUsersIdsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryGroupBlacklistedUsersIdsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryGroupBlacklistedUsersIdsRequest;
            })();

            proto.QueryGroupBlacklistedUsersInfosRequest = (function() {

                /**
                 * Properties of a QueryGroupBlacklistedUsersInfosRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryGroupBlacklistedUsersInfosRequest
                 * @property {string|null} [groupId] QueryGroupBlacklistedUsersInfosRequest groupId
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryGroupBlacklistedUsersInfosRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryGroupBlacklistedUsersInfosRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryGroupBlacklistedUsersInfosRequest.
                 * @implements IQueryGroupBlacklistedUsersInfosRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryGroupBlacklistedUsersInfosRequest=} [properties] Properties to set
                 */
                function QueryGroupBlacklistedUsersInfosRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryGroupBlacklistedUsersInfosRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.QueryGroupBlacklistedUsersInfosRequest
                 * @instance
                 */
                QueryGroupBlacklistedUsersInfosRequest.prototype.groupId = "0";

                /**
                 * QueryGroupBlacklistedUsersInfosRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryGroupBlacklistedUsersInfosRequest
                 * @instance
                 */
                QueryGroupBlacklistedUsersInfosRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryGroupBlacklistedUsersInfosRequest message. Does not implicitly {@link im.turms.proto.QueryGroupBlacklistedUsersInfosRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryGroupBlacklistedUsersInfosRequest
                 * @static
                 * @param {im.turms.proto.IQueryGroupBlacklistedUsersInfosRequest} message QueryGroupBlacklistedUsersInfosRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryGroupBlacklistedUsersInfosRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryGroupBlacklistedUsersInfosRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryGroupBlacklistedUsersInfosRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryGroupBlacklistedUsersInfosRequest} QueryGroupBlacklistedUsersInfosRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryGroupBlacklistedUsersInfosRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryGroupBlacklistedUsersInfosRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryGroupBlacklistedUsersInfosRequest;
            })();

            proto.CreateGroupRequest = (function() {

                /**
                 * Properties of a CreateGroupRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateGroupRequest
                 * @property {string|null} [name] CreateGroupRequest name
                 * @property {google.protobuf.IStringValue|null} [intro] CreateGroupRequest intro
                 * @property {google.protobuf.IStringValue|null} [announcement] CreateGroupRequest announcement
                 * @property {google.protobuf.IStringValue|null} [profilePictureUrl] CreateGroupRequest profilePictureUrl
                 * @property {google.protobuf.IInt32Value|null} [minimumScore] CreateGroupRequest minimumScore
                 * @property {google.protobuf.IInt64Value|null} [groupTypeId] CreateGroupRequest groupTypeId
                 * @property {google.protobuf.IInt64Value|null} [muteEndDate] CreateGroupRequest muteEndDate
                 */

                /**
                 * Constructs a new CreateGroupRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateGroupRequest.
                 * @implements ICreateGroupRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateGroupRequest=} [properties] Properties to set
                 */
                function CreateGroupRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateGroupRequest name.
                 * @member {string} name
                 * @memberof im.turms.proto.CreateGroupRequest
                 * @instance
                 */
                CreateGroupRequest.prototype.name = "";

                /**
                 * CreateGroupRequest intro.
                 * @member {google.protobuf.IStringValue|null|undefined} intro
                 * @memberof im.turms.proto.CreateGroupRequest
                 * @instance
                 */
                CreateGroupRequest.prototype.intro = null;

                /**
                 * CreateGroupRequest announcement.
                 * @member {google.protobuf.IStringValue|null|undefined} announcement
                 * @memberof im.turms.proto.CreateGroupRequest
                 * @instance
                 */
                CreateGroupRequest.prototype.announcement = null;

                /**
                 * CreateGroupRequest profilePictureUrl.
                 * @member {google.protobuf.IStringValue|null|undefined} profilePictureUrl
                 * @memberof im.turms.proto.CreateGroupRequest
                 * @instance
                 */
                CreateGroupRequest.prototype.profilePictureUrl = null;

                /**
                 * CreateGroupRequest minimumScore.
                 * @member {google.protobuf.IInt32Value|null|undefined} minimumScore
                 * @memberof im.turms.proto.CreateGroupRequest
                 * @instance
                 */
                CreateGroupRequest.prototype.minimumScore = null;

                /**
                 * CreateGroupRequest groupTypeId.
                 * @member {google.protobuf.IInt64Value|null|undefined} groupTypeId
                 * @memberof im.turms.proto.CreateGroupRequest
                 * @instance
                 */
                CreateGroupRequest.prototype.groupTypeId = null;

                /**
                 * CreateGroupRequest muteEndDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} muteEndDate
                 * @memberof im.turms.proto.CreateGroupRequest
                 * @instance
                 */
                CreateGroupRequest.prototype.muteEndDate = null;

                /**
                 * Encodes the specified CreateGroupRequest message. Does not implicitly {@link im.turms.proto.CreateGroupRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateGroupRequest
                 * @static
                 * @param {im.turms.proto.ICreateGroupRequest} message CreateGroupRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateGroupRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        writer.uint32(/* id 1, wireType 2 =*/10).string(message.name);
                    if (message.intro != null && Object.hasOwnProperty.call(message, "intro"))
                        $root.google.protobuf.StringValue.encode(message.intro, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.announcement != null && Object.hasOwnProperty.call(message, "announcement"))
                        $root.google.protobuf.StringValue.encode(message.announcement, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.profilePictureUrl != null && Object.hasOwnProperty.call(message, "profilePictureUrl"))
                        $root.google.protobuf.StringValue.encode(message.profilePictureUrl, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.minimumScore != null && Object.hasOwnProperty.call(message, "minimumScore"))
                        $root.google.protobuf.Int32Value.encode(message.minimumScore, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.groupTypeId != null && Object.hasOwnProperty.call(message, "groupTypeId"))
                        $root.google.protobuf.Int64Value.encode(message.groupTypeId, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.muteEndDate != null && Object.hasOwnProperty.call(message, "muteEndDate"))
                        $root.google.protobuf.Int64Value.encode(message.muteEndDate, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a CreateGroupRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateGroupRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateGroupRequest} CreateGroupRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateGroupRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateGroupRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.name = reader.string();
                            break;
                        case 2:
                            message.intro = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.announcement = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.profilePictureUrl = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.minimumScore = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.groupTypeId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.muteEndDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateGroupRequest;
            })();

            proto.DeleteGroupRequest = (function() {

                /**
                 * Properties of a DeleteGroupRequest.
                 * @memberof im.turms.proto
                 * @interface IDeleteGroupRequest
                 * @property {string|null} [groupId] DeleteGroupRequest groupId
                 */

                /**
                 * Constructs a new DeleteGroupRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a DeleteGroupRequest.
                 * @implements IDeleteGroupRequest
                 * @constructor
                 * @param {im.turms.proto.IDeleteGroupRequest=} [properties] Properties to set
                 */
                function DeleteGroupRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * DeleteGroupRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.DeleteGroupRequest
                 * @instance
                 */
                DeleteGroupRequest.prototype.groupId = "0";

                /**
                 * Encodes the specified DeleteGroupRequest message. Does not implicitly {@link im.turms.proto.DeleteGroupRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.DeleteGroupRequest
                 * @static
                 * @param {im.turms.proto.IDeleteGroupRequest} message DeleteGroupRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                DeleteGroupRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    return writer;
                };

                /**
                 * Decodes a DeleteGroupRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.DeleteGroupRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.DeleteGroupRequest} DeleteGroupRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                DeleteGroupRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.DeleteGroupRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return DeleteGroupRequest;
            })();

            proto.CheckGroupJoinQuestionsAnswersRequest = (function() {

                /**
                 * Properties of a CheckGroupJoinQuestionsAnswersRequest.
                 * @memberof im.turms.proto
                 * @interface ICheckGroupJoinQuestionsAnswersRequest
                 * @property {Object.<string,string>|null} [questionIdAndAnswer] CheckGroupJoinQuestionsAnswersRequest questionIdAndAnswer
                 */

                /**
                 * Constructs a new CheckGroupJoinQuestionsAnswersRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CheckGroupJoinQuestionsAnswersRequest.
                 * @implements ICheckGroupJoinQuestionsAnswersRequest
                 * @constructor
                 * @param {im.turms.proto.ICheckGroupJoinQuestionsAnswersRequest=} [properties] Properties to set
                 */
                function CheckGroupJoinQuestionsAnswersRequest(properties) {
                    this.questionIdAndAnswer = {};
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CheckGroupJoinQuestionsAnswersRequest questionIdAndAnswer.
                 * @member {Object.<string,string>} questionIdAndAnswer
                 * @memberof im.turms.proto.CheckGroupJoinQuestionsAnswersRequest
                 * @instance
                 */
                CheckGroupJoinQuestionsAnswersRequest.prototype.questionIdAndAnswer = $util.emptyObject;

                /**
                 * Encodes the specified CheckGroupJoinQuestionsAnswersRequest message. Does not implicitly {@link im.turms.proto.CheckGroupJoinQuestionsAnswersRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CheckGroupJoinQuestionsAnswersRequest
                 * @static
                 * @param {im.turms.proto.ICheckGroupJoinQuestionsAnswersRequest} message CheckGroupJoinQuestionsAnswersRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CheckGroupJoinQuestionsAnswersRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.questionIdAndAnswer != null && Object.hasOwnProperty.call(message, "questionIdAndAnswer"))
                        for (var keys = Object.keys(message.questionIdAndAnswer), i = 0; i < keys.length; ++i)
                            writer.uint32(/* id 1, wireType 2 =*/10).fork().uint32(/* id 1, wireType 0 =*/8).int64(keys[i]).uint32(/* id 2, wireType 2 =*/18).string(message.questionIdAndAnswer[keys[i]]).ldelim();
                    return writer;
                };

                /**
                 * Decodes a CheckGroupJoinQuestionsAnswersRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CheckGroupJoinQuestionsAnswersRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CheckGroupJoinQuestionsAnswersRequest} CheckGroupJoinQuestionsAnswersRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CheckGroupJoinQuestionsAnswersRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CheckGroupJoinQuestionsAnswersRequest(), key;
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            reader.skip().pos++;
                            if (message.questionIdAndAnswer === $util.emptyObject)
                                message.questionIdAndAnswer = {};
                            key = reader.int64();
                            reader.pos++;
                            message.questionIdAndAnswer[typeof key === "object" ? $util.longToHash(key) : key] = reader.string();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CheckGroupJoinQuestionsAnswersRequest;
            })();

            proto.CreateGroupInvitationRequest = (function() {

                /**
                 * Properties of a CreateGroupInvitationRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateGroupInvitationRequest
                 * @property {string|null} [groupId] CreateGroupInvitationRequest groupId
                 * @property {string|null} [inviteeId] CreateGroupInvitationRequest inviteeId
                 * @property {string|null} [content] CreateGroupInvitationRequest content
                 */

                /**
                 * Constructs a new CreateGroupInvitationRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateGroupInvitationRequest.
                 * @implements ICreateGroupInvitationRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateGroupInvitationRequest=} [properties] Properties to set
                 */
                function CreateGroupInvitationRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateGroupInvitationRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.CreateGroupInvitationRequest
                 * @instance
                 */
                CreateGroupInvitationRequest.prototype.groupId = "0";

                /**
                 * CreateGroupInvitationRequest inviteeId.
                 * @member {string} inviteeId
                 * @memberof im.turms.proto.CreateGroupInvitationRequest
                 * @instance
                 */
                CreateGroupInvitationRequest.prototype.inviteeId = "0";

                /**
                 * CreateGroupInvitationRequest content.
                 * @member {string} content
                 * @memberof im.turms.proto.CreateGroupInvitationRequest
                 * @instance
                 */
                CreateGroupInvitationRequest.prototype.content = "";

                /**
                 * Encodes the specified CreateGroupInvitationRequest message. Does not implicitly {@link im.turms.proto.CreateGroupInvitationRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateGroupInvitationRequest
                 * @static
                 * @param {im.turms.proto.ICreateGroupInvitationRequest} message CreateGroupInvitationRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateGroupInvitationRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.inviteeId != null && Object.hasOwnProperty.call(message, "inviteeId"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int64(message.inviteeId);
                    if (message.content != null && Object.hasOwnProperty.call(message, "content"))
                        writer.uint32(/* id 3, wireType 2 =*/26).string(message.content);
                    return writer;
                };

                /**
                 * Decodes a CreateGroupInvitationRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateGroupInvitationRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateGroupInvitationRequest} CreateGroupInvitationRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateGroupInvitationRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateGroupInvitationRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.inviteeId = reader.int64().toString();
                            break;
                        case 3:
                            message.content = reader.string();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateGroupInvitationRequest;
            })();

            proto.CreateGroupJoinQuestionRequest = (function() {

                /**
                 * Properties of a CreateGroupJoinQuestionRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateGroupJoinQuestionRequest
                 * @property {string|null} [groupId] CreateGroupJoinQuestionRequest groupId
                 * @property {string|null} [question] CreateGroupJoinQuestionRequest question
                 * @property {Array.<string>|null} [answers] CreateGroupJoinQuestionRequest answers
                 * @property {number|null} [score] CreateGroupJoinQuestionRequest score
                 */

                /**
                 * Constructs a new CreateGroupJoinQuestionRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateGroupJoinQuestionRequest.
                 * @implements ICreateGroupJoinQuestionRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateGroupJoinQuestionRequest=} [properties] Properties to set
                 */
                function CreateGroupJoinQuestionRequest(properties) {
                    this.answers = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateGroupJoinQuestionRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.CreateGroupJoinQuestionRequest
                 * @instance
                 */
                CreateGroupJoinQuestionRequest.prototype.groupId = "0";

                /**
                 * CreateGroupJoinQuestionRequest question.
                 * @member {string} question
                 * @memberof im.turms.proto.CreateGroupJoinQuestionRequest
                 * @instance
                 */
                CreateGroupJoinQuestionRequest.prototype.question = "";

                /**
                 * CreateGroupJoinQuestionRequest answers.
                 * @member {Array.<string>} answers
                 * @memberof im.turms.proto.CreateGroupJoinQuestionRequest
                 * @instance
                 */
                CreateGroupJoinQuestionRequest.prototype.answers = $util.emptyArray;

                /**
                 * CreateGroupJoinQuestionRequest score.
                 * @member {number} score
                 * @memberof im.turms.proto.CreateGroupJoinQuestionRequest
                 * @instance
                 */
                CreateGroupJoinQuestionRequest.prototype.score = 0;

                /**
                 * Encodes the specified CreateGroupJoinQuestionRequest message. Does not implicitly {@link im.turms.proto.CreateGroupJoinQuestionRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateGroupJoinQuestionRequest
                 * @static
                 * @param {im.turms.proto.ICreateGroupJoinQuestionRequest} message CreateGroupJoinQuestionRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateGroupJoinQuestionRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.question != null && Object.hasOwnProperty.call(message, "question"))
                        writer.uint32(/* id 2, wireType 2 =*/18).string(message.question);
                    if (message.answers != null && message.answers.length)
                        for (var i = 0; i < message.answers.length; ++i)
                            writer.uint32(/* id 3, wireType 2 =*/26).string(message.answers[i]);
                    if (message.score != null && Object.hasOwnProperty.call(message, "score"))
                        writer.uint32(/* id 4, wireType 0 =*/32).int32(message.score);
                    return writer;
                };

                /**
                 * Decodes a CreateGroupJoinQuestionRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateGroupJoinQuestionRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateGroupJoinQuestionRequest} CreateGroupJoinQuestionRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateGroupJoinQuestionRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateGroupJoinQuestionRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.question = reader.string();
                            break;
                        case 3:
                            if (!(message.answers && message.answers.length))
                                message.answers = [];
                            message.answers.push(reader.string());
                            break;
                        case 4:
                            message.score = reader.int32();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateGroupJoinQuestionRequest;
            })();

            proto.CreateGroupJoinRequestRequest = (function() {

                /**
                 * Properties of a CreateGroupJoinRequestRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateGroupJoinRequestRequest
                 * @property {string|null} [groupId] CreateGroupJoinRequestRequest groupId
                 * @property {string|null} [content] CreateGroupJoinRequestRequest content
                 */

                /**
                 * Constructs a new CreateGroupJoinRequestRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateGroupJoinRequestRequest.
                 * @implements ICreateGroupJoinRequestRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateGroupJoinRequestRequest=} [properties] Properties to set
                 */
                function CreateGroupJoinRequestRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateGroupJoinRequestRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.CreateGroupJoinRequestRequest
                 * @instance
                 */
                CreateGroupJoinRequestRequest.prototype.groupId = "0";

                /**
                 * CreateGroupJoinRequestRequest content.
                 * @member {string} content
                 * @memberof im.turms.proto.CreateGroupJoinRequestRequest
                 * @instance
                 */
                CreateGroupJoinRequestRequest.prototype.content = "";

                /**
                 * Encodes the specified CreateGroupJoinRequestRequest message. Does not implicitly {@link im.turms.proto.CreateGroupJoinRequestRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateGroupJoinRequestRequest
                 * @static
                 * @param {im.turms.proto.ICreateGroupJoinRequestRequest} message CreateGroupJoinRequestRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateGroupJoinRequestRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.content != null && Object.hasOwnProperty.call(message, "content"))
                        writer.uint32(/* id 2, wireType 2 =*/18).string(message.content);
                    return writer;
                };

                /**
                 * Decodes a CreateGroupJoinRequestRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateGroupJoinRequestRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateGroupJoinRequestRequest} CreateGroupJoinRequestRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateGroupJoinRequestRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateGroupJoinRequestRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.content = reader.string();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateGroupJoinRequestRequest;
            })();

            proto.DeleteGroupInvitationRequest = (function() {

                /**
                 * Properties of a DeleteGroupInvitationRequest.
                 * @memberof im.turms.proto
                 * @interface IDeleteGroupInvitationRequest
                 * @property {string|null} [invitationId] DeleteGroupInvitationRequest invitationId
                 */

                /**
                 * Constructs a new DeleteGroupInvitationRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a DeleteGroupInvitationRequest.
                 * @implements IDeleteGroupInvitationRequest
                 * @constructor
                 * @param {im.turms.proto.IDeleteGroupInvitationRequest=} [properties] Properties to set
                 */
                function DeleteGroupInvitationRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * DeleteGroupInvitationRequest invitationId.
                 * @member {string} invitationId
                 * @memberof im.turms.proto.DeleteGroupInvitationRequest
                 * @instance
                 */
                DeleteGroupInvitationRequest.prototype.invitationId = "0";

                /**
                 * Encodes the specified DeleteGroupInvitationRequest message. Does not implicitly {@link im.turms.proto.DeleteGroupInvitationRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.DeleteGroupInvitationRequest
                 * @static
                 * @param {im.turms.proto.IDeleteGroupInvitationRequest} message DeleteGroupInvitationRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                DeleteGroupInvitationRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.invitationId != null && Object.hasOwnProperty.call(message, "invitationId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.invitationId);
                    return writer;
                };

                /**
                 * Decodes a DeleteGroupInvitationRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.DeleteGroupInvitationRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.DeleteGroupInvitationRequest} DeleteGroupInvitationRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                DeleteGroupInvitationRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.DeleteGroupInvitationRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.invitationId = reader.int64().toString();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return DeleteGroupInvitationRequest;
            })();

            proto.DeleteGroupJoinQuestionRequest = (function() {

                /**
                 * Properties of a DeleteGroupJoinQuestionRequest.
                 * @memberof im.turms.proto
                 * @interface IDeleteGroupJoinQuestionRequest
                 * @property {string|null} [questionId] DeleteGroupJoinQuestionRequest questionId
                 */

                /**
                 * Constructs a new DeleteGroupJoinQuestionRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a DeleteGroupJoinQuestionRequest.
                 * @implements IDeleteGroupJoinQuestionRequest
                 * @constructor
                 * @param {im.turms.proto.IDeleteGroupJoinQuestionRequest=} [properties] Properties to set
                 */
                function DeleteGroupJoinQuestionRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * DeleteGroupJoinQuestionRequest questionId.
                 * @member {string} questionId
                 * @memberof im.turms.proto.DeleteGroupJoinQuestionRequest
                 * @instance
                 */
                DeleteGroupJoinQuestionRequest.prototype.questionId = "0";

                /**
                 * Encodes the specified DeleteGroupJoinQuestionRequest message. Does not implicitly {@link im.turms.proto.DeleteGroupJoinQuestionRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.DeleteGroupJoinQuestionRequest
                 * @static
                 * @param {im.turms.proto.IDeleteGroupJoinQuestionRequest} message DeleteGroupJoinQuestionRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                DeleteGroupJoinQuestionRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.questionId != null && Object.hasOwnProperty.call(message, "questionId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.questionId);
                    return writer;
                };

                /**
                 * Decodes a DeleteGroupJoinQuestionRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.DeleteGroupJoinQuestionRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.DeleteGroupJoinQuestionRequest} DeleteGroupJoinQuestionRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                DeleteGroupJoinQuestionRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.DeleteGroupJoinQuestionRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.questionId = reader.int64().toString();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return DeleteGroupJoinQuestionRequest;
            })();

            proto.DeleteGroupJoinRequestRequest = (function() {

                /**
                 * Properties of a DeleteGroupJoinRequestRequest.
                 * @memberof im.turms.proto
                 * @interface IDeleteGroupJoinRequestRequest
                 * @property {string|null} [requestId] DeleteGroupJoinRequestRequest requestId
                 */

                /**
                 * Constructs a new DeleteGroupJoinRequestRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a DeleteGroupJoinRequestRequest.
                 * @implements IDeleteGroupJoinRequestRequest
                 * @constructor
                 * @param {im.turms.proto.IDeleteGroupJoinRequestRequest=} [properties] Properties to set
                 */
                function DeleteGroupJoinRequestRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * DeleteGroupJoinRequestRequest requestId.
                 * @member {string} requestId
                 * @memberof im.turms.proto.DeleteGroupJoinRequestRequest
                 * @instance
                 */
                DeleteGroupJoinRequestRequest.prototype.requestId = "0";

                /**
                 * Encodes the specified DeleteGroupJoinRequestRequest message. Does not implicitly {@link im.turms.proto.DeleteGroupJoinRequestRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.DeleteGroupJoinRequestRequest
                 * @static
                 * @param {im.turms.proto.IDeleteGroupJoinRequestRequest} message DeleteGroupJoinRequestRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                DeleteGroupJoinRequestRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.requestId != null && Object.hasOwnProperty.call(message, "requestId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.requestId);
                    return writer;
                };

                /**
                 * Decodes a DeleteGroupJoinRequestRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.DeleteGroupJoinRequestRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.DeleteGroupJoinRequestRequest} DeleteGroupJoinRequestRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                DeleteGroupJoinRequestRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.DeleteGroupJoinRequestRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.requestId = reader.int64().toString();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return DeleteGroupJoinRequestRequest;
            })();

            proto.QueryGroupInvitationsRequest = (function() {

                /**
                 * Properties of a QueryGroupInvitationsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryGroupInvitationsRequest
                 * @property {string|null} [groupId] QueryGroupInvitationsRequest groupId
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryGroupInvitationsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryGroupInvitationsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryGroupInvitationsRequest.
                 * @implements IQueryGroupInvitationsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryGroupInvitationsRequest=} [properties] Properties to set
                 */
                function QueryGroupInvitationsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryGroupInvitationsRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.QueryGroupInvitationsRequest
                 * @instance
                 */
                QueryGroupInvitationsRequest.prototype.groupId = "0";

                /**
                 * QueryGroupInvitationsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryGroupInvitationsRequest
                 * @instance
                 */
                QueryGroupInvitationsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryGroupInvitationsRequest message. Does not implicitly {@link im.turms.proto.QueryGroupInvitationsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryGroupInvitationsRequest
                 * @static
                 * @param {im.turms.proto.IQueryGroupInvitationsRequest} message QueryGroupInvitationsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryGroupInvitationsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryGroupInvitationsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryGroupInvitationsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryGroupInvitationsRequest} QueryGroupInvitationsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryGroupInvitationsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryGroupInvitationsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryGroupInvitationsRequest;
            })();

            proto.QueryGroupJoinQuestionsRequest = (function() {

                /**
                 * Properties of a QueryGroupJoinQuestionsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryGroupJoinQuestionsRequest
                 * @property {string|null} [groupId] QueryGroupJoinQuestionsRequest groupId
                 * @property {boolean|null} [withAnswers] QueryGroupJoinQuestionsRequest withAnswers
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryGroupJoinQuestionsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryGroupJoinQuestionsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryGroupJoinQuestionsRequest.
                 * @implements IQueryGroupJoinQuestionsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryGroupJoinQuestionsRequest=} [properties] Properties to set
                 */
                function QueryGroupJoinQuestionsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryGroupJoinQuestionsRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.QueryGroupJoinQuestionsRequest
                 * @instance
                 */
                QueryGroupJoinQuestionsRequest.prototype.groupId = "0";

                /**
                 * QueryGroupJoinQuestionsRequest withAnswers.
                 * @member {boolean} withAnswers
                 * @memberof im.turms.proto.QueryGroupJoinQuestionsRequest
                 * @instance
                 */
                QueryGroupJoinQuestionsRequest.prototype.withAnswers = false;

                /**
                 * QueryGroupJoinQuestionsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryGroupJoinQuestionsRequest
                 * @instance
                 */
                QueryGroupJoinQuestionsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryGroupJoinQuestionsRequest message. Does not implicitly {@link im.turms.proto.QueryGroupJoinQuestionsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryGroupJoinQuestionsRequest
                 * @static
                 * @param {im.turms.proto.IQueryGroupJoinQuestionsRequest} message QueryGroupJoinQuestionsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryGroupJoinQuestionsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.withAnswers != null && Object.hasOwnProperty.call(message, "withAnswers"))
                        writer.uint32(/* id 2, wireType 0 =*/16).bool(message.withAnswers);
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryGroupJoinQuestionsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryGroupJoinQuestionsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryGroupJoinQuestionsRequest} QueryGroupJoinQuestionsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryGroupJoinQuestionsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryGroupJoinQuestionsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.withAnswers = reader.bool();
                            break;
                        case 3:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryGroupJoinQuestionsRequest;
            })();

            proto.QueryGroupJoinRequestsRequest = (function() {

                /**
                 * Properties of a QueryGroupJoinRequestsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryGroupJoinRequestsRequest
                 * @property {string|null} [groupId] QueryGroupJoinRequestsRequest groupId
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryGroupJoinRequestsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryGroupJoinRequestsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryGroupJoinRequestsRequest.
                 * @implements IQueryGroupJoinRequestsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryGroupJoinRequestsRequest=} [properties] Properties to set
                 */
                function QueryGroupJoinRequestsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryGroupJoinRequestsRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.QueryGroupJoinRequestsRequest
                 * @instance
                 */
                QueryGroupJoinRequestsRequest.prototype.groupId = "0";

                /**
                 * QueryGroupJoinRequestsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryGroupJoinRequestsRequest
                 * @instance
                 */
                QueryGroupJoinRequestsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryGroupJoinRequestsRequest message. Does not implicitly {@link im.turms.proto.QueryGroupJoinRequestsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryGroupJoinRequestsRequest
                 * @static
                 * @param {im.turms.proto.IQueryGroupJoinRequestsRequest} message QueryGroupJoinRequestsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryGroupJoinRequestsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryGroupJoinRequestsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryGroupJoinRequestsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryGroupJoinRequestsRequest} QueryGroupJoinRequestsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryGroupJoinRequestsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryGroupJoinRequestsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryGroupJoinRequestsRequest;
            })();

            proto.UpdateGroupJoinQuestionRequest = (function() {

                /**
                 * Properties of an UpdateGroupJoinQuestionRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateGroupJoinQuestionRequest
                 * @property {string|null} [questionId] UpdateGroupJoinQuestionRequest questionId
                 * @property {google.protobuf.IStringValue|null} [question] UpdateGroupJoinQuestionRequest question
                 * @property {Array.<string>|null} [answers] UpdateGroupJoinQuestionRequest answers
                 * @property {google.protobuf.IInt32Value|null} [score] UpdateGroupJoinQuestionRequest score
                 */

                /**
                 * Constructs a new UpdateGroupJoinQuestionRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateGroupJoinQuestionRequest.
                 * @implements IUpdateGroupJoinQuestionRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateGroupJoinQuestionRequest=} [properties] Properties to set
                 */
                function UpdateGroupJoinQuestionRequest(properties) {
                    this.answers = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateGroupJoinQuestionRequest questionId.
                 * @member {string} questionId
                 * @memberof im.turms.proto.UpdateGroupJoinQuestionRequest
                 * @instance
                 */
                UpdateGroupJoinQuestionRequest.prototype.questionId = "0";

                /**
                 * UpdateGroupJoinQuestionRequest question.
                 * @member {google.protobuf.IStringValue|null|undefined} question
                 * @memberof im.turms.proto.UpdateGroupJoinQuestionRequest
                 * @instance
                 */
                UpdateGroupJoinQuestionRequest.prototype.question = null;

                /**
                 * UpdateGroupJoinQuestionRequest answers.
                 * @member {Array.<string>} answers
                 * @memberof im.turms.proto.UpdateGroupJoinQuestionRequest
                 * @instance
                 */
                UpdateGroupJoinQuestionRequest.prototype.answers = $util.emptyArray;

                /**
                 * UpdateGroupJoinQuestionRequest score.
                 * @member {google.protobuf.IInt32Value|null|undefined} score
                 * @memberof im.turms.proto.UpdateGroupJoinQuestionRequest
                 * @instance
                 */
                UpdateGroupJoinQuestionRequest.prototype.score = null;

                /**
                 * Encodes the specified UpdateGroupJoinQuestionRequest message. Does not implicitly {@link im.turms.proto.UpdateGroupJoinQuestionRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateGroupJoinQuestionRequest
                 * @static
                 * @param {im.turms.proto.IUpdateGroupJoinQuestionRequest} message UpdateGroupJoinQuestionRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateGroupJoinQuestionRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.questionId != null && Object.hasOwnProperty.call(message, "questionId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.questionId);
                    if (message.question != null && Object.hasOwnProperty.call(message, "question"))
                        $root.google.protobuf.StringValue.encode(message.question, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.answers != null && message.answers.length)
                        for (var i = 0; i < message.answers.length; ++i)
                            writer.uint32(/* id 3, wireType 2 =*/26).string(message.answers[i]);
                    if (message.score != null && Object.hasOwnProperty.call(message, "score"))
                        $root.google.protobuf.Int32Value.encode(message.score, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an UpdateGroupJoinQuestionRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateGroupJoinQuestionRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateGroupJoinQuestionRequest} UpdateGroupJoinQuestionRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateGroupJoinQuestionRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateGroupJoinQuestionRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.questionId = reader.int64().toString();
                            break;
                        case 2:
                            message.question = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 3:
                            if (!(message.answers && message.answers.length))
                                message.answers = [];
                            message.answers.push(reader.string());
                            break;
                        case 4:
                            message.score = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateGroupJoinQuestionRequest;
            })();

            proto.CreateGroupMemberRequest = (function() {

                /**
                 * Properties of a CreateGroupMemberRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateGroupMemberRequest
                 * @property {string|null} [groupId] CreateGroupMemberRequest groupId
                 * @property {string|null} [userId] CreateGroupMemberRequest userId
                 * @property {google.protobuf.IStringValue|null} [name] CreateGroupMemberRequest name
                 * @property {im.turms.proto.GroupMemberRole|null} [role] CreateGroupMemberRequest role
                 * @property {google.protobuf.IInt64Value|null} [muteEndDate] CreateGroupMemberRequest muteEndDate
                 */

                /**
                 * Constructs a new CreateGroupMemberRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateGroupMemberRequest.
                 * @implements ICreateGroupMemberRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateGroupMemberRequest=} [properties] Properties to set
                 */
                function CreateGroupMemberRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateGroupMemberRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.CreateGroupMemberRequest
                 * @instance
                 */
                CreateGroupMemberRequest.prototype.groupId = "0";

                /**
                 * CreateGroupMemberRequest userId.
                 * @member {string} userId
                 * @memberof im.turms.proto.CreateGroupMemberRequest
                 * @instance
                 */
                CreateGroupMemberRequest.prototype.userId = "0";

                /**
                 * CreateGroupMemberRequest name.
                 * @member {google.protobuf.IStringValue|null|undefined} name
                 * @memberof im.turms.proto.CreateGroupMemberRequest
                 * @instance
                 */
                CreateGroupMemberRequest.prototype.name = null;

                /**
                 * CreateGroupMemberRequest role.
                 * @member {im.turms.proto.GroupMemberRole} role
                 * @memberof im.turms.proto.CreateGroupMemberRequest
                 * @instance
                 */
                CreateGroupMemberRequest.prototype.role = 0;

                /**
                 * CreateGroupMemberRequest muteEndDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} muteEndDate
                 * @memberof im.turms.proto.CreateGroupMemberRequest
                 * @instance
                 */
                CreateGroupMemberRequest.prototype.muteEndDate = null;

                /**
                 * Encodes the specified CreateGroupMemberRequest message. Does not implicitly {@link im.turms.proto.CreateGroupMemberRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateGroupMemberRequest
                 * @static
                 * @param {im.turms.proto.ICreateGroupMemberRequest} message CreateGroupMemberRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateGroupMemberRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.userId != null && Object.hasOwnProperty.call(message, "userId"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int64(message.userId);
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        $root.google.protobuf.StringValue.encode(message.name, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.role != null && Object.hasOwnProperty.call(message, "role"))
                        writer.uint32(/* id 4, wireType 0 =*/32).int32(message.role);
                    if (message.muteEndDate != null && Object.hasOwnProperty.call(message, "muteEndDate"))
                        $root.google.protobuf.Int64Value.encode(message.muteEndDate, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a CreateGroupMemberRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateGroupMemberRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateGroupMemberRequest} CreateGroupMemberRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateGroupMemberRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateGroupMemberRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.userId = reader.int64().toString();
                            break;
                        case 3:
                            message.name = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.role = reader.int32();
                            break;
                        case 5:
                            message.muteEndDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateGroupMemberRequest;
            })();

            proto.DeleteGroupMemberRequest = (function() {

                /**
                 * Properties of a DeleteGroupMemberRequest.
                 * @memberof im.turms.proto
                 * @interface IDeleteGroupMemberRequest
                 * @property {string|null} [groupId] DeleteGroupMemberRequest groupId
                 * @property {string|null} [groupMemberId] DeleteGroupMemberRequest groupMemberId
                 * @property {google.protobuf.IInt64Value|null} [successorId] DeleteGroupMemberRequest successorId
                 * @property {google.protobuf.IBoolValue|null} [quitAfterTransfer] DeleteGroupMemberRequest quitAfterTransfer
                 */

                /**
                 * Constructs a new DeleteGroupMemberRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a DeleteGroupMemberRequest.
                 * @implements IDeleteGroupMemberRequest
                 * @constructor
                 * @param {im.turms.proto.IDeleteGroupMemberRequest=} [properties] Properties to set
                 */
                function DeleteGroupMemberRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * DeleteGroupMemberRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.DeleteGroupMemberRequest
                 * @instance
                 */
                DeleteGroupMemberRequest.prototype.groupId = "0";

                /**
                 * DeleteGroupMemberRequest groupMemberId.
                 * @member {string} groupMemberId
                 * @memberof im.turms.proto.DeleteGroupMemberRequest
                 * @instance
                 */
                DeleteGroupMemberRequest.prototype.groupMemberId = "0";

                /**
                 * DeleteGroupMemberRequest successorId.
                 * @member {google.protobuf.IInt64Value|null|undefined} successorId
                 * @memberof im.turms.proto.DeleteGroupMemberRequest
                 * @instance
                 */
                DeleteGroupMemberRequest.prototype.successorId = null;

                /**
                 * DeleteGroupMemberRequest quitAfterTransfer.
                 * @member {google.protobuf.IBoolValue|null|undefined} quitAfterTransfer
                 * @memberof im.turms.proto.DeleteGroupMemberRequest
                 * @instance
                 */
                DeleteGroupMemberRequest.prototype.quitAfterTransfer = null;

                /**
                 * Encodes the specified DeleteGroupMemberRequest message. Does not implicitly {@link im.turms.proto.DeleteGroupMemberRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.DeleteGroupMemberRequest
                 * @static
                 * @param {im.turms.proto.IDeleteGroupMemberRequest} message DeleteGroupMemberRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                DeleteGroupMemberRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.groupMemberId != null && Object.hasOwnProperty.call(message, "groupMemberId"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int64(message.groupMemberId);
                    if (message.successorId != null && Object.hasOwnProperty.call(message, "successorId"))
                        $root.google.protobuf.Int64Value.encode(message.successorId, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.quitAfterTransfer != null && Object.hasOwnProperty.call(message, "quitAfterTransfer"))
                        $root.google.protobuf.BoolValue.encode(message.quitAfterTransfer, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a DeleteGroupMemberRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.DeleteGroupMemberRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.DeleteGroupMemberRequest} DeleteGroupMemberRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                DeleteGroupMemberRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.DeleteGroupMemberRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.groupMemberId = reader.int64().toString();
                            break;
                        case 3:
                            message.successorId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.quitAfterTransfer = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return DeleteGroupMemberRequest;
            })();

            proto.QueryGroupMembersRequest = (function() {

                /**
                 * Properties of a QueryGroupMembersRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryGroupMembersRequest
                 * @property {string|null} [groupId] QueryGroupMembersRequest groupId
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryGroupMembersRequest lastUpdatedDate
                 * @property {Array.<string>|null} [groupMembersIds] QueryGroupMembersRequest groupMembersIds
                 * @property {google.protobuf.IBoolValue|null} [withStatus] QueryGroupMembersRequest withStatus
                 */

                /**
                 * Constructs a new QueryGroupMembersRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryGroupMembersRequest.
                 * @implements IQueryGroupMembersRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryGroupMembersRequest=} [properties] Properties to set
                 */
                function QueryGroupMembersRequest(properties) {
                    this.groupMembersIds = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryGroupMembersRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.QueryGroupMembersRequest
                 * @instance
                 */
                QueryGroupMembersRequest.prototype.groupId = "0";

                /**
                 * QueryGroupMembersRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryGroupMembersRequest
                 * @instance
                 */
                QueryGroupMembersRequest.prototype.lastUpdatedDate = null;

                /**
                 * QueryGroupMembersRequest groupMembersIds.
                 * @member {Array.<string>} groupMembersIds
                 * @memberof im.turms.proto.QueryGroupMembersRequest
                 * @instance
                 */
                QueryGroupMembersRequest.prototype.groupMembersIds = $util.emptyArray;

                /**
                 * QueryGroupMembersRequest withStatus.
                 * @member {google.protobuf.IBoolValue|null|undefined} withStatus
                 * @memberof im.turms.proto.QueryGroupMembersRequest
                 * @instance
                 */
                QueryGroupMembersRequest.prototype.withStatus = null;

                /**
                 * Encodes the specified QueryGroupMembersRequest message. Does not implicitly {@link im.turms.proto.QueryGroupMembersRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryGroupMembersRequest
                 * @static
                 * @param {im.turms.proto.IQueryGroupMembersRequest} message QueryGroupMembersRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryGroupMembersRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.groupMembersIds != null && message.groupMembersIds.length) {
                        writer.uint32(/* id 3, wireType 2 =*/26).fork();
                        for (var i = 0; i < message.groupMembersIds.length; ++i)
                            writer.int64(message.groupMembersIds[i]);
                        writer.ldelim();
                    }
                    if (message.withStatus != null && Object.hasOwnProperty.call(message, "withStatus"))
                        $root.google.protobuf.BoolValue.encode(message.withStatus, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryGroupMembersRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryGroupMembersRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryGroupMembersRequest} QueryGroupMembersRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryGroupMembersRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryGroupMembersRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            if (!(message.groupMembersIds && message.groupMembersIds.length))
                                message.groupMembersIds = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.groupMembersIds.push(reader.int64().toString());
                            } else
                                message.groupMembersIds.push(reader.int64().toString());
                            break;
                        case 4:
                            message.withStatus = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryGroupMembersRequest;
            })();

            proto.UpdateGroupMemberRequest = (function() {

                /**
                 * Properties of an UpdateGroupMemberRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateGroupMemberRequest
                 * @property {string|null} [groupId] UpdateGroupMemberRequest groupId
                 * @property {string|null} [memberId] UpdateGroupMemberRequest memberId
                 * @property {google.protobuf.IStringValue|null} [name] UpdateGroupMemberRequest name
                 * @property {im.turms.proto.GroupMemberRole|null} [role] UpdateGroupMemberRequest role
                 * @property {google.protobuf.IInt64Value|null} [muteEndDate] UpdateGroupMemberRequest muteEndDate
                 */

                /**
                 * Constructs a new UpdateGroupMemberRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateGroupMemberRequest.
                 * @implements IUpdateGroupMemberRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateGroupMemberRequest=} [properties] Properties to set
                 */
                function UpdateGroupMemberRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateGroupMemberRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.UpdateGroupMemberRequest
                 * @instance
                 */
                UpdateGroupMemberRequest.prototype.groupId = "0";

                /**
                 * UpdateGroupMemberRequest memberId.
                 * @member {string} memberId
                 * @memberof im.turms.proto.UpdateGroupMemberRequest
                 * @instance
                 */
                UpdateGroupMemberRequest.prototype.memberId = "0";

                /**
                 * UpdateGroupMemberRequest name.
                 * @member {google.protobuf.IStringValue|null|undefined} name
                 * @memberof im.turms.proto.UpdateGroupMemberRequest
                 * @instance
                 */
                UpdateGroupMemberRequest.prototype.name = null;

                /**
                 * UpdateGroupMemberRequest role.
                 * @member {im.turms.proto.GroupMemberRole} role
                 * @memberof im.turms.proto.UpdateGroupMemberRequest
                 * @instance
                 */
                UpdateGroupMemberRequest.prototype.role = 0;

                /**
                 * UpdateGroupMemberRequest muteEndDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} muteEndDate
                 * @memberof im.turms.proto.UpdateGroupMemberRequest
                 * @instance
                 */
                UpdateGroupMemberRequest.prototype.muteEndDate = null;

                /**
                 * Encodes the specified UpdateGroupMemberRequest message. Does not implicitly {@link im.turms.proto.UpdateGroupMemberRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateGroupMemberRequest
                 * @static
                 * @param {im.turms.proto.IUpdateGroupMemberRequest} message UpdateGroupMemberRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateGroupMemberRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.memberId != null && Object.hasOwnProperty.call(message, "memberId"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int64(message.memberId);
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        $root.google.protobuf.StringValue.encode(message.name, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.role != null && Object.hasOwnProperty.call(message, "role"))
                        writer.uint32(/* id 4, wireType 0 =*/32).int32(message.role);
                    if (message.muteEndDate != null && Object.hasOwnProperty.call(message, "muteEndDate"))
                        $root.google.protobuf.Int64Value.encode(message.muteEndDate, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an UpdateGroupMemberRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateGroupMemberRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateGroupMemberRequest} UpdateGroupMemberRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateGroupMemberRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateGroupMemberRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.memberId = reader.int64().toString();
                            break;
                        case 3:
                            message.name = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.role = reader.int32();
                            break;
                        case 5:
                            message.muteEndDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateGroupMemberRequest;
            })();

            proto.QueryGroupRequest = (function() {

                /**
                 * Properties of a QueryGroupRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryGroupRequest
                 * @property {string|null} [groupId] QueryGroupRequest groupId
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryGroupRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryGroupRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryGroupRequest.
                 * @implements IQueryGroupRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryGroupRequest=} [properties] Properties to set
                 */
                function QueryGroupRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryGroupRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.QueryGroupRequest
                 * @instance
                 */
                QueryGroupRequest.prototype.groupId = "0";

                /**
                 * QueryGroupRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryGroupRequest
                 * @instance
                 */
                QueryGroupRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryGroupRequest message. Does not implicitly {@link im.turms.proto.QueryGroupRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryGroupRequest
                 * @static
                 * @param {im.turms.proto.IQueryGroupRequest} message QueryGroupRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryGroupRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryGroupRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryGroupRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryGroupRequest} QueryGroupRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryGroupRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryGroupRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryGroupRequest;
            })();

            proto.QueryJoinedGroupsIdsRequest = (function() {

                /**
                 * Properties of a QueryJoinedGroupsIdsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryJoinedGroupsIdsRequest
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryJoinedGroupsIdsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryJoinedGroupsIdsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryJoinedGroupsIdsRequest.
                 * @implements IQueryJoinedGroupsIdsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryJoinedGroupsIdsRequest=} [properties] Properties to set
                 */
                function QueryJoinedGroupsIdsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryJoinedGroupsIdsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryJoinedGroupsIdsRequest
                 * @instance
                 */
                QueryJoinedGroupsIdsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryJoinedGroupsIdsRequest message. Does not implicitly {@link im.turms.proto.QueryJoinedGroupsIdsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryJoinedGroupsIdsRequest
                 * @static
                 * @param {im.turms.proto.IQueryJoinedGroupsIdsRequest} message QueryJoinedGroupsIdsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryJoinedGroupsIdsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryJoinedGroupsIdsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryJoinedGroupsIdsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryJoinedGroupsIdsRequest} QueryJoinedGroupsIdsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryJoinedGroupsIdsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryJoinedGroupsIdsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryJoinedGroupsIdsRequest;
            })();

            proto.QueryJoinedGroupsInfosRequest = (function() {

                /**
                 * Properties of a QueryJoinedGroupsInfosRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryJoinedGroupsInfosRequest
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryJoinedGroupsInfosRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryJoinedGroupsInfosRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryJoinedGroupsInfosRequest.
                 * @implements IQueryJoinedGroupsInfosRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryJoinedGroupsInfosRequest=} [properties] Properties to set
                 */
                function QueryJoinedGroupsInfosRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryJoinedGroupsInfosRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryJoinedGroupsInfosRequest
                 * @instance
                 */
                QueryJoinedGroupsInfosRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryJoinedGroupsInfosRequest message. Does not implicitly {@link im.turms.proto.QueryJoinedGroupsInfosRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryJoinedGroupsInfosRequest
                 * @static
                 * @param {im.turms.proto.IQueryJoinedGroupsInfosRequest} message QueryJoinedGroupsInfosRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryJoinedGroupsInfosRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryJoinedGroupsInfosRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryJoinedGroupsInfosRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryJoinedGroupsInfosRequest} QueryJoinedGroupsInfosRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryJoinedGroupsInfosRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryJoinedGroupsInfosRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryJoinedGroupsInfosRequest;
            })();

            proto.UpdateGroupRequest = (function() {

                /**
                 * Properties of an UpdateGroupRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateGroupRequest
                 * @property {string|null} [groupId] UpdateGroupRequest groupId
                 * @property {google.protobuf.IStringValue|null} [groupName] UpdateGroupRequest groupName
                 * @property {google.protobuf.IStringValue|null} [intro] UpdateGroupRequest intro
                 * @property {google.protobuf.IStringValue|null} [announcement] UpdateGroupRequest announcement
                 * @property {google.protobuf.IStringValue|null} [profilePictureUrl] UpdateGroupRequest profilePictureUrl
                 * @property {google.protobuf.IInt32Value|null} [minimumScore] UpdateGroupRequest minimumScore
                 * @property {google.protobuf.IInt64Value|null} [groupTypeId] UpdateGroupRequest groupTypeId
                 * @property {google.protobuf.IInt64Value|null} [muteEndDate] UpdateGroupRequest muteEndDate
                 * @property {google.protobuf.IInt64Value|null} [successorId] UpdateGroupRequest successorId
                 * @property {google.protobuf.IBoolValue|null} [quitAfterTransfer] UpdateGroupRequest quitAfterTransfer
                 */

                /**
                 * Constructs a new UpdateGroupRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateGroupRequest.
                 * @implements IUpdateGroupRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateGroupRequest=} [properties] Properties to set
                 */
                function UpdateGroupRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateGroupRequest groupId.
                 * @member {string} groupId
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.groupId = "0";

                /**
                 * UpdateGroupRequest groupName.
                 * @member {google.protobuf.IStringValue|null|undefined} groupName
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.groupName = null;

                /**
                 * UpdateGroupRequest intro.
                 * @member {google.protobuf.IStringValue|null|undefined} intro
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.intro = null;

                /**
                 * UpdateGroupRequest announcement.
                 * @member {google.protobuf.IStringValue|null|undefined} announcement
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.announcement = null;

                /**
                 * UpdateGroupRequest profilePictureUrl.
                 * @member {google.protobuf.IStringValue|null|undefined} profilePictureUrl
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.profilePictureUrl = null;

                /**
                 * UpdateGroupRequest minimumScore.
                 * @member {google.protobuf.IInt32Value|null|undefined} minimumScore
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.minimumScore = null;

                /**
                 * UpdateGroupRequest groupTypeId.
                 * @member {google.protobuf.IInt64Value|null|undefined} groupTypeId
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.groupTypeId = null;

                /**
                 * UpdateGroupRequest muteEndDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} muteEndDate
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.muteEndDate = null;

                /**
                 * UpdateGroupRequest successorId.
                 * @member {google.protobuf.IInt64Value|null|undefined} successorId
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.successorId = null;

                /**
                 * UpdateGroupRequest quitAfterTransfer.
                 * @member {google.protobuf.IBoolValue|null|undefined} quitAfterTransfer
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @instance
                 */
                UpdateGroupRequest.prototype.quitAfterTransfer = null;

                /**
                 * Encodes the specified UpdateGroupRequest message. Does not implicitly {@link im.turms.proto.UpdateGroupRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @static
                 * @param {im.turms.proto.IUpdateGroupRequest} message UpdateGroupRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateGroupRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupId != null && Object.hasOwnProperty.call(message, "groupId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.groupId);
                    if (message.groupName != null && Object.hasOwnProperty.call(message, "groupName"))
                        $root.google.protobuf.StringValue.encode(message.groupName, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.intro != null && Object.hasOwnProperty.call(message, "intro"))
                        $root.google.protobuf.StringValue.encode(message.intro, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.announcement != null && Object.hasOwnProperty.call(message, "announcement"))
                        $root.google.protobuf.StringValue.encode(message.announcement, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.profilePictureUrl != null && Object.hasOwnProperty.call(message, "profilePictureUrl"))
                        $root.google.protobuf.StringValue.encode(message.profilePictureUrl, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.minimumScore != null && Object.hasOwnProperty.call(message, "minimumScore"))
                        $root.google.protobuf.Int32Value.encode(message.minimumScore, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.groupTypeId != null && Object.hasOwnProperty.call(message, "groupTypeId"))
                        $root.google.protobuf.Int64Value.encode(message.groupTypeId, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    if (message.muteEndDate != null && Object.hasOwnProperty.call(message, "muteEndDate"))
                        $root.google.protobuf.Int64Value.encode(message.muteEndDate, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                    if (message.successorId != null && Object.hasOwnProperty.call(message, "successorId"))
                        $root.google.protobuf.Int64Value.encode(message.successorId, writer.uint32(/* id 9, wireType 2 =*/74).fork()).ldelim();
                    if (message.quitAfterTransfer != null && Object.hasOwnProperty.call(message, "quitAfterTransfer"))
                        $root.google.protobuf.BoolValue.encode(message.quitAfterTransfer, writer.uint32(/* id 10, wireType 2 =*/82).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an UpdateGroupRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateGroupRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateGroupRequest} UpdateGroupRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateGroupRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateGroupRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupId = reader.int64().toString();
                            break;
                        case 2:
                            message.groupName = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.intro = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.announcement = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.profilePictureUrl = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.minimumScore = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.groupTypeId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 8:
                            message.muteEndDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 9:
                            message.successorId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 10:
                            message.quitAfterTransfer = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateGroupRequest;
            })();

            proto.CreateMessageRequest = (function() {

                /**
                 * Properties of a CreateMessageRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateMessageRequest
                 * @property {google.protobuf.IInt64Value|null} [messageId] CreateMessageRequest messageId
                 * @property {im.turms.proto.ChatType|null} [chatType] CreateMessageRequest chatType
                 * @property {google.protobuf.IBoolValue|null} [isSystemMessage] CreateMessageRequest isSystemMessage
                 * @property {string|null} [toId] CreateMessageRequest toId
                 * @property {string|null} [deliveryDate] CreateMessageRequest deliveryDate
                 * @property {google.protobuf.IStringValue|null} [text] CreateMessageRequest text
                 * @property {Array.<Uint8Array>|null} [records] CreateMessageRequest records
                 * @property {google.protobuf.IInt32Value|null} [burnAfter] CreateMessageRequest burnAfter
                 */

                /**
                 * Constructs a new CreateMessageRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateMessageRequest.
                 * @implements ICreateMessageRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateMessageRequest=} [properties] Properties to set
                 */
                function CreateMessageRequest(properties) {
                    this.records = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateMessageRequest messageId.
                 * @member {google.protobuf.IInt64Value|null|undefined} messageId
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @instance
                 */
                CreateMessageRequest.prototype.messageId = null;

                /**
                 * CreateMessageRequest chatType.
                 * @member {im.turms.proto.ChatType} chatType
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @instance
                 */
                CreateMessageRequest.prototype.chatType = 0;

                /**
                 * CreateMessageRequest isSystemMessage.
                 * @member {google.protobuf.IBoolValue|null|undefined} isSystemMessage
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @instance
                 */
                CreateMessageRequest.prototype.isSystemMessage = null;

                /**
                 * CreateMessageRequest toId.
                 * @member {string} toId
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @instance
                 */
                CreateMessageRequest.prototype.toId = "0";

                /**
                 * CreateMessageRequest deliveryDate.
                 * @member {string} deliveryDate
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @instance
                 */
                CreateMessageRequest.prototype.deliveryDate = "0";

                /**
                 * CreateMessageRequest text.
                 * @member {google.protobuf.IStringValue|null|undefined} text
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @instance
                 */
                CreateMessageRequest.prototype.text = null;

                /**
                 * CreateMessageRequest records.
                 * @member {Array.<Uint8Array>} records
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @instance
                 */
                CreateMessageRequest.prototype.records = $util.emptyArray;

                /**
                 * CreateMessageRequest burnAfter.
                 * @member {google.protobuf.IInt32Value|null|undefined} burnAfter
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @instance
                 */
                CreateMessageRequest.prototype.burnAfter = null;

                /**
                 * Encodes the specified CreateMessageRequest message. Does not implicitly {@link im.turms.proto.CreateMessageRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @static
                 * @param {im.turms.proto.ICreateMessageRequest} message CreateMessageRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateMessageRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.messageId != null && Object.hasOwnProperty.call(message, "messageId"))
                        $root.google.protobuf.Int64Value.encode(message.messageId, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.chatType != null && Object.hasOwnProperty.call(message, "chatType"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int32(message.chatType);
                    if (message.isSystemMessage != null && Object.hasOwnProperty.call(message, "isSystemMessage"))
                        $root.google.protobuf.BoolValue.encode(message.isSystemMessage, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.toId != null && Object.hasOwnProperty.call(message, "toId"))
                        writer.uint32(/* id 4, wireType 0 =*/32).int64(message.toId);
                    if (message.deliveryDate != null && Object.hasOwnProperty.call(message, "deliveryDate"))
                        writer.uint32(/* id 5, wireType 0 =*/40).int64(message.deliveryDate);
                    if (message.text != null && Object.hasOwnProperty.call(message, "text"))
                        $root.google.protobuf.StringValue.encode(message.text, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.records != null && message.records.length)
                        for (var i = 0; i < message.records.length; ++i)
                            writer.uint32(/* id 7, wireType 2 =*/58).bytes(message.records[i]);
                    if (message.burnAfter != null && Object.hasOwnProperty.call(message, "burnAfter"))
                        $root.google.protobuf.Int32Value.encode(message.burnAfter, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a CreateMessageRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateMessageRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateMessageRequest} CreateMessageRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateMessageRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateMessageRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.messageId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.chatType = reader.int32();
                            break;
                        case 3:
                            message.isSystemMessage = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.toId = reader.int64().toString();
                            break;
                        case 5:
                            message.deliveryDate = reader.int64().toString();
                            break;
                        case 6:
                            message.text = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 7:
                            if (!(message.records && message.records.length))
                                message.records = [];
                            message.records.push(reader.bytes());
                            break;
                        case 8:
                            message.burnAfter = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateMessageRequest;
            })();

            proto.QueryMessageStatusesRequest = (function() {

                /**
                 * Properties of a QueryMessageStatusesRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryMessageStatusesRequest
                 * @property {string|null} [messageId] QueryMessageStatusesRequest messageId
                 */

                /**
                 * Constructs a new QueryMessageStatusesRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryMessageStatusesRequest.
                 * @implements IQueryMessageStatusesRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryMessageStatusesRequest=} [properties] Properties to set
                 */
                function QueryMessageStatusesRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryMessageStatusesRequest messageId.
                 * @member {string} messageId
                 * @memberof im.turms.proto.QueryMessageStatusesRequest
                 * @instance
                 */
                QueryMessageStatusesRequest.prototype.messageId = "0";

                /**
                 * Encodes the specified QueryMessageStatusesRequest message. Does not implicitly {@link im.turms.proto.QueryMessageStatusesRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryMessageStatusesRequest
                 * @static
                 * @param {im.turms.proto.IQueryMessageStatusesRequest} message QueryMessageStatusesRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryMessageStatusesRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.messageId != null && Object.hasOwnProperty.call(message, "messageId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.messageId);
                    return writer;
                };

                /**
                 * Decodes a QueryMessageStatusesRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryMessageStatusesRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryMessageStatusesRequest} QueryMessageStatusesRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryMessageStatusesRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryMessageStatusesRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.messageId = reader.int64().toString();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryMessageStatusesRequest;
            })();

            proto.QueryMessagesRequest = (function() {

                /**
                 * Properties of a QueryMessagesRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryMessagesRequest
                 * @property {Array.<string>|null} [ids] QueryMessagesRequest ids
                 * @property {google.protobuf.IInt32Value|null} [size] QueryMessagesRequest size
                 * @property {im.turms.proto.ChatType|null} [chatType] QueryMessagesRequest chatType
                 * @property {google.protobuf.IBoolValue|null} [areSystemMessages] QueryMessagesRequest areSystemMessages
                 * @property {google.protobuf.IInt64Value|null} [fromId] QueryMessagesRequest fromId
                 * @property {google.protobuf.IInt64Value|null} [deliveryDateAfter] QueryMessagesRequest deliveryDateAfter
                 * @property {google.protobuf.IInt64Value|null} [deliveryDateBefore] QueryMessagesRequest deliveryDateBefore
                 * @property {im.turms.proto.MessageDeliveryStatus|null} [deliveryStatus] QueryMessagesRequest deliveryStatus
                 */

                /**
                 * Constructs a new QueryMessagesRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryMessagesRequest.
                 * @implements IQueryMessagesRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryMessagesRequest=} [properties] Properties to set
                 */
                function QueryMessagesRequest(properties) {
                    this.ids = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryMessagesRequest ids.
                 * @member {Array.<string>} ids
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @instance
                 */
                QueryMessagesRequest.prototype.ids = $util.emptyArray;

                /**
                 * QueryMessagesRequest size.
                 * @member {google.protobuf.IInt32Value|null|undefined} size
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @instance
                 */
                QueryMessagesRequest.prototype.size = null;

                /**
                 * QueryMessagesRequest chatType.
                 * @member {im.turms.proto.ChatType} chatType
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @instance
                 */
                QueryMessagesRequest.prototype.chatType = 0;

                /**
                 * QueryMessagesRequest areSystemMessages.
                 * @member {google.protobuf.IBoolValue|null|undefined} areSystemMessages
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @instance
                 */
                QueryMessagesRequest.prototype.areSystemMessages = null;

                /**
                 * QueryMessagesRequest fromId.
                 * @member {google.protobuf.IInt64Value|null|undefined} fromId
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @instance
                 */
                QueryMessagesRequest.prototype.fromId = null;

                /**
                 * QueryMessagesRequest deliveryDateAfter.
                 * @member {google.protobuf.IInt64Value|null|undefined} deliveryDateAfter
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @instance
                 */
                QueryMessagesRequest.prototype.deliveryDateAfter = null;

                /**
                 * QueryMessagesRequest deliveryDateBefore.
                 * @member {google.protobuf.IInt64Value|null|undefined} deliveryDateBefore
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @instance
                 */
                QueryMessagesRequest.prototype.deliveryDateBefore = null;

                /**
                 * QueryMessagesRequest deliveryStatus.
                 * @member {im.turms.proto.MessageDeliveryStatus} deliveryStatus
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @instance
                 */
                QueryMessagesRequest.prototype.deliveryStatus = 0;

                /**
                 * Encodes the specified QueryMessagesRequest message. Does not implicitly {@link im.turms.proto.QueryMessagesRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @static
                 * @param {im.turms.proto.IQueryMessagesRequest} message QueryMessagesRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryMessagesRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.ids != null && message.ids.length) {
                        writer.uint32(/* id 1, wireType 2 =*/10).fork();
                        for (var i = 0; i < message.ids.length; ++i)
                            writer.int64(message.ids[i]);
                        writer.ldelim();
                    }
                    if (message.size != null && Object.hasOwnProperty.call(message, "size"))
                        $root.google.protobuf.Int32Value.encode(message.size, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.chatType != null && Object.hasOwnProperty.call(message, "chatType"))
                        writer.uint32(/* id 3, wireType 0 =*/24).int32(message.chatType);
                    if (message.areSystemMessages != null && Object.hasOwnProperty.call(message, "areSystemMessages"))
                        $root.google.protobuf.BoolValue.encode(message.areSystemMessages, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.fromId != null && Object.hasOwnProperty.call(message, "fromId"))
                        $root.google.protobuf.Int64Value.encode(message.fromId, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.deliveryDateAfter != null && Object.hasOwnProperty.call(message, "deliveryDateAfter"))
                        $root.google.protobuf.Int64Value.encode(message.deliveryDateAfter, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.deliveryDateBefore != null && Object.hasOwnProperty.call(message, "deliveryDateBefore"))
                        $root.google.protobuf.Int64Value.encode(message.deliveryDateBefore, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    if (message.deliveryStatus != null && Object.hasOwnProperty.call(message, "deliveryStatus"))
                        writer.uint32(/* id 8, wireType 0 =*/64).int32(message.deliveryStatus);
                    return writer;
                };

                /**
                 * Decodes a QueryMessagesRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryMessagesRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryMessagesRequest} QueryMessagesRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryMessagesRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryMessagesRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.ids && message.ids.length))
                                message.ids = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.ids.push(reader.int64().toString());
                            } else
                                message.ids.push(reader.int64().toString());
                            break;
                        case 2:
                            message.size = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.chatType = reader.int32();
                            break;
                        case 4:
                            message.areSystemMessages = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.fromId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.deliveryDateAfter = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.deliveryDateBefore = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 8:
                            message.deliveryStatus = reader.int32();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryMessagesRequest;
            })();

            proto.QueryPendingMessagesWithTotalRequest = (function() {

                /**
                 * Properties of a QueryPendingMessagesWithTotalRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryPendingMessagesWithTotalRequest
                 * @property {google.protobuf.IInt32Value|null} [size] QueryPendingMessagesWithTotalRequest size
                 */

                /**
                 * Constructs a new QueryPendingMessagesWithTotalRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryPendingMessagesWithTotalRequest.
                 * @implements IQueryPendingMessagesWithTotalRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryPendingMessagesWithTotalRequest=} [properties] Properties to set
                 */
                function QueryPendingMessagesWithTotalRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryPendingMessagesWithTotalRequest size.
                 * @member {google.protobuf.IInt32Value|null|undefined} size
                 * @memberof im.turms.proto.QueryPendingMessagesWithTotalRequest
                 * @instance
                 */
                QueryPendingMessagesWithTotalRequest.prototype.size = null;

                /**
                 * Encodes the specified QueryPendingMessagesWithTotalRequest message. Does not implicitly {@link im.turms.proto.QueryPendingMessagesWithTotalRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryPendingMessagesWithTotalRequest
                 * @static
                 * @param {im.turms.proto.IQueryPendingMessagesWithTotalRequest} message QueryPendingMessagesWithTotalRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryPendingMessagesWithTotalRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.size != null && Object.hasOwnProperty.call(message, "size"))
                        $root.google.protobuf.Int32Value.encode(message.size, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryPendingMessagesWithTotalRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryPendingMessagesWithTotalRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryPendingMessagesWithTotalRequest} QueryPendingMessagesWithTotalRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryPendingMessagesWithTotalRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryPendingMessagesWithTotalRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.size = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryPendingMessagesWithTotalRequest;
            })();

            proto.UpdateMessageRequest = (function() {

                /**
                 * Properties of an UpdateMessageRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateMessageRequest
                 * @property {string|null} [messageId] UpdateMessageRequest messageId
                 * @property {google.protobuf.IBoolValue|null} [isSystemMessage] UpdateMessageRequest isSystemMessage
                 * @property {google.protobuf.IStringValue|null} [text] UpdateMessageRequest text
                 * @property {Array.<Uint8Array>|null} [records] UpdateMessageRequest records
                 * @property {google.protobuf.IInt64Value|null} [recallDate] UpdateMessageRequest recallDate
                 * @property {google.protobuf.IInt64Value|null} [readDate] UpdateMessageRequest readDate
                 */

                /**
                 * Constructs a new UpdateMessageRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateMessageRequest.
                 * @implements IUpdateMessageRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateMessageRequest=} [properties] Properties to set
                 */
                function UpdateMessageRequest(properties) {
                    this.records = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateMessageRequest messageId.
                 * @member {string} messageId
                 * @memberof im.turms.proto.UpdateMessageRequest
                 * @instance
                 */
                UpdateMessageRequest.prototype.messageId = "0";

                /**
                 * UpdateMessageRequest isSystemMessage.
                 * @member {google.protobuf.IBoolValue|null|undefined} isSystemMessage
                 * @memberof im.turms.proto.UpdateMessageRequest
                 * @instance
                 */
                UpdateMessageRequest.prototype.isSystemMessage = null;

                /**
                 * UpdateMessageRequest text.
                 * @member {google.protobuf.IStringValue|null|undefined} text
                 * @memberof im.turms.proto.UpdateMessageRequest
                 * @instance
                 */
                UpdateMessageRequest.prototype.text = null;

                /**
                 * UpdateMessageRequest records.
                 * @member {Array.<Uint8Array>} records
                 * @memberof im.turms.proto.UpdateMessageRequest
                 * @instance
                 */
                UpdateMessageRequest.prototype.records = $util.emptyArray;

                /**
                 * UpdateMessageRequest recallDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} recallDate
                 * @memberof im.turms.proto.UpdateMessageRequest
                 * @instance
                 */
                UpdateMessageRequest.prototype.recallDate = null;

                /**
                 * UpdateMessageRequest readDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} readDate
                 * @memberof im.turms.proto.UpdateMessageRequest
                 * @instance
                 */
                UpdateMessageRequest.prototype.readDate = null;

                /**
                 * Encodes the specified UpdateMessageRequest message. Does not implicitly {@link im.turms.proto.UpdateMessageRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateMessageRequest
                 * @static
                 * @param {im.turms.proto.IUpdateMessageRequest} message UpdateMessageRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateMessageRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.messageId != null && Object.hasOwnProperty.call(message, "messageId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.messageId);
                    if (message.isSystemMessage != null && Object.hasOwnProperty.call(message, "isSystemMessage"))
                        $root.google.protobuf.BoolValue.encode(message.isSystemMessage, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.text != null && Object.hasOwnProperty.call(message, "text"))
                        $root.google.protobuf.StringValue.encode(message.text, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.records != null && message.records.length)
                        for (var i = 0; i < message.records.length; ++i)
                            writer.uint32(/* id 4, wireType 2 =*/34).bytes(message.records[i]);
                    if (message.recallDate != null && Object.hasOwnProperty.call(message, "recallDate"))
                        $root.google.protobuf.Int64Value.encode(message.recallDate, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.readDate != null && Object.hasOwnProperty.call(message, "readDate"))
                        $root.google.protobuf.Int64Value.encode(message.readDate, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an UpdateMessageRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateMessageRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateMessageRequest} UpdateMessageRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateMessageRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateMessageRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.messageId = reader.int64().toString();
                            break;
                        case 2:
                            message.isSystemMessage = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.text = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            if (!(message.records && message.records.length))
                                message.records = [];
                            message.records.push(reader.bytes());
                            break;
                        case 5:
                            message.recallDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.readDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateMessageRequest;
            })();

            proto.UpdateTypingStatusRequest = (function() {

                /**
                 * Properties of an UpdateTypingStatusRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateTypingStatusRequest
                 * @property {im.turms.proto.ChatType|null} [chatType] UpdateTypingStatusRequest chatType
                 * @property {string|null} [toId] UpdateTypingStatusRequest toId
                 */

                /**
                 * Constructs a new UpdateTypingStatusRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateTypingStatusRequest.
                 * @implements IUpdateTypingStatusRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateTypingStatusRequest=} [properties] Properties to set
                 */
                function UpdateTypingStatusRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateTypingStatusRequest chatType.
                 * @member {im.turms.proto.ChatType} chatType
                 * @memberof im.turms.proto.UpdateTypingStatusRequest
                 * @instance
                 */
                UpdateTypingStatusRequest.prototype.chatType = 0;

                /**
                 * UpdateTypingStatusRequest toId.
                 * @member {string} toId
                 * @memberof im.turms.proto.UpdateTypingStatusRequest
                 * @instance
                 */
                UpdateTypingStatusRequest.prototype.toId = "0";

                /**
                 * Encodes the specified UpdateTypingStatusRequest message. Does not implicitly {@link im.turms.proto.UpdateTypingStatusRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateTypingStatusRequest
                 * @static
                 * @param {im.turms.proto.IUpdateTypingStatusRequest} message UpdateTypingStatusRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateTypingStatusRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.chatType != null && Object.hasOwnProperty.call(message, "chatType"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int32(message.chatType);
                    if (message.toId != null && Object.hasOwnProperty.call(message, "toId"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int64(message.toId);
                    return writer;
                };

                /**
                 * Decodes an UpdateTypingStatusRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateTypingStatusRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateTypingStatusRequest} UpdateTypingStatusRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateTypingStatusRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateTypingStatusRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.chatType = reader.int32();
                            break;
                        case 2:
                            message.toId = reader.int64().toString();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateTypingStatusRequest;
            })();

            proto.AckRequest = (function() {

                /**
                 * Properties of an AckRequest.
                 * @memberof im.turms.proto
                 * @interface IAckRequest
                 * @property {Array.<string>|null} [messagesIds] AckRequest messagesIds
                 */

                /**
                 * Constructs a new AckRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an AckRequest.
                 * @implements IAckRequest
                 * @constructor
                 * @param {im.turms.proto.IAckRequest=} [properties] Properties to set
                 */
                function AckRequest(properties) {
                    this.messagesIds = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * AckRequest messagesIds.
                 * @member {Array.<string>} messagesIds
                 * @memberof im.turms.proto.AckRequest
                 * @instance
                 */
                AckRequest.prototype.messagesIds = $util.emptyArray;

                /**
                 * Encodes the specified AckRequest message. Does not implicitly {@link im.turms.proto.AckRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.AckRequest
                 * @static
                 * @param {im.turms.proto.IAckRequest} message AckRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                AckRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.messagesIds != null && message.messagesIds.length) {
                        writer.uint32(/* id 1, wireType 2 =*/10).fork();
                        for (var i = 0; i < message.messagesIds.length; ++i)
                            writer.int64(message.messagesIds[i]);
                        writer.ldelim();
                    }
                    return writer;
                };

                /**
                 * Decodes an AckRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.AckRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.AckRequest} AckRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                AckRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.AckRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.messagesIds && message.messagesIds.length))
                                message.messagesIds = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.messagesIds.push(reader.int64().toString());
                            } else
                                message.messagesIds.push(reader.int64().toString());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return AckRequest;
            })();

            proto.TurmsRequest = (function() {

                /**
                 * Properties of a TurmsRequest.
                 * @memberof im.turms.proto
                 * @interface ITurmsRequest
                 * @property {google.protobuf.IInt64Value|null} [requestId] TurmsRequest requestId
                 * @property {im.turms.proto.IAckRequest|null} [ackRequest] TurmsRequest ackRequest
                 * @property {im.turms.proto.ICreateMessageRequest|null} [createMessageRequest] TurmsRequest createMessageRequest
                 * @property {im.turms.proto.IQueryMessageStatusesRequest|null} [queryMessageStatusesRequest] TurmsRequest queryMessageStatusesRequest
                 * @property {im.turms.proto.IQueryMessagesRequest|null} [queryMessagesRequest] TurmsRequest queryMessagesRequest
                 * @property {im.turms.proto.IQueryPendingMessagesWithTotalRequest|null} [queryPendingMessagesWithTotalRequest] TurmsRequest queryPendingMessagesWithTotalRequest
                 * @property {im.turms.proto.IUpdateMessageRequest|null} [updateMessageRequest] TurmsRequest updateMessageRequest
                 * @property {im.turms.proto.IUpdateTypingStatusRequest|null} [updateTypingStatusRequest] TurmsRequest updateTypingStatusRequest
                 * @property {im.turms.proto.IQueryUserGroupInvitationsRequest|null} [queryUserGroupInvitationsRequest] TurmsRequest queryUserGroupInvitationsRequest
                 * @property {im.turms.proto.IQueryUserProfileRequest|null} [queryUserProfileRequest] TurmsRequest queryUserProfileRequest
                 * @property {im.turms.proto.IQueryUsersIdsNearbyRequest|null} [queryUsersIdsNearbyRequest] TurmsRequest queryUsersIdsNearbyRequest
                 * @property {im.turms.proto.IQueryUsersInfosNearbyRequest|null} [queryUsersInfosNearbyRequest] TurmsRequest queryUsersInfosNearbyRequest
                 * @property {im.turms.proto.IQueryUsersOnlineStatusRequest|null} [queryUsersOnlineStatusRequest] TurmsRequest queryUsersOnlineStatusRequest
                 * @property {im.turms.proto.IUpdateUserLocationRequest|null} [updateUserLocationRequest] TurmsRequest updateUserLocationRequest
                 * @property {im.turms.proto.IUpdateUserOnlineStatusRequest|null} [updateUserOnlineStatusRequest] TurmsRequest updateUserOnlineStatusRequest
                 * @property {im.turms.proto.IUpdateUserRequest|null} [updateUserRequest] TurmsRequest updateUserRequest
                 * @property {im.turms.proto.ICreateFriendRequestRequest|null} [createFriendRequestRequest] TurmsRequest createFriendRequestRequest
                 * @property {im.turms.proto.ICreateRelationshipGroupRequest|null} [createRelationshipGroupRequest] TurmsRequest createRelationshipGroupRequest
                 * @property {im.turms.proto.ICreateRelationshipRequest|null} [createRelationshipRequest] TurmsRequest createRelationshipRequest
                 * @property {im.turms.proto.IDeleteRelationshipGroupRequest|null} [deleteRelationshipGroupRequest] TurmsRequest deleteRelationshipGroupRequest
                 * @property {im.turms.proto.IDeleteRelationshipRequest|null} [deleteRelationshipRequest] TurmsRequest deleteRelationshipRequest
                 * @property {im.turms.proto.IQueryFriendRequestsRequest|null} [queryFriendRequestsRequest] TurmsRequest queryFriendRequestsRequest
                 * @property {im.turms.proto.IQueryRelatedUsersIdsRequest|null} [queryRelatedUsersIdsRequest] TurmsRequest queryRelatedUsersIdsRequest
                 * @property {im.turms.proto.IQueryRelationshipGroupsRequest|null} [queryRelationshipGroupsRequest] TurmsRequest queryRelationshipGroupsRequest
                 * @property {im.turms.proto.IQueryRelationshipsRequest|null} [queryRelationshipsRequest] TurmsRequest queryRelationshipsRequest
                 * @property {im.turms.proto.IUpdateFriendRequestRequest|null} [updateFriendRequestRequest] TurmsRequest updateFriendRequestRequest
                 * @property {im.turms.proto.IUpdateRelationshipGroupRequest|null} [updateRelationshipGroupRequest] TurmsRequest updateRelationshipGroupRequest
                 * @property {im.turms.proto.IUpdateRelationshipRequest|null} [updateRelationshipRequest] TurmsRequest updateRelationshipRequest
                 * @property {im.turms.proto.ICreateGroupRequest|null} [createGroupRequest] TurmsRequest createGroupRequest
                 * @property {im.turms.proto.IDeleteGroupRequest|null} [deleteGroupRequest] TurmsRequest deleteGroupRequest
                 * @property {im.turms.proto.IQueryGroupRequest|null} [queryGroupRequest] TurmsRequest queryGroupRequest
                 * @property {im.turms.proto.IQueryJoinedGroupsIdsRequest|null} [queryJoinedGroupsIdsRequest] TurmsRequest queryJoinedGroupsIdsRequest
                 * @property {im.turms.proto.IQueryJoinedGroupsInfosRequest|null} [queryJoinedGroupsInfosRequest] TurmsRequest queryJoinedGroupsInfosRequest
                 * @property {im.turms.proto.IUpdateGroupRequest|null} [updateGroupRequest] TurmsRequest updateGroupRequest
                 * @property {im.turms.proto.ICreateGroupBlacklistedUserRequest|null} [createGroupBlacklistedUserRequest] TurmsRequest createGroupBlacklistedUserRequest
                 * @property {im.turms.proto.IDeleteGroupBlacklistedUserRequest|null} [deleteGroupBlacklistedUserRequest] TurmsRequest deleteGroupBlacklistedUserRequest
                 * @property {im.turms.proto.IQueryGroupBlacklistedUsersIdsRequest|null} [queryGroupBlacklistedUsersIdsRequest] TurmsRequest queryGroupBlacklistedUsersIdsRequest
                 * @property {im.turms.proto.IQueryGroupBlacklistedUsersInfosRequest|null} [queryGroupBlacklistedUsersInfosRequest] TurmsRequest queryGroupBlacklistedUsersInfosRequest
                 * @property {im.turms.proto.ICheckGroupJoinQuestionsAnswersRequest|null} [checkGroupJoinQuestionsAnswersRequest] TurmsRequest checkGroupJoinQuestionsAnswersRequest
                 * @property {im.turms.proto.ICreateGroupInvitationRequest|null} [createGroupInvitationRequest] TurmsRequest createGroupInvitationRequest
                 * @property {im.turms.proto.ICreateGroupJoinRequestRequest|null} [createGroupJoinRequestRequest] TurmsRequest createGroupJoinRequestRequest
                 * @property {im.turms.proto.ICreateGroupJoinQuestionRequest|null} [createGroupJoinQuestionRequest] TurmsRequest createGroupJoinQuestionRequest
                 * @property {im.turms.proto.IDeleteGroupInvitationRequest|null} [deleteGroupInvitationRequest] TurmsRequest deleteGroupInvitationRequest
                 * @property {im.turms.proto.IDeleteGroupJoinRequestRequest|null} [deleteGroupJoinRequestRequest] TurmsRequest deleteGroupJoinRequestRequest
                 * @property {im.turms.proto.IDeleteGroupJoinQuestionRequest|null} [deleteGroupJoinQuestionRequest] TurmsRequest deleteGroupJoinQuestionRequest
                 * @property {im.turms.proto.IQueryGroupInvitationsRequest|null} [queryGroupInvitationsRequest] TurmsRequest queryGroupInvitationsRequest
                 * @property {im.turms.proto.IQueryGroupJoinRequestsRequest|null} [queryGroupJoinRequestsRequest] TurmsRequest queryGroupJoinRequestsRequest
                 * @property {im.turms.proto.IQueryGroupJoinQuestionsRequest|null} [queryGroupJoinQuestionsRequest] TurmsRequest queryGroupJoinQuestionsRequest
                 * @property {im.turms.proto.IUpdateGroupJoinQuestionRequest|null} [updateGroupJoinQuestionRequest] TurmsRequest updateGroupJoinQuestionRequest
                 * @property {im.turms.proto.ICreateGroupMemberRequest|null} [createGroupMemberRequest] TurmsRequest createGroupMemberRequest
                 * @property {im.turms.proto.IDeleteGroupMemberRequest|null} [deleteGroupMemberRequest] TurmsRequest deleteGroupMemberRequest
                 * @property {im.turms.proto.IQueryGroupMembersRequest|null} [queryGroupMembersRequest] TurmsRequest queryGroupMembersRequest
                 * @property {im.turms.proto.IUpdateGroupMemberRequest|null} [updateGroupMemberRequest] TurmsRequest updateGroupMemberRequest
                 */

                /**
                 * Constructs a new TurmsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a TurmsRequest.
                 * @implements ITurmsRequest
                 * @constructor
                 * @param {im.turms.proto.ITurmsRequest=} [properties] Properties to set
                 */
                function TurmsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * TurmsRequest requestId.
                 * @member {google.protobuf.IInt64Value|null|undefined} requestId
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.requestId = null;

                /**
                 * TurmsRequest ackRequest.
                 * @member {im.turms.proto.IAckRequest|null|undefined} ackRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.ackRequest = null;

                /**
                 * TurmsRequest createMessageRequest.
                 * @member {im.turms.proto.ICreateMessageRequest|null|undefined} createMessageRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createMessageRequest = null;

                /**
                 * TurmsRequest queryMessageStatusesRequest.
                 * @member {im.turms.proto.IQueryMessageStatusesRequest|null|undefined} queryMessageStatusesRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryMessageStatusesRequest = null;

                /**
                 * TurmsRequest queryMessagesRequest.
                 * @member {im.turms.proto.IQueryMessagesRequest|null|undefined} queryMessagesRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryMessagesRequest = null;

                /**
                 * TurmsRequest queryPendingMessagesWithTotalRequest.
                 * @member {im.turms.proto.IQueryPendingMessagesWithTotalRequest|null|undefined} queryPendingMessagesWithTotalRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryPendingMessagesWithTotalRequest = null;

                /**
                 * TurmsRequest updateMessageRequest.
                 * @member {im.turms.proto.IUpdateMessageRequest|null|undefined} updateMessageRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateMessageRequest = null;

                /**
                 * TurmsRequest updateTypingStatusRequest.
                 * @member {im.turms.proto.IUpdateTypingStatusRequest|null|undefined} updateTypingStatusRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateTypingStatusRequest = null;

                /**
                 * TurmsRequest queryUserGroupInvitationsRequest.
                 * @member {im.turms.proto.IQueryUserGroupInvitationsRequest|null|undefined} queryUserGroupInvitationsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryUserGroupInvitationsRequest = null;

                /**
                 * TurmsRequest queryUserProfileRequest.
                 * @member {im.turms.proto.IQueryUserProfileRequest|null|undefined} queryUserProfileRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryUserProfileRequest = null;

                /**
                 * TurmsRequest queryUsersIdsNearbyRequest.
                 * @member {im.turms.proto.IQueryUsersIdsNearbyRequest|null|undefined} queryUsersIdsNearbyRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryUsersIdsNearbyRequest = null;

                /**
                 * TurmsRequest queryUsersInfosNearbyRequest.
                 * @member {im.turms.proto.IQueryUsersInfosNearbyRequest|null|undefined} queryUsersInfosNearbyRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryUsersInfosNearbyRequest = null;

                /**
                 * TurmsRequest queryUsersOnlineStatusRequest.
                 * @member {im.turms.proto.IQueryUsersOnlineStatusRequest|null|undefined} queryUsersOnlineStatusRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryUsersOnlineStatusRequest = null;

                /**
                 * TurmsRequest updateUserLocationRequest.
                 * @member {im.turms.proto.IUpdateUserLocationRequest|null|undefined} updateUserLocationRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateUserLocationRequest = null;

                /**
                 * TurmsRequest updateUserOnlineStatusRequest.
                 * @member {im.turms.proto.IUpdateUserOnlineStatusRequest|null|undefined} updateUserOnlineStatusRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateUserOnlineStatusRequest = null;

                /**
                 * TurmsRequest updateUserRequest.
                 * @member {im.turms.proto.IUpdateUserRequest|null|undefined} updateUserRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateUserRequest = null;

                /**
                 * TurmsRequest createFriendRequestRequest.
                 * @member {im.turms.proto.ICreateFriendRequestRequest|null|undefined} createFriendRequestRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createFriendRequestRequest = null;

                /**
                 * TurmsRequest createRelationshipGroupRequest.
                 * @member {im.turms.proto.ICreateRelationshipGroupRequest|null|undefined} createRelationshipGroupRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createRelationshipGroupRequest = null;

                /**
                 * TurmsRequest createRelationshipRequest.
                 * @member {im.turms.proto.ICreateRelationshipRequest|null|undefined} createRelationshipRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createRelationshipRequest = null;

                /**
                 * TurmsRequest deleteRelationshipGroupRequest.
                 * @member {im.turms.proto.IDeleteRelationshipGroupRequest|null|undefined} deleteRelationshipGroupRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.deleteRelationshipGroupRequest = null;

                /**
                 * TurmsRequest deleteRelationshipRequest.
                 * @member {im.turms.proto.IDeleteRelationshipRequest|null|undefined} deleteRelationshipRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.deleteRelationshipRequest = null;

                /**
                 * TurmsRequest queryFriendRequestsRequest.
                 * @member {im.turms.proto.IQueryFriendRequestsRequest|null|undefined} queryFriendRequestsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryFriendRequestsRequest = null;

                /**
                 * TurmsRequest queryRelatedUsersIdsRequest.
                 * @member {im.turms.proto.IQueryRelatedUsersIdsRequest|null|undefined} queryRelatedUsersIdsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryRelatedUsersIdsRequest = null;

                /**
                 * TurmsRequest queryRelationshipGroupsRequest.
                 * @member {im.turms.proto.IQueryRelationshipGroupsRequest|null|undefined} queryRelationshipGroupsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryRelationshipGroupsRequest = null;

                /**
                 * TurmsRequest queryRelationshipsRequest.
                 * @member {im.turms.proto.IQueryRelationshipsRequest|null|undefined} queryRelationshipsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryRelationshipsRequest = null;

                /**
                 * TurmsRequest updateFriendRequestRequest.
                 * @member {im.turms.proto.IUpdateFriendRequestRequest|null|undefined} updateFriendRequestRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateFriendRequestRequest = null;

                /**
                 * TurmsRequest updateRelationshipGroupRequest.
                 * @member {im.turms.proto.IUpdateRelationshipGroupRequest|null|undefined} updateRelationshipGroupRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateRelationshipGroupRequest = null;

                /**
                 * TurmsRequest updateRelationshipRequest.
                 * @member {im.turms.proto.IUpdateRelationshipRequest|null|undefined} updateRelationshipRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateRelationshipRequest = null;

                /**
                 * TurmsRequest createGroupRequest.
                 * @member {im.turms.proto.ICreateGroupRequest|null|undefined} createGroupRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createGroupRequest = null;

                /**
                 * TurmsRequest deleteGroupRequest.
                 * @member {im.turms.proto.IDeleteGroupRequest|null|undefined} deleteGroupRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.deleteGroupRequest = null;

                /**
                 * TurmsRequest queryGroupRequest.
                 * @member {im.turms.proto.IQueryGroupRequest|null|undefined} queryGroupRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryGroupRequest = null;

                /**
                 * TurmsRequest queryJoinedGroupsIdsRequest.
                 * @member {im.turms.proto.IQueryJoinedGroupsIdsRequest|null|undefined} queryJoinedGroupsIdsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryJoinedGroupsIdsRequest = null;

                /**
                 * TurmsRequest queryJoinedGroupsInfosRequest.
                 * @member {im.turms.proto.IQueryJoinedGroupsInfosRequest|null|undefined} queryJoinedGroupsInfosRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryJoinedGroupsInfosRequest = null;

                /**
                 * TurmsRequest updateGroupRequest.
                 * @member {im.turms.proto.IUpdateGroupRequest|null|undefined} updateGroupRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateGroupRequest = null;

                /**
                 * TurmsRequest createGroupBlacklistedUserRequest.
                 * @member {im.turms.proto.ICreateGroupBlacklistedUserRequest|null|undefined} createGroupBlacklistedUserRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createGroupBlacklistedUserRequest = null;

                /**
                 * TurmsRequest deleteGroupBlacklistedUserRequest.
                 * @member {im.turms.proto.IDeleteGroupBlacklistedUserRequest|null|undefined} deleteGroupBlacklistedUserRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.deleteGroupBlacklistedUserRequest = null;

                /**
                 * TurmsRequest queryGroupBlacklistedUsersIdsRequest.
                 * @member {im.turms.proto.IQueryGroupBlacklistedUsersIdsRequest|null|undefined} queryGroupBlacklistedUsersIdsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryGroupBlacklistedUsersIdsRequest = null;

                /**
                 * TurmsRequest queryGroupBlacklistedUsersInfosRequest.
                 * @member {im.turms.proto.IQueryGroupBlacklistedUsersInfosRequest|null|undefined} queryGroupBlacklistedUsersInfosRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryGroupBlacklistedUsersInfosRequest = null;

                /**
                 * TurmsRequest checkGroupJoinQuestionsAnswersRequest.
                 * @member {im.turms.proto.ICheckGroupJoinQuestionsAnswersRequest|null|undefined} checkGroupJoinQuestionsAnswersRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.checkGroupJoinQuestionsAnswersRequest = null;

                /**
                 * TurmsRequest createGroupInvitationRequest.
                 * @member {im.turms.proto.ICreateGroupInvitationRequest|null|undefined} createGroupInvitationRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createGroupInvitationRequest = null;

                /**
                 * TurmsRequest createGroupJoinRequestRequest.
                 * @member {im.turms.proto.ICreateGroupJoinRequestRequest|null|undefined} createGroupJoinRequestRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createGroupJoinRequestRequest = null;

                /**
                 * TurmsRequest createGroupJoinQuestionRequest.
                 * @member {im.turms.proto.ICreateGroupJoinQuestionRequest|null|undefined} createGroupJoinQuestionRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createGroupJoinQuestionRequest = null;

                /**
                 * TurmsRequest deleteGroupInvitationRequest.
                 * @member {im.turms.proto.IDeleteGroupInvitationRequest|null|undefined} deleteGroupInvitationRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.deleteGroupInvitationRequest = null;

                /**
                 * TurmsRequest deleteGroupJoinRequestRequest.
                 * @member {im.turms.proto.IDeleteGroupJoinRequestRequest|null|undefined} deleteGroupJoinRequestRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.deleteGroupJoinRequestRequest = null;

                /**
                 * TurmsRequest deleteGroupJoinQuestionRequest.
                 * @member {im.turms.proto.IDeleteGroupJoinQuestionRequest|null|undefined} deleteGroupJoinQuestionRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.deleteGroupJoinQuestionRequest = null;

                /**
                 * TurmsRequest queryGroupInvitationsRequest.
                 * @member {im.turms.proto.IQueryGroupInvitationsRequest|null|undefined} queryGroupInvitationsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryGroupInvitationsRequest = null;

                /**
                 * TurmsRequest queryGroupJoinRequestsRequest.
                 * @member {im.turms.proto.IQueryGroupJoinRequestsRequest|null|undefined} queryGroupJoinRequestsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryGroupJoinRequestsRequest = null;

                /**
                 * TurmsRequest queryGroupJoinQuestionsRequest.
                 * @member {im.turms.proto.IQueryGroupJoinQuestionsRequest|null|undefined} queryGroupJoinQuestionsRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryGroupJoinQuestionsRequest = null;

                /**
                 * TurmsRequest updateGroupJoinQuestionRequest.
                 * @member {im.turms.proto.IUpdateGroupJoinQuestionRequest|null|undefined} updateGroupJoinQuestionRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateGroupJoinQuestionRequest = null;

                /**
                 * TurmsRequest createGroupMemberRequest.
                 * @member {im.turms.proto.ICreateGroupMemberRequest|null|undefined} createGroupMemberRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.createGroupMemberRequest = null;

                /**
                 * TurmsRequest deleteGroupMemberRequest.
                 * @member {im.turms.proto.IDeleteGroupMemberRequest|null|undefined} deleteGroupMemberRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.deleteGroupMemberRequest = null;

                /**
                 * TurmsRequest queryGroupMembersRequest.
                 * @member {im.turms.proto.IQueryGroupMembersRequest|null|undefined} queryGroupMembersRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.queryGroupMembersRequest = null;

                /**
                 * TurmsRequest updateGroupMemberRequest.
                 * @member {im.turms.proto.IUpdateGroupMemberRequest|null|undefined} updateGroupMemberRequest
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                TurmsRequest.prototype.updateGroupMemberRequest = null;

                // OneOf field names bound to virtual getters and setters
                var $oneOfFields;

                /**
                 * TurmsRequest kind.
                 * @member {"ackRequest"|"createMessageRequest"|"queryMessageStatusesRequest"|"queryMessagesRequest"|"queryPendingMessagesWithTotalRequest"|"updateMessageRequest"|"updateTypingStatusRequest"|"queryUserGroupInvitationsRequest"|"queryUserProfileRequest"|"queryUsersIdsNearbyRequest"|"queryUsersInfosNearbyRequest"|"queryUsersOnlineStatusRequest"|"updateUserLocationRequest"|"updateUserOnlineStatusRequest"|"updateUserRequest"|"createFriendRequestRequest"|"createRelationshipGroupRequest"|"createRelationshipRequest"|"deleteRelationshipGroupRequest"|"deleteRelationshipRequest"|"queryFriendRequestsRequest"|"queryRelatedUsersIdsRequest"|"queryRelationshipGroupsRequest"|"queryRelationshipsRequest"|"updateFriendRequestRequest"|"updateRelationshipGroupRequest"|"updateRelationshipRequest"|"createGroupRequest"|"deleteGroupRequest"|"queryGroupRequest"|"queryJoinedGroupsIdsRequest"|"queryJoinedGroupsInfosRequest"|"updateGroupRequest"|"createGroupBlacklistedUserRequest"|"deleteGroupBlacklistedUserRequest"|"queryGroupBlacklistedUsersIdsRequest"|"queryGroupBlacklistedUsersInfosRequest"|"checkGroupJoinQuestionsAnswersRequest"|"createGroupInvitationRequest"|"createGroupJoinRequestRequest"|"createGroupJoinQuestionRequest"|"deleteGroupInvitationRequest"|"deleteGroupJoinRequestRequest"|"deleteGroupJoinQuestionRequest"|"queryGroupInvitationsRequest"|"queryGroupJoinRequestsRequest"|"queryGroupJoinQuestionsRequest"|"updateGroupJoinQuestionRequest"|"createGroupMemberRequest"|"deleteGroupMemberRequest"|"queryGroupMembersRequest"|"updateGroupMemberRequest"|undefined} kind
                 * @memberof im.turms.proto.TurmsRequest
                 * @instance
                 */
                Object.defineProperty(TurmsRequest.prototype, "kind", {
                    get: $util.oneOfGetter($oneOfFields = ["ackRequest", "createMessageRequest", "queryMessageStatusesRequest", "queryMessagesRequest", "queryPendingMessagesWithTotalRequest", "updateMessageRequest", "updateTypingStatusRequest", "queryUserGroupInvitationsRequest", "queryUserProfileRequest", "queryUsersIdsNearbyRequest", "queryUsersInfosNearbyRequest", "queryUsersOnlineStatusRequest", "updateUserLocationRequest", "updateUserOnlineStatusRequest", "updateUserRequest", "createFriendRequestRequest", "createRelationshipGroupRequest", "createRelationshipRequest", "deleteRelationshipGroupRequest", "deleteRelationshipRequest", "queryFriendRequestsRequest", "queryRelatedUsersIdsRequest", "queryRelationshipGroupsRequest", "queryRelationshipsRequest", "updateFriendRequestRequest", "updateRelationshipGroupRequest", "updateRelationshipRequest", "createGroupRequest", "deleteGroupRequest", "queryGroupRequest", "queryJoinedGroupsIdsRequest", "queryJoinedGroupsInfosRequest", "updateGroupRequest", "createGroupBlacklistedUserRequest", "deleteGroupBlacklistedUserRequest", "queryGroupBlacklistedUsersIdsRequest", "queryGroupBlacklistedUsersInfosRequest", "checkGroupJoinQuestionsAnswersRequest", "createGroupInvitationRequest", "createGroupJoinRequestRequest", "createGroupJoinQuestionRequest", "deleteGroupInvitationRequest", "deleteGroupJoinRequestRequest", "deleteGroupJoinQuestionRequest", "queryGroupInvitationsRequest", "queryGroupJoinRequestsRequest", "queryGroupJoinQuestionsRequest", "updateGroupJoinQuestionRequest", "createGroupMemberRequest", "deleteGroupMemberRequest", "queryGroupMembersRequest", "updateGroupMemberRequest"]),
                    set: $util.oneOfSetter($oneOfFields)
                });

                /**
                 * Encodes the specified TurmsRequest message. Does not implicitly {@link im.turms.proto.TurmsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.TurmsRequest
                 * @static
                 * @param {im.turms.proto.ITurmsRequest} message TurmsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                TurmsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.requestId != null && Object.hasOwnProperty.call(message, "requestId"))
                        $root.google.protobuf.Int64Value.encode(message.requestId, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.ackRequest != null && Object.hasOwnProperty.call(message, "ackRequest"))
                        $root.im.turms.proto.AckRequest.encode(message.ackRequest, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.createMessageRequest != null && Object.hasOwnProperty.call(message, "createMessageRequest"))
                        $root.im.turms.proto.CreateMessageRequest.encode(message.createMessageRequest, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();
                    if (message.queryMessageStatusesRequest != null && Object.hasOwnProperty.call(message, "queryMessageStatusesRequest"))
                        $root.im.turms.proto.QueryMessageStatusesRequest.encode(message.queryMessageStatusesRequest, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();
                    if (message.queryMessagesRequest != null && Object.hasOwnProperty.call(message, "queryMessagesRequest"))
                        $root.im.turms.proto.QueryMessagesRequest.encode(message.queryMessagesRequest, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();
                    if (message.queryPendingMessagesWithTotalRequest != null && Object.hasOwnProperty.call(message, "queryPendingMessagesWithTotalRequest"))
                        $root.im.turms.proto.QueryPendingMessagesWithTotalRequest.encode(message.queryPendingMessagesWithTotalRequest, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();
                    if (message.updateMessageRequest != null && Object.hasOwnProperty.call(message, "updateMessageRequest"))
                        $root.im.turms.proto.UpdateMessageRequest.encode(message.updateMessageRequest, writer.uint32(/* id 9, wireType 2 =*/74).fork()).ldelim();
                    if (message.updateTypingStatusRequest != null && Object.hasOwnProperty.call(message, "updateTypingStatusRequest"))
                        $root.im.turms.proto.UpdateTypingStatusRequest.encode(message.updateTypingStatusRequest, writer.uint32(/* id 10, wireType 2 =*/82).fork()).ldelim();
                    if (message.queryUserGroupInvitationsRequest != null && Object.hasOwnProperty.call(message, "queryUserGroupInvitationsRequest"))
                        $root.im.turms.proto.QueryUserGroupInvitationsRequest.encode(message.queryUserGroupInvitationsRequest, writer.uint32(/* id 100, wireType 2 =*/802).fork()).ldelim();
                    if (message.queryUserProfileRequest != null && Object.hasOwnProperty.call(message, "queryUserProfileRequest"))
                        $root.im.turms.proto.QueryUserProfileRequest.encode(message.queryUserProfileRequest, writer.uint32(/* id 101, wireType 2 =*/810).fork()).ldelim();
                    if (message.queryUsersIdsNearbyRequest != null && Object.hasOwnProperty.call(message, "queryUsersIdsNearbyRequest"))
                        $root.im.turms.proto.QueryUsersIdsNearbyRequest.encode(message.queryUsersIdsNearbyRequest, writer.uint32(/* id 102, wireType 2 =*/818).fork()).ldelim();
                    if (message.queryUsersInfosNearbyRequest != null && Object.hasOwnProperty.call(message, "queryUsersInfosNearbyRequest"))
                        $root.im.turms.proto.QueryUsersInfosNearbyRequest.encode(message.queryUsersInfosNearbyRequest, writer.uint32(/* id 103, wireType 2 =*/826).fork()).ldelim();
                    if (message.queryUsersOnlineStatusRequest != null && Object.hasOwnProperty.call(message, "queryUsersOnlineStatusRequest"))
                        $root.im.turms.proto.QueryUsersOnlineStatusRequest.encode(message.queryUsersOnlineStatusRequest, writer.uint32(/* id 104, wireType 2 =*/834).fork()).ldelim();
                    if (message.updateUserLocationRequest != null && Object.hasOwnProperty.call(message, "updateUserLocationRequest"))
                        $root.im.turms.proto.UpdateUserLocationRequest.encode(message.updateUserLocationRequest, writer.uint32(/* id 105, wireType 2 =*/842).fork()).ldelim();
                    if (message.updateUserOnlineStatusRequest != null && Object.hasOwnProperty.call(message, "updateUserOnlineStatusRequest"))
                        $root.im.turms.proto.UpdateUserOnlineStatusRequest.encode(message.updateUserOnlineStatusRequest, writer.uint32(/* id 106, wireType 2 =*/850).fork()).ldelim();
                    if (message.updateUserRequest != null && Object.hasOwnProperty.call(message, "updateUserRequest"))
                        $root.im.turms.proto.UpdateUserRequest.encode(message.updateUserRequest, writer.uint32(/* id 107, wireType 2 =*/858).fork()).ldelim();
                    if (message.createFriendRequestRequest != null && Object.hasOwnProperty.call(message, "createFriendRequestRequest"))
                        $root.im.turms.proto.CreateFriendRequestRequest.encode(message.createFriendRequestRequest, writer.uint32(/* id 200, wireType 2 =*/1602).fork()).ldelim();
                    if (message.createRelationshipGroupRequest != null && Object.hasOwnProperty.call(message, "createRelationshipGroupRequest"))
                        $root.im.turms.proto.CreateRelationshipGroupRequest.encode(message.createRelationshipGroupRequest, writer.uint32(/* id 201, wireType 2 =*/1610).fork()).ldelim();
                    if (message.createRelationshipRequest != null && Object.hasOwnProperty.call(message, "createRelationshipRequest"))
                        $root.im.turms.proto.CreateRelationshipRequest.encode(message.createRelationshipRequest, writer.uint32(/* id 202, wireType 2 =*/1618).fork()).ldelim();
                    if (message.deleteRelationshipGroupRequest != null && Object.hasOwnProperty.call(message, "deleteRelationshipGroupRequest"))
                        $root.im.turms.proto.DeleteRelationshipGroupRequest.encode(message.deleteRelationshipGroupRequest, writer.uint32(/* id 203, wireType 2 =*/1626).fork()).ldelim();
                    if (message.deleteRelationshipRequest != null && Object.hasOwnProperty.call(message, "deleteRelationshipRequest"))
                        $root.im.turms.proto.DeleteRelationshipRequest.encode(message.deleteRelationshipRequest, writer.uint32(/* id 204, wireType 2 =*/1634).fork()).ldelim();
                    if (message.queryFriendRequestsRequest != null && Object.hasOwnProperty.call(message, "queryFriendRequestsRequest"))
                        $root.im.turms.proto.QueryFriendRequestsRequest.encode(message.queryFriendRequestsRequest, writer.uint32(/* id 205, wireType 2 =*/1642).fork()).ldelim();
                    if (message.queryRelatedUsersIdsRequest != null && Object.hasOwnProperty.call(message, "queryRelatedUsersIdsRequest"))
                        $root.im.turms.proto.QueryRelatedUsersIdsRequest.encode(message.queryRelatedUsersIdsRequest, writer.uint32(/* id 206, wireType 2 =*/1650).fork()).ldelim();
                    if (message.queryRelationshipGroupsRequest != null && Object.hasOwnProperty.call(message, "queryRelationshipGroupsRequest"))
                        $root.im.turms.proto.QueryRelationshipGroupsRequest.encode(message.queryRelationshipGroupsRequest, writer.uint32(/* id 207, wireType 2 =*/1658).fork()).ldelim();
                    if (message.queryRelationshipsRequest != null && Object.hasOwnProperty.call(message, "queryRelationshipsRequest"))
                        $root.im.turms.proto.QueryRelationshipsRequest.encode(message.queryRelationshipsRequest, writer.uint32(/* id 208, wireType 2 =*/1666).fork()).ldelim();
                    if (message.updateFriendRequestRequest != null && Object.hasOwnProperty.call(message, "updateFriendRequestRequest"))
                        $root.im.turms.proto.UpdateFriendRequestRequest.encode(message.updateFriendRequestRequest, writer.uint32(/* id 209, wireType 2 =*/1674).fork()).ldelim();
                    if (message.updateRelationshipGroupRequest != null && Object.hasOwnProperty.call(message, "updateRelationshipGroupRequest"))
                        $root.im.turms.proto.UpdateRelationshipGroupRequest.encode(message.updateRelationshipGroupRequest, writer.uint32(/* id 210, wireType 2 =*/1682).fork()).ldelim();
                    if (message.updateRelationshipRequest != null && Object.hasOwnProperty.call(message, "updateRelationshipRequest"))
                        $root.im.turms.proto.UpdateRelationshipRequest.encode(message.updateRelationshipRequest, writer.uint32(/* id 211, wireType 2 =*/1690).fork()).ldelim();
                    if (message.createGroupRequest != null && Object.hasOwnProperty.call(message, "createGroupRequest"))
                        $root.im.turms.proto.CreateGroupRequest.encode(message.createGroupRequest, writer.uint32(/* id 300, wireType 2 =*/2402).fork()).ldelim();
                    if (message.deleteGroupRequest != null && Object.hasOwnProperty.call(message, "deleteGroupRequest"))
                        $root.im.turms.proto.DeleteGroupRequest.encode(message.deleteGroupRequest, writer.uint32(/* id 301, wireType 2 =*/2410).fork()).ldelim();
                    if (message.queryGroupRequest != null && Object.hasOwnProperty.call(message, "queryGroupRequest"))
                        $root.im.turms.proto.QueryGroupRequest.encode(message.queryGroupRequest, writer.uint32(/* id 302, wireType 2 =*/2418).fork()).ldelim();
                    if (message.queryJoinedGroupsIdsRequest != null && Object.hasOwnProperty.call(message, "queryJoinedGroupsIdsRequest"))
                        $root.im.turms.proto.QueryJoinedGroupsIdsRequest.encode(message.queryJoinedGroupsIdsRequest, writer.uint32(/* id 303, wireType 2 =*/2426).fork()).ldelim();
                    if (message.queryJoinedGroupsInfosRequest != null && Object.hasOwnProperty.call(message, "queryJoinedGroupsInfosRequest"))
                        $root.im.turms.proto.QueryJoinedGroupsInfosRequest.encode(message.queryJoinedGroupsInfosRequest, writer.uint32(/* id 304, wireType 2 =*/2434).fork()).ldelim();
                    if (message.updateGroupRequest != null && Object.hasOwnProperty.call(message, "updateGroupRequest"))
                        $root.im.turms.proto.UpdateGroupRequest.encode(message.updateGroupRequest, writer.uint32(/* id 305, wireType 2 =*/2442).fork()).ldelim();
                    if (message.createGroupBlacklistedUserRequest != null && Object.hasOwnProperty.call(message, "createGroupBlacklistedUserRequest"))
                        $root.im.turms.proto.CreateGroupBlacklistedUserRequest.encode(message.createGroupBlacklistedUserRequest, writer.uint32(/* id 400, wireType 2 =*/3202).fork()).ldelim();
                    if (message.deleteGroupBlacklistedUserRequest != null && Object.hasOwnProperty.call(message, "deleteGroupBlacklistedUserRequest"))
                        $root.im.turms.proto.DeleteGroupBlacklistedUserRequest.encode(message.deleteGroupBlacklistedUserRequest, writer.uint32(/* id 401, wireType 2 =*/3210).fork()).ldelim();
                    if (message.queryGroupBlacklistedUsersIdsRequest != null && Object.hasOwnProperty.call(message, "queryGroupBlacklistedUsersIdsRequest"))
                        $root.im.turms.proto.QueryGroupBlacklistedUsersIdsRequest.encode(message.queryGroupBlacklistedUsersIdsRequest, writer.uint32(/* id 402, wireType 2 =*/3218).fork()).ldelim();
                    if (message.queryGroupBlacklistedUsersInfosRequest != null && Object.hasOwnProperty.call(message, "queryGroupBlacklistedUsersInfosRequest"))
                        $root.im.turms.proto.QueryGroupBlacklistedUsersInfosRequest.encode(message.queryGroupBlacklistedUsersInfosRequest, writer.uint32(/* id 403, wireType 2 =*/3226).fork()).ldelim();
                    if (message.checkGroupJoinQuestionsAnswersRequest != null && Object.hasOwnProperty.call(message, "checkGroupJoinQuestionsAnswersRequest"))
                        $root.im.turms.proto.CheckGroupJoinQuestionsAnswersRequest.encode(message.checkGroupJoinQuestionsAnswersRequest, writer.uint32(/* id 500, wireType 2 =*/4002).fork()).ldelim();
                    if (message.createGroupInvitationRequest != null && Object.hasOwnProperty.call(message, "createGroupInvitationRequest"))
                        $root.im.turms.proto.CreateGroupInvitationRequest.encode(message.createGroupInvitationRequest, writer.uint32(/* id 501, wireType 2 =*/4010).fork()).ldelim();
                    if (message.createGroupJoinRequestRequest != null && Object.hasOwnProperty.call(message, "createGroupJoinRequestRequest"))
                        $root.im.turms.proto.CreateGroupJoinRequestRequest.encode(message.createGroupJoinRequestRequest, writer.uint32(/* id 502, wireType 2 =*/4018).fork()).ldelim();
                    if (message.createGroupJoinQuestionRequest != null && Object.hasOwnProperty.call(message, "createGroupJoinQuestionRequest"))
                        $root.im.turms.proto.CreateGroupJoinQuestionRequest.encode(message.createGroupJoinQuestionRequest, writer.uint32(/* id 503, wireType 2 =*/4026).fork()).ldelim();
                    if (message.deleteGroupInvitationRequest != null && Object.hasOwnProperty.call(message, "deleteGroupInvitationRequest"))
                        $root.im.turms.proto.DeleteGroupInvitationRequest.encode(message.deleteGroupInvitationRequest, writer.uint32(/* id 504, wireType 2 =*/4034).fork()).ldelim();
                    if (message.deleteGroupJoinRequestRequest != null && Object.hasOwnProperty.call(message, "deleteGroupJoinRequestRequest"))
                        $root.im.turms.proto.DeleteGroupJoinRequestRequest.encode(message.deleteGroupJoinRequestRequest, writer.uint32(/* id 505, wireType 2 =*/4042).fork()).ldelim();
                    if (message.deleteGroupJoinQuestionRequest != null && Object.hasOwnProperty.call(message, "deleteGroupJoinQuestionRequest"))
                        $root.im.turms.proto.DeleteGroupJoinQuestionRequest.encode(message.deleteGroupJoinQuestionRequest, writer.uint32(/* id 506, wireType 2 =*/4050).fork()).ldelim();
                    if (message.queryGroupInvitationsRequest != null && Object.hasOwnProperty.call(message, "queryGroupInvitationsRequest"))
                        $root.im.turms.proto.QueryGroupInvitationsRequest.encode(message.queryGroupInvitationsRequest, writer.uint32(/* id 507, wireType 2 =*/4058).fork()).ldelim();
                    if (message.queryGroupJoinRequestsRequest != null && Object.hasOwnProperty.call(message, "queryGroupJoinRequestsRequest"))
                        $root.im.turms.proto.QueryGroupJoinRequestsRequest.encode(message.queryGroupJoinRequestsRequest, writer.uint32(/* id 508, wireType 2 =*/4066).fork()).ldelim();
                    if (message.queryGroupJoinQuestionsRequest != null && Object.hasOwnProperty.call(message, "queryGroupJoinQuestionsRequest"))
                        $root.im.turms.proto.QueryGroupJoinQuestionsRequest.encode(message.queryGroupJoinQuestionsRequest, writer.uint32(/* id 509, wireType 2 =*/4074).fork()).ldelim();
                    if (message.updateGroupJoinQuestionRequest != null && Object.hasOwnProperty.call(message, "updateGroupJoinQuestionRequest"))
                        $root.im.turms.proto.UpdateGroupJoinQuestionRequest.encode(message.updateGroupJoinQuestionRequest, writer.uint32(/* id 510, wireType 2 =*/4082).fork()).ldelim();
                    if (message.createGroupMemberRequest != null && Object.hasOwnProperty.call(message, "createGroupMemberRequest"))
                        $root.im.turms.proto.CreateGroupMemberRequest.encode(message.createGroupMemberRequest, writer.uint32(/* id 600, wireType 2 =*/4802).fork()).ldelim();
                    if (message.deleteGroupMemberRequest != null && Object.hasOwnProperty.call(message, "deleteGroupMemberRequest"))
                        $root.im.turms.proto.DeleteGroupMemberRequest.encode(message.deleteGroupMemberRequest, writer.uint32(/* id 601, wireType 2 =*/4810).fork()).ldelim();
                    if (message.queryGroupMembersRequest != null && Object.hasOwnProperty.call(message, "queryGroupMembersRequest"))
                        $root.im.turms.proto.QueryGroupMembersRequest.encode(message.queryGroupMembersRequest, writer.uint32(/* id 602, wireType 2 =*/4818).fork()).ldelim();
                    if (message.updateGroupMemberRequest != null && Object.hasOwnProperty.call(message, "updateGroupMemberRequest"))
                        $root.im.turms.proto.UpdateGroupMemberRequest.encode(message.updateGroupMemberRequest, writer.uint32(/* id 603, wireType 2 =*/4826).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a TurmsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.TurmsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.TurmsRequest} TurmsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                TurmsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.TurmsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.requestId = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.ackRequest = $root.im.turms.proto.AckRequest.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.createMessageRequest = $root.im.turms.proto.CreateMessageRequest.decode(reader, reader.uint32());
                            break;
                        case 6:
                            message.queryMessageStatusesRequest = $root.im.turms.proto.QueryMessageStatusesRequest.decode(reader, reader.uint32());
                            break;
                        case 7:
                            message.queryMessagesRequest = $root.im.turms.proto.QueryMessagesRequest.decode(reader, reader.uint32());
                            break;
                        case 8:
                            message.queryPendingMessagesWithTotalRequest = $root.im.turms.proto.QueryPendingMessagesWithTotalRequest.decode(reader, reader.uint32());
                            break;
                        case 9:
                            message.updateMessageRequest = $root.im.turms.proto.UpdateMessageRequest.decode(reader, reader.uint32());
                            break;
                        case 10:
                            message.updateTypingStatusRequest = $root.im.turms.proto.UpdateTypingStatusRequest.decode(reader, reader.uint32());
                            break;
                        case 100:
                            message.queryUserGroupInvitationsRequest = $root.im.turms.proto.QueryUserGroupInvitationsRequest.decode(reader, reader.uint32());
                            break;
                        case 101:
                            message.queryUserProfileRequest = $root.im.turms.proto.QueryUserProfileRequest.decode(reader, reader.uint32());
                            break;
                        case 102:
                            message.queryUsersIdsNearbyRequest = $root.im.turms.proto.QueryUsersIdsNearbyRequest.decode(reader, reader.uint32());
                            break;
                        case 103:
                            message.queryUsersInfosNearbyRequest = $root.im.turms.proto.QueryUsersInfosNearbyRequest.decode(reader, reader.uint32());
                            break;
                        case 104:
                            message.queryUsersOnlineStatusRequest = $root.im.turms.proto.QueryUsersOnlineStatusRequest.decode(reader, reader.uint32());
                            break;
                        case 105:
                            message.updateUserLocationRequest = $root.im.turms.proto.UpdateUserLocationRequest.decode(reader, reader.uint32());
                            break;
                        case 106:
                            message.updateUserOnlineStatusRequest = $root.im.turms.proto.UpdateUserOnlineStatusRequest.decode(reader, reader.uint32());
                            break;
                        case 107:
                            message.updateUserRequest = $root.im.turms.proto.UpdateUserRequest.decode(reader, reader.uint32());
                            break;
                        case 200:
                            message.createFriendRequestRequest = $root.im.turms.proto.CreateFriendRequestRequest.decode(reader, reader.uint32());
                            break;
                        case 201:
                            message.createRelationshipGroupRequest = $root.im.turms.proto.CreateRelationshipGroupRequest.decode(reader, reader.uint32());
                            break;
                        case 202:
                            message.createRelationshipRequest = $root.im.turms.proto.CreateRelationshipRequest.decode(reader, reader.uint32());
                            break;
                        case 203:
                            message.deleteRelationshipGroupRequest = $root.im.turms.proto.DeleteRelationshipGroupRequest.decode(reader, reader.uint32());
                            break;
                        case 204:
                            message.deleteRelationshipRequest = $root.im.turms.proto.DeleteRelationshipRequest.decode(reader, reader.uint32());
                            break;
                        case 205:
                            message.queryFriendRequestsRequest = $root.im.turms.proto.QueryFriendRequestsRequest.decode(reader, reader.uint32());
                            break;
                        case 206:
                            message.queryRelatedUsersIdsRequest = $root.im.turms.proto.QueryRelatedUsersIdsRequest.decode(reader, reader.uint32());
                            break;
                        case 207:
                            message.queryRelationshipGroupsRequest = $root.im.turms.proto.QueryRelationshipGroupsRequest.decode(reader, reader.uint32());
                            break;
                        case 208:
                            message.queryRelationshipsRequest = $root.im.turms.proto.QueryRelationshipsRequest.decode(reader, reader.uint32());
                            break;
                        case 209:
                            message.updateFriendRequestRequest = $root.im.turms.proto.UpdateFriendRequestRequest.decode(reader, reader.uint32());
                            break;
                        case 210:
                            message.updateRelationshipGroupRequest = $root.im.turms.proto.UpdateRelationshipGroupRequest.decode(reader, reader.uint32());
                            break;
                        case 211:
                            message.updateRelationshipRequest = $root.im.turms.proto.UpdateRelationshipRequest.decode(reader, reader.uint32());
                            break;
                        case 300:
                            message.createGroupRequest = $root.im.turms.proto.CreateGroupRequest.decode(reader, reader.uint32());
                            break;
                        case 301:
                            message.deleteGroupRequest = $root.im.turms.proto.DeleteGroupRequest.decode(reader, reader.uint32());
                            break;
                        case 302:
                            message.queryGroupRequest = $root.im.turms.proto.QueryGroupRequest.decode(reader, reader.uint32());
                            break;
                        case 303:
                            message.queryJoinedGroupsIdsRequest = $root.im.turms.proto.QueryJoinedGroupsIdsRequest.decode(reader, reader.uint32());
                            break;
                        case 304:
                            message.queryJoinedGroupsInfosRequest = $root.im.turms.proto.QueryJoinedGroupsInfosRequest.decode(reader, reader.uint32());
                            break;
                        case 305:
                            message.updateGroupRequest = $root.im.turms.proto.UpdateGroupRequest.decode(reader, reader.uint32());
                            break;
                        case 400:
                            message.createGroupBlacklistedUserRequest = $root.im.turms.proto.CreateGroupBlacklistedUserRequest.decode(reader, reader.uint32());
                            break;
                        case 401:
                            message.deleteGroupBlacklistedUserRequest = $root.im.turms.proto.DeleteGroupBlacklistedUserRequest.decode(reader, reader.uint32());
                            break;
                        case 402:
                            message.queryGroupBlacklistedUsersIdsRequest = $root.im.turms.proto.QueryGroupBlacklistedUsersIdsRequest.decode(reader, reader.uint32());
                            break;
                        case 403:
                            message.queryGroupBlacklistedUsersInfosRequest = $root.im.turms.proto.QueryGroupBlacklistedUsersInfosRequest.decode(reader, reader.uint32());
                            break;
                        case 500:
                            message.checkGroupJoinQuestionsAnswersRequest = $root.im.turms.proto.CheckGroupJoinQuestionsAnswersRequest.decode(reader, reader.uint32());
                            break;
                        case 501:
                            message.createGroupInvitationRequest = $root.im.turms.proto.CreateGroupInvitationRequest.decode(reader, reader.uint32());
                            break;
                        case 502:
                            message.createGroupJoinRequestRequest = $root.im.turms.proto.CreateGroupJoinRequestRequest.decode(reader, reader.uint32());
                            break;
                        case 503:
                            message.createGroupJoinQuestionRequest = $root.im.turms.proto.CreateGroupJoinQuestionRequest.decode(reader, reader.uint32());
                            break;
                        case 504:
                            message.deleteGroupInvitationRequest = $root.im.turms.proto.DeleteGroupInvitationRequest.decode(reader, reader.uint32());
                            break;
                        case 505:
                            message.deleteGroupJoinRequestRequest = $root.im.turms.proto.DeleteGroupJoinRequestRequest.decode(reader, reader.uint32());
                            break;
                        case 506:
                            message.deleteGroupJoinQuestionRequest = $root.im.turms.proto.DeleteGroupJoinQuestionRequest.decode(reader, reader.uint32());
                            break;
                        case 507:
                            message.queryGroupInvitationsRequest = $root.im.turms.proto.QueryGroupInvitationsRequest.decode(reader, reader.uint32());
                            break;
                        case 508:
                            message.queryGroupJoinRequestsRequest = $root.im.turms.proto.QueryGroupJoinRequestsRequest.decode(reader, reader.uint32());
                            break;
                        case 509:
                            message.queryGroupJoinQuestionsRequest = $root.im.turms.proto.QueryGroupJoinQuestionsRequest.decode(reader, reader.uint32());
                            break;
                        case 510:
                            message.updateGroupJoinQuestionRequest = $root.im.turms.proto.UpdateGroupJoinQuestionRequest.decode(reader, reader.uint32());
                            break;
                        case 600:
                            message.createGroupMemberRequest = $root.im.turms.proto.CreateGroupMemberRequest.decode(reader, reader.uint32());
                            break;
                        case 601:
                            message.deleteGroupMemberRequest = $root.im.turms.proto.DeleteGroupMemberRequest.decode(reader, reader.uint32());
                            break;
                        case 602:
                            message.queryGroupMembersRequest = $root.im.turms.proto.QueryGroupMembersRequest.decode(reader, reader.uint32());
                            break;
                        case 603:
                            message.updateGroupMemberRequest = $root.im.turms.proto.UpdateGroupMemberRequest.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return TurmsRequest;
            })();

            proto.QueryUserGroupInvitationsRequest = (function() {

                /**
                 * Properties of a QueryUserGroupInvitationsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryUserGroupInvitationsRequest
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryUserGroupInvitationsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryUserGroupInvitationsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryUserGroupInvitationsRequest.
                 * @implements IQueryUserGroupInvitationsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryUserGroupInvitationsRequest=} [properties] Properties to set
                 */
                function QueryUserGroupInvitationsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryUserGroupInvitationsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryUserGroupInvitationsRequest
                 * @instance
                 */
                QueryUserGroupInvitationsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryUserGroupInvitationsRequest message. Does not implicitly {@link im.turms.proto.QueryUserGroupInvitationsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryUserGroupInvitationsRequest
                 * @static
                 * @param {im.turms.proto.IQueryUserGroupInvitationsRequest} message QueryUserGroupInvitationsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryUserGroupInvitationsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryUserGroupInvitationsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryUserGroupInvitationsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryUserGroupInvitationsRequest} QueryUserGroupInvitationsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryUserGroupInvitationsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryUserGroupInvitationsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryUserGroupInvitationsRequest;
            })();

            proto.QueryUserProfileRequest = (function() {

                /**
                 * Properties of a QueryUserProfileRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryUserProfileRequest
                 * @property {string|null} [userId] QueryUserProfileRequest userId
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryUserProfileRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryUserProfileRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryUserProfileRequest.
                 * @implements IQueryUserProfileRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryUserProfileRequest=} [properties] Properties to set
                 */
                function QueryUserProfileRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryUserProfileRequest userId.
                 * @member {string} userId
                 * @memberof im.turms.proto.QueryUserProfileRequest
                 * @instance
                 */
                QueryUserProfileRequest.prototype.userId = "0";

                /**
                 * QueryUserProfileRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryUserProfileRequest
                 * @instance
                 */
                QueryUserProfileRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryUserProfileRequest message. Does not implicitly {@link im.turms.proto.QueryUserProfileRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryUserProfileRequest
                 * @static
                 * @param {im.turms.proto.IQueryUserProfileRequest} message QueryUserProfileRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryUserProfileRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userId != null && Object.hasOwnProperty.call(message, "userId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.userId);
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryUserProfileRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryUserProfileRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryUserProfileRequest} QueryUserProfileRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryUserProfileRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryUserProfileRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.userId = reader.int64().toString();
                            break;
                        case 2:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryUserProfileRequest;
            })();

            proto.QueryUsersIdsNearbyRequest = (function() {

                /**
                 * Properties of a QueryUsersIdsNearbyRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryUsersIdsNearbyRequest
                 * @property {number|null} [latitude] QueryUsersIdsNearbyRequest latitude
                 * @property {number|null} [longitude] QueryUsersIdsNearbyRequest longitude
                 * @property {google.protobuf.IFloatValue|null} [distance] QueryUsersIdsNearbyRequest distance
                 * @property {google.protobuf.IInt32Value|null} [maxNumber] QueryUsersIdsNearbyRequest maxNumber
                 */

                /**
                 * Constructs a new QueryUsersIdsNearbyRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryUsersIdsNearbyRequest.
                 * @implements IQueryUsersIdsNearbyRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryUsersIdsNearbyRequest=} [properties] Properties to set
                 */
                function QueryUsersIdsNearbyRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryUsersIdsNearbyRequest latitude.
                 * @member {number} latitude
                 * @memberof im.turms.proto.QueryUsersIdsNearbyRequest
                 * @instance
                 */
                QueryUsersIdsNearbyRequest.prototype.latitude = 0;

                /**
                 * QueryUsersIdsNearbyRequest longitude.
                 * @member {number} longitude
                 * @memberof im.turms.proto.QueryUsersIdsNearbyRequest
                 * @instance
                 */
                QueryUsersIdsNearbyRequest.prototype.longitude = 0;

                /**
                 * QueryUsersIdsNearbyRequest distance.
                 * @member {google.protobuf.IFloatValue|null|undefined} distance
                 * @memberof im.turms.proto.QueryUsersIdsNearbyRequest
                 * @instance
                 */
                QueryUsersIdsNearbyRequest.prototype.distance = null;

                /**
                 * QueryUsersIdsNearbyRequest maxNumber.
                 * @member {google.protobuf.IInt32Value|null|undefined} maxNumber
                 * @memberof im.turms.proto.QueryUsersIdsNearbyRequest
                 * @instance
                 */
                QueryUsersIdsNearbyRequest.prototype.maxNumber = null;

                /**
                 * Encodes the specified QueryUsersIdsNearbyRequest message. Does not implicitly {@link im.turms.proto.QueryUsersIdsNearbyRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryUsersIdsNearbyRequest
                 * @static
                 * @param {im.turms.proto.IQueryUsersIdsNearbyRequest} message QueryUsersIdsNearbyRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryUsersIdsNearbyRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.latitude != null && Object.hasOwnProperty.call(message, "latitude"))
                        writer.uint32(/* id 1, wireType 5 =*/13).float(message.latitude);
                    if (message.longitude != null && Object.hasOwnProperty.call(message, "longitude"))
                        writer.uint32(/* id 2, wireType 5 =*/21).float(message.longitude);
                    if (message.distance != null && Object.hasOwnProperty.call(message, "distance"))
                        $root.google.protobuf.FloatValue.encode(message.distance, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.maxNumber != null && Object.hasOwnProperty.call(message, "maxNumber"))
                        $root.google.protobuf.Int32Value.encode(message.maxNumber, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryUsersIdsNearbyRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryUsersIdsNearbyRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryUsersIdsNearbyRequest} QueryUsersIdsNearbyRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryUsersIdsNearbyRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryUsersIdsNearbyRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.latitude = reader.float();
                            break;
                        case 2:
                            message.longitude = reader.float();
                            break;
                        case 3:
                            message.distance = $root.google.protobuf.FloatValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.maxNumber = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryUsersIdsNearbyRequest;
            })();

            proto.QueryUsersInfosNearbyRequest = (function() {

                /**
                 * Properties of a QueryUsersInfosNearbyRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryUsersInfosNearbyRequest
                 * @property {number|null} [latitude] QueryUsersInfosNearbyRequest latitude
                 * @property {number|null} [longitude] QueryUsersInfosNearbyRequest longitude
                 * @property {google.protobuf.IFloatValue|null} [distance] QueryUsersInfosNearbyRequest distance
                 * @property {google.protobuf.IUInt32Value|null} [maxNumber] QueryUsersInfosNearbyRequest maxNumber
                 */

                /**
                 * Constructs a new QueryUsersInfosNearbyRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryUsersInfosNearbyRequest.
                 * @implements IQueryUsersInfosNearbyRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryUsersInfosNearbyRequest=} [properties] Properties to set
                 */
                function QueryUsersInfosNearbyRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryUsersInfosNearbyRequest latitude.
                 * @member {number} latitude
                 * @memberof im.turms.proto.QueryUsersInfosNearbyRequest
                 * @instance
                 */
                QueryUsersInfosNearbyRequest.prototype.latitude = 0;

                /**
                 * QueryUsersInfosNearbyRequest longitude.
                 * @member {number} longitude
                 * @memberof im.turms.proto.QueryUsersInfosNearbyRequest
                 * @instance
                 */
                QueryUsersInfosNearbyRequest.prototype.longitude = 0;

                /**
                 * QueryUsersInfosNearbyRequest distance.
                 * @member {google.protobuf.IFloatValue|null|undefined} distance
                 * @memberof im.turms.proto.QueryUsersInfosNearbyRequest
                 * @instance
                 */
                QueryUsersInfosNearbyRequest.prototype.distance = null;

                /**
                 * QueryUsersInfosNearbyRequest maxNumber.
                 * @member {google.protobuf.IUInt32Value|null|undefined} maxNumber
                 * @memberof im.turms.proto.QueryUsersInfosNearbyRequest
                 * @instance
                 */
                QueryUsersInfosNearbyRequest.prototype.maxNumber = null;

                /**
                 * Encodes the specified QueryUsersInfosNearbyRequest message. Does not implicitly {@link im.turms.proto.QueryUsersInfosNearbyRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryUsersInfosNearbyRequest
                 * @static
                 * @param {im.turms.proto.IQueryUsersInfosNearbyRequest} message QueryUsersInfosNearbyRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryUsersInfosNearbyRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.latitude != null && Object.hasOwnProperty.call(message, "latitude"))
                        writer.uint32(/* id 1, wireType 5 =*/13).float(message.latitude);
                    if (message.longitude != null && Object.hasOwnProperty.call(message, "longitude"))
                        writer.uint32(/* id 2, wireType 5 =*/21).float(message.longitude);
                    if (message.distance != null && Object.hasOwnProperty.call(message, "distance"))
                        $root.google.protobuf.FloatValue.encode(message.distance, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.maxNumber != null && Object.hasOwnProperty.call(message, "maxNumber"))
                        $root.google.protobuf.UInt32Value.encode(message.maxNumber, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryUsersInfosNearbyRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryUsersInfosNearbyRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryUsersInfosNearbyRequest} QueryUsersInfosNearbyRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryUsersInfosNearbyRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryUsersInfosNearbyRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.latitude = reader.float();
                            break;
                        case 2:
                            message.longitude = reader.float();
                            break;
                        case 3:
                            message.distance = $root.google.protobuf.FloatValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.maxNumber = $root.google.protobuf.UInt32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryUsersInfosNearbyRequest;
            })();

            proto.QueryUsersOnlineStatusRequest = (function() {

                /**
                 * Properties of a QueryUsersOnlineStatusRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryUsersOnlineStatusRequest
                 * @property {Array.<string>|null} [usersIds] QueryUsersOnlineStatusRequest usersIds
                 */

                /**
                 * Constructs a new QueryUsersOnlineStatusRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryUsersOnlineStatusRequest.
                 * @implements IQueryUsersOnlineStatusRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryUsersOnlineStatusRequest=} [properties] Properties to set
                 */
                function QueryUsersOnlineStatusRequest(properties) {
                    this.usersIds = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryUsersOnlineStatusRequest usersIds.
                 * @member {Array.<string>} usersIds
                 * @memberof im.turms.proto.QueryUsersOnlineStatusRequest
                 * @instance
                 */
                QueryUsersOnlineStatusRequest.prototype.usersIds = $util.emptyArray;

                /**
                 * Encodes the specified QueryUsersOnlineStatusRequest message. Does not implicitly {@link im.turms.proto.QueryUsersOnlineStatusRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryUsersOnlineStatusRequest
                 * @static
                 * @param {im.turms.proto.IQueryUsersOnlineStatusRequest} message QueryUsersOnlineStatusRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryUsersOnlineStatusRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.usersIds != null && message.usersIds.length) {
                        writer.uint32(/* id 1, wireType 2 =*/10).fork();
                        for (var i = 0; i < message.usersIds.length; ++i)
                            writer.int64(message.usersIds[i]);
                        writer.ldelim();
                    }
                    return writer;
                };

                /**
                 * Decodes a QueryUsersOnlineStatusRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryUsersOnlineStatusRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryUsersOnlineStatusRequest} QueryUsersOnlineStatusRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryUsersOnlineStatusRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryUsersOnlineStatusRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.usersIds && message.usersIds.length))
                                message.usersIds = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.usersIds.push(reader.int64().toString());
                            } else
                                message.usersIds.push(reader.int64().toString());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryUsersOnlineStatusRequest;
            })();

            proto.CreateFriendRequestRequest = (function() {

                /**
                 * Properties of a CreateFriendRequestRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateFriendRequestRequest
                 * @property {string|null} [recipientId] CreateFriendRequestRequest recipientId
                 * @property {string|null} [content] CreateFriendRequestRequest content
                 */

                /**
                 * Constructs a new CreateFriendRequestRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateFriendRequestRequest.
                 * @implements ICreateFriendRequestRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateFriendRequestRequest=} [properties] Properties to set
                 */
                function CreateFriendRequestRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateFriendRequestRequest recipientId.
                 * @member {string} recipientId
                 * @memberof im.turms.proto.CreateFriendRequestRequest
                 * @instance
                 */
                CreateFriendRequestRequest.prototype.recipientId = "0";

                /**
                 * CreateFriendRequestRequest content.
                 * @member {string} content
                 * @memberof im.turms.proto.CreateFriendRequestRequest
                 * @instance
                 */
                CreateFriendRequestRequest.prototype.content = "";

                /**
                 * Encodes the specified CreateFriendRequestRequest message. Does not implicitly {@link im.turms.proto.CreateFriendRequestRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateFriendRequestRequest
                 * @static
                 * @param {im.turms.proto.ICreateFriendRequestRequest} message CreateFriendRequestRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateFriendRequestRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.recipientId != null && Object.hasOwnProperty.call(message, "recipientId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.recipientId);
                    if (message.content != null && Object.hasOwnProperty.call(message, "content"))
                        writer.uint32(/* id 2, wireType 2 =*/18).string(message.content);
                    return writer;
                };

                /**
                 * Decodes a CreateFriendRequestRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateFriendRequestRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateFriendRequestRequest} CreateFriendRequestRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateFriendRequestRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateFriendRequestRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.recipientId = reader.int64().toString();
                            break;
                        case 2:
                            message.content = reader.string();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateFriendRequestRequest;
            })();

            proto.CreateRelationshipGroupRequest = (function() {

                /**
                 * Properties of a CreateRelationshipGroupRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateRelationshipGroupRequest
                 * @property {string|null} [name] CreateRelationshipGroupRequest name
                 */

                /**
                 * Constructs a new CreateRelationshipGroupRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateRelationshipGroupRequest.
                 * @implements ICreateRelationshipGroupRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateRelationshipGroupRequest=} [properties] Properties to set
                 */
                function CreateRelationshipGroupRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateRelationshipGroupRequest name.
                 * @member {string} name
                 * @memberof im.turms.proto.CreateRelationshipGroupRequest
                 * @instance
                 */
                CreateRelationshipGroupRequest.prototype.name = "";

                /**
                 * Encodes the specified CreateRelationshipGroupRequest message. Does not implicitly {@link im.turms.proto.CreateRelationshipGroupRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateRelationshipGroupRequest
                 * @static
                 * @param {im.turms.proto.ICreateRelationshipGroupRequest} message CreateRelationshipGroupRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateRelationshipGroupRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        writer.uint32(/* id 1, wireType 2 =*/10).string(message.name);
                    return writer;
                };

                /**
                 * Decodes a CreateRelationshipGroupRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateRelationshipGroupRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateRelationshipGroupRequest} CreateRelationshipGroupRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateRelationshipGroupRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateRelationshipGroupRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.name = reader.string();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateRelationshipGroupRequest;
            })();

            proto.CreateRelationshipRequest = (function() {

                /**
                 * Properties of a CreateRelationshipRequest.
                 * @memberof im.turms.proto
                 * @interface ICreateRelationshipRequest
                 * @property {string|null} [userId] CreateRelationshipRequest userId
                 * @property {boolean|null} [isBlocked] CreateRelationshipRequest isBlocked
                 * @property {google.protobuf.IInt32Value|null} [groupIndex] CreateRelationshipRequest groupIndex
                 */

                /**
                 * Constructs a new CreateRelationshipRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a CreateRelationshipRequest.
                 * @implements ICreateRelationshipRequest
                 * @constructor
                 * @param {im.turms.proto.ICreateRelationshipRequest=} [properties] Properties to set
                 */
                function CreateRelationshipRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * CreateRelationshipRequest userId.
                 * @member {string} userId
                 * @memberof im.turms.proto.CreateRelationshipRequest
                 * @instance
                 */
                CreateRelationshipRequest.prototype.userId = "0";

                /**
                 * CreateRelationshipRequest isBlocked.
                 * @member {boolean} isBlocked
                 * @memberof im.turms.proto.CreateRelationshipRequest
                 * @instance
                 */
                CreateRelationshipRequest.prototype.isBlocked = false;

                /**
                 * CreateRelationshipRequest groupIndex.
                 * @member {google.protobuf.IInt32Value|null|undefined} groupIndex
                 * @memberof im.turms.proto.CreateRelationshipRequest
                 * @instance
                 */
                CreateRelationshipRequest.prototype.groupIndex = null;

                /**
                 * Encodes the specified CreateRelationshipRequest message. Does not implicitly {@link im.turms.proto.CreateRelationshipRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.CreateRelationshipRequest
                 * @static
                 * @param {im.turms.proto.ICreateRelationshipRequest} message CreateRelationshipRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                CreateRelationshipRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userId != null && Object.hasOwnProperty.call(message, "userId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.userId);
                    if (message.isBlocked != null && Object.hasOwnProperty.call(message, "isBlocked"))
                        writer.uint32(/* id 2, wireType 0 =*/16).bool(message.isBlocked);
                    if (message.groupIndex != null && Object.hasOwnProperty.call(message, "groupIndex"))
                        $root.google.protobuf.Int32Value.encode(message.groupIndex, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a CreateRelationshipRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.CreateRelationshipRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.CreateRelationshipRequest} CreateRelationshipRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                CreateRelationshipRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.CreateRelationshipRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.userId = reader.int64().toString();
                            break;
                        case 2:
                            message.isBlocked = reader.bool();
                            break;
                        case 3:
                            message.groupIndex = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return CreateRelationshipRequest;
            })();

            proto.DeleteRelationshipGroupMemberRequest = (function() {

                /**
                 * Properties of a DeleteRelationshipGroupMemberRequest.
                 * @memberof im.turms.proto
                 * @interface IDeleteRelationshipGroupMemberRequest
                 * @property {string|null} [userId] DeleteRelationshipGroupMemberRequest userId
                 * @property {number|null} [groupIndex] DeleteRelationshipGroupMemberRequest groupIndex
                 * @property {google.protobuf.IInt32Value|null} [targetGroupIndex] DeleteRelationshipGroupMemberRequest targetGroupIndex
                 */

                /**
                 * Constructs a new DeleteRelationshipGroupMemberRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a DeleteRelationshipGroupMemberRequest.
                 * @implements IDeleteRelationshipGroupMemberRequest
                 * @constructor
                 * @param {im.turms.proto.IDeleteRelationshipGroupMemberRequest=} [properties] Properties to set
                 */
                function DeleteRelationshipGroupMemberRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * DeleteRelationshipGroupMemberRequest userId.
                 * @member {string} userId
                 * @memberof im.turms.proto.DeleteRelationshipGroupMemberRequest
                 * @instance
                 */
                DeleteRelationshipGroupMemberRequest.prototype.userId = "0";

                /**
                 * DeleteRelationshipGroupMemberRequest groupIndex.
                 * @member {number} groupIndex
                 * @memberof im.turms.proto.DeleteRelationshipGroupMemberRequest
                 * @instance
                 */
                DeleteRelationshipGroupMemberRequest.prototype.groupIndex = 0;

                /**
                 * DeleteRelationshipGroupMemberRequest targetGroupIndex.
                 * @member {google.protobuf.IInt32Value|null|undefined} targetGroupIndex
                 * @memberof im.turms.proto.DeleteRelationshipGroupMemberRequest
                 * @instance
                 */
                DeleteRelationshipGroupMemberRequest.prototype.targetGroupIndex = null;

                /**
                 * Encodes the specified DeleteRelationshipGroupMemberRequest message. Does not implicitly {@link im.turms.proto.DeleteRelationshipGroupMemberRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.DeleteRelationshipGroupMemberRequest
                 * @static
                 * @param {im.turms.proto.IDeleteRelationshipGroupMemberRequest} message DeleteRelationshipGroupMemberRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                DeleteRelationshipGroupMemberRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userId != null && Object.hasOwnProperty.call(message, "userId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.userId);
                    if (message.groupIndex != null && Object.hasOwnProperty.call(message, "groupIndex"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int32(message.groupIndex);
                    if (message.targetGroupIndex != null && Object.hasOwnProperty.call(message, "targetGroupIndex"))
                        $root.google.protobuf.Int32Value.encode(message.targetGroupIndex, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a DeleteRelationshipGroupMemberRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.DeleteRelationshipGroupMemberRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.DeleteRelationshipGroupMemberRequest} DeleteRelationshipGroupMemberRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                DeleteRelationshipGroupMemberRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.DeleteRelationshipGroupMemberRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.userId = reader.int64().toString();
                            break;
                        case 2:
                            message.groupIndex = reader.int32();
                            break;
                        case 3:
                            message.targetGroupIndex = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return DeleteRelationshipGroupMemberRequest;
            })();

            proto.DeleteRelationshipGroupRequest = (function() {

                /**
                 * Properties of a DeleteRelationshipGroupRequest.
                 * @memberof im.turms.proto
                 * @interface IDeleteRelationshipGroupRequest
                 * @property {number|null} [groupIndex] DeleteRelationshipGroupRequest groupIndex
                 * @property {google.protobuf.IInt32Value|null} [targetGroupIndex] DeleteRelationshipGroupRequest targetGroupIndex
                 */

                /**
                 * Constructs a new DeleteRelationshipGroupRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a DeleteRelationshipGroupRequest.
                 * @implements IDeleteRelationshipGroupRequest
                 * @constructor
                 * @param {im.turms.proto.IDeleteRelationshipGroupRequest=} [properties] Properties to set
                 */
                function DeleteRelationshipGroupRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * DeleteRelationshipGroupRequest groupIndex.
                 * @member {number} groupIndex
                 * @memberof im.turms.proto.DeleteRelationshipGroupRequest
                 * @instance
                 */
                DeleteRelationshipGroupRequest.prototype.groupIndex = 0;

                /**
                 * DeleteRelationshipGroupRequest targetGroupIndex.
                 * @member {google.protobuf.IInt32Value|null|undefined} targetGroupIndex
                 * @memberof im.turms.proto.DeleteRelationshipGroupRequest
                 * @instance
                 */
                DeleteRelationshipGroupRequest.prototype.targetGroupIndex = null;

                /**
                 * Encodes the specified DeleteRelationshipGroupRequest message. Does not implicitly {@link im.turms.proto.DeleteRelationshipGroupRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.DeleteRelationshipGroupRequest
                 * @static
                 * @param {im.turms.proto.IDeleteRelationshipGroupRequest} message DeleteRelationshipGroupRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                DeleteRelationshipGroupRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupIndex != null && Object.hasOwnProperty.call(message, "groupIndex"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int32(message.groupIndex);
                    if (message.targetGroupIndex != null && Object.hasOwnProperty.call(message, "targetGroupIndex"))
                        $root.google.protobuf.Int32Value.encode(message.targetGroupIndex, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a DeleteRelationshipGroupRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.DeleteRelationshipGroupRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.DeleteRelationshipGroupRequest} DeleteRelationshipGroupRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                DeleteRelationshipGroupRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.DeleteRelationshipGroupRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupIndex = reader.int32();
                            break;
                        case 2:
                            message.targetGroupIndex = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return DeleteRelationshipGroupRequest;
            })();

            proto.DeleteRelationshipRequest = (function() {

                /**
                 * Properties of a DeleteRelationshipRequest.
                 * @memberof im.turms.proto
                 * @interface IDeleteRelationshipRequest
                 * @property {string|null} [relatedUserId] DeleteRelationshipRequest relatedUserId
                 * @property {google.protobuf.IInt32Value|null} [groupIndex] DeleteRelationshipRequest groupIndex
                 * @property {google.protobuf.IInt32Value|null} [targetGroupIndex] DeleteRelationshipRequest targetGroupIndex
                 */

                /**
                 * Constructs a new DeleteRelationshipRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a DeleteRelationshipRequest.
                 * @implements IDeleteRelationshipRequest
                 * @constructor
                 * @param {im.turms.proto.IDeleteRelationshipRequest=} [properties] Properties to set
                 */
                function DeleteRelationshipRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * DeleteRelationshipRequest relatedUserId.
                 * @member {string} relatedUserId
                 * @memberof im.turms.proto.DeleteRelationshipRequest
                 * @instance
                 */
                DeleteRelationshipRequest.prototype.relatedUserId = "0";

                /**
                 * DeleteRelationshipRequest groupIndex.
                 * @member {google.protobuf.IInt32Value|null|undefined} groupIndex
                 * @memberof im.turms.proto.DeleteRelationshipRequest
                 * @instance
                 */
                DeleteRelationshipRequest.prototype.groupIndex = null;

                /**
                 * DeleteRelationshipRequest targetGroupIndex.
                 * @member {google.protobuf.IInt32Value|null|undefined} targetGroupIndex
                 * @memberof im.turms.proto.DeleteRelationshipRequest
                 * @instance
                 */
                DeleteRelationshipRequest.prototype.targetGroupIndex = null;

                /**
                 * Encodes the specified DeleteRelationshipRequest message. Does not implicitly {@link im.turms.proto.DeleteRelationshipRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.DeleteRelationshipRequest
                 * @static
                 * @param {im.turms.proto.IDeleteRelationshipRequest} message DeleteRelationshipRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                DeleteRelationshipRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.relatedUserId != null && Object.hasOwnProperty.call(message, "relatedUserId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.relatedUserId);
                    if (message.groupIndex != null && Object.hasOwnProperty.call(message, "groupIndex"))
                        $root.google.protobuf.Int32Value.encode(message.groupIndex, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.targetGroupIndex != null && Object.hasOwnProperty.call(message, "targetGroupIndex"))
                        $root.google.protobuf.Int32Value.encode(message.targetGroupIndex, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a DeleteRelationshipRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.DeleteRelationshipRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.DeleteRelationshipRequest} DeleteRelationshipRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                DeleteRelationshipRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.DeleteRelationshipRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.relatedUserId = reader.int64().toString();
                            break;
                        case 2:
                            message.groupIndex = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.targetGroupIndex = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return DeleteRelationshipRequest;
            })();

            proto.QueryFriendRequestsRequest = (function() {

                /**
                 * Properties of a QueryFriendRequestsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryFriendRequestsRequest
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryFriendRequestsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryFriendRequestsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryFriendRequestsRequest.
                 * @implements IQueryFriendRequestsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryFriendRequestsRequest=} [properties] Properties to set
                 */
                function QueryFriendRequestsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryFriendRequestsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryFriendRequestsRequest
                 * @instance
                 */
                QueryFriendRequestsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryFriendRequestsRequest message. Does not implicitly {@link im.turms.proto.QueryFriendRequestsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryFriendRequestsRequest
                 * @static
                 * @param {im.turms.proto.IQueryFriendRequestsRequest} message QueryFriendRequestsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryFriendRequestsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryFriendRequestsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryFriendRequestsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryFriendRequestsRequest} QueryFriendRequestsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryFriendRequestsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryFriendRequestsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryFriendRequestsRequest;
            })();

            proto.QueryRelatedUsersIdsRequest = (function() {

                /**
                 * Properties of a QueryRelatedUsersIdsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryRelatedUsersIdsRequest
                 * @property {google.protobuf.IBoolValue|null} [isBlocked] QueryRelatedUsersIdsRequest isBlocked
                 * @property {google.protobuf.IInt32Value|null} [groupIndex] QueryRelatedUsersIdsRequest groupIndex
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryRelatedUsersIdsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryRelatedUsersIdsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryRelatedUsersIdsRequest.
                 * @implements IQueryRelatedUsersIdsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryRelatedUsersIdsRequest=} [properties] Properties to set
                 */
                function QueryRelatedUsersIdsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryRelatedUsersIdsRequest isBlocked.
                 * @member {google.protobuf.IBoolValue|null|undefined} isBlocked
                 * @memberof im.turms.proto.QueryRelatedUsersIdsRequest
                 * @instance
                 */
                QueryRelatedUsersIdsRequest.prototype.isBlocked = null;

                /**
                 * QueryRelatedUsersIdsRequest groupIndex.
                 * @member {google.protobuf.IInt32Value|null|undefined} groupIndex
                 * @memberof im.turms.proto.QueryRelatedUsersIdsRequest
                 * @instance
                 */
                QueryRelatedUsersIdsRequest.prototype.groupIndex = null;

                /**
                 * QueryRelatedUsersIdsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryRelatedUsersIdsRequest
                 * @instance
                 */
                QueryRelatedUsersIdsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryRelatedUsersIdsRequest message. Does not implicitly {@link im.turms.proto.QueryRelatedUsersIdsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryRelatedUsersIdsRequest
                 * @static
                 * @param {im.turms.proto.IQueryRelatedUsersIdsRequest} message QueryRelatedUsersIdsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryRelatedUsersIdsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.isBlocked != null && Object.hasOwnProperty.call(message, "isBlocked"))
                        $root.google.protobuf.BoolValue.encode(message.isBlocked, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.groupIndex != null && Object.hasOwnProperty.call(message, "groupIndex"))
                        $root.google.protobuf.Int32Value.encode(message.groupIndex, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryRelatedUsersIdsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryRelatedUsersIdsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryRelatedUsersIdsRequest} QueryRelatedUsersIdsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryRelatedUsersIdsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryRelatedUsersIdsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.isBlocked = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.groupIndex = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryRelatedUsersIdsRequest;
            })();

            proto.QueryRelationshipGroupsRequest = (function() {

                /**
                 * Properties of a QueryRelationshipGroupsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryRelationshipGroupsRequest
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryRelationshipGroupsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryRelationshipGroupsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryRelationshipGroupsRequest.
                 * @implements IQueryRelationshipGroupsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryRelationshipGroupsRequest=} [properties] Properties to set
                 */
                function QueryRelationshipGroupsRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryRelationshipGroupsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryRelationshipGroupsRequest
                 * @instance
                 */
                QueryRelationshipGroupsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryRelationshipGroupsRequest message. Does not implicitly {@link im.turms.proto.QueryRelationshipGroupsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryRelationshipGroupsRequest
                 * @static
                 * @param {im.turms.proto.IQueryRelationshipGroupsRequest} message QueryRelationshipGroupsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryRelationshipGroupsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryRelationshipGroupsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryRelationshipGroupsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryRelationshipGroupsRequest} QueryRelationshipGroupsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryRelationshipGroupsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryRelationshipGroupsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryRelationshipGroupsRequest;
            })();

            proto.QueryRelationshipsRequest = (function() {

                /**
                 * Properties of a QueryRelationshipsRequest.
                 * @memberof im.turms.proto
                 * @interface IQueryRelationshipsRequest
                 * @property {Array.<string>|null} [relatedUsersIds] QueryRelationshipsRequest relatedUsersIds
                 * @property {google.protobuf.IBoolValue|null} [isBlocked] QueryRelationshipsRequest isBlocked
                 * @property {google.protobuf.IInt32Value|null} [groupIndex] QueryRelationshipsRequest groupIndex
                 * @property {google.protobuf.IInt64Value|null} [lastUpdatedDate] QueryRelationshipsRequest lastUpdatedDate
                 */

                /**
                 * Constructs a new QueryRelationshipsRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents a QueryRelationshipsRequest.
                 * @implements IQueryRelationshipsRequest
                 * @constructor
                 * @param {im.turms.proto.IQueryRelationshipsRequest=} [properties] Properties to set
                 */
                function QueryRelationshipsRequest(properties) {
                    this.relatedUsersIds = [];
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * QueryRelationshipsRequest relatedUsersIds.
                 * @member {Array.<string>} relatedUsersIds
                 * @memberof im.turms.proto.QueryRelationshipsRequest
                 * @instance
                 */
                QueryRelationshipsRequest.prototype.relatedUsersIds = $util.emptyArray;

                /**
                 * QueryRelationshipsRequest isBlocked.
                 * @member {google.protobuf.IBoolValue|null|undefined} isBlocked
                 * @memberof im.turms.proto.QueryRelationshipsRequest
                 * @instance
                 */
                QueryRelationshipsRequest.prototype.isBlocked = null;

                /**
                 * QueryRelationshipsRequest groupIndex.
                 * @member {google.protobuf.IInt32Value|null|undefined} groupIndex
                 * @memberof im.turms.proto.QueryRelationshipsRequest
                 * @instance
                 */
                QueryRelationshipsRequest.prototype.groupIndex = null;

                /**
                 * QueryRelationshipsRequest lastUpdatedDate.
                 * @member {google.protobuf.IInt64Value|null|undefined} lastUpdatedDate
                 * @memberof im.turms.proto.QueryRelationshipsRequest
                 * @instance
                 */
                QueryRelationshipsRequest.prototype.lastUpdatedDate = null;

                /**
                 * Encodes the specified QueryRelationshipsRequest message. Does not implicitly {@link im.turms.proto.QueryRelationshipsRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.QueryRelationshipsRequest
                 * @static
                 * @param {im.turms.proto.IQueryRelationshipsRequest} message QueryRelationshipsRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                QueryRelationshipsRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.relatedUsersIds != null && message.relatedUsersIds.length) {
                        writer.uint32(/* id 1, wireType 2 =*/10).fork();
                        for (var i = 0; i < message.relatedUsersIds.length; ++i)
                            writer.int64(message.relatedUsersIds[i]);
                        writer.ldelim();
                    }
                    if (message.isBlocked != null && Object.hasOwnProperty.call(message, "isBlocked"))
                        $root.google.protobuf.BoolValue.encode(message.isBlocked, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.groupIndex != null && Object.hasOwnProperty.call(message, "groupIndex"))
                        $root.google.protobuf.Int32Value.encode(message.groupIndex, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.lastUpdatedDate != null && Object.hasOwnProperty.call(message, "lastUpdatedDate"))
                        $root.google.protobuf.Int64Value.encode(message.lastUpdatedDate, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes a QueryRelationshipsRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.QueryRelationshipsRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.QueryRelationshipsRequest} QueryRelationshipsRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                QueryRelationshipsRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.QueryRelationshipsRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            if (!(message.relatedUsersIds && message.relatedUsersIds.length))
                                message.relatedUsersIds = [];
                            if ((tag & 7) === 2) {
                                var end2 = reader.uint32() + reader.pos;
                                while (reader.pos < end2)
                                    message.relatedUsersIds.push(reader.int64().toString());
                            } else
                                message.relatedUsersIds.push(reader.int64().toString());
                            break;
                        case 2:
                            message.isBlocked = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.groupIndex = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.lastUpdatedDate = $root.google.protobuf.Int64Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return QueryRelationshipsRequest;
            })();

            proto.UpdateFriendRequestRequest = (function() {

                /**
                 * Properties of an UpdateFriendRequestRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateFriendRequestRequest
                 * @property {string|null} [requestId] UpdateFriendRequestRequest requestId
                 * @property {im.turms.proto.ResponseAction|null} [responseAction] UpdateFriendRequestRequest responseAction
                 * @property {google.protobuf.IStringValue|null} [reason] UpdateFriendRequestRequest reason
                 */

                /**
                 * Constructs a new UpdateFriendRequestRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateFriendRequestRequest.
                 * @implements IUpdateFriendRequestRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateFriendRequestRequest=} [properties] Properties to set
                 */
                function UpdateFriendRequestRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateFriendRequestRequest requestId.
                 * @member {string} requestId
                 * @memberof im.turms.proto.UpdateFriendRequestRequest
                 * @instance
                 */
                UpdateFriendRequestRequest.prototype.requestId = "0";

                /**
                 * UpdateFriendRequestRequest responseAction.
                 * @member {im.turms.proto.ResponseAction} responseAction
                 * @memberof im.turms.proto.UpdateFriendRequestRequest
                 * @instance
                 */
                UpdateFriendRequestRequest.prototype.responseAction = 0;

                /**
                 * UpdateFriendRequestRequest reason.
                 * @member {google.protobuf.IStringValue|null|undefined} reason
                 * @memberof im.turms.proto.UpdateFriendRequestRequest
                 * @instance
                 */
                UpdateFriendRequestRequest.prototype.reason = null;

                /**
                 * Encodes the specified UpdateFriendRequestRequest message. Does not implicitly {@link im.turms.proto.UpdateFriendRequestRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateFriendRequestRequest
                 * @static
                 * @param {im.turms.proto.IUpdateFriendRequestRequest} message UpdateFriendRequestRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateFriendRequestRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.requestId != null && Object.hasOwnProperty.call(message, "requestId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.requestId);
                    if (message.responseAction != null && Object.hasOwnProperty.call(message, "responseAction"))
                        writer.uint32(/* id 2, wireType 0 =*/16).int32(message.responseAction);
                    if (message.reason != null && Object.hasOwnProperty.call(message, "reason"))
                        $root.google.protobuf.StringValue.encode(message.reason, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an UpdateFriendRequestRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateFriendRequestRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateFriendRequestRequest} UpdateFriendRequestRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateFriendRequestRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateFriendRequestRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.requestId = reader.int64().toString();
                            break;
                        case 2:
                            message.responseAction = reader.int32();
                            break;
                        case 3:
                            message.reason = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateFriendRequestRequest;
            })();

            proto.UpdateRelationshipGroupRequest = (function() {

                /**
                 * Properties of an UpdateRelationshipGroupRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateRelationshipGroupRequest
                 * @property {number|null} [groupIndex] UpdateRelationshipGroupRequest groupIndex
                 * @property {string|null} [newName] UpdateRelationshipGroupRequest newName
                 */

                /**
                 * Constructs a new UpdateRelationshipGroupRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateRelationshipGroupRequest.
                 * @implements IUpdateRelationshipGroupRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateRelationshipGroupRequest=} [properties] Properties to set
                 */
                function UpdateRelationshipGroupRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateRelationshipGroupRequest groupIndex.
                 * @member {number} groupIndex
                 * @memberof im.turms.proto.UpdateRelationshipGroupRequest
                 * @instance
                 */
                UpdateRelationshipGroupRequest.prototype.groupIndex = 0;

                /**
                 * UpdateRelationshipGroupRequest newName.
                 * @member {string} newName
                 * @memberof im.turms.proto.UpdateRelationshipGroupRequest
                 * @instance
                 */
                UpdateRelationshipGroupRequest.prototype.newName = "";

                /**
                 * Encodes the specified UpdateRelationshipGroupRequest message. Does not implicitly {@link im.turms.proto.UpdateRelationshipGroupRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateRelationshipGroupRequest
                 * @static
                 * @param {im.turms.proto.IUpdateRelationshipGroupRequest} message UpdateRelationshipGroupRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateRelationshipGroupRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.groupIndex != null && Object.hasOwnProperty.call(message, "groupIndex"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int32(message.groupIndex);
                    if (message.newName != null && Object.hasOwnProperty.call(message, "newName"))
                        writer.uint32(/* id 2, wireType 2 =*/18).string(message.newName);
                    return writer;
                };

                /**
                 * Decodes an UpdateRelationshipGroupRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateRelationshipGroupRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateRelationshipGroupRequest} UpdateRelationshipGroupRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateRelationshipGroupRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateRelationshipGroupRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.groupIndex = reader.int32();
                            break;
                        case 2:
                            message.newName = reader.string();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateRelationshipGroupRequest;
            })();

            proto.UpdateRelationshipRequest = (function() {

                /**
                 * Properties of an UpdateRelationshipRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateRelationshipRequest
                 * @property {string|null} [relatedUserId] UpdateRelationshipRequest relatedUserId
                 * @property {google.protobuf.IBoolValue|null} [blocked] UpdateRelationshipRequest blocked
                 * @property {google.protobuf.IInt32Value|null} [newGroupIndex] UpdateRelationshipRequest newGroupIndex
                 * @property {google.protobuf.IInt32Value|null} [deleteGroupIndex] UpdateRelationshipRequest deleteGroupIndex
                 */

                /**
                 * Constructs a new UpdateRelationshipRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateRelationshipRequest.
                 * @implements IUpdateRelationshipRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateRelationshipRequest=} [properties] Properties to set
                 */
                function UpdateRelationshipRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateRelationshipRequest relatedUserId.
                 * @member {string} relatedUserId
                 * @memberof im.turms.proto.UpdateRelationshipRequest
                 * @instance
                 */
                UpdateRelationshipRequest.prototype.relatedUserId = "0";

                /**
                 * UpdateRelationshipRequest blocked.
                 * @member {google.protobuf.IBoolValue|null|undefined} blocked
                 * @memberof im.turms.proto.UpdateRelationshipRequest
                 * @instance
                 */
                UpdateRelationshipRequest.prototype.blocked = null;

                /**
                 * UpdateRelationshipRequest newGroupIndex.
                 * @member {google.protobuf.IInt32Value|null|undefined} newGroupIndex
                 * @memberof im.turms.proto.UpdateRelationshipRequest
                 * @instance
                 */
                UpdateRelationshipRequest.prototype.newGroupIndex = null;

                /**
                 * UpdateRelationshipRequest deleteGroupIndex.
                 * @member {google.protobuf.IInt32Value|null|undefined} deleteGroupIndex
                 * @memberof im.turms.proto.UpdateRelationshipRequest
                 * @instance
                 */
                UpdateRelationshipRequest.prototype.deleteGroupIndex = null;

                /**
                 * Encodes the specified UpdateRelationshipRequest message. Does not implicitly {@link im.turms.proto.UpdateRelationshipRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateRelationshipRequest
                 * @static
                 * @param {im.turms.proto.IUpdateRelationshipRequest} message UpdateRelationshipRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateRelationshipRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.relatedUserId != null && Object.hasOwnProperty.call(message, "relatedUserId"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int64(message.relatedUserId);
                    if (message.blocked != null && Object.hasOwnProperty.call(message, "blocked"))
                        $root.google.protobuf.BoolValue.encode(message.blocked, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.newGroupIndex != null && Object.hasOwnProperty.call(message, "newGroupIndex"))
                        $root.google.protobuf.Int32Value.encode(message.newGroupIndex, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.deleteGroupIndex != null && Object.hasOwnProperty.call(message, "deleteGroupIndex"))
                        $root.google.protobuf.Int32Value.encode(message.deleteGroupIndex, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an UpdateRelationshipRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateRelationshipRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateRelationshipRequest} UpdateRelationshipRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateRelationshipRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateRelationshipRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.relatedUserId = reader.int64().toString();
                            break;
                        case 2:
                            message.blocked = $root.google.protobuf.BoolValue.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.newGroupIndex = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.deleteGroupIndex = $root.google.protobuf.Int32Value.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateRelationshipRequest;
            })();

            proto.UpdateUserLocationRequest = (function() {

                /**
                 * Properties of an UpdateUserLocationRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateUserLocationRequest
                 * @property {number|null} [latitude] UpdateUserLocationRequest latitude
                 * @property {number|null} [longitude] UpdateUserLocationRequest longitude
                 * @property {google.protobuf.IStringValue|null} [name] UpdateUserLocationRequest name
                 * @property {google.protobuf.IStringValue|null} [address] UpdateUserLocationRequest address
                 */

                /**
                 * Constructs a new UpdateUserLocationRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateUserLocationRequest.
                 * @implements IUpdateUserLocationRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateUserLocationRequest=} [properties] Properties to set
                 */
                function UpdateUserLocationRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateUserLocationRequest latitude.
                 * @member {number} latitude
                 * @memberof im.turms.proto.UpdateUserLocationRequest
                 * @instance
                 */
                UpdateUserLocationRequest.prototype.latitude = 0;

                /**
                 * UpdateUserLocationRequest longitude.
                 * @member {number} longitude
                 * @memberof im.turms.proto.UpdateUserLocationRequest
                 * @instance
                 */
                UpdateUserLocationRequest.prototype.longitude = 0;

                /**
                 * UpdateUserLocationRequest name.
                 * @member {google.protobuf.IStringValue|null|undefined} name
                 * @memberof im.turms.proto.UpdateUserLocationRequest
                 * @instance
                 */
                UpdateUserLocationRequest.prototype.name = null;

                /**
                 * UpdateUserLocationRequest address.
                 * @member {google.protobuf.IStringValue|null|undefined} address
                 * @memberof im.turms.proto.UpdateUserLocationRequest
                 * @instance
                 */
                UpdateUserLocationRequest.prototype.address = null;

                /**
                 * Encodes the specified UpdateUserLocationRequest message. Does not implicitly {@link im.turms.proto.UpdateUserLocationRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateUserLocationRequest
                 * @static
                 * @param {im.turms.proto.IUpdateUserLocationRequest} message UpdateUserLocationRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateUserLocationRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.latitude != null && Object.hasOwnProperty.call(message, "latitude"))
                        writer.uint32(/* id 1, wireType 5 =*/13).float(message.latitude);
                    if (message.longitude != null && Object.hasOwnProperty.call(message, "longitude"))
                        writer.uint32(/* id 2, wireType 5 =*/21).float(message.longitude);
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        $root.google.protobuf.StringValue.encode(message.name, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.address != null && Object.hasOwnProperty.call(message, "address"))
                        $root.google.protobuf.StringValue.encode(message.address, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    return writer;
                };

                /**
                 * Decodes an UpdateUserLocationRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateUserLocationRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateUserLocationRequest} UpdateUserLocationRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateUserLocationRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateUserLocationRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.latitude = reader.float();
                            break;
                        case 2:
                            message.longitude = reader.float();
                            break;
                        case 3:
                            message.name = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.address = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateUserLocationRequest;
            })();

            proto.UpdateUserOnlineStatusRequest = (function() {

                /**
                 * Properties of an UpdateUserOnlineStatusRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateUserOnlineStatusRequest
                 * @property {im.turms.proto.UserStatus|null} [userStatus] UpdateUserOnlineStatusRequest userStatus
                 */

                /**
                 * Constructs a new UpdateUserOnlineStatusRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateUserOnlineStatusRequest.
                 * @implements IUpdateUserOnlineStatusRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateUserOnlineStatusRequest=} [properties] Properties to set
                 */
                function UpdateUserOnlineStatusRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateUserOnlineStatusRequest userStatus.
                 * @member {im.turms.proto.UserStatus} userStatus
                 * @memberof im.turms.proto.UpdateUserOnlineStatusRequest
                 * @instance
                 */
                UpdateUserOnlineStatusRequest.prototype.userStatus = 0;

                /**
                 * Encodes the specified UpdateUserOnlineStatusRequest message. Does not implicitly {@link im.turms.proto.UpdateUserOnlineStatusRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateUserOnlineStatusRequest
                 * @static
                 * @param {im.turms.proto.IUpdateUserOnlineStatusRequest} message UpdateUserOnlineStatusRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateUserOnlineStatusRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.userStatus != null && Object.hasOwnProperty.call(message, "userStatus"))
                        writer.uint32(/* id 1, wireType 0 =*/8).int32(message.userStatus);
                    return writer;
                };

                /**
                 * Decodes an UpdateUserOnlineStatusRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateUserOnlineStatusRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateUserOnlineStatusRequest} UpdateUserOnlineStatusRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateUserOnlineStatusRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateUserOnlineStatusRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.userStatus = reader.int32();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateUserOnlineStatusRequest;
            })();

            proto.UpdateUserRequest = (function() {

                /**
                 * Properties of an UpdateUserRequest.
                 * @memberof im.turms.proto
                 * @interface IUpdateUserRequest
                 * @property {google.protobuf.IStringValue|null} [password] UpdateUserRequest password
                 * @property {google.protobuf.IStringValue|null} [name] UpdateUserRequest name
                 * @property {google.protobuf.IStringValue|null} [intro] UpdateUserRequest intro
                 * @property {google.protobuf.IStringValue|null} [profilePictureUrl] UpdateUserRequest profilePictureUrl
                 * @property {im.turms.proto.ProfileAccessStrategy|null} [profileAccessStrategy] UpdateUserRequest profileAccessStrategy
                 */

                /**
                 * Constructs a new UpdateUserRequest.
                 * @memberof im.turms.proto
                 * @classdesc Represents an UpdateUserRequest.
                 * @implements IUpdateUserRequest
                 * @constructor
                 * @param {im.turms.proto.IUpdateUserRequest=} [properties] Properties to set
                 */
                function UpdateUserRequest(properties) {
                    if (properties)
                        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                            if (properties[keys[i]] != null)
                                this[keys[i]] = properties[keys[i]];
                }

                /**
                 * UpdateUserRequest password.
                 * @member {google.protobuf.IStringValue|null|undefined} password
                 * @memberof im.turms.proto.UpdateUserRequest
                 * @instance
                 */
                UpdateUserRequest.prototype.password = null;

                /**
                 * UpdateUserRequest name.
                 * @member {google.protobuf.IStringValue|null|undefined} name
                 * @memberof im.turms.proto.UpdateUserRequest
                 * @instance
                 */
                UpdateUserRequest.prototype.name = null;

                /**
                 * UpdateUserRequest intro.
                 * @member {google.protobuf.IStringValue|null|undefined} intro
                 * @memberof im.turms.proto.UpdateUserRequest
                 * @instance
                 */
                UpdateUserRequest.prototype.intro = null;

                /**
                 * UpdateUserRequest profilePictureUrl.
                 * @member {google.protobuf.IStringValue|null|undefined} profilePictureUrl
                 * @memberof im.turms.proto.UpdateUserRequest
                 * @instance
                 */
                UpdateUserRequest.prototype.profilePictureUrl = null;

                /**
                 * UpdateUserRequest profileAccessStrategy.
                 * @member {im.turms.proto.ProfileAccessStrategy} profileAccessStrategy
                 * @memberof im.turms.proto.UpdateUserRequest
                 * @instance
                 */
                UpdateUserRequest.prototype.profileAccessStrategy = 0;

                /**
                 * Encodes the specified UpdateUserRequest message. Does not implicitly {@link im.turms.proto.UpdateUserRequest.verify|verify} messages.
                 * @function encode
                 * @memberof im.turms.proto.UpdateUserRequest
                 * @static
                 * @param {im.turms.proto.IUpdateUserRequest} message UpdateUserRequest message or plain object to encode
                 * @param {$protobuf.Writer} [writer] Writer to encode to
                 * @returns {$protobuf.Writer} Writer
                 */
                UpdateUserRequest.encode = function encode(message, writer) {
                    if (!writer)
                        writer = $Writer.create();
                    if (message.password != null && Object.hasOwnProperty.call(message, "password"))
                        $root.google.protobuf.StringValue.encode(message.password, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();
                    if (message.name != null && Object.hasOwnProperty.call(message, "name"))
                        $root.google.protobuf.StringValue.encode(message.name, writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim();
                    if (message.intro != null && Object.hasOwnProperty.call(message, "intro"))
                        $root.google.protobuf.StringValue.encode(message.intro, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();
                    if (message.profilePictureUrl != null && Object.hasOwnProperty.call(message, "profilePictureUrl"))
                        $root.google.protobuf.StringValue.encode(message.profilePictureUrl, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();
                    if (message.profileAccessStrategy != null && Object.hasOwnProperty.call(message, "profileAccessStrategy"))
                        writer.uint32(/* id 5, wireType 0 =*/40).int32(message.profileAccessStrategy);
                    return writer;
                };

                /**
                 * Decodes an UpdateUserRequest message from the specified reader or buffer.
                 * @function decode
                 * @memberof im.turms.proto.UpdateUserRequest
                 * @static
                 * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
                 * @param {number} [length] Message length if known beforehand
                 * @returns {im.turms.proto.UpdateUserRequest} UpdateUserRequest
                 * @throws {Error} If the payload is not a reader or valid buffer
                 * @throws {$protobuf.util.ProtocolError} If required fields are missing
                 */
                UpdateUserRequest.decode = function decode(reader, length) {
                    if (!(reader instanceof $Reader))
                        reader = $Reader.create(reader);
                    var end = length === undefined ? reader.len : reader.pos + length, message = new $root.im.turms.proto.UpdateUserRequest();
                    while (reader.pos < end) {
                        var tag = reader.uint32();
                        switch (tag >>> 3) {
                        case 1:
                            message.password = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 2:
                            message.name = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 3:
                            message.intro = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 4:
                            message.profilePictureUrl = $root.google.protobuf.StringValue.decode(reader, reader.uint32());
                            break;
                        case 5:
                            message.profileAccessStrategy = reader.int32();
                            break;
                        default:
                            reader.skipType(tag & 7);
                            break;
                        }
                    }
                    return message;
                };

                return UpdateUserRequest;
            })();

            return proto;
        })();

        return turms;
    })();

    return im;
})();

$root.google = (function() {

    /**
     * Namespace google.
     * @exports google
     * @namespace
     */
    var google = {};

    google.protobuf = (function() {

        /**
         * Namespace protobuf.
         * @memberof google
         * @namespace
         */
        var protobuf = {};

        protobuf.DoubleValue = (function() {

            /**
             * Properties of a DoubleValue.
             * @memberof google.protobuf
             * @interface IDoubleValue
             * @property {number|null} [value] DoubleValue value
             */

            /**
             * Constructs a new DoubleValue.
             * @memberof google.protobuf
             * @classdesc Represents a DoubleValue.
             * @implements IDoubleValue
             * @constructor
             * @param {google.protobuf.IDoubleValue=} [properties] Properties to set
             */
            function DoubleValue(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * DoubleValue value.
             * @member {number} value
             * @memberof google.protobuf.DoubleValue
             * @instance
             */
            DoubleValue.prototype.value = 0;

            /**
             * Encodes the specified DoubleValue message. Does not implicitly {@link google.protobuf.DoubleValue.verify|verify} messages.
             * @function encode
             * @memberof google.protobuf.DoubleValue
             * @static
             * @param {google.protobuf.IDoubleValue} message DoubleValue message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            DoubleValue.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.value != null && Object.hasOwnProperty.call(message, "value"))
                    writer.uint32(/* id 1, wireType 1 =*/9).double(message.value);
                return writer;
            };

            /**
             * Decodes a DoubleValue message from the specified reader or buffer.
             * @function decode
             * @memberof google.protobuf.DoubleValue
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {google.protobuf.DoubleValue} DoubleValue
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            DoubleValue.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.DoubleValue();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.value = reader.double();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            return DoubleValue;
        })();

        protobuf.FloatValue = (function() {

            /**
             * Properties of a FloatValue.
             * @memberof google.protobuf
             * @interface IFloatValue
             * @property {number|null} [value] FloatValue value
             */

            /**
             * Constructs a new FloatValue.
             * @memberof google.protobuf
             * @classdesc Represents a FloatValue.
             * @implements IFloatValue
             * @constructor
             * @param {google.protobuf.IFloatValue=} [properties] Properties to set
             */
            function FloatValue(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * FloatValue value.
             * @member {number} value
             * @memberof google.protobuf.FloatValue
             * @instance
             */
            FloatValue.prototype.value = 0;

            /**
             * Encodes the specified FloatValue message. Does not implicitly {@link google.protobuf.FloatValue.verify|verify} messages.
             * @function encode
             * @memberof google.protobuf.FloatValue
             * @static
             * @param {google.protobuf.IFloatValue} message FloatValue message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            FloatValue.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.value != null && Object.hasOwnProperty.call(message, "value"))
                    writer.uint32(/* id 1, wireType 5 =*/13).float(message.value);
                return writer;
            };

            /**
             * Decodes a FloatValue message from the specified reader or buffer.
             * @function decode
             * @memberof google.protobuf.FloatValue
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {google.protobuf.FloatValue} FloatValue
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            FloatValue.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.FloatValue();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.value = reader.float();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            return FloatValue;
        })();

        protobuf.Int64Value = (function() {

            /**
             * Properties of an Int64Value.
             * @memberof google.protobuf
             * @interface IInt64Value
             * @property {string|null} [value] Int64Value value
             */

            /**
             * Constructs a new Int64Value.
             * @memberof google.protobuf
             * @classdesc Represents an Int64Value.
             * @implements IInt64Value
             * @constructor
             * @param {google.protobuf.IInt64Value=} [properties] Properties to set
             */
            function Int64Value(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Int64Value value.
             * @member {string} value
             * @memberof google.protobuf.Int64Value
             * @instance
             */
            Int64Value.prototype.value = "0";

            /**
             * Encodes the specified Int64Value message. Does not implicitly {@link google.protobuf.Int64Value.verify|verify} messages.
             * @function encode
             * @memberof google.protobuf.Int64Value
             * @static
             * @param {google.protobuf.IInt64Value} message Int64Value message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Int64Value.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.value != null && Object.hasOwnProperty.call(message, "value"))
                    writer.uint32(/* id 1, wireType 0 =*/8).int64(message.value);
                return writer;
            };

            /**
             * Decodes an Int64Value message from the specified reader or buffer.
             * @function decode
             * @memberof google.protobuf.Int64Value
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {google.protobuf.Int64Value} Int64Value
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Int64Value.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.Int64Value();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.value = reader.int64().toString();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            return Int64Value;
        })();

        protobuf.UInt64Value = (function() {

            /**
             * Properties of a UInt64Value.
             * @memberof google.protobuf
             * @interface IUInt64Value
             * @property {string|null} [value] UInt64Value value
             */

            /**
             * Constructs a new UInt64Value.
             * @memberof google.protobuf
             * @classdesc Represents a UInt64Value.
             * @implements IUInt64Value
             * @constructor
             * @param {google.protobuf.IUInt64Value=} [properties] Properties to set
             */
            function UInt64Value(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * UInt64Value value.
             * @member {string} value
             * @memberof google.protobuf.UInt64Value
             * @instance
             */
            UInt64Value.prototype.value = "0";

            /**
             * Encodes the specified UInt64Value message. Does not implicitly {@link google.protobuf.UInt64Value.verify|verify} messages.
             * @function encode
             * @memberof google.protobuf.UInt64Value
             * @static
             * @param {google.protobuf.IUInt64Value} message UInt64Value message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            UInt64Value.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.value != null && Object.hasOwnProperty.call(message, "value"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint64(message.value);
                return writer;
            };

            /**
             * Decodes a UInt64Value message from the specified reader or buffer.
             * @function decode
             * @memberof google.protobuf.UInt64Value
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {google.protobuf.UInt64Value} UInt64Value
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            UInt64Value.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.UInt64Value();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.value = reader.uint64().toString();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            return UInt64Value;
        })();

        protobuf.Int32Value = (function() {

            /**
             * Properties of an Int32Value.
             * @memberof google.protobuf
             * @interface IInt32Value
             * @property {number|null} [value] Int32Value value
             */

            /**
             * Constructs a new Int32Value.
             * @memberof google.protobuf
             * @classdesc Represents an Int32Value.
             * @implements IInt32Value
             * @constructor
             * @param {google.protobuf.IInt32Value=} [properties] Properties to set
             */
            function Int32Value(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * Int32Value value.
             * @member {number} value
             * @memberof google.protobuf.Int32Value
             * @instance
             */
            Int32Value.prototype.value = 0;

            /**
             * Encodes the specified Int32Value message. Does not implicitly {@link google.protobuf.Int32Value.verify|verify} messages.
             * @function encode
             * @memberof google.protobuf.Int32Value
             * @static
             * @param {google.protobuf.IInt32Value} message Int32Value message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            Int32Value.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.value != null && Object.hasOwnProperty.call(message, "value"))
                    writer.uint32(/* id 1, wireType 0 =*/8).int32(message.value);
                return writer;
            };

            /**
             * Decodes an Int32Value message from the specified reader or buffer.
             * @function decode
             * @memberof google.protobuf.Int32Value
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {google.protobuf.Int32Value} Int32Value
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            Int32Value.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.Int32Value();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.value = reader.int32();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            return Int32Value;
        })();

        protobuf.UInt32Value = (function() {

            /**
             * Properties of a UInt32Value.
             * @memberof google.protobuf
             * @interface IUInt32Value
             * @property {number|null} [value] UInt32Value value
             */

            /**
             * Constructs a new UInt32Value.
             * @memberof google.protobuf
             * @classdesc Represents a UInt32Value.
             * @implements IUInt32Value
             * @constructor
             * @param {google.protobuf.IUInt32Value=} [properties] Properties to set
             */
            function UInt32Value(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * UInt32Value value.
             * @member {number} value
             * @memberof google.protobuf.UInt32Value
             * @instance
             */
            UInt32Value.prototype.value = 0;

            /**
             * Encodes the specified UInt32Value message. Does not implicitly {@link google.protobuf.UInt32Value.verify|verify} messages.
             * @function encode
             * @memberof google.protobuf.UInt32Value
             * @static
             * @param {google.protobuf.IUInt32Value} message UInt32Value message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            UInt32Value.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.value != null && Object.hasOwnProperty.call(message, "value"))
                    writer.uint32(/* id 1, wireType 0 =*/8).uint32(message.value);
                return writer;
            };

            /**
             * Decodes a UInt32Value message from the specified reader or buffer.
             * @function decode
             * @memberof google.protobuf.UInt32Value
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {google.protobuf.UInt32Value} UInt32Value
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            UInt32Value.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.UInt32Value();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.value = reader.uint32();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            return UInt32Value;
        })();

        protobuf.BoolValue = (function() {

            /**
             * Properties of a BoolValue.
             * @memberof google.protobuf
             * @interface IBoolValue
             * @property {boolean|null} [value] BoolValue value
             */

            /**
             * Constructs a new BoolValue.
             * @memberof google.protobuf
             * @classdesc Represents a BoolValue.
             * @implements IBoolValue
             * @constructor
             * @param {google.protobuf.IBoolValue=} [properties] Properties to set
             */
            function BoolValue(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * BoolValue value.
             * @member {boolean} value
             * @memberof google.protobuf.BoolValue
             * @instance
             */
            BoolValue.prototype.value = false;

            /**
             * Encodes the specified BoolValue message. Does not implicitly {@link google.protobuf.BoolValue.verify|verify} messages.
             * @function encode
             * @memberof google.protobuf.BoolValue
             * @static
             * @param {google.protobuf.IBoolValue} message BoolValue message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            BoolValue.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.value != null && Object.hasOwnProperty.call(message, "value"))
                    writer.uint32(/* id 1, wireType 0 =*/8).bool(message.value);
                return writer;
            };

            /**
             * Decodes a BoolValue message from the specified reader or buffer.
             * @function decode
             * @memberof google.protobuf.BoolValue
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {google.protobuf.BoolValue} BoolValue
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            BoolValue.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.BoolValue();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.value = reader.bool();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            return BoolValue;
        })();

        protobuf.StringValue = (function() {

            /**
             * Properties of a StringValue.
             * @memberof google.protobuf
             * @interface IStringValue
             * @property {string|null} [value] StringValue value
             */

            /**
             * Constructs a new StringValue.
             * @memberof google.protobuf
             * @classdesc Represents a StringValue.
             * @implements IStringValue
             * @constructor
             * @param {google.protobuf.IStringValue=} [properties] Properties to set
             */
            function StringValue(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * StringValue value.
             * @member {string} value
             * @memberof google.protobuf.StringValue
             * @instance
             */
            StringValue.prototype.value = "";

            /**
             * Encodes the specified StringValue message. Does not implicitly {@link google.protobuf.StringValue.verify|verify} messages.
             * @function encode
             * @memberof google.protobuf.StringValue
             * @static
             * @param {google.protobuf.IStringValue} message StringValue message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            StringValue.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.value != null && Object.hasOwnProperty.call(message, "value"))
                    writer.uint32(/* id 1, wireType 2 =*/10).string(message.value);
                return writer;
            };

            /**
             * Decodes a StringValue message from the specified reader or buffer.
             * @function decode
             * @memberof google.protobuf.StringValue
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {google.protobuf.StringValue} StringValue
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            StringValue.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.StringValue();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.value = reader.string();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            return StringValue;
        })();

        protobuf.BytesValue = (function() {

            /**
             * Properties of a BytesValue.
             * @memberof google.protobuf
             * @interface IBytesValue
             * @property {Uint8Array|null} [value] BytesValue value
             */

            /**
             * Constructs a new BytesValue.
             * @memberof google.protobuf
             * @classdesc Represents a BytesValue.
             * @implements IBytesValue
             * @constructor
             * @param {google.protobuf.IBytesValue=} [properties] Properties to set
             */
            function BytesValue(properties) {
                if (properties)
                    for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)
                        if (properties[keys[i]] != null)
                            this[keys[i]] = properties[keys[i]];
            }

            /**
             * BytesValue value.
             * @member {Uint8Array} value
             * @memberof google.protobuf.BytesValue
             * @instance
             */
            BytesValue.prototype.value = $util.newBuffer([]);

            /**
             * Encodes the specified BytesValue message. Does not implicitly {@link google.protobuf.BytesValue.verify|verify} messages.
             * @function encode
             * @memberof google.protobuf.BytesValue
             * @static
             * @param {google.protobuf.IBytesValue} message BytesValue message or plain object to encode
             * @param {$protobuf.Writer} [writer] Writer to encode to
             * @returns {$protobuf.Writer} Writer
             */
            BytesValue.encode = function encode(message, writer) {
                if (!writer)
                    writer = $Writer.create();
                if (message.value != null && Object.hasOwnProperty.call(message, "value"))
                    writer.uint32(/* id 1, wireType 2 =*/10).bytes(message.value);
                return writer;
            };

            /**
             * Decodes a BytesValue message from the specified reader or buffer.
             * @function decode
             * @memberof google.protobuf.BytesValue
             * @static
             * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from
             * @param {number} [length] Message length if known beforehand
             * @returns {google.protobuf.BytesValue} BytesValue
             * @throws {Error} If the payload is not a reader or valid buffer
             * @throws {$protobuf.util.ProtocolError} If required fields are missing
             */
            BytesValue.decode = function decode(reader, length) {
                if (!(reader instanceof $Reader))
                    reader = $Reader.create(reader);
                var end = length === undefined ? reader.len : reader.pos + length, message = new $root.google.protobuf.BytesValue();
                while (reader.pos < end) {
                    var tag = reader.uint32();
                    switch (tag >>> 3) {
                    case 1:
                        message.value = reader.bytes();
                        break;
                    default:
                        reader.skipType(tag & 7);
                        break;
                    }
                }
                return message;
            };

            return BytesValue;
        })();

        return protobuf;
    })();

    return google;
})();

module.exports = $root;


/***/ }),
/* 7 */
/***/ (function(module, exports) {

var hasOwnProperty = {}.hasOwnProperty;

module.exports = function (it, key) {
  return hasOwnProperty.call(it, key);
};


/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = function (it) {
  return typeof it === 'object' ? it !== null : typeof it === 'function';
};


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(22);

var min = Math.min;

// `ToLength` abstract operation
// https://tc39.github.io/ecma262/#sec-tolength
module.exports = function (argument) {
  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991
};


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(4);

// Thank's IE8 for his funny defineProperty
module.exports = !fails(function () {
  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;
});


/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _model_proto_bundle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6);
/* harmony import */ var _model_proto_bundle__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_model_proto_bundle__WEBPACK_IMPORTED_MODULE_0__);

var ChatType = _model_proto_bundle__WEBPACK_IMPORTED_MODULE_0__["im"].turms.proto.ChatType;
var UserStatus = _model_proto_bundle__WEBPACK_IMPORTED_MODULE_0__["im"].turms.proto.UserStatus;
var ProfileAccessStrategy = _model_proto_bundle__WEBPACK_IMPORTED_MODULE_0__["im"].turms.proto.ProfileAccessStrategy;
var ResponseAction = _model_proto_bundle__WEBPACK_IMPORTED_MODULE_0__["im"].turms.proto.ResponseAction;
var GroupMemberRole = _model_proto_bundle__WEBPACK_IMPORTED_MODULE_0__["im"].turms.proto.GroupMemberRole;
var MessageDeliveryStatus = _model_proto_bundle__WEBPACK_IMPORTED_MODULE_0__["im"].turms.proto.MessageDeliveryStatus;

var ConstantTransformer = function () {
  function ConstantTransformer() {}

  ConstantTransformer.string2ChatType = function (chatType) {
    chatType = chatType.toUpperCase();

    switch (chatType) {
      case 'PRIVATE':
        return ChatType.PRIVATE;

      case 'GROUP':
        return ChatType.GROUP;

      default:
        throw new Error('illegal params');
    }
  };

  ConstantTransformer.string2GroupMemberRole = function (role) {
    role = role.toUpperCase();

    switch (role) {
      case 'OWNER':
        return GroupMemberRole.OWNER;

      case 'MANAGER':
        return GroupMemberRole.MANAGER;

      case 'MEMBER':
        return GroupMemberRole.MEMBER;

      case 'GUEST':
        return GroupMemberRole.GUEST;

      case 'ANONYMOUS_GUEST':
        return GroupMemberRole.ANONYMOUS_GUEST;

      default:
        throw new Error('illegal params');
    }
  };

  ConstantTransformer.string2UserOnlineStatus = function (userOnlineStatus) {
    userOnlineStatus = userOnlineStatus.toUpperCase();

    switch (userOnlineStatus) {
      case 'AVAILABLE':
        return UserStatus.AVAILABLE;

      case 'INVISIBLE':
        return UserStatus.INVISIBLE;

      case 'BUSY':
        return UserStatus.BUSY;

      case 'DO_NOT_DISTURB':
        return UserStatus.DO_NOT_DISTURB;

      case 'AWAY':
        return UserStatus.AWAY;

      case 'BE_RIGHT_BACK':
        return UserStatus.BE_RIGHT_BACK;

      default:
        throw new Error('illegal params');
    }
  };

  ConstantTransformer.string2ProfileAccessStrategy = function (strategy) {
    strategy = strategy.toUpperCase();

    switch (strategy) {
      case 'ALL':
        return ProfileAccessStrategy.ALL;

      case 'ALL_EXCEPT_BLACKLISTED_USERS':
        return ProfileAccessStrategy.ALL_EXCEPT_BLACKLISTED_USERS;

      case 'FRIENDS':
        return ProfileAccessStrategy.FRIENDS;

      default:
        throw new Error('illegal params');
    }
  };

  ConstantTransformer.string2ResponseAction = function (responseAction) {
    responseAction = responseAction.toUpperCase();

    switch (responseAction) {
      case 'ACCEPT':
        return ResponseAction.ACCEPT;

      case 'DECLINE':
        return ResponseAction.DECLINE;

      case 'IGNORE':
        return ResponseAction.IGNORE;

      default:
        throw new Error('illegal params');
    }
  };

  ConstantTransformer.string2DeliveryStatus = function (deliveryStatus) {
    deliveryStatus = deliveryStatus.toUpperCase();

    switch (deliveryStatus) {
      case 'READY':
        return MessageDeliveryStatus.READY;

      case 'SENDING':
        return MessageDeliveryStatus.SENDING;

      case 'RECEIVED':
        return MessageDeliveryStatus.RECEIVED;

      case 'RECALLING':
        return MessageDeliveryStatus.RECALLING;

      case 'RECALLED':
        return MessageDeliveryStatus.RECALLED;

      default:
        throw new Error('illegal params');
    }
  };

  return ConstantTransformer;
}();

/* harmony default export */ __webpack_exports__["a"] = (ConstantTransformer);

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(10);
var IE8_DOM_DEFINE = __webpack_require__(91);
var anObject = __webpack_require__(13);
var toPrimitive = __webpack_require__(40);

var nativeDefineProperty = Object.defineProperty;

// `Object.defineProperty` method
// https://tc39.github.io/ecma262/#sec-object.defineproperty
exports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPrimitive(P, true);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return nativeDefineProperty(O, P, Attributes);
  } catch (error) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(8);

module.exports = function (it) {
  if (!isObject(it)) {
    throw TypeError(String(it) + ' is not an object');
  } return it;
};


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var getOwnPropertyDescriptor = __webpack_require__(28).f;
var createNonEnumerableProperty = __webpack_require__(15);
var redefine = __webpack_require__(19);
var setGlobal = __webpack_require__(53);
var copyConstructorProperties = __webpack_require__(97);
var isForced = __webpack_require__(98);

/*
  options.target      - name of the target object
  options.global      - target is the global object
  options.stat        - export as static methods of target
  options.proto       - export as prototype methods of target
  options.real        - real prototype method for the `pure` version
  options.forced      - export even if the native feature is available
  options.bind        - bind methods to the target, required for the `pure` version
  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version
  options.unsafe      - use the simple assignment of property instead of delete + defineProperty
  options.sham        - add a flag to not completely full polyfills
  options.enumerable  - export as enumerable property
  options.noTargetGet - prevent calling a getter on target
*/
module.exports = function (options, source) {
  var TARGET = options.target;
  var GLOBAL = options.global;
  var STATIC = options.stat;
  var FORCED, target, key, targetProperty, sourceProperty, descriptor;
  if (GLOBAL) {
    target = global;
  } else if (STATIC) {
    target = global[TARGET] || setGlobal(TARGET, {});
  } else {
    target = (global[TARGET] || {}).prototype;
  }
  if (target) for (key in source) {
    sourceProperty = source[key];
    if (options.noTargetGet) {
      descriptor = getOwnPropertyDescriptor(target, key);
      targetProperty = descriptor && descriptor.value;
    } else targetProperty = target[key];
    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
    // contained in target
    if (!FORCED && targetProperty !== undefined) {
      if (typeof sourceProperty === typeof targetProperty) continue;
      copyConstructorProperties(sourceProperty, targetProperty);
    }
    // add a flag to not completely full polyfills
    if (options.sham || (targetProperty && targetProperty.sham)) {
      createNonEnumerableProperty(sourceProperty, 'sham', true);
    }
    // extend global
    redefine(target, key, sourceProperty, options);
  }
};


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(10);
var definePropertyModule = __webpack_require__(12);
var createPropertyDescriptor = __webpack_require__(30);

module.exports = DESCRIPTORS ? function (object, key, value) {
  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};


/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

var requireObjectCoercible = __webpack_require__(29);

// `ToObject` abstract operation
// https://tc39.github.io/ecma262/#sec-toobject
module.exports = function (argument) {
  return Object(requireObjectCoercible(argument));
};


/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

var bind = __webpack_require__(50);
var IndexedObject = __webpack_require__(39);
var toObject = __webpack_require__(16);
var toLength = __webpack_require__(9);
var arraySpeciesCreate = __webpack_require__(160);

var push = [].push;

// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation
var createMethod = function (TYPE) {
  var IS_MAP = TYPE == 1;
  var IS_FILTER = TYPE == 2;
  var IS_SOME = TYPE == 3;
  var IS_EVERY = TYPE == 4;
  var IS_FIND_INDEX = TYPE == 6;
  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
  return function ($this, callbackfn, that, specificCreate) {
    var O = toObject($this);
    var self = IndexedObject(O);
    var boundFunction = bind(callbackfn, that, 3);
    var length = toLength(self.length);
    var index = 0;
    var create = specificCreate || arraySpeciesCreate;
    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;
    var value, result;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      value = self[index];
      result = boundFunction(value, index, O);
      if (TYPE) {
        if (IS_MAP) target[index] = result; // map
        else if (result) switch (TYPE) {
          case 3: return true;              // some
          case 5: return value;             // find
          case 6: return index;             // findIndex
          case 2: push.call(target, value); // filter
        } else if (IS_EVERY) return false;  // every
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
  };
};

module.exports = {
  // `Array.prototype.forEach` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach
  forEach: createMethod(0),
  // `Array.prototype.map` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.map
  map: createMethod(1),
  // `Array.prototype.filter` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.filter
  filter: createMethod(2),
  // `Array.prototype.some` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.some
  some: createMethod(3),
  // `Array.prototype.every` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.every
  every: createMethod(4),
  // `Array.prototype.find` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.find
  find: createMethod(5),
  // `Array.prototype.findIndex` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex
  findIndex: createMethod(6)
};


/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIndexedObject = __webpack_require__(20);
var addToUnscopables = __webpack_require__(89);
var Iterators = __webpack_require__(31);
var InternalStateModule = __webpack_require__(23);
var defineIterator = __webpack_require__(96);

var ARRAY_ITERATOR = 'Array Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);

// `Array.prototype.entries` method
// https://tc39.github.io/ecma262/#sec-array.prototype.entries
// `Array.prototype.keys` method
// https://tc39.github.io/ecma262/#sec-array.prototype.keys
// `Array.prototype.values` method
// https://tc39.github.io/ecma262/#sec-array.prototype.values
// `Array.prototype[@@iterator]` method
// https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator
// `CreateArrayIterator` internal method
// https://tc39.github.io/ecma262/#sec-createarrayiterator
module.exports = defineIterator(Array, 'Array', function (iterated, kind) {
  setInternalState(this, {
    type: ARRAY_ITERATOR,
    target: toIndexedObject(iterated), // target
    index: 0,                          // next index
    kind: kind                         // kind
  });
// `%ArrayIteratorPrototype%.next` method
// https://tc39.github.io/ecma262/#sec-%arrayiteratorprototype%.next
}, function () {
  var state = getInternalState(this);
  var target = state.target;
  var kind = state.kind;
  var index = state.index++;
  if (!target || index >= target.length) {
    state.target = undefined;
    return { value: undefined, done: true };
  }
  if (kind == 'keys') return { value: index, done: false };
  if (kind == 'values') return { value: target[index], done: false };
  return { value: [index, target[index]], done: false };
}, 'values');

// argumentsList[@@iterator] is %ArrayProto_values%
// https://tc39.github.io/ecma262/#sec-createunmappedargumentsobject
// https://tc39.github.io/ecma262/#sec-createmappedargumentsobject
Iterators.Arguments = Iterators.Array;

// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');


/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var createNonEnumerableProperty = __webpack_require__(15);
var has = __webpack_require__(7);
var setGlobal = __webpack_require__(53);
var inspectSource = __webpack_require__(57);
var InternalStateModule = __webpack_require__(23);

var getInternalState = InternalStateModule.get;
var enforceInternalState = InternalStateModule.enforce;
var TEMPLATE = String(String).split('String');

(module.exports = function (O, key, value, options) {
  var unsafe = options ? !!options.unsafe : false;
  var simple = options ? !!options.enumerable : false;
  var noTargetGet = options ? !!options.noTargetGet : false;
  if (typeof value == 'function') {
    if (typeof key == 'string' && !has(value, 'name')) createNonEnumerableProperty(value, 'name', key);
    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');
  }
  if (O === global) {
    if (simple) O[key] = value;
    else setGlobal(key, value);
    return;
  } else if (!unsafe) {
    delete O[key];
  } else if (!noTargetGet && O[key]) {
    simple = true;
  }
  if (simple) O[key] = value;
  else createNonEnumerableProperty(O, key, value);
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype, 'toString', function toString() {
  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);
});


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

// toObject with fallback for non-array-like ES3 strings
var IndexedObject = __webpack_require__(39);
var requireObjectCoercible = __webpack_require__(29);

module.exports = function (it) {
  return IndexedObject(requireObjectCoercible(it));
};


/***/ }),
/* 21 */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = function (it) {
  return toString.call(it).slice(8, -1);
};


/***/ }),
/* 22 */
/***/ (function(module, exports) {

var ceil = Math.ceil;
var floor = Math.floor;

// `ToInteger` abstract operation
// https://tc39.github.io/ecma262/#sec-tointeger
module.exports = function (argument) {
  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);
};


/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

var NATIVE_WEAK_MAP = __webpack_require__(141);
var global = __webpack_require__(2);
var isObject = __webpack_require__(8);
var createNonEnumerableProperty = __webpack_require__(15);
var objectHas = __webpack_require__(7);
var sharedKey = __webpack_require__(47);
var hiddenKeys = __webpack_require__(46);

var WeakMap = global.WeakMap;
var set, get, has;

var enforce = function (it) {
  return has(it) ? get(it) : set(it, {});
};

var getterFor = function (TYPE) {
  return function (it) {
    var state;
    if (!isObject(it) || (state = get(it)).type !== TYPE) {
      throw TypeError('Incompatible receiver, ' + TYPE + ' required');
    } return state;
  };
};

if (NATIVE_WEAK_MAP) {
  var store = new WeakMap();
  var wmget = store.get;
  var wmhas = store.has;
  var wmset = store.set;
  set = function (it, metadata) {
    wmset.call(store, it, metadata);
    return metadata;
  };
  get = function (it) {
    return wmget.call(store, it) || {};
  };
  has = function (it) {
    return wmhas.call(store, it);
  };
} else {
  var STATE = sharedKey('state');
  hiddenKeys[STATE] = true;
  set = function (it, metadata) {
    createNonEnumerableProperty(it, STATE, metadata);
    return metadata;
  };
  get = function (it) {
    return objectHas(it, STATE) ? it[STATE] : {};
  };
  has = function (it) {
    return objectHas(it, STATE);
  };
}

module.exports = {
  set: set,
  get: get,
  has: has,
  enforce: enforce,
  getterFor: getterFor
};


/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

var TO_STRING_TAG_SUPPORT = __webpack_require__(60);
var redefine = __webpack_require__(19);
var toString = __webpack_require__(146);

// `Object.prototype.toString` method
// https://tc39.github.io/ecma262/#sec-object.prototype.tostring
if (!TO_STRING_TAG_SUPPORT) {
  redefine(Object.prototype, 'toString', toString, { unsafe: true });
}


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {
var util = exports;

// used to return a Promise where callback is omitted
util.asPromise = __webpack_require__(188);

// converts to / from base64 encoded strings
util.base64 = __webpack_require__(189);

// base class of rpc.Service
util.EventEmitter = __webpack_require__(190);

// float handling accross browsers
util.float = __webpack_require__(191);

// requires modules optionally and hides the call from bundlers
util.inquire = __webpack_require__(192);

// converts to / from utf8 encoded strings
util.utf8 = __webpack_require__(193);

// provides a node-like buffer pool in the browser
util.pool = __webpack_require__(194);

// utility to work with the low and high bits of a 64 bit value
util.LongBits = __webpack_require__(195);

// global object reference
util.global = typeof window !== "undefined" && window
           || typeof global !== "undefined" && global
           || typeof self   !== "undefined" && self
           || this; // eslint-disable-line no-invalid-this

/**
 * An immuable empty array.
 * @memberof util
 * @type {Array.<*>}
 * @const
 */
util.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes

/**
 * An immutable empty object.
 * @type {Object}
 * @const
 */
util.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes

/**
 * Whether running within node or not.
 * @memberof util
 * @type {boolean}
 * @const
 */
util.isNode = Boolean(util.global.process && util.global.process.versions && util.global.process.versions.node);

/**
 * Tests if the specified value is an integer.
 * @function
 * @param {*} value Value to test
 * @returns {boolean} `true` if the value is an integer
 */
util.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {
    return typeof value === "number" && isFinite(value) && Math.floor(value) === value;
};

/**
 * Tests if the specified value is a string.
 * @param {*} value Value to test
 * @returns {boolean} `true` if the value is a string
 */
util.isString = function isString(value) {
    return typeof value === "string" || value instanceof String;
};

/**
 * Tests if the specified value is a non-null object.
 * @param {*} value Value to test
 * @returns {boolean} `true` if the value is a non-null object
 */
util.isObject = function isObject(value) {
    return value && typeof value === "object";
};

/**
 * Checks if a property on a message is considered to be present.
 * This is an alias of {@link util.isSet}.
 * @function
 * @param {Object} obj Plain object or message instance
 * @param {string} prop Property name
 * @returns {boolean} `true` if considered to be present, otherwise `false`
 */
util.isset =

/**
 * Checks if a property on a message is considered to be present.
 * @param {Object} obj Plain object or message instance
 * @param {string} prop Property name
 * @returns {boolean} `true` if considered to be present, otherwise `false`
 */
util.isSet = function isSet(obj, prop) {
    var value = obj[prop];
    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins
        return typeof value !== "object" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;
    return false;
};

/**
 * Any compatible Buffer instance.
 * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.
 * @interface Buffer
 * @extends Uint8Array
 */

/**
 * Node's Buffer class if available.
 * @type {Constructor<Buffer>}
 */
util.Buffer = (function() {
    try {
        var Buffer = util.inquire("buffer").Buffer;
        // refuse to use non-node buffers if not explicitly assigned (perf reasons):
        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;
    } catch (e) {
        /* istanbul ignore next */
        return null;
    }
})();

// Internal alias of or polyfull for Buffer.from.
util._Buffer_from = null;

// Internal alias of or polyfill for Buffer.allocUnsafe.
util._Buffer_allocUnsafe = null;

/**
 * Creates a new buffer of whatever type supported by the environment.
 * @param {number|number[]} [sizeOrArray=0] Buffer size or number array
 * @returns {Uint8Array|Buffer} Buffer
 */
util.newBuffer = function newBuffer(sizeOrArray) {
    /* istanbul ignore next */
    return typeof sizeOrArray === "number"
        ? util.Buffer
            ? util._Buffer_allocUnsafe(sizeOrArray)
            : new util.Array(sizeOrArray)
        : util.Buffer
            ? util._Buffer_from(sizeOrArray)
            : typeof Uint8Array === "undefined"
                ? sizeOrArray
                : new Uint8Array(sizeOrArray);
};

/**
 * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.
 * @type {Constructor<Uint8Array>}
 */
util.Array = typeof Uint8Array !== "undefined" ? Uint8Array /* istanbul ignore next */ : Array;

/**
 * Any compatible Long instance.
 * This is a minimal stand-alone definition of a Long instance. The actual type is that exported by long.js.
 * @interface Long
 * @property {number} low Low bits
 * @property {number} high High bits
 * @property {boolean} unsigned Whether unsigned or not
 */

/**
 * Long.js's Long class if available.
 * @type {Constructor<Long>}
 */
util.Long = /* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long
         || /* istanbul ignore next */ util.global.Long
         || util.inquire("long");

/**
 * Regular expression used to verify 2 bit (`bool`) map keys.
 * @type {RegExp}
 * @const
 */
util.key2Re = /^true|false|0|1$/;

/**
 * Regular expression used to verify 32 bit (`int32` etc.) map keys.
 * @type {RegExp}
 * @const
 */
util.key32Re = /^-?(?:0|[1-9][0-9]*)$/;

/**
 * Regular expression used to verify 64 bit (`int64` etc.) map keys.
 * @type {RegExp}
 * @const
 */
util.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;

/**
 * Converts a number or long to an 8 characters long hash string.
 * @param {Long|number} value Value to convert
 * @returns {string} Hash
 */
util.longToHash = function longToHash(value) {
    return value
        ? util.LongBits.from(value).toHash()
        : util.LongBits.zeroHash;
};

/**
 * Converts an 8 characters long hash string to a long or number.
 * @param {string} hash Hash
 * @param {boolean} [unsigned=false] Whether unsigned or not
 * @returns {Long|number} Original value
 */
util.longFromHash = function longFromHash(hash, unsigned) {
    var bits = util.LongBits.fromHash(hash);
    if (util.Long)
        return util.Long.fromBits(bits.lo, bits.hi, unsigned);
    return bits.toNumber(Boolean(unsigned));
};

/**
 * Merges the properties of the source object into the destination object.
 * @memberof util
 * @param {Object.<string,*>} dst Destination object
 * @param {Object.<string,*>} src Source object
 * @param {boolean} [ifNotSet=false] Merges only if the key is not already set
 * @returns {Object.<string,*>} Destination object
 */
function merge(dst, src, ifNotSet) { // used by converters
    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)
        if (dst[keys[i]] === undefined || !ifNotSet)
            dst[keys[i]] = src[keys[i]];
    return dst;
}

util.merge = merge;

/**
 * Converts the first character of a string to lower case.
 * @param {string} str String to convert
 * @returns {string} Converted string
 */
util.lcFirst = function lcFirst(str) {
    return str.charAt(0).toLowerCase() + str.substring(1);
};

/**
 * Creates a custom error constructor.
 * @memberof util
 * @param {string} name Error name
 * @returns {Constructor<Error>} Custom error constructor
 */
function newError(name) {

    function CustomError(message, properties) {

        if (!(this instanceof CustomError))
            return new CustomError(message, properties);

        // Error.call(this, message);
        // ^ just returns a new error instance because the ctor can be called as a function

        Object.defineProperty(this, "message", { get: function() { return message; } });

        /* istanbul ignore next */
        if (Error.captureStackTrace) // node
            Error.captureStackTrace(this, CustomError);
        else
            Object.defineProperty(this, "stack", { value: (new Error()).stack || "" });

        if (properties)
            merge(this, properties);
    }

    (CustomError.prototype = Object.create(Error.prototype)).constructor = CustomError;

    Object.defineProperty(CustomError.prototype, "name", { get: function() { return name; } });

    CustomError.prototype.toString = function toString() {
        return this.name + ": " + this.message;
    };

    return CustomError;
}

util.newError = newError;

/**
 * Constructs a new protocol error.
 * @classdesc Error subclass indicating a protocol specifc error.
 * @memberof util
 * @extends Error
 * @template T extends Message<T>
 * @constructor
 * @param {string} message Error message
 * @param {Object.<string,*>} [properties] Additional properties
 * @example
 * try {
 *     MyMessage.decode(someBuffer); // throws if required fields are missing
 * } catch (e) {
 *     if (e instanceof ProtocolError && e.instance)
 *         console.log("decoded so far: " + JSON.stringify(e.instance));
 * }
 */
util.ProtocolError = newError("ProtocolError");

/**
 * So far decoded message instance.
 * @name util.ProtocolError#instance
 * @type {Message<T>}
 */

/**
 * A OneOf getter as returned by {@link util.oneOfGetter}.
 * @typedef OneOfGetter
 * @type {function}
 * @returns {string|undefined} Set field name, if any
 */

/**
 * Builds a getter for a oneof's present field name.
 * @param {string[]} fieldNames Field names
 * @returns {OneOfGetter} Unbound getter
 */
util.oneOfGetter = function getOneOf(fieldNames) {
    var fieldMap = {};
    for (var i = 0; i < fieldNames.length; ++i)
        fieldMap[fieldNames[i]] = 1;

    /**
     * @returns {string|undefined} Set field name, if any
     * @this Object
     * @ignore
     */
    return function() { // eslint-disable-line consistent-return
        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)
            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)
                return keys[i];
    };
};

/**
 * A OneOf setter as returned by {@link util.oneOfSetter}.
 * @typedef OneOfSetter
 * @type {function}
 * @param {string|undefined} value Field name
 * @returns {undefined}
 */

/**
 * Builds a setter for a oneof's present field name.
 * @param {string[]} fieldNames Field names
 * @returns {OneOfSetter} Unbound setter
 */
util.oneOfSetter = function setOneOf(fieldNames) {

    /**
     * @param {string} name Field name
     * @returns {undefined}
     * @this Object
     * @ignore
     */
    return function(name) {
        for (var i = 0; i < fieldNames.length; ++i)
            if (fieldNames[i] !== name)
                delete this[fieldNames[i]];
    };
};

/**
 * Default conversion options used for {@link Message#toJSON} implementations.
 *
 * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:
 *
 * - Longs become strings
 * - Enums become string keys
 * - Bytes become base64 encoded strings
 * - (Sub-)Messages become plain objects
 * - Maps become plain objects with all string keys
 * - Repeated fields become arrays
 * - NaN and Infinity for float and double fields become strings
 *
 * @type {IConversionOptions}
 * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json
 */
util.toJSONOptions = {
    longs: String,
    enums: String,
    bytes: String,
    json: true
};

// Sets up buffer utility according to the environment (called in index-minimal)
util._configure = function() {
    var Buffer = util.Buffer;
    /* istanbul ignore if */
    if (!Buffer) {
        util._Buffer_from = util._Buffer_allocUnsafe = null;
        return;
    }
    // because node 4.x buffers are incompatible & immutable
    // see: https://github.com/dcodeIO/protobuf.js/pull/665
    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||
        /* istanbul ignore next */
        function Buffer_from(value, encoding) {
            return new Buffer(value, encoding);
        };
    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||
        /* istanbul ignore next */
        function Buffer_allocUnsafe(size) {
            return new Buffer(size);
        };
};

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(38)))

/***/ }),
/* 26 */
/***/ (function(module, exports) {

module.exports = false;


/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

var path = __webpack_require__(95);
var global = __webpack_require__(2);

var aFunction = function (variable) {
  return typeof variable == 'function' ? variable : undefined;
};

module.exports = function (namespace, method) {
  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])
    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];
};


/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(10);
var propertyIsEnumerableModule = __webpack_require__(58);
var createPropertyDescriptor = __webpack_require__(30);
var toIndexedObject = __webpack_require__(20);
var toPrimitive = __webpack_require__(40);
var has = __webpack_require__(7);
var IE8_DOM_DEFINE = __webpack_require__(91);

var nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// `Object.getOwnPropertyDescriptor` method
// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor
exports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
  O = toIndexedObject(O);
  P = toPrimitive(P, true);
  if (IE8_DOM_DEFINE) try {
    return nativeGetOwnPropertyDescriptor(O, P);
  } catch (error) { /* empty */ }
  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);
};


/***/ }),
/* 29 */
/***/ (function(module, exports) {

// `RequireObjectCoercible` abstract operation
// https://tc39.github.io/ecma262/#sec-requireobjectcoercible
module.exports = function (it) {
  if (it == undefined) throw TypeError("Can't call method on " + it);
  return it;
};


/***/ }),
/* 30 */
/***/ (function(module, exports) {

module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};


/***/ }),
/* 31 */
/***/ (function(module, exports) {

module.exports = {};


/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

var internalObjectKeys = __webpack_require__(93);
var enumBugKeys = __webpack_require__(56);

var hiddenKeys = enumBugKeys.concat('length', 'prototype');

// `Object.getOwnPropertyNames` method
// https://tc39.github.io/ecma262/#sec-object.getownpropertynames
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return internalObjectKeys(O, hiddenKeys);
};


/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

var defineProperty = __webpack_require__(12).f;
var has = __webpack_require__(7);
var wellKnownSymbol = __webpack_require__(5);

var TO_STRING_TAG = wellKnownSymbol('toStringTag');

module.exports = function (it, TAG, STATIC) {
  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {
    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });
  }
};


/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(13);
var aPossiblePrototype = __webpack_require__(145);

// `Object.setPrototypeOf` method
// https://tc39.github.io/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
/* eslint-disable no-proto */
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {
  var CORRECT_SETTER = false;
  var test = {};
  var setter;
  try {
    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;
    setter.call(test, []);
    CORRECT_SETTER = test instanceof Array;
  } catch (error) { /* empty */ }
  return function setPrototypeOf(O, proto) {
    anObject(O);
    aPossiblePrototype(proto);
    if (CORRECT_SETTER) setter.call(O, proto);
    else O.__proto__ = proto;
    return O;
  };
}() : undefined);


/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(14);
var IS_PURE = __webpack_require__(26);
var global = __webpack_require__(2);
var getBuiltIn = __webpack_require__(27);
var NativePromise = __webpack_require__(147);
var redefine = __webpack_require__(19);
var redefineAll = __webpack_require__(100);
var setToStringTag = __webpack_require__(33);
var setSpecies = __webpack_require__(101);
var isObject = __webpack_require__(8);
var aFunction = __webpack_require__(36);
var anInstance = __webpack_require__(61);
var classof = __webpack_require__(21);
var inspectSource = __webpack_require__(57);
var iterate = __webpack_require__(148);
var checkCorrectnessOfIteration = __webpack_require__(104);
var speciesConstructor = __webpack_require__(37);
var task = __webpack_require__(105).set;
var microtask = __webpack_require__(150);
var promiseResolve = __webpack_require__(151);
var hostReportErrors = __webpack_require__(152);
var newPromiseCapabilityModule = __webpack_require__(108);
var perform = __webpack_require__(153);
var InternalStateModule = __webpack_require__(23);
var isForced = __webpack_require__(98);
var wellKnownSymbol = __webpack_require__(5);
var V8_VERSION = __webpack_require__(109);

var SPECIES = wellKnownSymbol('species');
var PROMISE = 'Promise';
var getInternalState = InternalStateModule.get;
var setInternalState = InternalStateModule.set;
var getInternalPromiseState = InternalStateModule.getterFor(PROMISE);
var PromiseConstructor = NativePromise;
var TypeError = global.TypeError;
var document = global.document;
var process = global.process;
var $fetch = getBuiltIn('fetch');
var newPromiseCapability = newPromiseCapabilityModule.f;
var newGenericPromiseCapability = newPromiseCapability;
var IS_NODE = classof(process) == 'process';
var DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);
var UNHANDLED_REJECTION = 'unhandledrejection';
var REJECTION_HANDLED = 'rejectionhandled';
var PENDING = 0;
var FULFILLED = 1;
var REJECTED = 2;
var HANDLED = 1;
var UNHANDLED = 2;
var Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;

var FORCED = isForced(PROMISE, function () {
  var GLOBAL_CORE_JS_PROMISE = inspectSource(PromiseConstructor) !== String(PromiseConstructor);
  if (!GLOBAL_CORE_JS_PROMISE) {
    // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables
    // https://bugs.chromium.org/p/chromium/issues/detail?id=830565
    // We can't detect it synchronously, so just check versions
    if (V8_VERSION === 66) return true;
    // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test
    if (!IS_NODE && typeof PromiseRejectionEvent != 'function') return true;
  }
  // We need Promise#finally in the pure version for preventing prototype pollution
  if (IS_PURE && !PromiseConstructor.prototype['finally']) return true;
  // We can't use @@species feature detection in V8 since it causes
  // deoptimization and performance degradation
  // https://github.com/zloirock/core-js/issues/679
  if (V8_VERSION >= 51 && /native code/.test(PromiseConstructor)) return false;
  // Detect correctness of subclassing with @@species support
  var promise = PromiseConstructor.resolve(1);
  var FakePromise = function (exec) {
    exec(function () { /* empty */ }, function () { /* empty */ });
  };
  var constructor = promise.constructor = {};
  constructor[SPECIES] = FakePromise;
  return !(promise.then(function () { /* empty */ }) instanceof FakePromise);
});

var INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {
  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });
});

// helpers
var isThenable = function (it) {
  var then;
  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;
};

var notify = function (promise, state, isReject) {
  if (state.notified) return;
  state.notified = true;
  var chain = state.reactions;
  microtask(function () {
    var value = state.value;
    var ok = state.state == FULFILLED;
    var index = 0;
    // variable length - can't use forEach
    while (chain.length > index) {
      var reaction = chain[index++];
      var handler = ok ? reaction.ok : reaction.fail;
      var resolve = reaction.resolve;
      var reject = reaction.reject;
      var domain = reaction.domain;
      var result, then, exited;
      try {
        if (handler) {
          if (!ok) {
            if (state.rejection === UNHANDLED) onHandleUnhandled(promise, state);
            state.rejection = HANDLED;
          }
          if (handler === true) result = value;
          else {
            if (domain) domain.enter();
            result = handler(value); // can throw
            if (domain) {
              domain.exit();
              exited = true;
            }
          }
          if (result === reaction.promise) {
            reject(TypeError('Promise-chain cycle'));
          } else if (then = isThenable(result)) {
            then.call(result, resolve, reject);
          } else resolve(result);
        } else reject(value);
      } catch (error) {
        if (domain && !exited) domain.exit();
        reject(error);
      }
    }
    state.reactions = [];
    state.notified = false;
    if (isReject && !state.rejection) onUnhandled(promise, state);
  });
};

var dispatchEvent = function (name, promise, reason) {
  var event, handler;
  if (DISPATCH_EVENT) {
    event = document.createEvent('Event');
    event.promise = promise;
    event.reason = reason;
    event.initEvent(name, false, true);
    global.dispatchEvent(event);
  } else event = { promise: promise, reason: reason };
  if (handler = global['on' + name]) handler(event);
  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);
};

var onUnhandled = function (promise, state) {
  task.call(global, function () {
    var value = state.value;
    var IS_UNHANDLED = isUnhandled(state);
    var result;
    if (IS_UNHANDLED) {
      result = perform(function () {
        if (IS_NODE) {
          process.emit('unhandledRejection', value, promise);
        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);
      });
      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;
      if (result.error) throw result.value;
    }
  });
};

var isUnhandled = function (state) {
  return state.rejection !== HANDLED && !state.parent;
};

var onHandleUnhandled = function (promise, state) {
  task.call(global, function () {
    if (IS_NODE) {
      process.emit('rejectionHandled', promise);
    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);
  });
};

var bind = function (fn, promise, state, unwrap) {
  return function (value) {
    fn(promise, state, value, unwrap);
  };
};

var internalReject = function (promise, state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;
  state.value = value;
  state.state = REJECTED;
  notify(promise, state, true);
};

var internalResolve = function (promise, state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;
  try {
    if (promise === value) throw TypeError("Promise can't be resolved itself");
    var then = isThenable(value);
    if (then) {
      microtask(function () {
        var wrapper = { done: false };
        try {
          then.call(value,
            bind(internalResolve, promise, wrapper, state),
            bind(internalReject, promise, wrapper, state)
          );
        } catch (error) {
          internalReject(promise, wrapper, error, state);
        }
      });
    } else {
      state.value = value;
      state.state = FULFILLED;
      notify(promise, state, false);
    }
  } catch (error) {
    internalReject(promise, { done: false }, error, state);
  }
};

// constructor polyfill
if (FORCED) {
  // 25.4.3.1 Promise(executor)
  PromiseConstructor = function Promise(executor) {
    anInstance(this, PromiseConstructor, PROMISE);
    aFunction(executor);
    Internal.call(this);
    var state = getInternalState(this);
    try {
      executor(bind(internalResolve, this, state), bind(internalReject, this, state));
    } catch (error) {
      internalReject(this, state, error);
    }
  };
  // eslint-disable-next-line no-unused-vars
  Internal = function Promise(executor) {
    setInternalState(this, {
      type: PROMISE,
      done: false,
      notified: false,
      parent: false,
      reactions: [],
      rejection: false,
      state: PENDING,
      value: undefined
    });
  };
  Internal.prototype = redefineAll(PromiseConstructor.prototype, {
    // `Promise.prototype.then` method
    // https://tc39.github.io/ecma262/#sec-promise.prototype.then
    then: function then(onFulfilled, onRejected) {
      var state = getInternalPromiseState(this);
      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));
      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;
      reaction.fail = typeof onRejected == 'function' && onRejected;
      reaction.domain = IS_NODE ? process.domain : undefined;
      state.parent = true;
      state.reactions.push(reaction);
      if (state.state != PENDING) notify(this, state, false);
      return reaction.promise;
    },
    // `Promise.prototype.catch` method
    // https://tc39.github.io/ecma262/#sec-promise.prototype.catch
    'catch': function (onRejected) {
      return this.then(undefined, onRejected);
    }
  });
  OwnPromiseCapability = function () {
    var promise = new Internal();
    var state = getInternalState(promise);
    this.promise = promise;
    this.resolve = bind(internalResolve, promise, state);
    this.reject = bind(internalReject, promise, state);
  };
  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {
    return C === PromiseConstructor || C === PromiseWrapper
      ? new OwnPromiseCapability(C)
      : newGenericPromiseCapability(C);
  };

  if (!IS_PURE && typeof NativePromise == 'function') {
    nativeThen = NativePromise.prototype.then;

    // wrap native Promise#then for native async functions
    redefine(NativePromise.prototype, 'then', function then(onFulfilled, onRejected) {
      var that = this;
      return new PromiseConstructor(function (resolve, reject) {
        nativeThen.call(that, resolve, reject);
      }).then(onFulfilled, onRejected);
    // https://github.com/zloirock/core-js/issues/640
    }, { unsafe: true });

    // wrap fetch result
    if (typeof $fetch == 'function') $({ global: true, enumerable: true, forced: true }, {
      // eslint-disable-next-line no-unused-vars
      fetch: function fetch(input /* , init */) {
        return promiseResolve(PromiseConstructor, $fetch.apply(global, arguments));
      }
    });
  }
}

$({ global: true, wrap: true, forced: FORCED }, {
  Promise: PromiseConstructor
});

setToStringTag(PromiseConstructor, PROMISE, false, true);
setSpecies(PROMISE);

PromiseWrapper = getBuiltIn(PROMISE);

// statics
$({ target: PROMISE, stat: true, forced: FORCED }, {
  // `Promise.reject` method
  // https://tc39.github.io/ecma262/#sec-promise.reject
  reject: function reject(r) {
    var capability = newPromiseCapability(this);
    capability.reject.call(undefined, r);
    return capability.promise;
  }
});

$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {
  // `Promise.resolve` method
  // https://tc39.github.io/ecma262/#sec-promise.resolve
  resolve: function resolve(x) {
    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);
  }
});

$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {
  // `Promise.all` method
  // https://tc39.github.io/ecma262/#sec-promise.all
  all: function all(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform(function () {
      var $promiseResolve = aFunction(C.resolve);
      var values = [];
      var counter = 0;
      var remaining = 1;
      iterate(iterable, function (promise) {
        var index = counter++;
        var alreadyCalled = false;
        values.push(undefined);
        remaining++;
        $promiseResolve.call(C, promise).then(function (value) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[index] = value;
          --remaining || resolve(values);
        }, reject);
      });
      --remaining || resolve(values);
    });
    if (result.error) reject(result.value);
    return capability.promise;
  },
  // `Promise.race` method
  // https://tc39.github.io/ecma262/#sec-promise.race
  race: function race(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var reject = capability.reject;
    var result = perform(function () {
      var $promiseResolve = aFunction(C.resolve);
      iterate(iterable, function (promise) {
        $promiseResolve.call(C, promise).then(capability.resolve, reject);
      });
    });
    if (result.error) reject(result.value);
    return capability.promise;
  }
});


/***/ }),
/* 36 */
/***/ (function(module, exports) {

module.exports = function (it) {
  if (typeof it != 'function') {
    throw TypeError(String(it) + ' is not a function');
  } return it;
};


/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(13);
var aFunction = __webpack_require__(36);
var wellKnownSymbol = __webpack_require__(5);

var SPECIES = wellKnownSymbol('species');

// `SpeciesConstructor` abstract operation
// https://tc39.github.io/ecma262/#sec-speciesconstructor
module.exports = function (O, defaultConstructor) {
  var C = anObject(O).constructor;
  var S;
  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);
};


/***/ }),
/* 38 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(4);
var classof = __webpack_require__(21);

var split = ''.split;

// fallback for non-array-like ES3 and non-enumerable old V8 strings
module.exports = fails(function () {
  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
  // eslint-disable-next-line no-prototype-builtins
  return !Object('z').propertyIsEnumerable(0);
}) ? function (it) {
  return classof(it) == 'String' ? split.call(it, '') : Object(it);
} : Object;


/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(8);

// `ToPrimitive` abstract operation
// https://tc39.github.io/ecma262/#sec-toprimitive
// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
module.exports = function (input, PREFERRED_STRING) {
  if (!isObject(input)) return input;
  var fn, val;
  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;
  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;
  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;
  throw TypeError("Can't convert object to primitive value");
};


/***/ }),
/* 41 */
/***/ (function(module, exports) {

var id = 0;
var postfix = Math.random();

module.exports = function (key) {
  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);
};


/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(13);
var defineProperties = __webpack_require__(140);
var enumBugKeys = __webpack_require__(56);
var hiddenKeys = __webpack_require__(46);
var html = __webpack_require__(94);
var documentCreateElement = __webpack_require__(54);
var sharedKey = __webpack_require__(47);

var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');

var EmptyConstructor = function () { /* empty */ };

var scriptTag = function (content) {
  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};

// Create object with fake `null` prototype: use ActiveX Object with cleared prototype
var NullProtoObjectViaActiveX = function (activeXDocument) {
  activeXDocument.write(scriptTag(''));
  activeXDocument.close();
  var temp = activeXDocument.parentWindow.Object;
  activeXDocument = null; // avoid memory leak
  return temp;
};

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var NullProtoObjectViaIFrame = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var JS = 'java' + SCRIPT + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html.appendChild(iframe);
  // https://github.com/zloirock/core-js/issues/475
  iframe.src = String(JS);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(scriptTag('document.F=Object'));
  iframeDocument.close();
  return iframeDocument.F;
};

// Check for document.domain and active x support
// No need to use active x approach when document.domain is not set
// see https://github.com/es-shims/es5-shim/issues/150
// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
// avoid IE GC bug
var activeXDocument;
var NullProtoObject = function () {
  try {
    /* global ActiveXObject */
    activeXDocument = document.domain && new ActiveXObject('htmlfile');
  } catch (error) { /* ignore */ }
  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();
  var length = enumBugKeys.length;
  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
  return NullProtoObject();
};

hiddenKeys[IE_PROTO] = true;

// `Object.create` method
// https://tc39.github.io/ecma262/#sec-object.create
module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    EmptyConstructor[PROTOTYPE] = anObject(O);
    result = new EmptyConstructor();
    EmptyConstructor[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = NullProtoObject();
  return Properties === undefined ? result : defineProperties(result, Properties);
};


/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

var internalObjectKeys = __webpack_require__(93);
var enumBugKeys = __webpack_require__(56);

// `Object.keys` method
// https://tc39.github.io/ecma262/#sec-object.keys
module.exports = Object.keys || function keys(O) {
  return internalObjectKeys(O, enumBugKeys);
};


/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

var toIndexedObject = __webpack_require__(20);
var toLength = __webpack_require__(9);
var toAbsoluteIndex = __webpack_require__(45);

// `Array.prototype.{ indexOf, includes }` methods implementation
var createMethod = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIndexedObject($this);
    var length = toLength(O.length);
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare
    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare
      if (value != value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) {
      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

module.exports = {
  // `Array.prototype.includes` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.includes
  includes: createMethod(true),
  // `Array.prototype.indexOf` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof
  indexOf: createMethod(false)
};


/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(22);

var max = Math.max;
var min = Math.min;

// Helper for a popular repeating case of the spec:
// Let integer be ? ToInteger(index).
// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).
module.exports = function (index, length) {
  var integer = toInteger(index);
  return integer < 0 ? max(integer + length, 0) : min(integer, length);
};


/***/ }),
/* 46 */
/***/ (function(module, exports) {

module.exports = {};


/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

var shared = __webpack_require__(52);
var uid = __webpack_require__(41);

var keys = shared('keys');

module.exports = function (key) {
  return keys[key] || (keys[key] = uid(key));
};


/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

var has = __webpack_require__(7);
var toObject = __webpack_require__(16);
var sharedKey = __webpack_require__(47);
var CORRECT_PROTOTYPE_GETTER = __webpack_require__(144);

var IE_PROTO = sharedKey('IE_PROTO');
var ObjectPrototype = Object.prototype;

// `Object.getPrototypeOf` method
// https://tc39.github.io/ecma262/#sec-object.getprototypeof
module.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {
  O = toObject(O);
  if (has(O, IE_PROTO)) return O[IE_PROTO];
  if (typeof O.constructor == 'function' && O instanceof O.constructor) {
    return O.constructor.prototype;
  } return O instanceof Object ? ObjectPrototype : null;
};


/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

var TO_STRING_TAG_SUPPORT = __webpack_require__(60);
var classofRaw = __webpack_require__(21);
var wellKnownSymbol = __webpack_require__(5);

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
// ES3 wrong here
var CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) { /* empty */ }
};

// getting tag from ES6+ `Object.prototype.toString`
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag
    // builtinTag case
    : CORRECT_ARGUMENTS ? classofRaw(O)
    // ES3 arguments fallback
    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;
};


/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

var aFunction = __webpack_require__(36);

// optional / simple context binding
module.exports = function (fn, that, length) {
  aFunction(fn);
  if (that === undefined) return fn;
  switch (length) {
    case 0: return function () {
      return fn.call(that);
    };
    case 1: return function (a) {
      return fn.call(that, a);
    };
    case 2: return function (a, b) {
      return fn.call(that, a, b);
    };
    case 3: return function (a, b, c) {
      return fn.call(that, a, b, c);
    };
  }
  return function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var DOMIterables = __webpack_require__(213);
var ArrayIteratorMethods = __webpack_require__(18);
var createNonEnumerableProperty = __webpack_require__(15);
var wellKnownSymbol = __webpack_require__(5);

var ITERATOR = wellKnownSymbol('iterator');
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var ArrayValues = ArrayIteratorMethods.values;

for (var COLLECTION_NAME in DOMIterables) {
  var Collection = global[COLLECTION_NAME];
  var CollectionPrototype = Collection && Collection.prototype;
  if (CollectionPrototype) {
    // some Chrome versions have non-configurable methods on DOMTokenList
    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {
      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);
    } catch (error) {
      CollectionPrototype[ITERATOR] = ArrayValues;
    }
    if (!CollectionPrototype[TO_STRING_TAG]) {
      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);
    }
    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {
      // some Chrome versions have non-configurable methods on DOMTokenList
      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {
        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);
      } catch (error) {
        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];
      }
    }
  }
}


/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

var IS_PURE = __webpack_require__(26);
var store = __webpack_require__(90);

(module.exports = function (key, value) {
  return store[key] || (store[key] = value !== undefined ? value : {});
})('versions', []).push({
  version: '3.6.4',
  mode: IS_PURE ? 'pure' : 'global',
  copyright: ' 2020 Denis Pushkarev (zloirock.ru)'
});


/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var createNonEnumerableProperty = __webpack_require__(15);

module.exports = function (key, value) {
  try {
    createNonEnumerableProperty(global, key, value);
  } catch (error) {
    global[key] = value;
  } return value;
};


/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var isObject = __webpack_require__(8);

var document = global.document;
// typeof document.createElement is 'object' in old IE
var EXISTS = isObject(document) && isObject(document.createElement);

module.exports = function (it) {
  return EXISTS ? document.createElement(it) : {};
};


/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(4);

module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
  // Chrome 38 Symbol has incorrect toString conversion
  // eslint-disable-next-line no-undef
  return !String(Symbol());
});


/***/ }),
/* 56 */
/***/ (function(module, exports) {

// IE8- don't enum bug keys
module.exports = [
  'constructor',
  'hasOwnProperty',
  'isPrototypeOf',
  'propertyIsEnumerable',
  'toLocaleString',
  'toString',
  'valueOf'
];


/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

var store = __webpack_require__(90);

var functionToString = Function.toString;

// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper
if (typeof store.inspectSource != 'function') {
  store.inspectSource = function (it) {
    return functionToString.call(it);
  };
}

module.exports = store.inspectSource;


/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var nativePropertyIsEnumerable = {}.propertyIsEnumerable;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Nashorn ~ JDK8 bug
var NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);

// `Object.prototype.propertyIsEnumerable` method implementation
// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
  var descriptor = getOwnPropertyDescriptor(this, V);
  return !!descriptor && descriptor.enumerable;
} : nativePropertyIsEnumerable;


/***/ }),
/* 59 */
/***/ (function(module, exports) {

exports.f = Object.getOwnPropertySymbols;


/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(5);

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};

test[TO_STRING_TAG] = 'z';

module.exports = String(test) === '[object z]';


/***/ }),
/* 61 */
/***/ (function(module, exports) {

module.exports = function (it, Constructor, name) {
  if (!(it instanceof Constructor)) {
    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');
  } return it;
};


/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

var createTypedArrayConstructor = __webpack_require__(154);

// `Uint8Array` constructor
// https://tc39.github.io/ecma262/#sec-typedarray-objects
createTypedArrayConstructor('Uint8', function (init) {
  return function Uint8Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $copyWithin = __webpack_require__(162);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.copyWithin` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.copywithin
exportTypedArrayMethod('copyWithin', function copyWithin(target, start /* , end */) {
  return $copyWithin.call(aTypedArray(this), target, start, arguments.length > 2 ? arguments[2] : undefined);
});


/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $every = __webpack_require__(17).every;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.every` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.every
exportTypedArrayMethod('every', function every(callbackfn /* , thisArg */) {
  return $every(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $fill = __webpack_require__(112);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.fill` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.fill
// eslint-disable-next-line no-unused-vars
exportTypedArrayMethod('fill', function fill(value /* , start, end */) {
  return $fill.apply(aTypedArray(this), arguments);
});


/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $filter = __webpack_require__(17).filter;
var speciesConstructor = __webpack_require__(37);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.filter` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.filter
exportTypedArrayMethod('filter', function filter(callbackfn /* , thisArg */) {
  var list = $filter(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  var C = speciesConstructor(this, this.constructor);
  var index = 0;
  var length = list.length;
  var result = new (aTypedArrayConstructor(C))(length);
  while (length > index) result[index] = list[index++];
  return result;
});


/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $find = __webpack_require__(17).find;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.find` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.find
exportTypedArrayMethod('find', function find(predicate /* , thisArg */) {
  return $find(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $findIndex = __webpack_require__(17).findIndex;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.findIndex` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.findindex
exportTypedArrayMethod('findIndex', function findIndex(predicate /* , thisArg */) {
  return $findIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $forEach = __webpack_require__(17).forEach;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.forEach` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.foreach
exportTypedArrayMethod('forEach', function forEach(callbackfn /* , thisArg */) {
  $forEach(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $includes = __webpack_require__(44).includes;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.includes` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.includes
exportTypedArrayMethod('includes', function includes(searchElement /* , fromIndex */) {
  return $includes(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $indexOf = __webpack_require__(44).indexOf;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.indexOf` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.indexof
exportTypedArrayMethod('indexOf', function indexOf(searchElement /* , fromIndex */) {
  return $indexOf(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(2);
var ArrayBufferViewCore = __webpack_require__(3);
var ArrayIterators = __webpack_require__(18);
var wellKnownSymbol = __webpack_require__(5);

var ITERATOR = wellKnownSymbol('iterator');
var Uint8Array = global.Uint8Array;
var arrayValues = ArrayIterators.values;
var arrayKeys = ArrayIterators.keys;
var arrayEntries = ArrayIterators.entries;
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var nativeTypedArrayIterator = Uint8Array && Uint8Array.prototype[ITERATOR];

var CORRECT_ITER_NAME = !!nativeTypedArrayIterator
  && (nativeTypedArrayIterator.name == 'values' || nativeTypedArrayIterator.name == undefined);

var typedArrayValues = function values() {
  return arrayValues.call(aTypedArray(this));
};

// `%TypedArray%.prototype.entries` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.entries
exportTypedArrayMethod('entries', function entries() {
  return arrayEntries.call(aTypedArray(this));
});
// `%TypedArray%.prototype.keys` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.keys
exportTypedArrayMethod('keys', function keys() {
  return arrayKeys.call(aTypedArray(this));
});
// `%TypedArray%.prototype.values` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.values
exportTypedArrayMethod('values', typedArrayValues, !CORRECT_ITER_NAME);
// `%TypedArray%.prototype[@@iterator]` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype-@@iterator
exportTypedArrayMethod(ITERATOR, typedArrayValues, !CORRECT_ITER_NAME);


/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $join = [].join;

// `%TypedArray%.prototype.join` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.join
// eslint-disable-next-line no-unused-vars
exportTypedArrayMethod('join', function join(separator) {
  return $join.apply(aTypedArray(this), arguments);
});


/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $lastIndexOf = __webpack_require__(163);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.lastIndexOf` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.lastindexof
// eslint-disable-next-line no-unused-vars
exportTypedArrayMethod('lastIndexOf', function lastIndexOf(searchElement /* , fromIndex */) {
  return $lastIndexOf.apply(aTypedArray(this), arguments);
});


/***/ }),
/* 75 */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(10);
var fails = __webpack_require__(4);
var has = __webpack_require__(7);

var defineProperty = Object.defineProperty;
var cache = {};

var thrower = function (it) { throw it; };

module.exports = function (METHOD_NAME, options) {
  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];
  if (!options) options = {};
  var method = [][METHOD_NAME];
  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;
  var argument0 = has(options, 0) ? options[0] : thrower;
  var argument1 = has(options, 1) ? options[1] : undefined;

  return cache[METHOD_NAME] = !!method && !fails(function () {
    if (ACCESSORS && !DESCRIPTORS) return true;
    var O = { length: -1 };

    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });
    else O[1] = 1;

    method.call(O, argument0, argument1);
  });
};


/***/ }),
/* 76 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $map = __webpack_require__(17).map;
var speciesConstructor = __webpack_require__(37);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.map` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.map
exportTypedArrayMethod('map', function map(mapfn /* , thisArg */) {
  return $map(aTypedArray(this), mapfn, arguments.length > 1 ? arguments[1] : undefined, function (O, length) {
    return new (aTypedArrayConstructor(speciesConstructor(O, O.constructor)))(length);
  });
});


/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $reduce = __webpack_require__(115).left;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.reduce` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.reduce
exportTypedArrayMethod('reduce', function reduce(callbackfn /* , initialValue */) {
  return $reduce(aTypedArray(this), callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $reduceRight = __webpack_require__(115).right;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.reduceRicht` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.reduceright
exportTypedArrayMethod('reduceRight', function reduceRight(callbackfn /* , initialValue */) {
  return $reduceRight(aTypedArray(this), callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),
/* 79 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var floor = Math.floor;

// `%TypedArray%.prototype.reverse` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.reverse
exportTypedArrayMethod('reverse', function reverse() {
  var that = this;
  var length = aTypedArray(that).length;
  var middle = floor(length / 2);
  var index = 0;
  var value;
  while (index < middle) {
    value = that[index];
    that[index++] = that[--length];
    that[length] = value;
  } return that;
});


/***/ }),
/* 80 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var toLength = __webpack_require__(9);
var toOffset = __webpack_require__(113);
var toObject = __webpack_require__(16);
var fails = __webpack_require__(4);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

var FORCED = fails(function () {
  // eslint-disable-next-line no-undef
  new Int8Array(1).set({});
});

// `%TypedArray%.prototype.set` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.set
exportTypedArrayMethod('set', function set(arrayLike /* , offset */) {
  aTypedArray(this);
  var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);
  var length = this.length;
  var src = toObject(arrayLike);
  var len = toLength(src.length);
  var index = 0;
  if (len + offset > length) throw RangeError('Wrong length');
  while (index < len) this[offset + index] = src[index++];
}, FORCED);


/***/ }),
/* 81 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var speciesConstructor = __webpack_require__(37);
var fails = __webpack_require__(4);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $slice = [].slice;

var FORCED = fails(function () {
  // eslint-disable-next-line no-undef
  new Int8Array(1).slice();
});

// `%TypedArray%.prototype.slice` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.slice
exportTypedArrayMethod('slice', function slice(start, end) {
  var list = $slice.call(aTypedArray(this), start, end);
  var C = speciesConstructor(this, this.constructor);
  var index = 0;
  var length = list.length;
  var result = new (aTypedArrayConstructor(C))(length);
  while (length > index) result[index] = list[index++];
  return result;
}, FORCED);


/***/ }),
/* 82 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var $some = __webpack_require__(17).some;

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.some` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.some
exportTypedArrayMethod('some', function some(callbackfn /* , thisArg */) {
  return $some(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});


/***/ }),
/* 83 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $sort = [].sort;

// `%TypedArray%.prototype.sort` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.sort
exportTypedArrayMethod('sort', function sort(comparefn) {
  return $sort.call(aTypedArray(this), comparefn);
});


/***/ }),
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ArrayBufferViewCore = __webpack_require__(3);
var toLength = __webpack_require__(9);
var toAbsoluteIndex = __webpack_require__(45);
var speciesConstructor = __webpack_require__(37);

var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;

// `%TypedArray%.prototype.subarray` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.subarray
exportTypedArrayMethod('subarray', function subarray(begin, end) {
  var O = aTypedArray(this);
  var length = O.length;
  var beginIndex = toAbsoluteIndex(begin, length);
  return new (speciesConstructor(O, O.constructor))(
    O.buffer,
    O.byteOffset + beginIndex * O.BYTES_PER_ELEMENT,
    toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - beginIndex)
  );
});


/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(2);
var ArrayBufferViewCore = __webpack_require__(3);
var fails = __webpack_require__(4);

var Int8Array = global.Int8Array;
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $toLocaleString = [].toLocaleString;
var $slice = [].slice;

// iOS Safari 6.x fails here
var TO_LOCALE_STRING_BUG = !!Int8Array && fails(function () {
  $toLocaleString.call(new Int8Array(1));
});

var FORCED = fails(function () {
  return [1, 2].toLocaleString() != new Int8Array([1, 2]).toLocaleString();
}) || !fails(function () {
  Int8Array.prototype.toLocaleString.call([1, 2]);
});

// `%TypedArray%.prototype.toLocaleString` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.tolocalestring
exportTypedArrayMethod('toLocaleString', function toLocaleString() {
  return $toLocaleString.apply(TO_LOCALE_STRING_BUG ? $slice.call(aTypedArray(this)) : aTypedArray(this), arguments);
}, FORCED);


/***/ }),
/* 86 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var exportTypedArrayMethod = __webpack_require__(3).exportTypedArrayMethod;
var fails = __webpack_require__(4);
var global = __webpack_require__(2);

var Uint8Array = global.Uint8Array;
var Uint8ArrayPrototype = Uint8Array && Uint8Array.prototype || {};
var arrayToString = [].toString;
var arrayJoin = [].join;

if (fails(function () { arrayToString.call({}); })) {
  arrayToString = function toString() {
    return arrayJoin.call(this);
  };
}

var IS_NOT_ARRAY_METHOD = Uint8ArrayPrototype.toString != arrayToString;

// `%TypedArray%.prototype.toString` method
// https://tc39.github.io/ecma262/#sec-%typedarray%.prototype.tostring
exportTypedArrayMethod('toString', arrayToString, IS_NOT_ARRAY_METHOD);


/***/ }),
/* 87 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function requirePromise() {
	if (typeof Promise !== 'function') {
		throw new TypeError('`Promise.prototype.finally` requires a global `Promise` be available.');
	}
};


/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.decode = exports.parse = __webpack_require__(184);
exports.encode = exports.stringify = __webpack_require__(185);


/***/ }),
/* 89 */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(5);
var create = __webpack_require__(42);
var definePropertyModule = __webpack_require__(12);

var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;

// Array.prototype[@@unscopables]
// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables
if (ArrayPrototype[UNSCOPABLES] == undefined) {
  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {
    configurable: true,
    value: create(null)
  });
}

// add a key to Array.prototype[@@unscopables]
module.exports = function (key) {
  ArrayPrototype[UNSCOPABLES][key] = true;
};


/***/ }),
/* 90 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var setGlobal = __webpack_require__(53);

var SHARED = '__core-js_shared__';
var store = global[SHARED] || setGlobal(SHARED, {});

module.exports = store;


/***/ }),
/* 91 */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(10);
var fails = __webpack_require__(4);
var createElement = __webpack_require__(54);

// Thank's IE8 for his funny defineProperty
module.exports = !DESCRIPTORS && !fails(function () {
  return Object.defineProperty(createElement('div'), 'a', {
    get: function () { return 7; }
  }).a != 7;
});


/***/ }),
/* 92 */
/***/ (function(module, exports, __webpack_require__) {

var NATIVE_SYMBOL = __webpack_require__(55);

module.exports = NATIVE_SYMBOL
  // eslint-disable-next-line no-undef
  && !Symbol.sham
  // eslint-disable-next-line no-undef
  && typeof Symbol.iterator == 'symbol';


/***/ }),
/* 93 */
/***/ (function(module, exports, __webpack_require__) {

var has = __webpack_require__(7);
var toIndexedObject = __webpack_require__(20);
var indexOf = __webpack_require__(44).indexOf;
var hiddenKeys = __webpack_require__(46);

module.exports = function (object, names) {
  var O = toIndexedObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (has(O, key = names[i++])) {
    ~indexOf(result, key) || result.push(key);
  }
  return result;
};


/***/ }),
/* 94 */
/***/ (function(module, exports, __webpack_require__) {

var getBuiltIn = __webpack_require__(27);

module.exports = getBuiltIn('document', 'documentElement');


/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);

module.exports = global;


/***/ }),
/* 96 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(14);
var createIteratorConstructor = __webpack_require__(143);
var getPrototypeOf = __webpack_require__(48);
var setPrototypeOf = __webpack_require__(34);
var setToStringTag = __webpack_require__(33);
var createNonEnumerableProperty = __webpack_require__(15);
var redefine = __webpack_require__(19);
var wellKnownSymbol = __webpack_require__(5);
var IS_PURE = __webpack_require__(26);
var Iterators = __webpack_require__(31);
var IteratorsCore = __webpack_require__(99);

var IteratorPrototype = IteratorsCore.IteratorPrototype;
var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
var ITERATOR = wellKnownSymbol('iterator');
var KEYS = 'keys';
var VALUES = 'values';
var ENTRIES = 'entries';

var returnThis = function () { return this; };

module.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
  createIteratorConstructor(IteratorConstructor, NAME, next);

  var getIterationMethod = function (KIND) {
    if (KIND === DEFAULT && defaultIterator) return defaultIterator;
    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];
    switch (KIND) {
      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };
      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };
      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };
    } return function () { return new IteratorConstructor(this); };
  };

  var TO_STRING_TAG = NAME + ' Iterator';
  var INCORRECT_VALUES_NAME = false;
  var IterablePrototype = Iterable.prototype;
  var nativeIterator = IterablePrototype[ITERATOR]
    || IterablePrototype['@@iterator']
    || DEFAULT && IterablePrototype[DEFAULT];
  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;
  var CurrentIteratorPrototype, methods, KEY;

  // fix native
  if (anyNativeIterator) {
    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));
    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {
        if (setPrototypeOf) {
          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);
        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {
          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);
        }
      }
      // Set @@toStringTag to native iterators
      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;
    }
  }

  // fix Array#{values, @@iterator}.name in V8 / FF
  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {
    INCORRECT_VALUES_NAME = true;
    defaultIterator = function values() { return nativeIterator.call(this); };
  }

  // define iterator
  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);
  }
  Iterators[NAME] = defaultIterator;

  // export additional methods
  if (DEFAULT) {
    methods = {
      values: getIterationMethod(VALUES),
      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
      entries: getIterationMethod(ENTRIES)
    };
    if (FORCED) for (KEY in methods) {
      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
        redefine(IterablePrototype, KEY, methods[KEY]);
      }
    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);
  }

  return methods;
};


/***/ }),
/* 97 */
/***/ (function(module, exports, __webpack_require__) {

var has = __webpack_require__(7);
var ownKeys = __webpack_require__(142);
var getOwnPropertyDescriptorModule = __webpack_require__(28);
var definePropertyModule = __webpack_require__(12);

module.exports = function (target, source) {
  var keys = ownKeys(source);
  var defineProperty = definePropertyModule.f;
  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
  for (var i = 0; i < keys.length; i++) {
    var key = keys[i];
    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));
  }
};


/***/ }),
/* 98 */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(4);

var replacement = /#|\.prototype\./;

var isForced = function (feature, detection) {
  var value = data[normalize(feature)];
  return value == POLYFILL ? true
    : value == NATIVE ? false
    : typeof detection == 'function' ? fails(detection)
    : !!detection;
};

var normalize = isForced.normalize = function (string) {
  return String(string).replace(replacement, '.').toLowerCase();
};

var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';

module.exports = isForced;


/***/ }),
/* 99 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getPrototypeOf = __webpack_require__(48);
var createNonEnumerableProperty = __webpack_require__(15);
var has = __webpack_require__(7);
var wellKnownSymbol = __webpack_require__(5);
var IS_PURE = __webpack_require__(26);

var ITERATOR = wellKnownSymbol('iterator');
var BUGGY_SAFARI_ITERATORS = false;

var returnThis = function () { return this; };

// `%IteratorPrototype%` object
// https://tc39.github.io/ecma262/#sec-%iteratorprototype%-object
var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;

if ([].keys) {
  arrayIterator = [].keys();
  // Safari 8 has buggy iterators w/o `next`
  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;
  else {
    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));
    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;
  }
}

if (IteratorPrototype == undefined) IteratorPrototype = {};

// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()
if (!IS_PURE && !has(IteratorPrototype, ITERATOR)) {
  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);
}

module.exports = {
  IteratorPrototype: IteratorPrototype,
  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS
};


/***/ }),
/* 100 */
/***/ (function(module, exports, __webpack_require__) {

var redefine = __webpack_require__(19);

module.exports = function (target, src, options) {
  for (var key in src) redefine(target, key, src[key], options);
  return target;
};


/***/ }),
/* 101 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__(27);
var definePropertyModule = __webpack_require__(12);
var wellKnownSymbol = __webpack_require__(5);
var DESCRIPTORS = __webpack_require__(10);

var SPECIES = wellKnownSymbol('species');

module.exports = function (CONSTRUCTOR_NAME) {
  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
  var defineProperty = definePropertyModule.f;

  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
    defineProperty(Constructor, SPECIES, {
      configurable: true,
      get: function () { return this; }
    });
  }
};


/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(5);
var Iterators = __webpack_require__(31);

var ITERATOR = wellKnownSymbol('iterator');
var ArrayPrototype = Array.prototype;

// check on default Array iterator
module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
};


/***/ }),
/* 103 */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(49);
var Iterators = __webpack_require__(31);
var wellKnownSymbol = __webpack_require__(5);

var ITERATOR = wellKnownSymbol('iterator');

module.exports = function (it) {
  if (it != undefined) return it[ITERATOR]
    || it['@@iterator']
    || Iterators[classof(it)];
};


/***/ }),
/* 104 */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(5);

var ITERATOR = wellKnownSymbol('iterator');
var SAFE_CLOSING = false;

try {
  var called = 0;
  var iteratorWithReturn = {
    next: function () {
      return { done: !!called++ };
    },
    'return': function () {
      SAFE_CLOSING = true;
    }
  };
  iteratorWithReturn[ITERATOR] = function () {
    return this;
  };
  // eslint-disable-next-line no-throw-literal
  Array.from(iteratorWithReturn, function () { throw 2; });
} catch (error) { /* empty */ }

module.exports = function (exec, SKIP_CLOSING) {
  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;
  var ITERATION_SUPPORT = false;
  try {
    var object = {};
    object[ITERATOR] = function () {
      return {
        next: function () {
          return { done: ITERATION_SUPPORT = true };
        }
      };
    };
    exec(object);
  } catch (error) { /* empty */ }
  return ITERATION_SUPPORT;
};


/***/ }),
/* 105 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var fails = __webpack_require__(4);
var classof = __webpack_require__(21);
var bind = __webpack_require__(50);
var html = __webpack_require__(94);
var createElement = __webpack_require__(54);
var IS_IOS = __webpack_require__(106);

var location = global.location;
var set = global.setImmediate;
var clear = global.clearImmediate;
var process = global.process;
var MessageChannel = global.MessageChannel;
var Dispatch = global.Dispatch;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var defer, channel, port;

var run = function (id) {
  // eslint-disable-next-line no-prototype-builtins
  if (queue.hasOwnProperty(id)) {
    var fn = queue[id];
    delete queue[id];
    fn();
  }
};

var runner = function (id) {
  return function () {
    run(id);
  };
};

var listener = function (event) {
  run(event.data);
};

var post = function (id) {
  // old engines have not location.origin
  global.postMessage(id + '', location.protocol + '//' + location.host);
};

// Node.js 0.9+ & IE10+ has setImmediate, otherwise:
if (!set || !clear) {
  set = function setImmediate(fn) {
    var args = [];
    var i = 1;
    while (arguments.length > i) args.push(arguments[i++]);
    queue[++counter] = function () {
      // eslint-disable-next-line no-new-func
      (typeof fn == 'function' ? fn : Function(fn)).apply(undefined, args);
    };
    defer(counter);
    return counter;
  };
  clear = function clearImmediate(id) {
    delete queue[id];
  };
  // Node.js 0.8-
  if (classof(process) == 'process') {
    defer = function (id) {
      process.nextTick(runner(id));
    };
  // Sphere (JS game engine) Dispatch API
  } else if (Dispatch && Dispatch.now) {
    defer = function (id) {
      Dispatch.now(runner(id));
    };
  // Browsers with MessageChannel, includes WebWorkers
  // except iOS - https://github.com/zloirock/core-js/issues/624
  } else if (MessageChannel && !IS_IOS) {
    channel = new MessageChannel();
    port = channel.port2;
    channel.port1.onmessage = listener;
    defer = bind(port.postMessage, port, 1);
  // Browsers with postMessage, skip WebWorkers
  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts && !fails(post)) {
    defer = post;
    global.addEventListener('message', listener, false);
  // IE8-
  } else if (ONREADYSTATECHANGE in createElement('script')) {
    defer = function (id) {
      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {
        html.removeChild(this);
        run(id);
      };
    };
  // Rest old browsers
  } else {
    defer = function (id) {
      setTimeout(runner(id), 0);
    };
  }
}

module.exports = {
  set: set,
  clear: clear
};


/***/ }),
/* 106 */
/***/ (function(module, exports, __webpack_require__) {

var userAgent = __webpack_require__(107);

module.exports = /(iphone|ipod|ipad).*applewebkit/i.test(userAgent);


/***/ }),
/* 107 */
/***/ (function(module, exports, __webpack_require__) {

var getBuiltIn = __webpack_require__(27);

module.exports = getBuiltIn('navigator', 'userAgent') || '';


/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var aFunction = __webpack_require__(36);

var PromiseCapability = function (C) {
  var resolve, reject;
  this.promise = new C(function ($$resolve, $$reject) {
    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');
    resolve = $$resolve;
    reject = $$reject;
  });
  this.resolve = aFunction(resolve);
  this.reject = aFunction(reject);
};

// 25.4.1.5 NewPromiseCapability(C)
module.exports.f = function (C) {
  return new PromiseCapability(C);
};


/***/ }),
/* 109 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var userAgent = __webpack_require__(107);

var process = global.process;
var versions = process && process.versions;
var v8 = versions && versions.v8;
var match, version;

if (v8) {
  match = v8.split('.');
  version = match[0] + match[1];
} else if (userAgent) {
  match = userAgent.match(/Edge\/(\d+)/);
  if (!match || match[1] >= 74) {
    match = userAgent.match(/Chrome\/(\d+)/);
    if (match) version = match[1];
  }
}

module.exports = version && +version;


/***/ }),
/* 110 */
/***/ (function(module, exports) {

module.exports = typeof ArrayBuffer !== 'undefined' && typeof DataView !== 'undefined';


/***/ }),
/* 111 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(22);
var toLength = __webpack_require__(9);

// `ToIndex` abstract operation
// https://tc39.github.io/ecma262/#sec-toindex
module.exports = function (it) {
  if (it === undefined) return 0;
  var number = toInteger(it);
  var length = toLength(number);
  if (number !== length) throw RangeError('Wrong length or index');
  return length;
};


/***/ }),
/* 112 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toObject = __webpack_require__(16);
var toAbsoluteIndex = __webpack_require__(45);
var toLength = __webpack_require__(9);

// `Array.prototype.fill` method implementation
// https://tc39.github.io/ecma262/#sec-array.prototype.fill
module.exports = function fill(value /* , start = 0, end = @length */) {
  var O = toObject(this);
  var length = toLength(O.length);
  var argumentsLength = arguments.length;
  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);
  var end = argumentsLength > 2 ? arguments[2] : undefined;
  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);
  while (endPos > index) O[index++] = value;
  return O;
};


/***/ }),
/* 113 */
/***/ (function(module, exports, __webpack_require__) {

var toPositiveInteger = __webpack_require__(158);

module.exports = function (it, BYTES) {
  var offset = toPositiveInteger(it);
  if (offset % BYTES) throw RangeError('Wrong offset');
  return offset;
};


/***/ }),
/* 114 */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(21);

// `IsArray` abstract operation
// https://tc39.github.io/ecma262/#sec-isarray
module.exports = Array.isArray || function isArray(arg) {
  return classof(arg) == 'Array';
};


/***/ }),
/* 115 */
/***/ (function(module, exports, __webpack_require__) {

var aFunction = __webpack_require__(36);
var toObject = __webpack_require__(16);
var IndexedObject = __webpack_require__(39);
var toLength = __webpack_require__(9);

// `Array.prototype.{ reduce, reduceRight }` methods implementation
var createMethod = function (IS_RIGHT) {
  return function (that, callbackfn, argumentsLength, memo) {
    aFunction(callbackfn);
    var O = toObject(that);
    var self = IndexedObject(O);
    var length = toLength(O.length);
    var index = IS_RIGHT ? length - 1 : 0;
    var i = IS_RIGHT ? -1 : 1;
    if (argumentsLength < 2) while (true) {
      if (index in self) {
        memo = self[index];
        index += i;
        break;
      }
      index += i;
      if (IS_RIGHT ? index < 0 : length <= index) {
        throw TypeError('Reduce of empty array with no initial value');
      }
    }
    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {
      memo = callbackfn(memo, self[index], index, O);
    }
    return memo;
  };
};

module.exports = {
  // `Array.prototype.reduce` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce
  left: createMethod(false),
  // `Array.prototype.reduceRight` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright
  right: createMethod(true)
};


/***/ }),
/* 116 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @ignore
 */
const defaults = __webpack_require__(166);
const {isPromise, createErrorType, tryCall} = __webpack_require__(167);

/**
 * @typicalname pc
 */
class PromiseController {
  /**
   * Creates promise controller. Unlike original Promise, it does not immediately call any function.
   * Instead it has [.call()](#PromiseController+call) method that calls provided function
   * and stores `resolve / reject` methods for future access.
   *
   * @param {Options} [options]
   */
  constructor(options) {
    this._options = Object.assign({}, defaults, options);
    this._resolve = null;
    this._reject = null;
    this._isPending = false;
    this._isFulfilled = false;
    this._isRejected = false;
    this._value = undefined;
    this._promise = null;
    this._timer = null;
  }

  /**
   * Returns promise itself.
   *
   * @returns {Promise}
   */
  get promise() {
    return this._promise;
  }

  /**
   * Returns value with that promise was settled (fulfilled or rejected).
   *
   * @returns {*}
   */
  get value() {
    return this._value;
  }

  /**
   * Returns true if promise is pending.
   *
   * @returns {Boolean}
   */
  get isPending() {
    return this._isPending;
  }

  /**
   * Returns true if promise is fulfilled.
   *
   * @returns {Boolean}
   */
  get isFulfilled() {
    return this._isFulfilled;
  }

  /**
   * Returns true if promise rejected.
   *
   * @returns {Boolean}
   */
  get isRejected() {
    return this._isRejected;
  }

  /**
   * Returns true if promise is fulfilled or rejected.
   *
   * @returns {Boolean}
   */
  get isSettled() {
    return this._isFulfilled || this._isRejected;
  }

  /**
   * Calls `fn` and returns promise OR just returns existing promise from previous `call()` if it is still pending.
   * To fulfill returned promise you should use
   * {@link PromiseController#resolve} / {@link PromiseController#reject} methods.
   * If `fn` itself returns promise, then external promise is attached to it and fulfills together.
   * If no `fn` passed - promiseController is initialized as well.
   *
   * @param {Function} [fn] function to be called.
   * @returns {Promise}
   */
  call(fn) {
    if (!this._isPending) {
      this.reset();
      this._createPromise();
      this._createTimer();
      this._callFn(fn);
    }
    return this._promise;
  }

  /**
   * Resolves pending promise with specified `value`.
   *
   * @param {*} [value]
   */
  resolve(value) {
    if (this._isPending) {
      if (isPromise(value)) {
        this._tryAttachToPromise(value);
      } else {
        this._settle(value);
        this._isFulfilled = true;
        this._resolve(value);
      }
    }
  }

  /**
   * Rejects pending promise with specified `value`.
   *
   * @param {*} [value]
   */
  reject(value) {
    if (this._isPending) {
      this._settle(value);
      this._isRejected = true;
      this._reject(value);
    }
  }

  /**
   * Resets to initial state.
   * If promise is pending it will be rejected with {@link PromiseController.ResetError}.
   */
  reset() {
    if (this._isPending) {
      const message = tryCall(this._options.resetReason);
      const error = new PromiseController.ResetError(message);
      this.reject(error);
    }
    this._promise = null;
    this._isPending = false;
    this._isFulfilled = false;
    this._isRejected = false;
    this._value = undefined;
    this._clearTimer();
  }

  /**
   * Re-assign one or more options.
   *
   * @param {Options} options
   */
  configure(options) {
    Object.assign(this._options, options);
  }

  _createPromise() {
    this._promise = new Promise((resolve, reject) => {
      this._isPending = true;
      this._resolve = resolve;
      this._reject = reject;
    });
  }

  _handleTimeout() {
    const messageTpl = tryCall(this._options.timeoutReason);
    const message = typeof messageTpl === 'string' ? messageTpl.replace('{timeout}', this._options.timeout) : '';
    const error = new PromiseController.TimeoutError(message);
    this.reject(error);
  }

  _createTimer() {
    if (this._options.timeout) {
      this._timer = setTimeout(() => this._handleTimeout(), this._options.timeout);
    }
  }

  _clearTimer() {
    if (this._timer) {
      clearTimeout(this._timer);
      this._timer = null;
    }
  }

  _settle(value) {
    this._isPending = false;
    this._value = value;
    this._clearTimer();
  }

  _callFn(fn) {
    if (typeof fn === 'function') {
      try {
        const result = fn();
        this._tryAttachToPromise(result);
      } catch (e) {
        this.reject(e);
      }
    }
  }

  _tryAttachToPromise(p) {
    if (isPromise(p)) {
      p.then(value => this.resolve(value), e => this.reject(e));
    }
  }
}

/**
 * Error for rejection in case of timeout.
 * @type {PromiseController.TimeoutError}
 */
PromiseController.TimeoutError = createErrorType('TimeoutError');

/**
 * Error for rejection in case of call `.reset()` while promise is pending.
 * @type {PromiseController.ResetError}
 */
PromiseController.ResetError = createErrorType('ResetError');

module.exports = PromiseController;


/***/ }),
/* 117 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var implementation = __webpack_require__(170);

module.exports = Function.prototype.bind || implementation;


/***/ }),
/* 118 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var keys = __webpack_require__(171);
var hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';

var toStr = Object.prototype.toString;
var concat = Array.prototype.concat;
var origDefineProperty = Object.defineProperty;

var isFunction = function (fn) {
	return typeof fn === 'function' && toStr.call(fn) === '[object Function]';
};

var arePropertyDescriptorsSupported = function () {
	var obj = {};
	try {
		origDefineProperty(obj, 'x', { enumerable: false, value: obj });
		// eslint-disable-next-line no-unused-vars, no-restricted-syntax
		for (var _ in obj) { // jscs:ignore disallowUnusedVariables
			return false;
		}
		return obj.x === obj;
	} catch (e) { /* this is IE 8. */
		return false;
	}
};
var supportsDescriptors = origDefineProperty && arePropertyDescriptorsSupported();

var defineProperty = function (object, name, value, predicate) {
	if (name in object && (!isFunction(predicate) || !predicate())) {
		return;
	}
	if (supportsDescriptors) {
		origDefineProperty(object, name, {
			configurable: true,
			enumerable: false,
			value: value,
			writable: true
		});
	} else {
		object[name] = value;
	}
};

var defineProperties = function (object, map) {
	var predicates = arguments.length > 2 ? arguments[2] : {};
	var props = keys(map);
	if (hasSymbols) {
		props = concat.call(props, Object.getOwnPropertySymbols(map));
	}
	for (var i = 0; i < props.length; i += 1) {
		defineProperty(object, props[i], map[props[i]], predicates[props[i]]);
	}
};

defineProperties.supportsDescriptors = !!supportsDescriptors;

module.exports = defineProperties;


/***/ }),
/* 119 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var toStr = Object.prototype.toString;

module.exports = function isArguments(value) {
	var str = toStr.call(value);
	var isArgs = str === '[object Arguments]';
	if (!isArgs) {
		isArgs = str !== '[object Array]' &&
			value !== null &&
			typeof value === 'object' &&
			typeof value.length === 'number' &&
			value.length >= 0 &&
			toStr.call(value.callee) === '[object Function]';
	}
	return isArgs;
};


/***/ }),
/* 120 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var requirePromise = __webpack_require__(87);

requirePromise();

var IsCallable = __webpack_require__(173);
var SpeciesConstructor = __webpack_require__(175);
var Type = __webpack_require__(121);

var promiseResolve = function PromiseResolve(C, value) {
	return new C(function (resolve) {
		resolve(value);
	});
};

var OriginalPromise = Promise;

var createThenFinally = function CreateThenFinally(C, onFinally) {
	return function (value) {
		var result = onFinally();
		var promise = promiseResolve(C, result);
		var valueThunk = function () {
			return value;
		};
		return promise.then(valueThunk);
	};
};

var createCatchFinally = function CreateCatchFinally(C, onFinally) {
	return function (reason) {
		var result = onFinally();
		var promise = promiseResolve(C, result);
		var thrower = function () {
			throw reason;
		};
		return promise.then(thrower);
	};
};

var promiseFinally = function finally_(onFinally) {
	/* eslint no-invalid-this: 0 */

	var promise = this;

	if (Type(promise) !== 'Object') {
		throw new TypeError('receiver is not an Object');
	}

	var C = SpeciesConstructor(promise, OriginalPromise); // may throw

	var thenFinally = onFinally;
	var catchFinally = onFinally;
	if (IsCallable(onFinally)) {
		thenFinally = createThenFinally(C, onFinally);
		catchFinally = createCatchFinally(C, onFinally);
	}

	return promise.then(thenFinally, catchFinally);
};

if (Object.getOwnPropertyDescriptor) {
	var descriptor = Object.getOwnPropertyDescriptor(promiseFinally, 'name');
	if (descriptor && descriptor.configurable) {
		Object.defineProperty(promiseFinally, 'name', { configurable: true, value: 'finally' });
	}
}

module.exports = promiseFinally;


/***/ }),
/* 121 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var ES5Type = __webpack_require__(180);

// https://www.ecma-international.org/ecma-262/6.0/#sec-tostring

module.exports = function Type(x) {
	if (typeof x === 'symbol') {
		return 'Symbol';
	}
	return ES5Type(x);
};


/***/ }),
/* 122 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var requirePromise = __webpack_require__(87);

var implementation = __webpack_require__(120);

module.exports = function getPolyfill() {
	requirePromise();
	return typeof Promise.prototype['finally'] === 'function' ? Promise.prototype['finally'] : implementation;
};


/***/ }),
/* 123 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = Writer;

var util      = __webpack_require__(25);

var BufferWriter; // cyclic

var LongBits  = util.LongBits,
    base64    = util.base64,
    utf8      = util.utf8;

/**
 * Constructs a new writer operation instance.
 * @classdesc Scheduled writer operation.
 * @constructor
 * @param {function(*, Uint8Array, number)} fn Function to call
 * @param {number} len Value byte length
 * @param {*} val Value to write
 * @ignore
 */
function Op(fn, len, val) {

    /**
     * Function to call.
     * @type {function(Uint8Array, number, *)}
     */
    this.fn = fn;

    /**
     * Value byte length.
     * @type {number}
     */
    this.len = len;

    /**
     * Next operation.
     * @type {Writer.Op|undefined}
     */
    this.next = undefined;

    /**
     * Value to write.
     * @type {*}
     */
    this.val = val; // type varies
}

/* istanbul ignore next */
function noop() {} // eslint-disable-line no-empty-function

/**
 * Constructs a new writer state instance.
 * @classdesc Copied writer state.
 * @memberof Writer
 * @constructor
 * @param {Writer} writer Writer to copy state from
 * @ignore
 */
function State(writer) {

    /**
     * Current head.
     * @type {Writer.Op}
     */
    this.head = writer.head;

    /**
     * Current tail.
     * @type {Writer.Op}
     */
    this.tail = writer.tail;

    /**
     * Current buffer length.
     * @type {number}
     */
    this.len = writer.len;

    /**
     * Next state.
     * @type {State|null}
     */
    this.next = writer.states;
}

/**
 * Constructs a new writer instance.
 * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.
 * @constructor
 */
function Writer() {

    /**
     * Current length.
     * @type {number}
     */
    this.len = 0;

    /**
     * Operations head.
     * @type {Object}
     */
    this.head = new Op(noop, 0, 0);

    /**
     * Operations tail
     * @type {Object}
     */
    this.tail = this.head;

    /**
     * Linked forked states.
     * @type {Object|null}
     */
    this.states = null;

    // When a value is written, the writer calculates its byte length and puts it into a linked
    // list of operations to perform when finish() is called. This both allows us to allocate
    // buffers of the exact required size and reduces the amount of work we have to do compared
    // to first calculating over objects and then encoding over objects. In our case, the encoding
    // part is just a linked list walk calling operations with already prepared values.
}

var create = function create() {
    return util.Buffer
        ? function create_buffer_setup() {
            return (Writer.create = function create_buffer() {
                return new BufferWriter();
            })();
        }
        /* istanbul ignore next */
        : function create_array() {
            return new Writer();
        };
};

/**
 * Creates a new writer.
 * @function
 * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}
 */
Writer.create = create();

/**
 * Allocates a buffer of the specified size.
 * @param {number} size Buffer size
 * @returns {Uint8Array} Buffer
 */
Writer.alloc = function alloc(size) {
    return new util.Array(size);
};

// Use Uint8Array buffer pool in the browser, just like node does with buffers
/* istanbul ignore else */
if (util.Array !== Array)
    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);

/**
 * Pushes a new operation to the queue.
 * @param {function(Uint8Array, number, *)} fn Function to call
 * @param {number} len Value byte length
 * @param {number} val Value to write
 * @returns {Writer} `this`
 * @private
 */
Writer.prototype._push = function push(fn, len, val) {
    this.tail = this.tail.next = new Op(fn, len, val);
    this.len += len;
    return this;
};

function writeByte(val, buf, pos) {
    buf[pos] = val & 255;
}

function writeVarint32(val, buf, pos) {
    while (val > 127) {
        buf[pos++] = val & 127 | 128;
        val >>>= 7;
    }
    buf[pos] = val;
}

/**
 * Constructs a new varint writer operation instance.
 * @classdesc Scheduled varint writer operation.
 * @extends Op
 * @constructor
 * @param {number} len Value byte length
 * @param {number} val Value to write
 * @ignore
 */
function VarintOp(len, val) {
    this.len = len;
    this.next = undefined;
    this.val = val;
}

VarintOp.prototype = Object.create(Op.prototype);
VarintOp.prototype.fn = writeVarint32;

/**
 * Writes an unsigned 32 bit value as a varint.
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.uint32 = function write_uint32(value) {
    // here, the call to this.push has been inlined and a varint specific Op subclass is used.
    // uint32 is by far the most frequently used operation and benefits significantly from this.
    this.len += (this.tail = this.tail.next = new VarintOp(
        (value = value >>> 0)
                < 128       ? 1
        : value < 16384     ? 2
        : value < 2097152   ? 3
        : value < 268435456 ? 4
        :                     5,
    value)).len;
    return this;
};

/**
 * Writes a signed 32 bit value as a varint.
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.int32 = function write_int32(value) {
    return value < 0
        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec
        : this.uint32(value);
};

/**
 * Writes a 32 bit value as a varint, zig-zag encoded.
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.sint32 = function write_sint32(value) {
    return this.uint32((value << 1 ^ value >> 31) >>> 0);
};

function writeVarint64(val, buf, pos) {
    while (val.hi) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;
        val.hi >>>= 7;
    }
    while (val.lo > 127) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = val.lo >>> 7;
    }
    buf[pos++] = val.lo;
}

/**
 * Writes an unsigned 64 bit value as a varint.
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.uint64 = function write_uint64(value) {
    var bits = LongBits.from(value);
    return this._push(writeVarint64, bits.length(), bits);
};

/**
 * Writes a signed 64 bit value as a varint.
 * @function
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.int64 = Writer.prototype.uint64;

/**
 * Writes a signed 64 bit value as a varint, zig-zag encoded.
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.sint64 = function write_sint64(value) {
    var bits = LongBits.from(value).zzEncode();
    return this._push(writeVarint64, bits.length(), bits);
};

/**
 * Writes a boolish value as a varint.
 * @param {boolean} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.bool = function write_bool(value) {
    return this._push(writeByte, 1, value ? 1 : 0);
};

function writeFixed32(val, buf, pos) {
    buf[pos    ] =  val         & 255;
    buf[pos + 1] =  val >>> 8   & 255;
    buf[pos + 2] =  val >>> 16  & 255;
    buf[pos + 3] =  val >>> 24;
}

/**
 * Writes an unsigned 32 bit value as fixed 32 bits.
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.fixed32 = function write_fixed32(value) {
    return this._push(writeFixed32, 4, value >>> 0);
};

/**
 * Writes a signed 32 bit value as fixed 32 bits.
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.sfixed32 = Writer.prototype.fixed32;

/**
 * Writes an unsigned 64 bit value as fixed 64 bits.
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.fixed64 = function write_fixed64(value) {
    var bits = LongBits.from(value);
    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);
};

/**
 * Writes a signed 64 bit value as fixed 64 bits.
 * @function
 * @param {Long|number|string} value Value to write
 * @returns {Writer} `this`
 * @throws {TypeError} If `value` is a string and no long library is present.
 */
Writer.prototype.sfixed64 = Writer.prototype.fixed64;

/**
 * Writes a float (32 bit).
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.float = function write_float(value) {
    return this._push(util.float.writeFloatLE, 4, value);
};

/**
 * Writes a double (64 bit float).
 * @function
 * @param {number} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.double = function write_double(value) {
    return this._push(util.float.writeDoubleLE, 8, value);
};

var writeBytes = util.Array.prototype.set
    ? function writeBytes_set(val, buf, pos) {
        buf.set(val, pos); // also works for plain array values
    }
    /* istanbul ignore next */
    : function writeBytes_for(val, buf, pos) {
        for (var i = 0; i < val.length; ++i)
            buf[pos + i] = val[i];
    };

/**
 * Writes a sequence of bytes.
 * @param {Uint8Array|string} value Buffer or base64 encoded string to write
 * @returns {Writer} `this`
 */
Writer.prototype.bytes = function write_bytes(value) {
    var len = value.length >>> 0;
    if (!len)
        return this._push(writeByte, 1, 0);
    if (util.isString(value)) {
        var buf = Writer.alloc(len = base64.length(value));
        base64.decode(value, buf, 0);
        value = buf;
    }
    return this.uint32(len)._push(writeBytes, len, value);
};

/**
 * Writes a string.
 * @param {string} value Value to write
 * @returns {Writer} `this`
 */
Writer.prototype.string = function write_string(value) {
    var len = utf8.length(value);
    return len
        ? this.uint32(len)._push(utf8.write, len, value)
        : this._push(writeByte, 1, 0);
};

/**
 * Forks this writer's state by pushing it to a stack.
 * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.
 * @returns {Writer} `this`
 */
Writer.prototype.fork = function fork() {
    this.states = new State(this);
    this.head = this.tail = new Op(noop, 0, 0);
    this.len = 0;
    return this;
};

/**
 * Resets this instance to the last state.
 * @returns {Writer} `this`
 */
Writer.prototype.reset = function reset() {
    if (this.states) {
        this.head   = this.states.head;
        this.tail   = this.states.tail;
        this.len    = this.states.len;
        this.states = this.states.next;
    } else {
        this.head = this.tail = new Op(noop, 0, 0);
        this.len  = 0;
    }
    return this;
};

/**
 * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.
 * @returns {Writer} `this`
 */
Writer.prototype.ldelim = function ldelim() {
    var head = this.head,
        tail = this.tail,
        len  = this.len;
    this.reset().uint32(len);
    if (len) {
        this.tail.next = head.next; // skip noop
        this.tail = tail;
        this.len += len;
    }
    return this;
};

/**
 * Finishes the write operation.
 * @returns {Uint8Array} Finished buffer
 */
Writer.prototype.finish = function finish() {
    var head = this.head.next, // skip noop
        buf  = this.constructor.alloc(this.len),
        pos  = 0;
    while (head) {
        head.fn(head.val, buf, pos);
        pos += head.len;
        head = head.next;
    }
    // this.head = this.tail = null;
    return buf;
};

Writer._configure = function(BufferWriter_) {
    BufferWriter = BufferWriter_;
    Writer.create = create();
    BufferWriter._configure();
};


/***/ }),
/* 124 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = Reader;

var util      = __webpack_require__(25);

var BufferReader; // cyclic

var LongBits  = util.LongBits,
    utf8      = util.utf8;

/* istanbul ignore next */
function indexOutOfRange(reader, writeLength) {
    return RangeError("index out of range: " + reader.pos + " + " + (writeLength || 1) + " > " + reader.len);
}

/**
 * Constructs a new reader instance using the specified buffer.
 * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.
 * @constructor
 * @param {Uint8Array} buffer Buffer to read from
 */
function Reader(buffer) {

    /**
     * Read buffer.
     * @type {Uint8Array}
     */
    this.buf = buffer;

    /**
     * Read buffer position.
     * @type {number}
     */
    this.pos = 0;

    /**
     * Read buffer length.
     * @type {number}
     */
    this.len = buffer.length;
}

var create_array = typeof Uint8Array !== "undefined"
    ? function create_typed_array(buffer) {
        if (buffer instanceof Uint8Array || Array.isArray(buffer))
            return new Reader(buffer);
        throw Error("illegal buffer");
    }
    /* istanbul ignore next */
    : function create_array(buffer) {
        if (Array.isArray(buffer))
            return new Reader(buffer);
        throw Error("illegal buffer");
    };

var create = function create() {
    return util.Buffer
        ? function create_buffer_setup(buffer) {
            return (Reader.create = function create_buffer(buffer) {
                return util.Buffer.isBuffer(buffer)
                    ? new BufferReader(buffer)
                    /* istanbul ignore next */
                    : create_array(buffer);
            })(buffer);
        }
        /* istanbul ignore next */
        : create_array;
};

/**
 * Creates a new reader using the specified buffer.
 * @function
 * @param {Uint8Array|Buffer} buffer Buffer to read from
 * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}
 * @throws {Error} If `buffer` is not a valid buffer
 */
Reader.create = create();

Reader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;

/**
 * Reads a varint as an unsigned 32 bit value.
 * @function
 * @returns {number} Value read
 */
Reader.prototype.uint32 = (function read_uint32_setup() {
    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)
    return function read_uint32() {
        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;

        /* istanbul ignore if */
        if ((this.pos += 5) > this.len) {
            this.pos = this.len;
            throw indexOutOfRange(this, 10);
        }
        return value;
    };
})();

/**
 * Reads a varint as a signed 32 bit value.
 * @returns {number} Value read
 */
Reader.prototype.int32 = function read_int32() {
    return this.uint32() | 0;
};

/**
 * Reads a zig-zag encoded varint as a signed 32 bit value.
 * @returns {number} Value read
 */
Reader.prototype.sint32 = function read_sint32() {
    var value = this.uint32();
    return value >>> 1 ^ -(value & 1) | 0;
};

/* eslint-disable no-invalid-this */

function readLongVarint() {
    // tends to deopt with local vars for octet etc.
    var bits = new LongBits(0, 0);
    var i = 0;
    if (this.len - this.pos > 4) { // fast route (lo)
        for (; i < 4; ++i) {
            // 1st..4th
            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
        // 5th
        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;
        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;
        if (this.buf[this.pos++] < 128)
            return bits;
        i = 0;
    } else {
        for (; i < 3; ++i) {
            /* istanbul ignore if */
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
            // 1st..3th
            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
        // 4th
        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;
        return bits;
    }
    if (this.len - this.pos > 4) { // fast route (hi)
        for (; i < 5; ++i) {
            // 6th..10th
            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
    } else {
        for (; i < 5; ++i) {
            /* istanbul ignore if */
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
            // 6th..10th
            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;
            if (this.buf[this.pos++] < 128)
                return bits;
        }
    }
    /* istanbul ignore next */
    throw Error("invalid varint encoding");
}

/* eslint-enable no-invalid-this */

/**
 * Reads a varint as a signed 64 bit value.
 * @name Reader#int64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a varint as an unsigned 64 bit value.
 * @name Reader#uint64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a zig-zag encoded varint as a signed 64 bit value.
 * @name Reader#sint64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a varint as a boolean.
 * @returns {boolean} Value read
 */
Reader.prototype.bool = function read_bool() {
    return this.uint32() !== 0;
};

function readFixed32_end(buf, end) { // note that this uses `end`, not `pos`
    return (buf[end - 4]
          | buf[end - 3] << 8
          | buf[end - 2] << 16
          | buf[end - 1] << 24) >>> 0;
}

/**
 * Reads fixed 32 bits as an unsigned 32 bit integer.
 * @returns {number} Value read
 */
Reader.prototype.fixed32 = function read_fixed32() {

    /* istanbul ignore if */
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);

    return readFixed32_end(this.buf, this.pos += 4);
};

/**
 * Reads fixed 32 bits as a signed 32 bit integer.
 * @returns {number} Value read
 */
Reader.prototype.sfixed32 = function read_sfixed32() {

    /* istanbul ignore if */
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);

    return readFixed32_end(this.buf, this.pos += 4) | 0;
};

/* eslint-disable no-invalid-this */

function readFixed64(/* this: Reader */) {

    /* istanbul ignore if */
    if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 8);

    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));
}

/* eslint-enable no-invalid-this */

/**
 * Reads fixed 64 bits.
 * @name Reader#fixed64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads zig-zag encoded fixed 64 bits.
 * @name Reader#sfixed64
 * @function
 * @returns {Long} Value read
 */

/**
 * Reads a float (32 bit) as a number.
 * @function
 * @returns {number} Value read
 */
Reader.prototype.float = function read_float() {

    /* istanbul ignore if */
    if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);

    var value = util.float.readFloatLE(this.buf, this.pos);
    this.pos += 4;
    return value;
};

/**
 * Reads a double (64 bit float) as a number.
 * @function
 * @returns {number} Value read
 */
Reader.prototype.double = function read_double() {

    /* istanbul ignore if */
    if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 4);

    var value = util.float.readDoubleLE(this.buf, this.pos);
    this.pos += 8;
    return value;
};

/**
 * Reads a sequence of bytes preceeded by its length as a varint.
 * @returns {Uint8Array} Value read
 */
Reader.prototype.bytes = function read_bytes() {
    var length = this.uint32(),
        start  = this.pos,
        end    = this.pos + length;

    /* istanbul ignore if */
    if (end > this.len)
        throw indexOutOfRange(this, length);

    this.pos += length;
    if (Array.isArray(this.buf)) // plain array
        return this.buf.slice(start, end);
    return start === end // fix for IE 10/Win8 and others' subarray returning array of size 1
        ? new this.buf.constructor(0)
        : this._slice.call(this.buf, start, end);
};

/**
 * Reads a string preceeded by its byte length as a varint.
 * @returns {string} Value read
 */
Reader.prototype.string = function read_string() {
    var bytes = this.bytes();
    return utf8.read(bytes, 0, bytes.length);
};

/**
 * Skips the specified number of bytes if specified, otherwise skips a varint.
 * @param {number} [length] Length if known, otherwise a varint is assumed
 * @returns {Reader} `this`
 */
Reader.prototype.skip = function skip(length) {
    if (typeof length === "number") {
        /* istanbul ignore if */
        if (this.pos + length > this.len)
            throw indexOutOfRange(this, length);
        this.pos += length;
    } else {
        do {
            /* istanbul ignore if */
            if (this.pos >= this.len)
                throw indexOutOfRange(this);
        } while (this.buf[this.pos++] & 128);
    }
    return this;
};

/**
 * Skips the next element of the specified wire type.
 * @param {number} wireType Wire type received
 * @returns {Reader} `this`
 */
Reader.prototype.skipType = function(wireType) {
    switch (wireType) {
        case 0:
            this.skip();
            break;
        case 1:
            this.skip(8);
            break;
        case 2:
            this.skip(this.uint32());
            break;
        case 3:
            while ((wireType = this.uint32() & 7) !== 4) {
                this.skipType(wireType);
            }
            break;
        case 5:
            this.skip(4);
            break;

        /* istanbul ignore next */
        default:
            throw Error("invalid wire type " + wireType + " at offset " + this.pos);
    }
    return this;
};

Reader._configure = function(BufferReader_) {
    BufferReader = BufferReader_;
    Reader.create = create();
    BufferReader._configure();

    var fn = util.Long ? "toLong" : /* istanbul ignore next */ "toNumber";
    util.merge(Reader.prototype, {

        int64: function read_int64() {
            return readLongVarint.call(this)[fn](false);
        },

        uint64: function read_uint64() {
            return readLongVarint.call(this)[fn](true);
        },

        sint64: function read_sint64() {
            return readLongVarint.call(this).zzDecode()[fn](false);
        },

        fixed64: function read_fixed64() {
            return readFixed64.call(this)[fn](true);
        },

        sfixed64: function read_sfixed64() {
            return readFixed64.call(this)[fn](false);
        }

    });
};


/***/ }),
/* 125 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var redefine = __webpack_require__(19);
var anObject = __webpack_require__(13);
var fails = __webpack_require__(4);
var flags = __webpack_require__(126);

var TO_STRING = 'toString';
var RegExpPrototype = RegExp.prototype;
var nativeToString = RegExpPrototype[TO_STRING];

var NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });
// FF44- RegExp#toString has a wrong name
var INCORRECT_NAME = nativeToString.name != TO_STRING;

// `RegExp.prototype.toString` method
// https://tc39.github.io/ecma262/#sec-regexp.prototype.tostring
if (NOT_GENERIC || INCORRECT_NAME) {
  redefine(RegExp.prototype, TO_STRING, function toString() {
    var R = anObject(this);
    var p = String(R.source);
    var rf = R.flags;
    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);
    return '/' + p + '/' + f;
  }, { unsafe: true });
}


/***/ }),
/* 126 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__(13);

// `RegExp.prototype.flags` getter implementation
// https://tc39.github.io/ecma262/#sec-get-regexp.prototype.flags
module.exports = function () {
  var that = anObject(this);
  var result = '';
  if (that.global) result += 'g';
  if (that.ignoreCase) result += 'i';
  if (that.multiline) result += 'm';
  if (that.dotAll) result += 's';
  if (that.unicode) result += 'u';
  if (that.sticky) result += 'y';
  return result;
};


/***/ }),
/* 127 */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(5);

exports.f = wellKnownSymbol;


/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

var path = __webpack_require__(95);
var has = __webpack_require__(7);
var wrappedWellKnownSymbolModule = __webpack_require__(127);
var defineProperty = __webpack_require__(12).f;

module.exports = function (NAME) {
  var Symbol = path.Symbol || (path.Symbol = {});
  if (!has(Symbol, NAME)) defineProperty(Symbol, NAME, {
    value: wrappedWellKnownSymbolModule.f(NAME)
  });
};


/***/ }),
/* 129 */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(14);
var toObject = __webpack_require__(16);
var nativeKeys = __webpack_require__(43);
var fails = __webpack_require__(4);

var FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });

// `Object.keys` method
// https://tc39.github.io/ecma262/#sec-object.keys
$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {
  keys: function keys(it) {
    return nativeKeys(toObject(it));
  }
});


/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

var isRegExp = __webpack_require__(210);

module.exports = function (it) {
  if (isRegExp(it)) {
    throw TypeError("The method doesn't accept regular expressions");
  } return it;
};


/***/ }),
/* 131 */
/***/ (function(module, exports, __webpack_require__) {

var wellKnownSymbol = __webpack_require__(5);

var MATCH = wellKnownSymbol('match');

module.exports = function (METHOD_NAME) {
  var regexp = /./;
  try {
    '/./'[METHOD_NAME](regexp);
  } catch (e) {
    try {
      regexp[MATCH] = false;
      return '/./'[METHOD_NAME](regexp);
    } catch (f) { /* empty */ }
  } return false;
};


/***/ }),
/* 132 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * WebSocket with promise api
 */

/**
 * @external Channel
 */

const Channel = __webpack_require__(165);
const PromiseController = __webpack_require__(116);
const Requests = __webpack_require__(168);
const defaultOptions = __webpack_require__(182);
const {throwIf} = __webpack_require__(183);

// see: https://developer.mozilla.org/en-US/docs/Web/API/WebSocket#Ready_state_constants
const STATE = {
  CONNECTING: 0,
  OPEN: 1,
  CLOSING: 2,
  CLOSED: 3,
};

/**
 * @typicalname wsp
 */
class WebSocketAsPromised {
  /**
   * Constructor. Unlike original WebSocket it does not immediately open connection.
   * Please call `open()` method to connect.
   *
   * @param {String} url WebSocket URL
   * @param {Options} [options]
   */
  constructor(url, options) {
    this._assertOptions(options);
    this._url = url;
    this._options = Object.assign({}, defaultOptions, options);
    this._requests = new Requests();
    this._ws = null;
    this._wsSubscription = null;
    this._createOpeningController();
    this._createClosingController();
    this._createChannels();
  }

  /**
   * Returns original WebSocket instance created by `options.createWebSocket`.
   *
   * @returns {WebSocket}
   */
  get ws() {
    return this._ws;
  }

  /**
   * Returns WebSocket url.
   *
   * @returns {String}
   */
  get url() {
    return this._url;
  }

  /**
   * Is WebSocket connection in opening state.
   *
   * @returns {Boolean}
   */
  get isOpening() {
    return Boolean(this._ws && this._ws.readyState === STATE.CONNECTING);
  }

  /**
   * Is WebSocket connection opened.
   *
   * @returns {Boolean}
   */
  get isOpened() {
    return Boolean(this._ws && this._ws.readyState === STATE.OPEN);
  }

  /**
   * Is WebSocket connection in closing state.
   *
   * @returns {Boolean}
   */
  get isClosing() {
    return Boolean(this._ws && this._ws.readyState === STATE.CLOSING);
  }

  /**
   * Is WebSocket connection closed.
   *
   * @returns {Boolean}
   */
  get isClosed() {
    return Boolean(!this._ws || this._ws.readyState === STATE.CLOSED);
  }

  /**
   * Event channel triggered when connection is opened.
   *
   * @see https://vitalets.github.io/chnl/#channel
   * @example
   * wsp.onOpen.addListener(() => console.log('Connection opened'));
   *
   * @returns {Channel}
   */
  get onOpen() {
    return this._onOpen;
  }

  /**
   * Event channel triggered every time when message is sent to server.
   *
   * @see https://vitalets.github.io/chnl/#channel
   * @example
   * wsp.onSend.addListener(data => console.log('Message sent', data));
   *
   * @returns {Channel}
   */
  get onSend() {
    return this._onSend;
  }

  /**
   * Event channel triggered every time when message received from server.
   *
   * @see https://vitalets.github.io/chnl/#channel
   * @example
   * wsp.onMessage.addListener(message => console.log(message));
   *
   * @returns {Channel}
   */
  get onMessage() {
    return this._onMessage;
  }

  /**
   * Event channel triggered every time when received message is successfully unpacked.
   * For example, if you are using JSON transport, the listener will receive already JSON parsed data.
   *
   * @see https://vitalets.github.io/chnl/#channel
   * @example
   * wsp.onUnpackedMessage.addListener(data => console.log(data.foo));
   *
   * @returns {Channel}
   */
  get onUnpackedMessage() {
    return this._onUnpackedMessage;
  }

  /**
   * Event channel triggered every time when response to some request comes.
   * Received message considered a response if requestId is found in it.
   *
   * @see https://vitalets.github.io/chnl/#channel
   * @example
   * wsp.onResponse.addListener(data => console.log(data));
   *
   * @returns {Channel}
   */
  get onResponse() {
    return this._onResponse;
  }

  /**
   * Event channel triggered when connection closed.
   * Listener accepts single argument `{code, reason}`.
   *
   * @see https://vitalets.github.io/chnl/#channel
   * @example
   * wsp.onClose.addListener(event => console.log(`Connections closed: ${event.reason}`));
   *
   * @returns {Channel}
   */
  get onClose() {
    return this._onClose;
  }

  /**
   * Event channel triggered when by Websocket 'error' event.
   *
   * @see https://vitalets.github.io/chnl/#channel
   * @example
   * wsp.onError.addListener(event => console.error(event));
   *
   * @returns {Channel}
   */
  get onError() {
    return this._onError;
  }

  /**
   * Opens WebSocket connection. If connection already opened, promise will be resolved with "open event".
   *
   * @returns {Promise<Event>}
   */
  open() {
    if (this.isClosing) {
      return Promise.reject(new Error(`Can't open WebSocket while closing.`));
    }
    if (this.isOpened) {
      return this._opening.promise;
    }
    return this._opening.call(() => {
      this._opening.promise.catch(e => this._cleanup(e));
      this._createWS();
    });
  }

  /**
   * Performs request and waits for response.
   *
   * @param {*} data
   * @param {Object} [options]
   * @param {String|Number} [options.requestId=<auto-generated>]
   * @param {Number} [options.timeout=0]
   * @returns {Promise}
   */
  sendRequest(data, options = {}) {
    const requestId = options.requestId || `${Math.random()}`;
    const timeout = options.timeout !== undefined ? options.timeout : this._options.timeout;
    return this._requests.create(requestId, () => {
      this._assertRequestIdHandlers();
      const finalData = this._options.attachRequestId(data, requestId);
      this.sendPacked(finalData);
    }, timeout);
  }

  /**
   * Packs data with `options.packMessage` and sends to the server.
   *
   * @param {*} data
   */
  sendPacked(data) {
    this._assertPackingHandlers();
    const message = this._options.packMessage(data);
    this.send(message);
  }

  /**
   * Sends data without packing.
   *
   * @param {String|Blob|ArrayBuffer} data
   */
  send(data) {
    throwIf(!this.isOpened, `Can't send data because WebSocket is not opened.`);
    this._ws.send(data);
    this._onSend.dispatchAsync(data);
  }

  /**
   * Closes WebSocket connection. If connection already closed, promise will be resolved with "close event".
   *
   * @returns {Promise<Event>}
   */
  close() {
    return this.isClosed
      ? Promise.resolve(this._closing.value)
      : this._closing.call(() => this._ws.close());
  }

  /**
   * Removes all listeners from WSP instance. Useful for cleanup.
   */
  removeAllListeners() {
    this._onOpen.removeAllListeners();
    this._onMessage.removeAllListeners();
    this._onUnpackedMessage.removeAllListeners();
    this._onResponse.removeAllListeners();
    this._onSend.removeAllListeners();
    this._onClose.removeAllListeners();
    this._onError.removeAllListeners();
  }

  _createOpeningController() {
    const connectionTimeout = this._options.connectionTimeout || this._options.timeout;
    this._opening = new PromiseController({
      timeout: connectionTimeout,
      timeoutReason: `Can't open WebSocket within allowed timeout: ${connectionTimeout} ms.`
    });
  }

  _createClosingController() {
    const closingTimeout = this._options.timeout;
    this._closing = new PromiseController({
      timeout: closingTimeout,
      timeoutReason: `Can't close WebSocket within allowed timeout: ${closingTimeout} ms.`
    });
  }

  _createChannels() {
    this._onOpen = new Channel();
    this._onMessage = new Channel();
    this._onUnpackedMessage = new Channel();
    this._onResponse = new Channel();
    this._onSend = new Channel();
    this._onClose = new Channel();
    this._onError = new Channel();
  }

  _createWS() {
    this._ws = this._options.createWebSocket(this._url);
    this._wsSubscription = new Channel.Subscription([
      {channel: this._ws, event: 'open', listener: e => this._handleOpen(e)},
      {channel: this._ws, event: 'message', listener: e => this._handleMessage(e)},
      {channel: this._ws, event: 'error', listener: e => this._handleError(e)},
      {channel: this._ws, event: 'close', listener: e => this._handleClose(e)},
    ]).on();
  }

  _handleOpen(event) {
    this._onOpen.dispatchAsync(event);
    this._opening.resolve(event);
  }

  _handleMessage(event) {
    const data = this._options.extractMessageData(event);
    this._onMessage.dispatchAsync(data);
    this._tryUnpack(data);
  }

  _tryUnpack(data) {
    if (this._options.unpackMessage) {
      data = this._options.unpackMessage(data);
      if (data !== undefined) {
        this._onUnpackedMessage.dispatchAsync(data);
        this._tryHandleResponse(data);
      }
    }
  }

  _tryHandleResponse(data) {
    if (this._options.extractRequestId) {
      const requestId = this._options.extractRequestId(data);
      if (requestId) {
        this._onResponse.dispatchAsync(data, requestId);
        this._requests.resolve(requestId, data);
      }
    }
  }

  _handleError(event) {
    this._onError.dispatchAsync(event);
  }

  _handleClose(event) {
    this._onClose.dispatchAsync(event);
    this._closing.resolve(event);
    const error = new Error(`WebSocket closed with reason: ${event.reason} (${event.code}).`);
    if (this._opening.isPending) {
      this._opening.reject(error);
    }
    this._cleanup(error);
  }

  _cleanupWS() {
    if (this._wsSubscription) {
      this._wsSubscription.off();
      this._wsSubscription = null;
    }
    this._ws = null;
  }

  _cleanup(error) {
    this._cleanupWS();
    this._requests.rejectAll(error);
  }

  _assertOptions(options) {
    Object.keys(options || {}).forEach(key => {
      if (!defaultOptions.hasOwnProperty(key)) {
        throw new Error(`Unknown option: ${key}`);
      }
    });
  }

  _assertPackingHandlers() {
    const {packMessage, unpackMessage} = this._options;
    throwIf(!packMessage || !unpackMessage,
      `Please define 'options.packMessage / options.unpackMessage' for sending packed messages.`
    );
  }

  _assertRequestIdHandlers() {
    const {attachRequestId, extractRequestId} = this._options;
    throwIf(!attachRequestId || !extractRequestId,
      `Please define 'options.attachRequestId / options.extractRequestId' for sending requests.`
    );
  }
}

module.exports = WebSocketAsPromised;


/***/ }),
/* 133 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export COOKIE_REQUEST_ID */
/* unused harmony export COOKIE_USER_ID */
/* unused harmony export COOKIE_PASSWORD */
/* unused harmony export COOKIE_USER_ONLINE_STATUS */
/* unused harmony export COOKIE_DEVICE_TYPE */
/* unused harmony export COOKIE_LOCATION */
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18);
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24);
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35);
/* harmony import */ var core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(125);
/* harmony import */ var core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(51);
/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _util_constant_transformer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(11);
/* harmony import */ var _model_proto_bundle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(6);
/* harmony import */ var _model_proto_bundle__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_model_proto_bundle__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _util_request_util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(0);
/* harmony import */ var _util_notification_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1);









var UserStatus = _model_proto_bundle__WEBPACK_IMPORTED_MODULE_6__["im"].turms.proto.UserStatus;
var DeviceType = _model_proto_bundle__WEBPACK_IMPORTED_MODULE_6__["im"].turms.proto.DeviceType;
var COOKIE_REQUEST_ID = 'rid';
var COOKIE_USER_ID = 'uid';
var COOKIE_PASSWORD = 'pwd';
var COOKIE_USER_ONLINE_STATUS = 'us';
var COOKIE_DEVICE_TYPE = 'dt';
var COOKIE_LOCATION = 'loc';

var UserService = function () {
  function UserService(turmsClient) {
    this._turmsClient = turmsClient;
  }

  Object.defineProperty(UserService.prototype, "password", {
    get: function get() {
      return this._password;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(UserService.prototype, "userId", {
    get: function get() {
      return this._userId;
    },
    enumerable: true,
    configurable: true
  });

  UserService.getUserLocationFromBrowser = function () {
    return new Promise(function (resolve, reject) {
      navigator.geolocation.getCurrentPosition(function (position) {
        resolve(position);
      }, function (positionError) {
        reject(positionError);
      });
    });
  };

  UserService.prototype.login = function (userId, password, location, userOnlineStatus, deviceType) {
    if (userOnlineStatus === void 0) {
      userOnlineStatus = UserStatus.AVAILABLE;
    }

    if (deviceType === void 0) {
      deviceType = DeviceType.UNKNOWN;
    }

    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(userId, password);
    this._userId = userId;
    this._password = password;
    this._userOnlineStatus = userOnlineStatus;
    this._deviceType = deviceType;
    var requestId = Math.ceil(Math.random() * 9007199254740991);
    document.cookie = COOKIE_USER_ID + "=" + userId + "; path=/";
    document.cookie = COOKIE_PASSWORD + "=" + escape(password) + "; path=/";
    document.cookie = COOKIE_USER_ONLINE_STATUS + "=" + userOnlineStatus.toString() + "; path=/";
    document.cookie = COOKIE_DEVICE_TYPE + "=" + deviceType.toString() + "; path=/";
    document.cookie = COOKIE_REQUEST_ID + "=" + requestId + "; path=/";

    if (location) {
      if (typeof location === 'string') {
        this._location = location;
      } else {
        this._location = location.coords.latitude + ":" + location.coords.longitude;
      }

      document.cookie = COOKIE_LOCATION + "=" + this._location + "; path=/";
    }

    return this._turmsClient.driver.connect(userId, password, requestId).then(function () {
      UserService._clearCookies();

      return Promise.resolve();
    }).catch(function (error) {
      UserService._clearCookies();

      return Promise.reject(error);
    });
  };

  UserService.prototype.relogin = function () {
    if (!this._userId || !this._password) {
      return Promise.reject();
    } else {
      return this.login(this._userId, this._password, this._location, this._userOnlineStatus, this._deviceType);
    }
  };

  UserService.prototype.logout = function () {
    return this._turmsClient.driver.disconnect();
  };

  UserService.prototype.updateUserOnlineStatus = function (onlineStatus) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(onlineStatus);

    if (typeof onlineStatus === 'string') {
      onlineStatus = _util_constant_transformer__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].string2UserOnlineStatus(onlineStatus);
    }

    if (onlineStatus === UserStatus.OFFLINE) {
      throw new Error('illegal params');
    }

    return this._turmsClient.driver.send({
      updateUserOnlineStatusRequest: {
        userStatus: onlineStatus
      }
    }).then();
  };

  UserService.prototype.updatePassword = function (password) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(password);
    return this._turmsClient.driver.send({
      updateUserRequest: {
        password: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(password)
      }
    }).then();
  };

  UserService.prototype.updateProfile = function (name, intro, profilePictureUrl, profileAccessStrategy) {
    if (_util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].areAllFalsy(name, intro, profilePictureUrl, profileAccessStrategy)) {
      return Promise.resolve();
    }

    if (typeof profileAccessStrategy === 'string') {
      profileAccessStrategy = _util_constant_transformer__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].string2ProfileAccessStrategy(profileAccessStrategy);
    }

    return this._turmsClient.driver.send({
      updateUserRequest: {
        name: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(name),
        intro: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(intro),
        profilePictureUrl: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(profilePictureUrl),
        profileAccessStrategy: profileAccessStrategy
      }
    }).then();
  };

  UserService.prototype.queryUserGroupInvitations = function (lastUpdatedDate) {
    return this._turmsClient.driver.send({
      queryUserGroupInvitationsRequest: {
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"].transform(notification.data.groupInvitationsWithVersion);
    });
  };

  UserService.prototype.queryUserProfile = function (userId, lastUpdatedDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(userId);
    return this._turmsClient.driver.send({
      queryUserProfileRequest: {
        userId: userId,
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return {
        userInfo: _util_notification_util__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"].transform(notification.data.usersInfosWithVersion.userInfos[0]),
        lastUpdatedDate: _util_notification_util__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"].transformDate(notification.data.usersInfosWithVersion.lastUpdatedDate)
      };
    });
  };

  UserService.prototype.queryUsersIdsNearby = function (latitude, longitude, distance, maxNumber) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(latitude, longitude);
    return this._turmsClient.driver.send({
      queryUsersIdsNearbyRequest: {
        latitude: latitude,
        longitude: longitude,
        distance: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(distance),
        maxNumber: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(maxNumber)
      }
    }).then(function (notification) {
      return notification.data.ids.values;
    });
  };

  UserService.prototype.queryUsersInfosNearby = function (latitude, longitude, distance, maxNumber) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(latitude, longitude);
    return this._turmsClient.driver.send({
      queryUsersInfosNearbyRequest: {
        latitude: latitude,
        longitude: longitude,
        distance: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(distance),
        maxNumber: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(maxNumber)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"].getFirstArrayAndTransform(notification.data.usersInfosWithVersion.userInfos);
    });
  };

  UserService.prototype.queryUsersOnlineStatusRequest = function (usersIds) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(usersIds);
    return this._turmsClient.driver.send({
      queryUsersOnlineStatusRequest: {
        usersIds: usersIds
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"].getFirstArrayAndTransform(notification.data.usersOnlineStatuses);
    });
  };

  UserService.prototype.queryRelationships = function (relatedUsersIds, isBlocked, groupIndex, lastUpdatedDate) {
    return this._turmsClient.driver.send({
      queryRelationshipsRequest: {
        relatedUsersIds: relatedUsersIds,
        isBlocked: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(isBlocked),
        groupIndex: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(groupIndex),
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"].transform(notification.data.userRelationshipsWithVersion);
    });
  };

  UserService.prototype.queryRelatedUsersIds = function (isBlocked, groupIndex, lastUpdatedDate) {
    return this._turmsClient.driver.send({
      queryRelatedUsersIdsRequest: {
        isBlocked: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(isBlocked),
        groupIndex: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(groupIndex),
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"].getIdsWithVersion(notification);
    });
  };

  UserService.prototype.queryFriends = function (groupIndex, lastUpdatedDate) {
    return this.queryRelationships(undefined, false, groupIndex, lastUpdatedDate);
  };

  UserService.prototype.queryBlacklistedUsers = function (groupIndex, lastUpdatedDate) {
    return this.queryRelationships(undefined, true, groupIndex, lastUpdatedDate);
  };

  UserService.prototype.createRelationship = function (userId, isBlocked, groupIndex) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(userId, isBlocked);
    return this._turmsClient.driver.send({
      createRelationshipRequest: {
        userId: userId,
        isBlocked: isBlocked,
        groupIndex: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(groupIndex)
      }
    }).then();
  };

  UserService.prototype.createFriendRelationship = function (userId, groupIndex) {
    return this.createRelationship(userId, false, groupIndex);
  };

  UserService.prototype.createBlacklistedUserRelationship = function (userId, groupIndex) {
    return this.createRelationship(userId, true, groupIndex);
  };

  UserService.prototype.deleteRelationship = function (relatedUserId, deleteGroupIndex, targetGroupIndex) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(relatedUserId);
    return this._turmsClient.driver.send({
      deleteRelationshipRequest: {
        relatedUserId: relatedUserId,
        groupIndex: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(deleteGroupIndex),
        targetGroupIndex: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(targetGroupIndex)
      }
    }).then();
  };

  UserService.prototype.updateRelationship = function (relatedUserId, isBlocked, groupIndex) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(relatedUserId);

    if (_util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].areAllFalsy(isBlocked, groupIndex)) {
      return Promise.resolve();
    }

    return this._turmsClient.driver.send({
      updateRelationshipRequest: {
        relatedUserId: relatedUserId,
        blocked: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(isBlocked),
        newGroupIndex: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(groupIndex)
      }
    }).then();
  };

  UserService.prototype.sendFriendRequest = function (recipientId, content) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(recipientId, content);
    return this._turmsClient.driver.send({
      createFriendRequestRequest: {
        recipientId: recipientId,
        content: content
      }
    }).then(function (notification) {
      return notification.data.ids.values[0];
    });
  };

  UserService.prototype.replyFriendRequest = function (requestId, responseAction, reason) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(requestId, responseAction);

    if (typeof responseAction === 'string') {
      responseAction = _util_constant_transformer__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].string2ResponseAction(responseAction);
    }

    return this._turmsClient.driver.send({
      updateFriendRequestRequest: {
        requestId: requestId,
        responseAction: responseAction,
        reason: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(reason)
      }
    }).then();
  };

  UserService.prototype.queryFriendRequests = function (lastUpdatedDate) {
    return this._turmsClient.driver.send({
      queryFriendRequestsRequest: {
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"].transform(notification.data.userFriendRequestsWithVersion);
    });
  };

  UserService.prototype.createRelationshipGroup = function (name) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(name);
    return this._turmsClient.driver.send({
      createRelationshipGroupRequest: {
        name: name
      }
    }).then(function (notification) {
      return notification.data.ids.values[0];
    });
  };

  UserService.prototype.deleteRelationshipGroups = function (groupIndex, targetGroupIndex) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(groupIndex);
    return this._turmsClient.driver.send({
      deleteRelationshipGroupRequest: {
        groupIndex: groupIndex,
        targetGroupIndex: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(targetGroupIndex)
      }
    }).then();
  };

  UserService.prototype.updateRelationshipGroup = function (groupIndex, newName) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(groupIndex, newName);
    return this._turmsClient.driver.send({
      updateRelationshipGroupRequest: {
        groupIndex: groupIndex,
        newName: newName
      }
    }).then();
  };

  UserService.prototype.queryRelationshipGroups = function (lastUpdatedDate) {
    return this._turmsClient.driver.send({
      queryRelationshipGroupsRequest: {
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_8__[/* default */ "a"].transform(notification.data.userRelationshipGroupsWithVersion);
    });
  };

  UserService.prototype.moveRelatedUserToGroup = function (relatedUserId, groupIndex) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(relatedUserId, groupIndex);
    return this._turmsClient.driver.send({
      updateRelationshipRequest: {
        relatedUserId: relatedUserId,
        newGroupIndex: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(groupIndex)
      }
    }).then();
  };

  UserService.prototype.updateLocation = function (latitude, longitude, name, address) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].throwIfAnyFalsy(latitude, longitude);
    return this._turmsClient.driver.send({
      updateUserLocationRequest: {
        latitude: latitude,
        longitude: longitude,
        name: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(name),
        address: _util_request_util__WEBPACK_IMPORTED_MODULE_7__[/* default */ "a"].wrapValueIfNotNull(address)
      }
    }).then();
  };

  UserService._clearCookies = function () {
    var now = new Date().toUTCString();
    document.cookie = COOKIE_USER_ID + "=;expires=" + now;
    document.cookie = COOKIE_PASSWORD + "=;expires=" + now;
    document.cookie = COOKIE_USER_ONLINE_STATUS + "=;expires=" + now;
    document.cookie = COOKIE_DEVICE_TYPE + "=;expires=" + now;
    document.cookie = COOKIE_REQUEST_ID + "=;expires=" + now;
    document.cookie = COOKIE_LOCATION + "=;expires=" + now;
  };

  return UserService;
}();

/* harmony default export */ __webpack_exports__["a"] = (UserService);

/***/ }),
/* 134 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18);
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24);
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35);
/* harmony import */ var core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(51);
/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _util_constant_transformer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(11);
/* harmony import */ var _util_request_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(0);
/* harmony import */ var _util_notification_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1);








var GroupService = function () {
  function GroupService(turmsClient) {
    this._turmsClient = turmsClient;
  }

  GroupService.prototype.createGroup = function (name, intro, announcement, profilePictureUrl, minimumScore, muteEndDate, groupTypeId) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(name);
    return this._turmsClient.driver.send({
      createGroupRequest: {
        name: name,
        intro: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(intro),
        announcement: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(announcement),
        profilePictureUrl: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(profilePictureUrl),
        minimumScore: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(minimumScore),
        muteEndDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(muteEndDate),
        groupTypeId: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(groupTypeId)
      }
    }).then(function (notification) {
      return notification.data.ids.values[0];
    });
  };

  GroupService.prototype.deleteGroup = function (groupId) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId);
    return this._turmsClient.driver.send({
      deleteGroupRequest: {
        groupId: groupId
      }
    }).then();
  };

  GroupService.prototype.updateGroup = function (groupId, groupName, intro, announcement, profilePictureUrl, minimumScore, groupTypeId, muteEndDate, successorId, quitAfterTransfer) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId);

    if (_util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].areAllFalsy(groupName, intro, announcement, profilePictureUrl, minimumScore, groupTypeId, muteEndDate, successorId)) {
      return Promise.resolve();
    }

    return this._turmsClient.driver.send({
      updateGroupRequest: {
        groupId: groupId,
        groupName: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(groupName),
        intro: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(intro),
        announcement: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(announcement),
        profilePictureUrl: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(profilePictureUrl),
        muteEndDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(muteEndDate),
        minimumScore: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(minimumScore),
        groupTypeId: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(groupTypeId),
        successorId: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(successorId),
        quitAfterTransfer: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(quitAfterTransfer)
      }
    }).then();
  };

  GroupService.prototype.transferOwnership = function (groupId, successorId, quitAfterTransfer) {
    if (quitAfterTransfer === void 0) {
      quitAfterTransfer = false;
    }

    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, successorId);
    return this.updateGroup(groupId, null, null, null, null, null, null, null, successorId, quitAfterTransfer);
  };

  GroupService.prototype.muteGroup = function (groupId, muteEndDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, muteEndDate);
    return this.updateGroup(groupId, null, null, null, null, null, null, muteEndDate, null);
  };

  GroupService.prototype.unmuteGroup = function (groupId) {
    return this.muteGroup(groupId, new Date(0));
  };

  GroupService.prototype.queryGroup = function (groupId, lastUpdatedDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId);
    return this._turmsClient.driver.send({
      queryGroupRequest: {
        groupId: groupId,
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return {
        group: _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].transform(notification.data.groupsWithVersion.groups[0]),
        lastUpdatedDate: _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].transformDate(notification.data.groupsWithVersion.lastUpdatedDate)
      };
    });
  };

  GroupService.prototype.queryJoinedGroupsIds = function (lastUpdatedDate) {
    return this._turmsClient.driver.send({
      queryJoinedGroupsIdsRequest: {
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].getIdsWithVersion(notification);
    });
  };

  GroupService.prototype.queryJoinedGroupsInfos = function (lastUpdatedDate) {
    return this._turmsClient.driver.send({
      queryJoinedGroupsInfosRequest: {
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].transform(notification.data.groupsWithVersion);
    });
  };

  GroupService.prototype.addGroupJoinQuestion = function (groupId, question, answers, score) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, question, answers, score);
    return this._turmsClient.driver.send({
      createGroupJoinQuestionRequest: {
        groupId: groupId,
        question: question,
        answers: answers,
        score: score
      }
    }).then(function (notification) {
      return notification.data.ids.values[0];
    });
  };

  GroupService.prototype.deleteGroupJoinQuestion = function (questionId) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(questionId);
    return this._turmsClient.driver.send({
      deleteGroupJoinQuestionRequest: {
        questionId: questionId
      }
    }).then();
  };

  GroupService.prototype.updateGroupJoinQuestion = function (questionId, question, answers, score) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(questionId);

    if (_util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].areAllFalsy(question, answers, score)) {
      return Promise.resolve();
    }

    return this._turmsClient.driver.send({
      updateGroupJoinQuestionRequest: {
        questionId: questionId,
        question: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(question),
        answers: answers,
        score: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(score)
      }
    }).then();
  };

  GroupService.prototype.blacklistUser = function (groupId, userId) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, userId);
    return this._turmsClient.driver.send({
      createGroupBlacklistedUserRequest: {
        blacklistedUserId: userId,
        groupId: groupId
      }
    }).then();
  };

  GroupService.prototype.unblacklistUser = function (groupId, userId) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, userId);
    return this._turmsClient.driver.send({
      deleteGroupBlacklistedUserRequest: {
        groupId: groupId,
        unblacklistedUserId: userId
      }
    }).then();
  };

  GroupService.prototype.queryBlacklistedUsersIds = function (groupId, lastUpdatedDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId);
    return this._turmsClient.driver.send({
      queryGroupBlacklistedUsersIdsRequest: {
        groupId: groupId,
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].getIdsWithVersion(notification);
    });
  };

  GroupService.prototype.queryBlacklistedUsersInfos = function (groupId, lastUpdatedDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId);
    return this._turmsClient.driver.send({
      queryGroupBlacklistedUsersInfosRequest: {
        groupId: groupId,
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].transform(notification.data.usersInfosWithVersion);
    });
  };

  GroupService.prototype.createInvitation = function (groupId, inviteeId, content) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, inviteeId, content);
    return this._turmsClient.driver.send({
      createGroupInvitationRequest: {
        groupId: groupId,
        inviteeId: inviteeId,
        content: content
      }
    }).then(function (notification) {
      return notification.data.ids.values[0];
    });
  };

  GroupService.prototype.deleteInvitation = function (invitationId) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(invitationId);
    return this._turmsClient.driver.send({
      deleteGroupInvitationRequest: {
        invitationId: invitationId
      }
    }).then();
  };

  GroupService.prototype.queryInvitations = function (groupId, lastUpdatedDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId);
    return this._turmsClient.driver.send({
      queryGroupInvitationsRequest: {
        groupId: groupId,
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].transform(notification.data.groupInvitationsWithVersion);
    });
  };

  GroupService.prototype.createJoinRequest = function (groupId, content) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, content);
    return this._turmsClient.driver.send({
      createGroupJoinRequestRequest: {
        groupId: groupId,
        content: content
      }
    }).then(function (notification) {
      return notification.data.ids.values[0];
    });
  };

  GroupService.prototype.deleteJoinRequest = function (requestId) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(requestId);
    return this._turmsClient.driver.send({
      deleteGroupJoinRequestRequest: {
        requestId: requestId
      }
    }).then();
  };

  GroupService.prototype.queryJoinRequests = function (groupId, lastUpdatedDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId);
    return this._turmsClient.driver.send({
      queryGroupJoinRequestsRequest: {
        groupId: groupId,
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].transform(notification.data.groupJoinRequestsWithVersion);
    });
  };

  GroupService.prototype.queryGroupJoinQuestionsRequest = function (groupId, withAnswers, lastUpdatedDate) {
    if (withAnswers === void 0) {
      withAnswers = false;
    }

    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, withAnswers);
    return this._turmsClient.driver.send({
      queryGroupJoinQuestionsRequest: {
        groupId: groupId,
        withAnswers: withAnswers,
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].transform(notification.data.groupJoinQuestionsWithVersion);
    });
  };

  GroupService.prototype.answerGroupQuestions = function (questionIdsAndAnswers) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfEmpty(questionIdsAndAnswers);
    return this._turmsClient.driver.send({
      checkGroupJoinQuestionsAnswersRequest: {
        questionIdAndAnswer: questionIdsAndAnswers
      }
    }).then(function (notification) {
      return notification.data.success.value;
    });
  };

  GroupService.prototype.addGroupMember = function (groupId, userId, name, role, muteEndDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, userId);

    if (typeof role === 'string') {
      role = _util_constant_transformer__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"].string2GroupMemberRole(role);
    }

    return this._turmsClient.driver.send({
      createGroupMemberRequest: {
        groupId: groupId,
        userId: userId,
        name: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(name),
        role: role,
        muteEndDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(muteEndDate)
      }
    }).then();
  };

  GroupService.prototype.quitGroup = function (groupId, successorId, quitAfterTransfer) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId);
    return this._turmsClient.driver.send({
      deleteGroupMemberRequest: {
        groupId: groupId,
        groupMemberId: this._turmsClient.userService.userId,
        successorId: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(successorId),
        quitAfterTransfer: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(quitAfterTransfer)
      }
    }).then();
  };

  GroupService.prototype.removeGroupMember = function (groupId, memberId) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, memberId);
    return this._turmsClient.driver.send({
      deleteGroupMemberRequest: {
        groupId: groupId,
        groupMemberId: memberId
      }
    }).then();
  };

  GroupService.prototype.updateGroupMemberInfo = function (groupId, memberId, name, role, muteEndDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, memberId);

    if (_util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].areAllFalsy(name, role, muteEndDate)) {
      return Promise.resolve();
    }

    if (typeof role === 'string') {
      role = _util_constant_transformer__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"].string2GroupMemberRole(role);
    }

    return this._turmsClient.driver.send({
      updateGroupMemberRequest: {
        groupId: groupId,
        memberId: memberId,
        name: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(name),
        role: role,
        muteEndDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(muteEndDate)
      }
    }).then();
  };

  GroupService.prototype.muteGroupMember = function (groupId, memberId, muteEndDate) {
    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, memberId, muteEndDate);
    return this.updateGroupMemberInfo(groupId, memberId, undefined, undefined, muteEndDate);
  };

  GroupService.prototype.unmuteGroupMember = function (groupId, memberId) {
    return this.muteGroupMember(groupId, memberId, new Date(0));
  };

  GroupService.prototype.queryGroupMembers = function (groupId, withStatus, lastUpdatedDate) {
    if (withStatus === void 0) {
      withStatus = false;
    }

    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId);
    return this._turmsClient.driver.send({
      queryGroupMembersRequest: {
        groupId: groupId,
        lastUpdatedDate: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapTimeIfNotNull(lastUpdatedDate),
        withStatus: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(withStatus)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].transform(notification.data.groupMembersWithVersion);
    });
  };

  GroupService.prototype.queryGroupMembersByMembersIds = function (groupId, membersIds, withStatus) {
    if (withStatus === void 0) {
      withStatus = false;
    }

    _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].throwIfAnyFalsy(groupId, membersIds);
    return this._turmsClient.driver.send({
      queryGroupMembersRequest: {
        groupId: groupId,
        groupMembersIds: membersIds,
        withStatus: _util_request_util__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"].wrapValueIfNotNull(withStatus)
      }
    }).then(function (notification) {
      return _util_notification_util__WEBPACK_IMPORTED_MODULE_6__[/* default */ "a"].transform(notification.data.groupMembersWithVersion);
    });
  };

  return GroupService;
}();

/* harmony default export */ __webpack_exports__["a"] = (GroupService);

/***/ }),
/* 135 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _util_notification_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);


var NotificationService = function () {
  function NotificationService(turmsClient) {
    var _this = this;

    this._turmsClient = turmsClient;

    this._turmsClient.driver.onNotificationListeners.push(function (notification) {
      if (_this._onNotification != null && notification.relayedRequest) {
        _this._onNotification(_util_notification_util__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"].transform(notification.relayedRequest), notification.requesterId);
      }

      return null;
    });
  }

  Object.defineProperty(NotificationService.prototype, "onNotification", {
    get: function get() {
      return this._onNotification;
    },
    set: function set(value) {
      this._onNotification = value;
    },
    enumerable: true,
    configurable: true
  });
  return NotificationService;
}();

/* harmony default export */ __webpack_exports__["a"] = (NotificationService);

/***/ }),
/* 136 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18);
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24);
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35);
/* harmony import */ var core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_typed_array_uint8_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62);
/* harmony import */ var core_js_modules_es_typed_array_uint8_array__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_uint8_array__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_typed_array_copy_within__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(63);
/* harmony import */ var core_js_modules_es_typed_array_copy_within__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_copy_within__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_typed_array_every__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(64);
/* harmony import */ var core_js_modules_es_typed_array_every__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_every__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_typed_array_fill__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(65);
/* harmony import */ var core_js_modules_es_typed_array_fill__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_fill__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_typed_array_filter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(66);
/* harmony import */ var core_js_modules_es_typed_array_filter__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_filter__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_typed_array_find__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(67);
/* harmony import */ var core_js_modules_es_typed_array_find__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_typed_array_find_index__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(68);
/* harmony import */ var core_js_modules_es_typed_array_find_index__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_index__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_es_typed_array_for_each__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(69);
/* harmony import */ var core_js_modules_es_typed_array_for_each__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_for_each__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_es_typed_array_includes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(70);
/* harmony import */ var core_js_modules_es_typed_array_includes__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_includes__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var core_js_modules_es_typed_array_index_of__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(71);
/* harmony import */ var core_js_modules_es_typed_array_index_of__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_index_of__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var core_js_modules_es_typed_array_iterator__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(72);
/* harmony import */ var core_js_modules_es_typed_array_iterator__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_iterator__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var core_js_modules_es_typed_array_join__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(73);
/* harmony import */ var core_js_modules_es_typed_array_join__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_join__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var core_js_modules_es_typed_array_last_index_of__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(74);
/* harmony import */ var core_js_modules_es_typed_array_last_index_of__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_last_index_of__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var core_js_modules_es_typed_array_map__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(76);
/* harmony import */ var core_js_modules_es_typed_array_map__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_map__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var core_js_modules_es_typed_array_reduce__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(77);
/* harmony import */ var core_js_modules_es_typed_array_reduce__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var core_js_modules_es_typed_array_reduce_right__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(78);
/* harmony import */ var core_js_modules_es_typed_array_reduce_right__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reduce_right__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var core_js_modules_es_typed_array_reverse__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(79);
/* harmony import */ var core_js_modules_es_typed_array_reverse__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_reverse__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var core_js_modules_es_typed_array_set__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(80);
/* harmony import */ var core_js_modules_es_typed_array_set__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_set__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var core_js_modules_es_typed_array_slice__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(81);
/* harmony import */ var core_js_modules_es_typed_array_slice__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_slice__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var core_js_modules_es_typed_array_some__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(82);
/* harmony import */ var core_js_modules_es_typed_array_some__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_some__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var core_js_modules_es_typed_array_sort__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(83);
/* harmony import */ var core_js_modules_es_typed_array_sort__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_sort__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var core_js_modules_es_typed_array_subarray__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(84);
/* harmony import */ var core_js_modules_es_typed_array_subarray__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_subarray__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(85);
/* harmony import */ var core_js_modules_es_typed_array_to_locale_string__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string__WEBPACK_IMPORTED_MODULE_25__);
/* harmony import */ var core_js_modules_es_typed_array_to_string__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(86);
/* harmony import */ var core_js_modules_es_typed_array_to_string__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_to_string__WEBPACK_IMPORTED_MODULE_26__);




























var InputFileReader = function () {
  function InputFileReader() {}

  InputFileReader.readFileFromHTMLInputElement = function (element, fileIndex) {
    if (fileIndex === void 0) {
      fileIndex = 0;
    }

    if (typeof element === 'undefined') {
      return Promise.reject('element is undefined');
    } else if (!(element.files instanceof FileList)) {
      return Promise.reject('element.files isn\'t a FileList object');
    } else if (element.files.length === 0) {
      return Promise.reject('no files selected');
    }

    return this.readFile(element.files[fileIndex]);
  };

  InputFileReader.readFile = function (file) {
    var _this = this;

    if (!this._reader) {
      this._reader = new FileReader();
    }

    var promise = new Promise(function (resolve, reject) {
      _this._reader.onload = function (event) {
        if (typeof event.target.result === 'string') {
          resolve(event.target.result);
        } else {
          resolve(new Uint8Array(event.target.result));
        }
      };

      _this._reader.onerror = function (error) {
        reject(error);
      };
    });

    this._reader.readAsArrayBuffer(file);

    return promise;
  };

  return InputFileReader;
}();

/* harmony default export */ __webpack_exports__["a"] = (InputFileReader);

/***/ }),
/* 137 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js
var es_array_iterator = __webpack_require__(18);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var es_object_to_string = __webpack_require__(24);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.js
var es_promise = __webpack_require__(35);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-array.js
var es_typed_array_uint8_array = __webpack_require__(62);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.copy-within.js
var es_typed_array_copy_within = __webpack_require__(63);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.every.js
var es_typed_array_every = __webpack_require__(64);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.fill.js
var es_typed_array_fill = __webpack_require__(65);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.filter.js
var es_typed_array_filter = __webpack_require__(66);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find.js
var es_typed_array_find = __webpack_require__(67);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-index.js
var es_typed_array_find_index = __webpack_require__(68);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.for-each.js
var es_typed_array_for_each = __webpack_require__(69);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.includes.js
var es_typed_array_includes = __webpack_require__(70);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.index-of.js
var es_typed_array_index_of = __webpack_require__(71);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.iterator.js
var es_typed_array_iterator = __webpack_require__(72);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.join.js
var es_typed_array_join = __webpack_require__(73);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.last-index-of.js
var es_typed_array_last_index_of = __webpack_require__(74);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.map.js
var es_typed_array_map = __webpack_require__(76);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce.js
var es_typed_array_reduce = __webpack_require__(77);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce-right.js
var es_typed_array_reduce_right = __webpack_require__(78);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reverse.js
var es_typed_array_reverse = __webpack_require__(79);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.set.js
var es_typed_array_set = __webpack_require__(80);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.slice.js
var es_typed_array_slice = __webpack_require__(81);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.some.js
var es_typed_array_some = __webpack_require__(82);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.sort.js
var es_typed_array_sort = __webpack_require__(83);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.subarray.js
var es_typed_array_subarray = __webpack_require__(84);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-locale-string.js
var es_typed_array_to_locale_string = __webpack_require__(85);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-string.js
var es_typed_array_to_string = __webpack_require__(86);

// CONCATENATED MODULE: ./src/util/timer.ts
var Timer = function () {
  function Timer(callback, interval, lightMode) {
    var _this = this;

    if (lightMode === void 0) {
      lightMode = true;
    }

    this._callback = function () {
      if (!_this._ignoreNextCall) {
        callback();
      } else {
        _this._ignoreNextCall = false;
      }
    };

    this._interval = interval;
    this._lightMode = lightMode;
    this._ignoreNextCall = false;
    this._isRunning = false;
  }

  Object.defineProperty(Timer.prototype, "isRunning", {
    get: function get() {
      return this._isRunning;
    },
    enumerable: true,
    configurable: true
  });

  Timer.prototype.stop = function () {
    if (this._timerId) {
      clearInterval(this._timerId);
    }

    this._isRunning = false;
    this._timerId = undefined;
    return this;
  };

  Timer.prototype.start = function () {
    if (!this._timerId) {
      this._timerId = setInterval(this._callback, this._interval);
    }

    this._isRunning = true;
    return this;
  };

  Timer.prototype.reset = function (interval) {
    if (this._lightMode && this._interval === interval) {
      this._ignoreNextCall = true;
      return this;
    } else {
      this._interval = interval;
      return this.stop().start();
    }
  };

  return Timer;
}();

/* harmony default export */ var timer = (Timer);
// EXTERNAL MODULE: ./node_modules/websocket-as-promised/src/index.js
var src = __webpack_require__(132);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.assign.js
var es_object_assign = __webpack_require__(201);

// CONCATENATED MODULE: ./src/model/turms-status-code.ts


var turms_status_code_a;

var Code;

(function (Code) {
  Code[Code["OK"] = 2000] = "OK";
  Code[Code["NO_CONTENT"] = 2001] = "NO_CONTENT";
  Code[Code["ALREADY_UP_TO_DATE"] = 2002] = "ALREADY_UP_TO_DATE";
  Code[Code["RECIPIENTS_OFFLINE"] = 2003] = "RECIPIENTS_OFFLINE";
  Code[Code["NOT_RESPONSIBLE"] = 3000] = "NOT_RESPONSIBLE";
  Code[Code["FAILED"] = 4000] = "FAILED";
  Code[Code["DISABLED_FUNCTION"] = 4001] = "DISABLED_FUNCTION";
  Code[Code["EXPIRY_DATE_BEFORE_NOW"] = 4002] = "EXPIRY_DATE_BEFORE_NOW";
  Code[Code["EXPIRY_RESOURCE"] = 4003] = "EXPIRY_RESOURCE";
  Code[Code["ID_DUPLICATED"] = 4004] = "ID_DUPLICATED";
  Code[Code["ILLEGAL_ARGUMENTS"] = 4005] = "ILLEGAL_ARGUMENTS";
  Code[Code["ILLEGAL_DATE_FORMAT"] = 4006] = "ILLEGAL_DATE_FORMAT";
  Code[Code["NOT_ACTIVE"] = 4007] = "NOT_ACTIVE";
  Code[Code["OWNED_RESOURCE_LIMIT_REACHED"] = 4008] = "OWNED_RESOURCE_LIMIT_REACHED";
  Code[Code["REQUESTED_RECORDS_TOO_MANY"] = 4009] = "REQUESTED_RECORDS_TOO_MANY";
  Code[Code["RESOURCES_HAVE_BEEN_HANDLED"] = 4010] = "RESOURCES_HAVE_BEEN_HANDLED";
  Code[Code["RESOURCES_HAVE_CHANGED"] = 4011] = "RESOURCES_HAVE_CHANGED";
  Code[Code["SESSION_SIMULTANEOUS_CONFLICTS_DECLINE"] = 4012] = "SESSION_SIMULTANEOUS_CONFLICTS_DECLINE";
  Code[Code["SESSION_SIMULTANEOUS_CONFLICTS_NOTIFY"] = 4013] = "SESSION_SIMULTANEOUS_CONFLICTS_NOTIFY";
  Code[Code["SESSION_SIMULTANEOUS_CONFLICTS_OFFLINE"] = 4014] = "SESSION_SIMULTANEOUS_CONFLICTS_OFFLINE";
  Code[Code["SUCCESSOR_NOT_GROUP_MEMBER"] = 4015] = "SUCCESSOR_NOT_GROUP_MEMBER";
  Code[Code["TARGET_USERS_UNAUTHORIZED"] = 4016] = "TARGET_USERS_UNAUTHORIZED";
  Code[Code["TARGET_USERS_NOT_EXIST"] = 4017] = "TARGET_USERS_NOT_EXIST";
  Code[Code["TYPE_NOT_EXISTS"] = 4018] = "TYPE_NOT_EXISTS";
  Code[Code["UNAUTHORIZED"] = 4019] = "UNAUTHORIZED";
  Code[Code["REDUNDANT_REQUEST"] = 4020] = "REDUNDANT_REQUEST";
  Code[Code["ALREADY_GROUP_MEMBER"] = 4021] = "ALREADY_GROUP_MEMBER";
  Code[Code["FRIEND_REQUEST_HAS_EXISTED"] = 4022] = "FRIEND_REQUEST_HAS_EXISTED";
  Code[Code["RELATIONSHIP_HAS_ESTABLISHED"] = 4023] = "RELATIONSHIP_HAS_ESTABLISHED";
  Code[Code["USER_NOT_GROUP_MEMBER"] = 4024] = "USER_NOT_GROUP_MEMBER";
  Code[Code["USER_HAS_BEEN_BLACKLISTED"] = 4025] = "USER_HAS_BEEN_BLACKLISTED";
  Code[Code["GROUP_HAS_BEEN_MUTED"] = 4026] = "GROUP_HAS_BEEN_MUTED";
  Code[Code["MEMBER_HAS_BEEN_MUTED"] = 4027] = "MEMBER_HAS_BEEN_MUTED";
  Code[Code["GUESTS_HAVE_BEEN_MUTED"] = 4028] = "GUESTS_HAVE_BEEN_MUTED";
  Code[Code["SERVER_INTERNAL_ERROR"] = 5000] = "SERVER_INTERNAL_ERROR";
  Code[Code["LOGGED_DEVICES_CANNOT_OFFLINE"] = 5001] = "LOGGED_DEVICES_CANNOT_OFFLINE";
})(Code || (Code = {}));

var TurmsStatusCode = function () {
  function TurmsStatusCode(code) {
    this.code = code;
    this.reason = TurmsStatusCode.getReason(code);
  }

  TurmsStatusCode.isSuccessCode = function (code) {
    if (typeof code === 'string') {
      code = parseInt(code);
    }

    return code === Code.OK;
  };

  TurmsStatusCode.isErrorCode = function (code) {
    return !this.isSuccessCode(code);
  };

  TurmsStatusCode.getReason = function (code) {
    return this._code2ReasonMap[code];
  };

  TurmsStatusCode._code2ReasonMap = (turms_status_code_a = {}, turms_status_code_a[Code.OK] = "ok", turms_status_code_a[Code.NOT_RESPONSIBLE] = "The server isn't responsible for the user", turms_status_code_a[Code.FAILED] = "failed", turms_status_code_a[Code.SERVER_INTERNAL_ERROR] = "Internal server error", turms_status_code_a[Code.NO_CONTENT] = "No content", turms_status_code_a[Code.ALREADY_UP_TO_DATE] = "Already up-to-date", turms_status_code_a[Code.RECIPIENTS_OFFLINE] = "The recipients are offline", turms_status_code_a[Code.DISABLED_FUNCTION] = "The function has been disabled in servers", turms_status_code_a[Code.EXPIRY_DATE_BEFORE_NOW] = "Expiration date must be greater than now", turms_status_code_a[Code.EXPIRY_RESOURCE] = "The target resource has expired", turms_status_code_a[Code.ID_DUPLICATED] = "ID must be unique", turms_status_code_a[Code.ILLEGAL_ARGUMENTS] = "Illegal arguments", turms_status_code_a[Code.ILLEGAL_DATE_FORMAT] = "Illegal date format", turms_status_code_a[Code.NOT_ACTIVE] = "Not active", turms_status_code_a[Code.OWNED_RESOURCE_LIMIT_REACHED] = "The resource limit is reached", turms_status_code_a[Code.REQUESTED_RECORDS_TOO_MANY] = "Too many records are requested", turms_status_code_a[Code.RESOURCES_HAVE_BEEN_HANDLED] = "The resources have been handled", turms_status_code_a[Code.RESOURCES_HAVE_CHANGED] = "The resources have been changed", turms_status_code_a[Code.SESSION_SIMULTANEOUS_CONFLICTS_DECLINE] = "A different device has logged into your account", turms_status_code_a[Code.SESSION_SIMULTANEOUS_CONFLICTS_NOTIFY] = "Someone attempted to log into your account", turms_status_code_a[Code.SESSION_SIMULTANEOUS_CONFLICTS_OFFLINE] = "A different device has logged into your account", turms_status_code_a[Code.SUCCESSOR_NOT_GROUP_MEMBER] = "The successor is not a member of the group", turms_status_code_a[Code.TARGET_USERS_UNAUTHORIZED] = "The target users are unauthorized", turms_status_code_a[Code.TARGET_USERS_NOT_EXIST] = "The target users do not exist", turms_status_code_a[Code.TYPE_NOT_EXISTS] = "The resource type does not exist", turms_status_code_a[Code.UNAUTHORIZED] = "Unauthorized", turms_status_code_a[Code.REDUNDANT_REQUEST] = "The request is redundant", turms_status_code_a[Code.ALREADY_GROUP_MEMBER] = "The user is already a member of the group", turms_status_code_a[Code.FRIEND_REQUEST_HAS_EXISTED] = "A friend request has already existed", turms_status_code_a[Code.RELATIONSHIP_HAS_ESTABLISHED] = "The relationship has already established", turms_status_code_a[Code.USER_NOT_GROUP_MEMBER] = "The user is not a member of the group", turms_status_code_a[Code.USER_HAS_BEEN_BLACKLISTED] = "The user has been blacklisted", turms_status_code_a[Code.GROUP_HAS_BEEN_MUTED] = "The group has been muted", turms_status_code_a[Code.MEMBER_HAS_BEEN_MUTED] = "The group member has been muted", turms_status_code_a[Code.GUESTS_HAVE_BEEN_MUTED] = "The guests of the group have been muted", turms_status_code_a[Code.LOGGED_DEVICES_CANNOT_OFFLINE] = "Cannot set logged in devices offline", turms_status_code_a);
  return TurmsStatusCode;
}();

/* harmony default export */ var turms_status_code = (Object.assign(TurmsStatusCode, Code));
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js
var es_regexp_to_string = __webpack_require__(125);

// CONCATENATED MODULE: ./src/model/turms-error.ts




var turms_error_TurmsError = function () {
  function TurmsError(code, reason) {
    this._code = code;
    this._reason = reason;
  }

  Object.defineProperty(TurmsError.prototype, "code", {
    get: function get() {
      return this._code;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(TurmsError.prototype, "reason", {
    get: function get() {
      return this._reason;
    },
    enumerable: true,
    configurable: true
  });

  TurmsError.prototype.toString = function () {
    return this._code + ":" + this._reason;
  };

  TurmsError.fromNotification = function (notification) {
    if (notification.code.value === turms_status_code.FAILED) {
      return new TurmsError(notification.code.value, notification.reason.value);
    } else {
      return new TurmsError(notification.code.value, turms_status_code.getReason(notification.code.value));
    }
  };

  TurmsError.fromCode = function (code) {
    return new TurmsError(code, turms_status_code.getReason(code));
  };

  TurmsError.URL_UNINITIALIZED = 'The baseUrl is uninitialized.';
  TurmsError.CLIENT_ALREADY_CONNECTED = 'The client has connected to the server. Please close it before logging in again.';
  return TurmsError;
}();

/* harmony default export */ var turms_error = (turms_error_TurmsError);
// EXTERNAL MODULE: ./src/model/proto-bundle.js
var proto_bundle = __webpack_require__(6);

// CONCATENATED MODULE: ./node_modules/unfetch/dist/unfetch.mjs
/* harmony default export */ var unfetch = (function(e,n){return n=n||{},new Promise(function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+","+t:t}),t(a())},s.onerror=r,s.withCredentials="include"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)})});
//# sourceMappingURL=unfetch.mjs.map

// EXTERNAL MODULE: ./node_modules/querystring-es3/index.js
var querystring_es3 = __webpack_require__(88);
var querystring_es3_default = /*#__PURE__*/__webpack_require__.n(querystring_es3);

// EXTERNAL MODULE: ./src/util/notification-util.ts
var notification_util = __webpack_require__(1);

// CONCATENATED MODULE: ./src/driver/turms-driver.ts



































var TurmsNotification = proto_bundle["im"].turms.proto.TurmsNotification;
var TurmsRequest = proto_bundle["im"].turms.proto.TurmsRequest;
var HEARTBEAT_INTERVAL = 20 * 1000;

var turms_driver_TurmsDriver = function () {
  function TurmsDriver(client, url, connectionTimeout, requestTimeout, minRequestsInterval, httpUrl, queryReasonWhenLoginFailed, queryReasonWhenDisconnected) {
    if (queryReasonWhenLoginFailed === void 0) {
      queryReasonWhenLoginFailed = true;
    }

    if (queryReasonWhenDisconnected === void 0) {
      queryReasonWhenDisconnected = true;
    }

    this._onNotificationListeners = [];
    this._url = 'ws://localhost:9510';
    this._httpUrl = 'http://localhost:9510';
    this._connectionTimeout = 10 * 1000;
    this._requestTimeout = 60 * 1000;
    this._minRequestsInterval = 0;
    this._requestsMap = {};
    this._lastRequestDate = new Date(0);
    this._isLastRequestHeartbeat = false;
    this._queryReasonWhenLoginFailed = true;
    this._queryReasonWhenDisconnected = true;
    this._turmsClient = client;
    if (url) this._url = url;
    if (connectionTimeout) this._connectionTimeout = connectionTimeout;
    if (requestTimeout) this._requestTimeout = requestTimeout;
    if (minRequestsInterval) this._minRequestsInterval = minRequestsInterval;
    this._heartbeatInterval = HEARTBEAT_INTERVAL;
    if (httpUrl) this._httpUrl = httpUrl;
    this._queryReasonWhenLoginFailed = queryReasonWhenLoginFailed;
    this._queryReasonWhenDisconnected = queryReasonWhenDisconnected;
  }

  Object.defineProperty(TurmsDriver.prototype, "onClose", {
    set: function set(value) {
      this._onClose = value;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(TurmsDriver.prototype, "onNotificationListeners", {
    get: function get() {
      return this._onNotificationListeners;
    },
    enumerable: true,
    configurable: true
  });

  TurmsDriver.prototype.sendHeartbeat = function () {
    var _this = this;

    return new Promise(function (resolve, reject) {
      if (_this.connected()) {
        _this._setLastRequestRecord(true, new Date());

        _this._websocket.send(new Uint8Array(0));

        resolve();
      } else {
        reject();
      }
    });
  };

  TurmsDriver.prototype.connected = function () {
    return this._websocket && this._websocket.isOpened;
  };

  TurmsDriver.prototype.disconnect = function () {
    if (this._websocket.isOpened || this._websocket.isOpening) {
      return this._websocket.close();
    } else {
      return Promise.reject();
    }
  };

  TurmsDriver.prototype.connect = function (userId, password, requestId, url, connectionTimeout, requestTimeout) {
    var _this = this;

    return new Promise(function (resolve, reject) {
      if (_this.connected()) {
        reject(turms_error.CLIENT_ALREADY_CONNECTED);
      } else {
        _this._userId = userId;
        _this._password = password;
        _this._requestId = requestId;
        _this._websocket = new src(url || _this._url, {
          createWebSocket: function createWebSocket(serverUrl) {
            var ws = new WebSocket(serverUrl);
            ws.binaryType = "arraybuffer";
            return ws;
          },
          attachRequestId: function attachRequestId(data) {
            return data;
          },
          packMessage: function packMessage(data) {
            return data;
          },
          unpackMessage: function unpackMessage(data) {
            return TurmsNotification.decode(new Uint8Array(data));
          },
          connectionTimeout: connectionTimeout || _this._connectionTimeout,
          timeout: requestTimeout || _this._requestTimeout,
          extractRequestId: function extractRequestId(notification) {
            if (!notification.relayedRequest && notification.requestId) {
              return notification.requestId.value;
            }
          }
        });

        _this._websocket.onUnpackedMessage.addListener(function (notification) {
          if (notification && notification.data && notification.data.session) {
            _this._sessionId = notification.data.session.sessionId;
            _this._address = notification.data.session.address;
          }

          var parsedNotification = notification_util["a" /* default */].transform(notification);

          for (var _i = 0, _a = _this._onNotificationListeners; _i < _a.length; _i++) {
            var listener = _a[_i];

            try {
              listener(parsedNotification);
            } catch (e) {
              console.error(e);
            }
          }
        });

        var causedByError_1 = false;

        _this._websocket.onClose.addListener(function () {
          if (!causedByError_1) {
            _this._onWebsocketClose().then(function () {
              return resolve();
            }).catch(function (error) {
              return reject(error);
            });
          }
        });

        _this._websocket.onError.addListener(function (error) {
          causedByError_1 = true;

          _this._onWebsocketError(error).then(function () {
            return resolve();
          }).catch(function (error) {
            return reject(error);
          });
        });

        _this._websocket.open().then(function () {
          _this._onWebsocketOpen();

          resolve();
        }).catch(function (error) {
          return reject(error);
        });
      }
    });
  };

  TurmsDriver.prototype.resetHeartBeatTimer = function () {
    if (this._heartbeatTimer) {
      this._heartbeatTimer.reset(this._heartbeatInterval);
    }
  };

  TurmsDriver.prototype.send = function (message) {
    var _this = this;

    if (this.connected()) {
      var now = new Date();

      if (!this._minRequestsInterval || now.getTime() - this._lastRequestDate.getTime() > this._minRequestsInterval) {
        this._setLastRequestRecord(false, now);

        var requestId = this._generateRandomId();

        message.requestId = {
          value: '' + requestId
        };
        var data = TurmsRequest.encode(message).finish();
        this.resetHeartBeatTimer();
        return this._websocket.sendRequest(data, {
          requestId: requestId
        }).then(function (notification) {
          if (notification.code && turms_status_code.isErrorCode(notification.code.value)) {
            throw turms_error.fromNotification(notification);
          } else {
            return notification;
          }
        });
      } else if (this._isLastRequestHeartbeat) {
        return new Promise(function (resolve, reject) {
          setTimeout(function () {
            _this.send(message).then(function (response) {
              return resolve(response);
            }).catch(function (error) {
              return reject(error);
            });
          }, _this._minRequestsInterval);
        });
      } else {
        return Promise.reject("Request is too frequent");
      }
    } else {
      return Promise.reject("The WebSocket is closed");
    }
  };

  TurmsDriver.prototype._setLastRequestRecord = function (isLastRequestHeartbeat, lastRequestDate) {
    this._isLastRequestHeartbeat = isLastRequestHeartbeat;
    this._lastRequestDate = lastRequestDate;
  };

  TurmsDriver.prototype._generateRandomId = function () {
    var id;

    do {
      id = Math.floor(Math.random() * 9007199254740991);
    } while (Object.prototype.hasOwnProperty.call(this._requestsMap, id));

    this._requestsMap[id] = true;
    return id;
  };

  TurmsDriver.prototype._onWebsocketOpen = function () {
    var _this = this;

    if (this._heartbeatTimer && this._heartbeatTimer.isRunning) {
      this._heartbeatTimer.reset(this._heartbeatInterval);
    } else {
      this._heartbeatTimer = new timer(function () {
        var difference = new Date().getTime() - _this._lastRequestDate.getTime();

        if (difference > _this._minRequestsInterval) {
          return _this.sendHeartbeat();
        } else {
          return Promise.reject();
        }
      }, this._heartbeatInterval);

      this._heartbeatTimer.start();
    }
  };

  TurmsDriver.prototype._onWebsocketClose = function () {
    var _this = this;

    var wasLogged = !!(this._heartbeatTimer && this._heartbeatTimer.isRunning);

    if (this._heartbeatTimer && this._heartbeatTimer.isRunning) {
      this._heartbeatTimer.stop();
    }

    if (this._onClose) {
      if (this._queryReasonWhenDisconnected && this._userId && this._sessionId) {
        var params = querystring_es3_default.a.stringify({
          userId: this._userId,
          sessionId: this._sessionId
        });
        return unfetch(this._httpUrl + "/reasons/disconnection?" + params).then(function (response) {
          return response.text().then(function (text) {
            _this._onClose(wasLogged, null, text ? turms_error.fromCode(parseInt(text)) : null);
          });
        });
      } else {
        this._onClose(wasLogged);
      }
    }

    return Promise.resolve();
  };

  TurmsDriver.prototype._onWebsocketError = function (error) {
    var _this = this;

    var wasLogged = !!(this._heartbeatTimer && this._heartbeatTimer.isRunning);

    if (this._heartbeatTimer && this._heartbeatTimer.isRunning) {
      this._heartbeatTimer.stop();
    }

    if (!wasLogged && this._queryReasonWhenLoginFailed && this._userId && this._requestId) {
      var params = querystring_es3_default.a.stringify({
        userId: this._userId,
        requestId: this._requestId
      });
      return unfetch(this._httpUrl + "/reasons/login-failed?" + params).then(function (response) {
        if (response.status === 307) {
          return _this._turmsClient.userService.relogin();
        } else {
          return response.text().then(function (text) {
            _this._onClose(wasLogged, error, new turms_error(3000, text));
          });
        }
      });
    } else {
      this._onClose(wasLogged, error);
    }

    return Promise.resolve();
  };

  return TurmsDriver;
}();

/* harmony default export */ var turms_driver = __webpack_exports__["a"] = (turms_driver_TurmsDriver);

/***/ }),
/* 138 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js
var es_array_includes = __webpack_require__(214);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js
var es_array_iterator = __webpack_require__(18);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var es_object_to_string = __webpack_require__(24);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.js
var es_promise = __webpack_require__(35);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js
var es_regexp_exec = __webpack_require__(215);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.includes.js
var es_string_includes = __webpack_require__(218);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-array.js
var es_typed_array_uint8_array = __webpack_require__(62);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.copy-within.js
var es_typed_array_copy_within = __webpack_require__(63);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.every.js
var es_typed_array_every = __webpack_require__(64);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.fill.js
var es_typed_array_fill = __webpack_require__(65);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.filter.js
var es_typed_array_filter = __webpack_require__(66);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find.js
var es_typed_array_find = __webpack_require__(67);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-index.js
var es_typed_array_find_index = __webpack_require__(68);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.for-each.js
var es_typed_array_for_each = __webpack_require__(69);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.includes.js
var es_typed_array_includes = __webpack_require__(70);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.index-of.js
var es_typed_array_index_of = __webpack_require__(71);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.iterator.js
var es_typed_array_iterator = __webpack_require__(72);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.join.js
var es_typed_array_join = __webpack_require__(73);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.last-index-of.js
var es_typed_array_last_index_of = __webpack_require__(74);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.map.js
var es_typed_array_map = __webpack_require__(76);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce.js
var es_typed_array_reduce = __webpack_require__(77);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce-right.js
var es_typed_array_reduce_right = __webpack_require__(78);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reverse.js
var es_typed_array_reverse = __webpack_require__(79);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.set.js
var es_typed_array_set = __webpack_require__(80);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.slice.js
var es_typed_array_slice = __webpack_require__(81);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.some.js
var es_typed_array_some = __webpack_require__(82);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.sort.js
var es_typed_array_sort = __webpack_require__(83);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.subarray.js
var es_typed_array_subarray = __webpack_require__(84);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-locale-string.js
var es_typed_array_to_locale_string = __webpack_require__(85);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-string.js
var es_typed_array_to_string = __webpack_require__(86);

// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js
var web_dom_collections_iterator = __webpack_require__(51);

// EXTERNAL MODULE: ./src/model/proto-bundle.js
var proto_bundle = __webpack_require__(6);

// EXTERNAL MODULE: ./src/util/constant-transformer.ts
var constant_transformer = __webpack_require__(11);

// EXTERNAL MODULE: ./src/util/request-util.ts
var request_util = __webpack_require__(0);

// EXTERNAL MODULE: ./src/util/notification-util.ts
var notification_util = __webpack_require__(1);

// CONCATENATED MODULE: ./src/model/message-addition.ts
var MessageAddition = function () {
  function MessageAddition(isMentioned, mentionedUserIds) {
    this.isMentioned = isMentioned;
    this.mentionedUserIds = mentionedUserIds;
  }

  return MessageAddition;
}();

/* harmony default export */ var message_addition = (MessageAddition);
// CONCATENATED MODULE: ./src/service/message-service.ts




































var File = proto_bundle["im"].turms.proto.File;
var AudioFile = proto_bundle["im"].turms.proto.AudioFile;
var VideoFile = proto_bundle["im"].turms.proto.VideoFile;
var ImageFile = proto_bundle["im"].turms.proto.ImageFile;
var Location = proto_bundle["im"].turms.proto.UserLocation;

var message_service_MessageService = function () {
  function MessageService(turmsClient) {
    var _this = this;

    this._turmsClient = turmsClient;

    this._turmsClient.driver.onNotificationListeners.push(function (notification) {
      if (_this._onMessage != null && notification.data) {
        var data = notification.data;

        if (data.messages) {
          for (var _i = 0, _a = data.messages.messages; _i < _a.length; _i++) {
            var message = _a[_i];

            var addition = _this.parseMessageAddition(message);

            _this._onMessage(message, addition);
          }
        }
      }

      return null;
    });
  }

  Object.defineProperty(MessageService.prototype, "onMessage", {
    get: function get() {
      return this._onMessage;
    },
    set: function set(value) {
      this._onMessage = value;
    },
    enumerable: true,
    configurable: true
  });

  MessageService.prototype.sendMessage = function (chatType, toId, deliveryDate, text, records, burnAfter) {
    request_util["a" /* default */].throwIfAnyFalsy(chatType, toId, deliveryDate);
    request_util["a" /* default */].throwIfAllFalsy(text, records);

    if (typeof chatType === "string") {
      chatType = constant_transformer["a" /* default */].string2ChatType(chatType);
    }

    return this._turmsClient.driver.send({
      createMessageRequest: {
        chatType: chatType,
        toId: toId,
        deliveryDate: '' + deliveryDate.getTime(),
        text: request_util["a" /* default */].wrapValueIfNotNull(text),
        records: records,
        burnAfter: request_util["a" /* default */].wrapValueIfNotNull(burnAfter)
      }
    }).then(function (notification) {
      return notification.data.ids.values[0];
    });
  };

  MessageService.prototype.forwardMessage = function (messageId, chatType, toId) {
    request_util["a" /* default */].throwIfAnyFalsy(messageId, chatType, toId);

    if (typeof chatType === "string") {
      chatType = constant_transformer["a" /* default */].string2ChatType(chatType);
    }

    return this._turmsClient.driver.send({
      createMessageRequest: {
        messageId: {
          value: messageId
        },
        chatType: chatType,
        toId: toId
      }
    }).then(function (notification) {
      return notification.data.ids.values[0];
    });
  };

  MessageService.prototype.updateSentMessage = function (messageId, text, records) {
    request_util["a" /* default */].throwIfAnyFalsy(messageId);

    if (request_util["a" /* default */].areAllFalsy(text, records)) {
      return Promise.resolve();
    }

    return this._turmsClient.driver.send({
      updateMessageRequest: {
        messageId: messageId,
        text: request_util["a" /* default */].wrapValueIfNotNull(text),
        records: records
      }
    }).then();
  };

  MessageService.prototype.queryMessages = function (ids, chatType, areSystemMessages, fromId, deliveryDateAfter, deliveryDateBefore, deliveryStatus, size) {
    if (size === void 0) {
      size = 50;
    }

    if (typeof chatType === 'string') {
      chatType = constant_transformer["a" /* default */].string2ChatType(chatType);
    }

    if (typeof deliveryStatus === 'string') {
      deliveryStatus = constant_transformer["a" /* default */].string2DeliveryStatus(deliveryStatus);
    }

    return this._turmsClient.driver.send({
      queryMessagesRequest: {
        ids: request_util["a" /* default */].wrapValueIfNotNull(ids),
        chatType: chatType,
        areSystemMessages: request_util["a" /* default */].wrapValueIfNotNull(areSystemMessages),
        fromId: request_util["a" /* default */].wrapValueIfNotNull(fromId),
        deliveryDateAfter: request_util["a" /* default */].wrapTimeIfNotNull(deliveryDateAfter),
        deliveryDateBefore: request_util["a" /* default */].wrapTimeIfNotNull(deliveryDateBefore),
        size: request_util["a" /* default */].wrapValueIfNotNull(size),
        deliveryStatus: deliveryStatus
      }
    }).then(function (notification) {
      return notification_util["a" /* default */].getFirstArrayAndTransform(notification.data.messages);
    });
  };

  MessageService.prototype.queryPendingMessagesWithTotal = function (size) {
    if (size === void 0) {
      size = 1;
    }

    return this._turmsClient.driver.send({
      queryPendingMessagesWithTotalRequest: {
        size: request_util["a" /* default */].wrapValueIfNotNull(size)
      }
    }).then(function (notification) {
      return notification_util["a" /* default */].getFirstArrayAndTransform(notification.data.messagesWithTotalList);
    });
  };

  MessageService.prototype.queryMessageStatus = function (messageId) {
    request_util["a" /* default */].throwIfAnyFalsy(messageId);
    return this._turmsClient.driver.send({
      queryMessageStatusesRequest: {
        messageId: messageId
      }
    }).then(function (notification) {
      return notification_util["a" /* default */].transform(notification.data.messageStatuses);
    });
  };

  MessageService.prototype.recallMessage = function (messageId, recallDate) {
    if (recallDate === void 0) {
      recallDate = new Date();
    }

    request_util["a" /* default */].throwIfAnyFalsy(messageId, recallDate);
    return this._turmsClient.driver.send({
      updateMessageRequest: {
        messageId: messageId,
        recallDate: request_util["a" /* default */].wrapTimeIfNotNull(recallDate)
      }
    }).then();
  };

  MessageService.prototype.readMessage = function (messageId, readDate) {
    if (readDate === void 0) {
      readDate = new Date();
    }

    request_util["a" /* default */].throwIfAnyFalsy(messageId, readDate);
    return this._turmsClient.driver.send({
      updateMessageRequest: {
        messageId: messageId,
        readDate: request_util["a" /* default */].wrapTimeIfNotNull(readDate)
      }
    }).then();
  };

  MessageService.prototype.markMessageUnread = function (messageId) {
    return this.readMessage(messageId, new Date(0));
  };

  MessageService.prototype.updateTypingStatusRequest = function (chatType, toId) {
    request_util["a" /* default */].throwIfAnyFalsy(chatType, toId);

    if (typeof chatType === 'string') {
      chatType = constant_transformer["a" /* default */].string2ChatType(chatType);
    }

    return this._turmsClient.driver.send({
      updateTypingStatusRequest: {
        chatType: chatType,
        toId: toId
      }
    }).then();
  };

  MessageService.prototype.isMentionEnabled = function () {
    return this._mentionedUserIdsParser != null;
  };

  MessageService.prototype.enableMention = function (mentionedUserIdsParser) {
    if (mentionedUserIdsParser) {
      this._mentionedUserIdsParser = mentionedUserIdsParser;
    } else if (!this._mentionedUserIdsParser) {
      this._mentionedUserIdsParser = MessageService.DEFAULT_MENTIONED_USER_IDS_PARSER;
    }
  };

  MessageService.generateLocationRecord = function (latitude, longitude, locationName, address) {
    request_util["a" /* default */].throwIfAnyFalsy(latitude, longitude);
    return Location.encode({
      latitude: latitude,
      longitude: longitude,
      address: request_util["a" /* default */].wrapValueIfNotNull(address),
      name: request_util["a" /* default */].wrapValueIfNotNull(name)
    }).finish();
  };

  MessageService.generateAudioRecordByDescription = function (url, duration, format, size) {
    request_util["a" /* default */].throwIfAnyFalsy(url);
    return AudioFile.encode({
      description: {
        url: url,
        duration: request_util["a" /* default */].wrapValueIfNotNull(duration),
        format: request_util["a" /* default */].wrapValueIfNotNull(format),
        size: request_util["a" /* default */].wrapValueIfNotNull(size)
      }
    }).finish();
  };

  MessageService.generateAudioRecordByData = function (data) {
    request_util["a" /* default */].throwIfAnyFalsy(data);
    return AudioFile.encode({
      data: {
        value: new Uint8Array(data)
      }
    }).finish();
  };

  MessageService.generateVideoRecordByDescription = function (url, duration, format, size) {
    request_util["a" /* default */].throwIfAnyFalsy(url);
    return VideoFile.encode({
      description: {
        url: url,
        duration: request_util["a" /* default */].wrapValueIfNotNull(duration),
        format: request_util["a" /* default */].wrapValueIfNotNull(format),
        size: request_util["a" /* default */].wrapValueIfNotNull(size)
      }
    }).finish();
  };

  MessageService.generateVideoRecordByData = function (data) {
    request_util["a" /* default */].throwIfAnyFalsy(data);
    return VideoFile.encode({
      data: {
        value: new Uint8Array(data)
      }
    }).finish();
  };

  MessageService.generateImageRecordByData = function (data) {
    request_util["a" /* default */].throwIfAnyFalsy(data);
    return ImageFile.encode({
      data: {
        value: new Uint8Array(data)
      }
    }).finish();
  };

  MessageService.generateImageRecordByDescription = function (url, fileSize, imageSize, original) {
    request_util["a" /* default */].throwIfAnyFalsy(url);
    return ImageFile.encode({
      description: {
        url: url,
        fileSize: request_util["a" /* default */].wrapValueIfNotNull(fileSize),
        imageSize: request_util["a" /* default */].wrapValueIfNotNull(imageSize),
        original: request_util["a" /* default */].wrapValueIfNotNull(original)
      }
    }).finish();
  };

  MessageService.generateFileRecordByDate = function (data) {
    request_util["a" /* default */].throwIfAnyFalsy(data);
    return File.encode({
      data: {
        value: new Uint8Array(data)
      }
    }).finish();
  };

  MessageService.generateFileRecordByDescription = function (url, format, size) {
    request_util["a" /* default */].throwIfAnyFalsy(url);
    return File.encode({
      description: {
        url: url,
        format: request_util["a" /* default */].wrapValueIfNotNull(format),
        size: request_util["a" /* default */].wrapValueIfNotNull(size)
      }
    }).finish();
  };

  MessageService.prototype.parseMessageAddition = function (message) {
    var mentionedUserIds;

    if (this._mentionedUserIdsParser) {
      mentionedUserIds = this._mentionedUserIdsParser(message);
    } else {
      mentionedUserIds = [];
    }

    var isMentioned = mentionedUserIds.includes(this._turmsClient.userService.userId);
    return new message_addition(isMentioned, mentionedUserIds);
  };

  MessageService.DEFAULT_MENTIONED_USER_IDS_PARSER = function (message) {
    var regex = /@{(\d+?)}/g;

    if (message.text) {
      var userIds = [];
      var matches = void 0;

      while (!!(matches = regex.exec(message.text))) {
        userIds.push(matches[1]);
      }

      return userIds;
    }

    return [];
  };

  return MessageService;
}();

/* harmony default export */ var message_service = __webpack_exports__["a"] = (message_service_MessageService);

/***/ }),
/* 139 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var _driver_turms_driver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(137);
/* harmony import */ var _service_user_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(133);
/* harmony import */ var _service_group_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(134);
/* harmony import */ var _service_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(138);
/* harmony import */ var _service_notification_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(135);
/* harmony import */ var _util_input_file_reader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(136);







var TurmsClient = function () {
  function TurmsClient(url, connectionTimeout, requestTimeout, minRequestsInterval, httpUrl, queryReasonWhenLoginFailed, queryReasonWhenDisconnected) {
    this._driver = new _driver_turms_driver__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"](this, url, connectionTimeout, requestTimeout, minRequestsInterval, httpUrl, queryReasonWhenLoginFailed, queryReasonWhenDisconnected);
    this._userService = new _service_user_service__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"](this);
    this._groupService = new _service_group_service__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"](this);
    this._messageService = new _service_message_service__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"](this);
    this._notificationService = new _service_notification_service__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"](this);
  }

  Object.defineProperty(TurmsClient.prototype, "driver", {
    get: function get() {
      return this._driver;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(TurmsClient.prototype, "userService", {
    get: function get() {
      return this._userService;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(TurmsClient.prototype, "groupService", {
    get: function get() {
      return this._groupService;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(TurmsClient.prototype, "messageService", {
    get: function get() {
      return this._messageService;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(TurmsClient.prototype, "notificationService", {
    get: function get() {
      return this._notificationService;
    },
    enumerable: true,
    configurable: true
  });

  TurmsClient.InputFileReader = function () {
    return _util_input_file_reader__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"];
  };

  return TurmsClient;
}();

var root = window || global;

if (root) {
  Object.defineProperty(root, 'TurmsClient', {
    configurable: false,
    writable: false,
    enumerable: false,
    value: TurmsClient
  });
} else {
  console.error('Make sure to run turms-client in either browser or nodejs');
}

/* harmony default export */ __webpack_exports__["default"] = (TurmsClient);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(38)))

/***/ }),
/* 140 */
/***/ (function(module, exports, __webpack_require__) {

var DESCRIPTORS = __webpack_require__(10);
var definePropertyModule = __webpack_require__(12);
var anObject = __webpack_require__(13);
var objectKeys = __webpack_require__(43);

// `Object.defineProperties` method
// https://tc39.github.io/ecma262/#sec-object.defineproperties
module.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var keys = objectKeys(Properties);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);
  return O;
};


/***/ }),
/* 141 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var inspectSource = __webpack_require__(57);

var WeakMap = global.WeakMap;

module.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));


/***/ }),
/* 142 */
/***/ (function(module, exports, __webpack_require__) {

var getBuiltIn = __webpack_require__(27);
var getOwnPropertyNamesModule = __webpack_require__(32);
var getOwnPropertySymbolsModule = __webpack_require__(59);
var anObject = __webpack_require__(13);

// all object keys, includes non-enumerable and symbols
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
  var keys = getOwnPropertyNamesModule.f(anObject(it));
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;
};


/***/ }),
/* 143 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IteratorPrototype = __webpack_require__(99).IteratorPrototype;
var create = __webpack_require__(42);
var createPropertyDescriptor = __webpack_require__(30);
var setToStringTag = __webpack_require__(33);
var Iterators = __webpack_require__(31);

var returnThis = function () { return this; };

module.exports = function (IteratorConstructor, NAME, next) {
  var TO_STRING_TAG = NAME + ' Iterator';
  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });
  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
  Iterators[TO_STRING_TAG] = returnThis;
  return IteratorConstructor;
};


/***/ }),
/* 144 */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(4);

module.exports = !fails(function () {
  function F() { /* empty */ }
  F.prototype.constructor = null;
  return Object.getPrototypeOf(new F()) !== F.prototype;
});


/***/ }),
/* 145 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(8);

module.exports = function (it) {
  if (!isObject(it) && it !== null) {
    throw TypeError("Can't set " + String(it) + ' as a prototype');
  } return it;
};


/***/ }),
/* 146 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var TO_STRING_TAG_SUPPORT = __webpack_require__(60);
var classof = __webpack_require__(49);

// `Object.prototype.toString` method implementation
// https://tc39.github.io/ecma262/#sec-object.prototype.tostring
module.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
  return '[object ' + classof(this) + ']';
};


/***/ }),
/* 147 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);

module.exports = global.Promise;


/***/ }),
/* 148 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(13);
var isArrayIteratorMethod = __webpack_require__(102);
var toLength = __webpack_require__(9);
var bind = __webpack_require__(50);
var getIteratorMethod = __webpack_require__(103);
var callWithSafeIterationClosing = __webpack_require__(149);

var Result = function (stopped, result) {
  this.stopped = stopped;
  this.result = result;
};

var iterate = module.exports = function (iterable, fn, that, AS_ENTRIES, IS_ITERATOR) {
  var boundFunction = bind(fn, that, AS_ENTRIES ? 2 : 1);
  var iterator, iterFn, index, length, result, next, step;

  if (IS_ITERATOR) {
    iterator = iterable;
  } else {
    iterFn = getIteratorMethod(iterable);
    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');
    // optimisation for array iterators
    if (isArrayIteratorMethod(iterFn)) {
      for (index = 0, length = toLength(iterable.length); length > index; index++) {
        result = AS_ENTRIES
          ? boundFunction(anObject(step = iterable[index])[0], step[1])
          : boundFunction(iterable[index]);
        if (result && result instanceof Result) return result;
      } return new Result(false);
    }
    iterator = iterFn.call(iterable);
  }

  next = iterator.next;
  while (!(step = next.call(iterator)).done) {
    result = callWithSafeIterationClosing(iterator, boundFunction, step.value, AS_ENTRIES);
    if (typeof result == 'object' && result && result instanceof Result) return result;
  } return new Result(false);
};

iterate.stop = function (result) {
  return new Result(true, result);
};


/***/ }),
/* 149 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(13);

// call something on iterator step with safe closing on error
module.exports = function (iterator, fn, value, ENTRIES) {
  try {
    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);
  // 7.4.6 IteratorClose(iterator, completion)
  } catch (error) {
    var returnMethod = iterator['return'];
    if (returnMethod !== undefined) anObject(returnMethod.call(iterator));
    throw error;
  }
};


/***/ }),
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);
var getOwnPropertyDescriptor = __webpack_require__(28).f;
var classof = __webpack_require__(21);
var macrotask = __webpack_require__(105).set;
var IS_IOS = __webpack_require__(106);

var MutationObserver = global.MutationObserver || global.WebKitMutationObserver;
var process = global.process;
var Promise = global.Promise;
var IS_NODE = classof(process) == 'process';
// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`
var queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');
var queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;

var flush, head, last, notify, toggle, node, promise, then;

// modern engines have queueMicrotask method
if (!queueMicrotask) {
  flush = function () {
    var parent, fn;
    if (IS_NODE && (parent = process.domain)) parent.exit();
    while (head) {
      fn = head.fn;
      head = head.next;
      try {
        fn();
      } catch (error) {
        if (head) notify();
        else last = undefined;
        throw error;
      }
    } last = undefined;
    if (parent) parent.enter();
  };

  // Node.js
  if (IS_NODE) {
    notify = function () {
      process.nextTick(flush);
    };
  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339
  } else if (MutationObserver && !IS_IOS) {
    toggle = true;
    node = document.createTextNode('');
    new MutationObserver(flush).observe(node, { characterData: true });
    notify = function () {
      node.data = toggle = !toggle;
    };
  // environments with maybe non-completely correct, but existent Promise
  } else if (Promise && Promise.resolve) {
    // Promise.resolve without an argument throws an error in LG WebOS 2
    promise = Promise.resolve(undefined);
    then = promise.then;
    notify = function () {
      then.call(promise, flush);
    };
  // for other environments - macrotask based on:
  // - setImmediate
  // - MessageChannel
  // - window.postMessag
  // - onreadystatechange
  // - setTimeout
  } else {
    notify = function () {
      // strange IE + webpack dev server bug - use .call(global)
      macrotask.call(global, flush);
    };
  }
}

module.exports = queueMicrotask || function (fn) {
  var task = { fn: fn, next: undefined };
  if (last) last.next = task;
  if (!head) {
    head = task;
    notify();
  } last = task;
};


/***/ }),
/* 151 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(13);
var isObject = __webpack_require__(8);
var newPromiseCapability = __webpack_require__(108);

module.exports = function (C, x) {
  anObject(C);
  if (isObject(x) && x.constructor === C) return x;
  var promiseCapability = newPromiseCapability.f(C);
  var resolve = promiseCapability.resolve;
  resolve(x);
  return promiseCapability.promise;
};


/***/ }),
/* 152 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(2);

module.exports = function (a, b) {
  var console = global.console;
  if (console && console.error) {
    arguments.length === 1 ? console.error(a) : console.error(a, b);
  }
};


/***/ }),
/* 153 */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return { error: false, value: exec() };
  } catch (error) {
    return { error: true, value: error };
  }
};


/***/ }),
/* 154 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(14);
var global = __webpack_require__(2);
var DESCRIPTORS = __webpack_require__(10);
var TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = __webpack_require__(155);
var ArrayBufferViewCore = __webpack_require__(3);
var ArrayBufferModule = __webpack_require__(156);
var anInstance = __webpack_require__(61);
var createPropertyDescriptor = __webpack_require__(30);
var createNonEnumerableProperty = __webpack_require__(15);
var toLength = __webpack_require__(9);
var toIndex = __webpack_require__(111);
var toOffset = __webpack_require__(113);
var toPrimitive = __webpack_require__(40);
var has = __webpack_require__(7);
var classof = __webpack_require__(49);
var isObject = __webpack_require__(8);
var create = __webpack_require__(42);
var setPrototypeOf = __webpack_require__(34);
var getOwnPropertyNames = __webpack_require__(32).f;
var typedArrayFrom = __webpack_require__(159);
var forEach = __webpack_require__(17).forEach;
var setSpecies = __webpack_require__(101);
var definePropertyModule = __webpack_require__(12);
var getOwnPropertyDescriptorModule = __webpack_require__(28);
var InternalStateModule = __webpack_require__(23);
var inheritIfRequired = __webpack_require__(161);

var getInternalState = InternalStateModule.get;
var setInternalState = InternalStateModule.set;
var nativeDefineProperty = definePropertyModule.f;
var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
var round = Math.round;
var RangeError = global.RangeError;
var ArrayBuffer = ArrayBufferModule.ArrayBuffer;
var DataView = ArrayBufferModule.DataView;
var NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;
var TYPED_ARRAY_TAG = ArrayBufferViewCore.TYPED_ARRAY_TAG;
var TypedArray = ArrayBufferViewCore.TypedArray;
var TypedArrayPrototype = ArrayBufferViewCore.TypedArrayPrototype;
var aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;
var isTypedArray = ArrayBufferViewCore.isTypedArray;
var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';
var WRONG_LENGTH = 'Wrong length';

var fromList = function (C, list) {
  var index = 0;
  var length = list.length;
  var result = new (aTypedArrayConstructor(C))(length);
  while (length > index) result[index] = list[index++];
  return result;
};

var addGetter = function (it, key) {
  nativeDefineProperty(it, key, { get: function () {
    return getInternalState(this)[key];
  } });
};

var isArrayBuffer = function (it) {
  var klass;
  return it instanceof ArrayBuffer || (klass = classof(it)) == 'ArrayBuffer' || klass == 'SharedArrayBuffer';
};

var isTypedArrayIndex = function (target, key) {
  return isTypedArray(target)
    && typeof key != 'symbol'
    && key in target
    && String(+key) == String(key);
};

var wrappedGetOwnPropertyDescriptor = function getOwnPropertyDescriptor(target, key) {
  return isTypedArrayIndex(target, key = toPrimitive(key, true))
    ? createPropertyDescriptor(2, target[key])
    : nativeGetOwnPropertyDescriptor(target, key);
};

var wrappedDefineProperty = function defineProperty(target, key, descriptor) {
  if (isTypedArrayIndex(target, key = toPrimitive(key, true))
    && isObject(descriptor)
    && has(descriptor, 'value')
    && !has(descriptor, 'get')
    && !has(descriptor, 'set')
    // TODO: add validation descriptor w/o calling accessors
    && !descriptor.configurable
    && (!has(descriptor, 'writable') || descriptor.writable)
    && (!has(descriptor, 'enumerable') || descriptor.enumerable)
  ) {
    target[key] = descriptor.value;
    return target;
  } return nativeDefineProperty(target, key, descriptor);
};

if (DESCRIPTORS) {
  if (!NATIVE_ARRAY_BUFFER_VIEWS) {
    getOwnPropertyDescriptorModule.f = wrappedGetOwnPropertyDescriptor;
    definePropertyModule.f = wrappedDefineProperty;
    addGetter(TypedArrayPrototype, 'buffer');
    addGetter(TypedArrayPrototype, 'byteOffset');
    addGetter(TypedArrayPrototype, 'byteLength');
    addGetter(TypedArrayPrototype, 'length');
  }

  $({ target: 'Object', stat: true, forced: !NATIVE_ARRAY_BUFFER_VIEWS }, {
    getOwnPropertyDescriptor: wrappedGetOwnPropertyDescriptor,
    defineProperty: wrappedDefineProperty
  });

  module.exports = function (TYPE, wrapper, CLAMPED) {
    var BYTES = TYPE.match(/\d+$/)[0] / 8;
    var CONSTRUCTOR_NAME = TYPE + (CLAMPED ? 'Clamped' : '') + 'Array';
    var GETTER = 'get' + TYPE;
    var SETTER = 'set' + TYPE;
    var NativeTypedArrayConstructor = global[CONSTRUCTOR_NAME];
    var TypedArrayConstructor = NativeTypedArrayConstructor;
    var TypedArrayConstructorPrototype = TypedArrayConstructor && TypedArrayConstructor.prototype;
    var exported = {};

    var getter = function (that, index) {
      var data = getInternalState(that);
      return data.view[GETTER](index * BYTES + data.byteOffset, true);
    };

    var setter = function (that, index, value) {
      var data = getInternalState(that);
      if (CLAMPED) value = (value = round(value)) < 0 ? 0 : value > 0xFF ? 0xFF : value & 0xFF;
      data.view[SETTER](index * BYTES + data.byteOffset, value, true);
    };

    var addElement = function (that, index) {
      nativeDefineProperty(that, index, {
        get: function () {
          return getter(this, index);
        },
        set: function (value) {
          return setter(this, index, value);
        },
        enumerable: true
      });
    };

    if (!NATIVE_ARRAY_BUFFER_VIEWS) {
      TypedArrayConstructor = wrapper(function (that, data, offset, $length) {
        anInstance(that, TypedArrayConstructor, CONSTRUCTOR_NAME);
        var index = 0;
        var byteOffset = 0;
        var buffer, byteLength, length;
        if (!isObject(data)) {
          length = toIndex(data);
          byteLength = length * BYTES;
          buffer = new ArrayBuffer(byteLength);
        } else if (isArrayBuffer(data)) {
          buffer = data;
          byteOffset = toOffset(offset, BYTES);
          var $len = data.byteLength;
          if ($length === undefined) {
            if ($len % BYTES) throw RangeError(WRONG_LENGTH);
            byteLength = $len - byteOffset;
            if (byteLength < 0) throw RangeError(WRONG_LENGTH);
          } else {
            byteLength = toLength($length) * BYTES;
            if (byteLength + byteOffset > $len) throw RangeError(WRONG_LENGTH);
          }
          length = byteLength / BYTES;
        } else if (isTypedArray(data)) {
          return fromList(TypedArrayConstructor, data);
        } else {
          return typedArrayFrom.call(TypedArrayConstructor, data);
        }
        setInternalState(that, {
          buffer: buffer,
          byteOffset: byteOffset,
          byteLength: byteLength,
          length: length,
          view: new DataView(buffer)
        });
        while (index < length) addElement(that, index++);
      });

      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);
      TypedArrayConstructorPrototype = TypedArrayConstructor.prototype = create(TypedArrayPrototype);
    } else if (TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS) {
      TypedArrayConstructor = wrapper(function (dummy, data, typedArrayOffset, $length) {
        anInstance(dummy, TypedArrayConstructor, CONSTRUCTOR_NAME);
        return inheritIfRequired(function () {
          if (!isObject(data)) return new NativeTypedArrayConstructor(toIndex(data));
          if (isArrayBuffer(data)) return $length !== undefined
            ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES), $length)
            : typedArrayOffset !== undefined
              ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES))
              : new NativeTypedArrayConstructor(data);
          if (isTypedArray(data)) return fromList(TypedArrayConstructor, data);
          return typedArrayFrom.call(TypedArrayConstructor, data);
        }(), dummy, TypedArrayConstructor);
      });

      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);
      forEach(getOwnPropertyNames(NativeTypedArrayConstructor), function (key) {
        if (!(key in TypedArrayConstructor)) {
          createNonEnumerableProperty(TypedArrayConstructor, key, NativeTypedArrayConstructor[key]);
        }
      });
      TypedArrayConstructor.prototype = TypedArrayConstructorPrototype;
    }

    if (TypedArrayConstructorPrototype.constructor !== TypedArrayConstructor) {
      createNonEnumerableProperty(TypedArrayConstructorPrototype, 'constructor', TypedArrayConstructor);
    }

    if (TYPED_ARRAY_TAG) {
      createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_TAG, CONSTRUCTOR_NAME);
    }

    exported[CONSTRUCTOR_NAME] = TypedArrayConstructor;

    $({
      global: true, forced: TypedArrayConstructor != NativeTypedArrayConstructor, sham: !NATIVE_ARRAY_BUFFER_VIEWS
    }, exported);

    if (!(BYTES_PER_ELEMENT in TypedArrayConstructor)) {
      createNonEnumerableProperty(TypedArrayConstructor, BYTES_PER_ELEMENT, BYTES);
    }

    if (!(BYTES_PER_ELEMENT in TypedArrayConstructorPrototype)) {
      createNonEnumerableProperty(TypedArrayConstructorPrototype, BYTES_PER_ELEMENT, BYTES);
    }

    setSpecies(CONSTRUCTOR_NAME);
  };
} else module.exports = function () { /* empty */ };


/***/ }),
/* 155 */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable no-new */
var global = __webpack_require__(2);
var fails = __webpack_require__(4);
var checkCorrectnessOfIteration = __webpack_require__(104);
var NATIVE_ARRAY_BUFFER_VIEWS = __webpack_require__(3).NATIVE_ARRAY_BUFFER_VIEWS;

var ArrayBuffer = global.ArrayBuffer;
var Int8Array = global.Int8Array;

module.exports = !NATIVE_ARRAY_BUFFER_VIEWS || !fails(function () {
  Int8Array(1);
}) || !fails(function () {
  new Int8Array(-1);
}) || !checkCorrectnessOfIteration(function (iterable) {
  new Int8Array();
  new Int8Array(null);
  new Int8Array(1.5);
  new Int8Array(iterable);
}, true) || fails(function () {
  // Safari (11+) bug - a reason why even Safari 13 should load a typed array polyfill
  return new Int8Array(new ArrayBuffer(2), 1, undefined).length !== 1;
});


/***/ }),
/* 156 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(2);
var DESCRIPTORS = __webpack_require__(10);
var NATIVE_ARRAY_BUFFER = __webpack_require__(110);
var createNonEnumerableProperty = __webpack_require__(15);
var redefineAll = __webpack_require__(100);
var fails = __webpack_require__(4);
var anInstance = __webpack_require__(61);
var toInteger = __webpack_require__(22);
var toLength = __webpack_require__(9);
var toIndex = __webpack_require__(111);
var IEEE754 = __webpack_require__(157);
var getPrototypeOf = __webpack_require__(48);
var setPrototypeOf = __webpack_require__(34);
var getOwnPropertyNames = __webpack_require__(32).f;
var defineProperty = __webpack_require__(12).f;
var arrayFill = __webpack_require__(112);
var setToStringTag = __webpack_require__(33);
var InternalStateModule = __webpack_require__(23);

var getInternalState = InternalStateModule.get;
var setInternalState = InternalStateModule.set;
var ARRAY_BUFFER = 'ArrayBuffer';
var DATA_VIEW = 'DataView';
var PROTOTYPE = 'prototype';
var WRONG_LENGTH = 'Wrong length';
var WRONG_INDEX = 'Wrong index';
var NativeArrayBuffer = global[ARRAY_BUFFER];
var $ArrayBuffer = NativeArrayBuffer;
var $DataView = global[DATA_VIEW];
var $DataViewPrototype = $DataView && $DataView[PROTOTYPE];
var ObjectPrototype = Object.prototype;
var RangeError = global.RangeError;

var packIEEE754 = IEEE754.pack;
var unpackIEEE754 = IEEE754.unpack;

var packInt8 = function (number) {
  return [number & 0xFF];
};

var packInt16 = function (number) {
  return [number & 0xFF, number >> 8 & 0xFF];
};

var packInt32 = function (number) {
  return [number & 0xFF, number >> 8 & 0xFF, number >> 16 & 0xFF, number >> 24 & 0xFF];
};

var unpackInt32 = function (buffer) {
  return buffer[3] << 24 | buffer[2] << 16 | buffer[1] << 8 | buffer[0];
};

var packFloat32 = function (number) {
  return packIEEE754(number, 23, 4);
};

var packFloat64 = function (number) {
  return packIEEE754(number, 52, 8);
};

var addGetter = function (Constructor, key) {
  defineProperty(Constructor[PROTOTYPE], key, { get: function () { return getInternalState(this)[key]; } });
};

var get = function (view, count, index, isLittleEndian) {
  var intIndex = toIndex(index);
  var store = getInternalState(view);
  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);
  var bytes = getInternalState(store.buffer).bytes;
  var start = intIndex + store.byteOffset;
  var pack = bytes.slice(start, start + count);
  return isLittleEndian ? pack : pack.reverse();
};

var set = function (view, count, index, conversion, value, isLittleEndian) {
  var intIndex = toIndex(index);
  var store = getInternalState(view);
  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);
  var bytes = getInternalState(store.buffer).bytes;
  var start = intIndex + store.byteOffset;
  var pack = conversion(+value);
  for (var i = 0; i < count; i++) bytes[start + i] = pack[isLittleEndian ? i : count - i - 1];
};

if (!NATIVE_ARRAY_BUFFER) {
  $ArrayBuffer = function ArrayBuffer(length) {
    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);
    var byteLength = toIndex(length);
    setInternalState(this, {
      bytes: arrayFill.call(new Array(byteLength), 0),
      byteLength: byteLength
    });
    if (!DESCRIPTORS) this.byteLength = byteLength;
  };

  $DataView = function DataView(buffer, byteOffset, byteLength) {
    anInstance(this, $DataView, DATA_VIEW);
    anInstance(buffer, $ArrayBuffer, DATA_VIEW);
    var bufferLength = getInternalState(buffer).byteLength;
    var offset = toInteger(byteOffset);
    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset');
    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);
    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);
    setInternalState(this, {
      buffer: buffer,
      byteLength: byteLength,
      byteOffset: offset
    });
    if (!DESCRIPTORS) {
      this.buffer = buffer;
      this.byteLength = byteLength;
      this.byteOffset = offset;
    }
  };

  if (DESCRIPTORS) {
    addGetter($ArrayBuffer, 'byteLength');
    addGetter($DataView, 'buffer');
    addGetter($DataView, 'byteLength');
    addGetter($DataView, 'byteOffset');
  }

  redefineAll($DataView[PROTOTYPE], {
    getInt8: function getInt8(byteOffset) {
      return get(this, 1, byteOffset)[0] << 24 >> 24;
    },
    getUint8: function getUint8(byteOffset) {
      return get(this, 1, byteOffset)[0];
    },
    getInt16: function getInt16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);
      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;
    },
    getUint16: function getUint16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);
      return bytes[1] << 8 | bytes[0];
    },
    getInt32: function getInt32(byteOffset /* , littleEndian */) {
      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined));
    },
    getUint32: function getUint32(byteOffset /* , littleEndian */) {
      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined)) >>> 0;
    },
    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 23);
    },
    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 8, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 52);
    },
    setInt8: function setInt8(byteOffset, value) {
      set(this, 1, byteOffset, packInt8, value);
    },
    setUint8: function setUint8(byteOffset, value) {
      set(this, 1, byteOffset, packInt8, value);
    },
    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packFloat32, value, arguments.length > 2 ? arguments[2] : undefined);
    },
    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {
      set(this, 8, byteOffset, packFloat64, value, arguments.length > 2 ? arguments[2] : undefined);
    }
  });
} else {
  if (!fails(function () {
    NativeArrayBuffer(1);
  }) || !fails(function () {
    new NativeArrayBuffer(-1); // eslint-disable-line no-new
  }) || fails(function () {
    new NativeArrayBuffer(); // eslint-disable-line no-new
    new NativeArrayBuffer(1.5); // eslint-disable-line no-new
    new NativeArrayBuffer(NaN); // eslint-disable-line no-new
    return NativeArrayBuffer.name != ARRAY_BUFFER;
  })) {
    $ArrayBuffer = function ArrayBuffer(length) {
      anInstance(this, $ArrayBuffer);
      return new NativeArrayBuffer(toIndex(length));
    };
    var ArrayBufferPrototype = $ArrayBuffer[PROTOTYPE] = NativeArrayBuffer[PROTOTYPE];
    for (var keys = getOwnPropertyNames(NativeArrayBuffer), j = 0, key; keys.length > j;) {
      if (!((key = keys[j++]) in $ArrayBuffer)) {
        createNonEnumerableProperty($ArrayBuffer, key, NativeArrayBuffer[key]);
      }
    }
    ArrayBufferPrototype.constructor = $ArrayBuffer;
  }

  // WebKit bug - the same parent prototype for typed arrays and data view
  if (setPrototypeOf && getPrototypeOf($DataViewPrototype) !== ObjectPrototype) {
    setPrototypeOf($DataViewPrototype, ObjectPrototype);
  }

  // iOS Safari 7.x bug
  var testView = new $DataView(new $ArrayBuffer(2));
  var nativeSetInt8 = $DataViewPrototype.setInt8;
  testView.setInt8(0, 2147483648);
  testView.setInt8(1, 2147483649);
  if (testView.getInt8(0) || !testView.getInt8(1)) redefineAll($DataViewPrototype, {
    setInt8: function setInt8(byteOffset, value) {
      nativeSetInt8.call(this, byteOffset, value << 24 >> 24);
    },
    setUint8: function setUint8(byteOffset, value) {
      nativeSetInt8.call(this, byteOffset, value << 24 >> 24);
    }
  }, { unsafe: true });
}

setToStringTag($ArrayBuffer, ARRAY_BUFFER);
setToStringTag($DataView, DATA_VIEW);

module.exports = {
  ArrayBuffer: $ArrayBuffer,
  DataView: $DataView
};


/***/ }),
/* 157 */
/***/ (function(module, exports) {

// IEEE754 conversions based on https://github.com/feross/ieee754
// eslint-disable-next-line no-shadow-restricted-names
var Infinity = 1 / 0;
var abs = Math.abs;
var pow = Math.pow;
var floor = Math.floor;
var log = Math.log;
var LN2 = Math.LN2;

var pack = function (number, mantissaLength, bytes) {
  var buffer = new Array(bytes);
  var exponentLength = bytes * 8 - mantissaLength - 1;
  var eMax = (1 << exponentLength) - 1;
  var eBias = eMax >> 1;
  var rt = mantissaLength === 23 ? pow(2, -24) - pow(2, -77) : 0;
  var sign = number < 0 || number === 0 && 1 / number < 0 ? 1 : 0;
  var index = 0;
  var exponent, mantissa, c;
  number = abs(number);
  // eslint-disable-next-line no-self-compare
  if (number != number || number === Infinity) {
    // eslint-disable-next-line no-self-compare
    mantissa = number != number ? 1 : 0;
    exponent = eMax;
  } else {
    exponent = floor(log(number) / LN2);
    if (number * (c = pow(2, -exponent)) < 1) {
      exponent--;
      c *= 2;
    }
    if (exponent + eBias >= 1) {
      number += rt / c;
    } else {
      number += rt * pow(2, 1 - eBias);
    }
    if (number * c >= 2) {
      exponent++;
      c /= 2;
    }
    if (exponent + eBias >= eMax) {
      mantissa = 0;
      exponent = eMax;
    } else if (exponent + eBias >= 1) {
      mantissa = (number * c - 1) * pow(2, mantissaLength);
      exponent = exponent + eBias;
    } else {
      mantissa = number * pow(2, eBias - 1) * pow(2, mantissaLength);
      exponent = 0;
    }
  }
  for (; mantissaLength >= 8; buffer[index++] = mantissa & 255, mantissa /= 256, mantissaLength -= 8);
  exponent = exponent << mantissaLength | mantissa;
  exponentLength += mantissaLength;
  for (; exponentLength > 0; buffer[index++] = exponent & 255, exponent /= 256, exponentLength -= 8);
  buffer[--index] |= sign * 128;
  return buffer;
};

var unpack = function (buffer, mantissaLength) {
  var bytes = buffer.length;
  var exponentLength = bytes * 8 - mantissaLength - 1;
  var eMax = (1 << exponentLength) - 1;
  var eBias = eMax >> 1;
  var nBits = exponentLength - 7;
  var index = bytes - 1;
  var sign = buffer[index--];
  var exponent = sign & 127;
  var mantissa;
  sign >>= 7;
  for (; nBits > 0; exponent = exponent * 256 + buffer[index], index--, nBits -= 8);
  mantissa = exponent & (1 << -nBits) - 1;
  exponent >>= -nBits;
  nBits += mantissaLength;
  for (; nBits > 0; mantissa = mantissa * 256 + buffer[index], index--, nBits -= 8);
  if (exponent === 0) {
    exponent = 1 - eBias;
  } else if (exponent === eMax) {
    return mantissa ? NaN : sign ? -Infinity : Infinity;
  } else {
    mantissa = mantissa + pow(2, mantissaLength);
    exponent = exponent - eBias;
  } return (sign ? -1 : 1) * mantissa * pow(2, exponent - mantissaLength);
};

module.exports = {
  pack: pack,
  unpack: unpack
};


/***/ }),
/* 158 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(22);

module.exports = function (it) {
  var result = toInteger(it);
  if (result < 0) throw RangeError("The argument can't be less than 0");
  return result;
};


/***/ }),
/* 159 */
/***/ (function(module, exports, __webpack_require__) {

var toObject = __webpack_require__(16);
var toLength = __webpack_require__(9);
var getIteratorMethod = __webpack_require__(103);
var isArrayIteratorMethod = __webpack_require__(102);
var bind = __webpack_require__(50);
var aTypedArrayConstructor = __webpack_require__(3).aTypedArrayConstructor;

module.exports = function from(source /* , mapfn, thisArg */) {
  var O = toObject(source);
  var argumentsLength = arguments.length;
  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
  var mapping = mapfn !== undefined;
  var iteratorMethod = getIteratorMethod(O);
  var i, length, result, step, iterator, next;
  if (iteratorMethod != undefined && !isArrayIteratorMethod(iteratorMethod)) {
    iterator = iteratorMethod.call(O);
    next = iterator.next;
    O = [];
    while (!(step = next.call(iterator)).done) {
      O.push(step.value);
    }
  }
  if (mapping && argumentsLength > 2) {
    mapfn = bind(mapfn, arguments[2], 2);
  }
  length = toLength(O.length);
  result = new (aTypedArrayConstructor(this))(length);
  for (i = 0; length > i; i++) {
    result[i] = mapping ? mapfn(O[i], i) : O[i];
  }
  return result;
};


/***/ }),
/* 160 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(8);
var isArray = __webpack_require__(114);
var wellKnownSymbol = __webpack_require__(5);

var SPECIES = wellKnownSymbol('species');

// `ArraySpeciesCreate` abstract operation
// https://tc39.github.io/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray, length) {
  var C;
  if (isArray(originalArray)) {
    C = originalArray.constructor;
    // cross-realm fallback
    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;
    else if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);
};


/***/ }),
/* 161 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(8);
var setPrototypeOf = __webpack_require__(34);

// makes subclassing work correct for wrapped built-ins
module.exports = function ($this, dummy, Wrapper) {
  var NewTarget, NewTargetPrototype;
  if (
    // it can work only with native `setPrototypeOf`
    setPrototypeOf &&
    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this
    typeof (NewTarget = dummy.constructor) == 'function' &&
    NewTarget !== Wrapper &&
    isObject(NewTargetPrototype = NewTarget.prototype) &&
    NewTargetPrototype !== Wrapper.prototype
  ) setPrototypeOf($this, NewTargetPrototype);
  return $this;
};


/***/ }),
/* 162 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toObject = __webpack_require__(16);
var toAbsoluteIndex = __webpack_require__(45);
var toLength = __webpack_require__(9);

var min = Math.min;

// `Array.prototype.copyWithin` method implementation
// https://tc39.github.io/ecma262/#sec-array.prototype.copywithin
module.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {
  var O = toObject(this);
  var len = toLength(O.length);
  var to = toAbsoluteIndex(target, len);
  var from = toAbsoluteIndex(start, len);
  var end = arguments.length > 2 ? arguments[2] : undefined;
  var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);
  var inc = 1;
  if (from < to && to < from + count) {
    inc = -1;
    from += count - 1;
    to += count - 1;
  }
  while (count-- > 0) {
    if (from in O) O[to] = O[from];
    else delete O[to];
    to += inc;
    from += inc;
  } return O;
};


/***/ }),
/* 163 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIndexedObject = __webpack_require__(20);
var toInteger = __webpack_require__(22);
var toLength = __webpack_require__(9);
var arrayMethodIsStrict = __webpack_require__(164);
var arrayMethodUsesToLength = __webpack_require__(75);

var min = Math.min;
var nativeLastIndexOf = [].lastIndexOf;
var NEGATIVE_ZERO = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;
var STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');
// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method
var USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });
var FORCED = NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH;

// `Array.prototype.lastIndexOf` method implementation
// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof
module.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {
  // convert -0 to +0
  if (NEGATIVE_ZERO) return nativeLastIndexOf.apply(this, arguments) || 0;
  var O = toIndexedObject(this);
  var length = toLength(O.length);
  var index = length - 1;
  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));
  if (index < 0) index = length + index;
  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;
  return -1;
} : nativeLastIndexOf;


/***/ }),
/* 164 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(4);

module.exports = function (METHOD_NAME, argument) {
  var method = [][METHOD_NAME];
  return !!method && fails(function () {
    // eslint-disable-next-line no-useless-call,no-throw-literal
    method.call(null, argument || function () { throw 1; }, 1);
  });
};


/***/ }),
/* 165 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* chnl v1.1.0 by Vitaliy Potapov @preserve */
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}var Channel=function(){function t(e){_classCallCheck(this,t),this._listeners=[],this._mute=!1,this._accumulate=!1,this._accumulatedEvents=[],this._name=e||"",this._onListenerAdded=null,this._onFirstListenerAdded=null,this._onListenerRemoved=null,this._onLastListenerRemoved=null}return _createClass(t,[{key:"addListener",value:function(e,t){this._pushListener(e,t,!1)}},{key:"addOnceListener",value:function(e,t){this._pushListener(e,t,!0)}},{key:"removeListener",value:function(e,t){this._ensureFunction(e);var n=this._indexOfListener(e,t);0<=n&&this._spliceListener(n)}},{key:"removeAllListeners",value:function(){for(;this.hasListeners();)this._spliceListener(0)}},{key:"hasListener",value:function(e,t){return this._ensureFunction(e),0<=this._indexOfListener(e,t)}},{key:"hasListeners",value:function(){return 0<this._listeners.length}},{key:"dispatch",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._invokeListeners({args:t,async:!1})}},{key:"dispatchAsync",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._invokeListeners({args:t,async:!0})}},{key:"mute",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this._mute=!0,t.accumulate?this._accumulate=!0:(this._accumulate=!1,this._accumulatedEvents=[])}},{key:"unmute",value:function(){this._mute=!1,this._accumulate&&(this._dispatchAccumulated(),this._accumulate=!1)}},{key:"_invokeListeners",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:{args:[],async:!1};this._mute?this._accumulate&&this._accumulatedEvents.push(n):this._listeners.slice().forEach(function(e){t._invokeListener(e,n),e.once&&t.removeListener(e.callback,e.context)})}},{key:"_invokeListener",value:function(e,t){t.async?setTimeout(function(){return e.callback.apply(e.context,t.args)},0):e.callback.apply(e.context,t.args)}},{key:"_ensureFunction",value:function(e){if("function"!=typeof e)throw new Error("Channel "+this._name+": listener is not a function")}},{key:"_dispatchInnerAddEvents",value:function(){var e,t;this._onListenerAdded&&(e=this._onListenerAdded).dispatch.apply(e,arguments);this._onFirstListenerAdded&&1===this._listeners.length&&(t=this._onFirstListenerAdded).dispatch.apply(t,arguments)}},{key:"_dispatchInnerRemoveEvents",value:function(){var e,t;this._onListenerRemoved&&(e=this._onListenerRemoved).dispatch.apply(e,arguments);this._onLastListenerRemoved&&0===this._listeners.length&&(t=this._onLastListenerRemoved).dispatch.apply(t,arguments)}},{key:"_indexOfListener",value:function(e,t){for(var n=0;n<this._listeners.length;n++){var i=this._listeners[n],s=i.callback===e,r=void 0===t&&void 0===i.context,o=t===i.context;if(s&&(r||o))return n}}},{key:"_dispatchAccumulated",value:function(){var t=this;this._accumulatedEvents.forEach(function(e){return t._invokeListeners(e)}),this._accumulatedEvents=[]}},{key:"_pushListener",value:function(e,t,n){this._ensureFunction(e),this._listeners.push({callback:e,context:t,once:n}),this._dispatchInnerAddEvents(e,t,n)}},{key:"_spliceListener",value:function(e){var t=this._listeners[e],n=t.callback,i=t.context,s=t.once;this._listeners.splice(e,1),this._dispatchInnerRemoveEvents(n,i,s)}},{key:"onListenerAdded",get:function(){return this._onListenerAdded||(this._onListenerAdded=new t("".concat(this._name,":onListenerAdded"))),this._onListenerAdded}},{key:"onFirstListenerAdded",get:function(){return this._onFirstListenerAdded||(this._onFirstListenerAdded=new t("".concat(this._name,":onFirstListenerAdded"))),this._onFirstListenerAdded}},{key:"onListenerRemoved",get:function(){return this._onListenerRemoved||(this._onListenerRemoved=new t("".concat(this._name,":onListenerRemoved"))),this._onListenerRemoved}},{key:"onLastListenerRemoved",get:function(){return this._onLastListenerRemoved||(this._onLastListenerRemoved=new t("".concat(this._name,":onLastListenerRemoved"))),this._onLastListenerRemoved}}]),t}(),EventEmitter=function(){function e(){_classCallCheck(this,e),this._channels=new Map}return _createClass(e,[{key:"addListener",value:function(e,t,n){this._getChannel(e).addListener(t,n)}},{key:"on",value:function(e,t,n){this.addListener(e,t,n)}},{key:"addOnceListener",value:function(e,t,n){this._getChannel(e).addOnceListener(t,n)}},{key:"once",value:function(e,t,n){this.addOnceListener(e,t,n)}},{key:"removeListener",value:function(e,t,n){this._getChannel(e).removeListener(t,n)}},{key:"off",value:function(e,t,n){this.removeListener(e,t,n)}},{key:"hasListener",value:function(e,t,n){return this._getChannel(e).hasListener(t,n)}},{key:"has",value:function(e,t,n){return this.hasListener(e,t,n)}},{key:"hasListeners",value:function(e){return this._getChannel(e).hasListeners()}},{key:"dispatch",value:function(e){for(var t,n=arguments.length,i=new Array(1<n?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];(t=this._getChannel(e)).dispatch.apply(t,i)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.dispatch.apply(this,[e].concat(n))}},{key:"_getChannel",value:function(e){return this._channels.has(e)||this._channels.set(e,new Channel(e)),this._channels.get(e)}}]),e}(),SubscriptionItem=function(){function t(e){_classCallCheck(this,t),this._params=e,this._isOn=!1,this._assertParams()}return _createClass(t,[{key:"on",value:function(){if(!this._isOn){var e=this._params.channel,t=e.addListener||e.addEventListener||e.on;this._applyMethod(t),this._isOn=!0}}},{key:"off",value:function(){if(this._isOn){var e=this._params.channel,t=e.removeListener||e.removeEventListener||e.off;this._applyMethod(t),this._isOn=!1}}},{key:"_applyMethod",value:function(e){var t=this._params,n=t.channel,i=t.event,s=t.listener,r=i?[i,s]:[s];e.apply(n,r)}},{key:"_assertParams",value:function(){var e=this._params,t=e.channel,n=e.event,i=e.listener;if(!t||"object"!==_typeof(t))throw new Error("Channel should be object");if(n&&"string"!=typeof n)throw new Error("Event should be string");if(!i||"function"!=typeof i)throw new Error("Listener should be function")}}]),t}(),Subscription=function(){function t(e){_classCallCheck(this,t),this._items=e.map(function(e){return new SubscriptionItem(e)})}return _createClass(t,[{key:"on",value:function(){return this._items.forEach(function(e){return e.on()}),this}},{key:"off",value:function(){return this._items.forEach(function(e){return e.off()}),this}}]),t}(),ReactSubscription=function(){function i(e,t){var n;return _classCallCheck(this,i),(n=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t)))._overrideComponentCallback(e,"componentDidMount","on"),n._overrideComponentCallback(e,"componentWillUnmount","off"),n}return _inherits(i,Subscription),_createClass(i,[{key:"_overrideComponentCallback",value:function(i,e,s){var r=this,o=i[e];i[e]=function(){if(r[s](),"function"==typeof o){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(i,t)}}}}]),i}(),chnl=Channel;chnl.EventEmitter=EventEmitter,chnl.Subscription=Subscription,chnl.ReactSubscription=ReactSubscription,module.exports=chnl;


/***/ }),
/* 166 */
/***/ (function(module, exports) {

/**
 * @typedef {Object} Options
 *
 * @property {Number} [timeout=0] - Timeout in ms after that promise will be rejected automatically.
 * @property {String|Function} [timeoutReason] - Rejection reason for timeout.
 * Promise will be rejected with {@link PromiseController.TimeoutError} and this message. The message can contain
 * placeholder `{timeout}` for actual timeout value. If timeoutReason is a function,
 * it will be evaluated and returned value will be used as message.
 * @property {String|Function} [resetReason] - Rejection reason used when `.reset()` is called while promise is pending.
 * Promise will be rejected with {@link PromiseController.ResetError} and this message. If resetReason is a function,
 * it will be evaluated and returned value will be used as message.
 */

module.exports = {
  timeout: 0,
  timeoutReason: 'Promise rejected by PromiseController timeout {timeout} ms.',
  resetReason: 'Promise rejected by PromiseController reset.',
};


/***/ }),
/* 167 */
/***/ (function(module, exports) {


/**
 * Simple check for Promise.
 * @param {*} p
 * @returns {Boolean}
 * @ignore
 */
exports.isPromise = function (p) {
  return p && typeof p.then === 'function';
};

/**
 * Calls argument if it is function
 * @param {*} value
 * @returns {*}
 * @ignore
 */
exports.tryCall = function (value) {
  return typeof value === 'function' ? value() : value;
};

/**
 * Just `class MyError extends Error` does not work with transpiler.
 * See: https://stackoverflow.com/questions/1382107/whats-a-good-way-to-extend-error-in-javascript
 * @ignore
 */
exports.createErrorType = function (name) {
  function E(message) {
    if (!Error.captureStackTrace) {
      this.stack = (new Error()).stack;
    } else {
      Error.captureStackTrace(this, this.constructor);
    }
    this.message = message;
  }
  E.prototype = new Error();
  E.prototype.name = name;
  E.prototype.constructor = E;
  return E;
};


/***/ }),
/* 168 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Class for manage pending requests.
 * @private
 */

const PromiseController = __webpack_require__(116);
const promiseFinally = __webpack_require__(169);

module.exports = class Requests {
  constructor() {
    this._items = new Map();
  }

  /**
   * Creates new request and stores it in the list.
   *
   * @param {String|Number} requestId
   * @param {Function} fn
   * @param {Number} timeout
   * @returns {Promise}
   */
  create(requestId, fn, timeout) {
    this._rejectExistingRequest(requestId);
    return this._createNewRequest(requestId, fn, timeout);
  }

  resolve(requestId, data) {
    if (requestId && this._items.has(requestId)) {
      this._items.get(requestId).resolve(data);
    }
  }

  rejectAll(error) {
    this._items.forEach(request => request.isPending ? request.reject(error) : null);
  }

  _rejectExistingRequest(requestId) {
    const existingRequest = this._items.get(requestId);
    if (existingRequest && existingRequest.isPending) {
      existingRequest.reject(new Error(`WebSocket request is replaced, id: ${requestId}`));
    }
  }

  _createNewRequest(requestId, fn, timeout) {
    const request = new PromiseController({
      timeout,
      timeoutReason: `WebSocket request was rejected by timeout (${timeout} ms). RequestId: ${requestId}`
    });
    this._items.set(requestId, request);
    return promiseFinally(request.call(fn), () => this._deleteRequest(requestId, request));
  }

  _deleteRequest(requestId, request) {
    // this check is important when request was replaced
    if (this._items.get(requestId) === request) {
      this._items.delete(requestId);
    }
  }
};


/***/ }),
/* 169 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var bind = __webpack_require__(117);
var define = __webpack_require__(118);

var implementation = __webpack_require__(120);
var getPolyfill = __webpack_require__(122);
var shim = __webpack_require__(181);

var bound = bind.call(Function.call, getPolyfill());

define(bound, {
	getPolyfill: getPolyfill,
	implementation: implementation,
	shim: shim
});

module.exports = bound;


/***/ }),
/* 170 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* eslint no-invalid-this: 1 */

var ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';
var slice = Array.prototype.slice;
var toStr = Object.prototype.toString;
var funcType = '[object Function]';

module.exports = function bind(that) {
    var target = this;
    if (typeof target !== 'function' || toStr.call(target) !== funcType) {
        throw new TypeError(ERROR_MESSAGE + target);
    }
    var args = slice.call(arguments, 1);

    var bound;
    var binder = function () {
        if (this instanceof bound) {
            var result = target.apply(
                this,
                args.concat(slice.call(arguments))
            );
            if (Object(result) === result) {
                return result;
            }
            return this;
        } else {
            return target.apply(
                that,
                args.concat(slice.call(arguments))
            );
        }
    };

    var boundLength = Math.max(0, target.length - args.length);
    var boundArgs = [];
    for (var i = 0; i < boundLength; i++) {
        boundArgs.push('$' + i);
    }

    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);

    if (target.prototype) {
        var Empty = function Empty() {};
        Empty.prototype = target.prototype;
        bound.prototype = new Empty();
        Empty.prototype = null;
    }

    return bound;
};


/***/ }),
/* 171 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var slice = Array.prototype.slice;
var isArgs = __webpack_require__(119);

var origKeys = Object.keys;
var keysShim = origKeys ? function keys(o) { return origKeys(o); } : __webpack_require__(172);

var originalKeys = Object.keys;

keysShim.shim = function shimObjectKeys() {
	if (Object.keys) {
		var keysWorksWithArguments = (function () {
			// Safari 5.0 bug
			var args = Object.keys(arguments);
			return args && args.length === arguments.length;
		}(1, 2));
		if (!keysWorksWithArguments) {
			Object.keys = function keys(object) { // eslint-disable-line func-name-matching
				if (isArgs(object)) {
					return originalKeys(slice.call(object));
				}
				return originalKeys(object);
			};
		}
	} else {
		Object.keys = keysShim;
	}
	return Object.keys || keysShim;
};

module.exports = keysShim;


/***/ }),
/* 172 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var keysShim;
if (!Object.keys) {
	// modified from https://github.com/es-shims/es5-shim
	var has = Object.prototype.hasOwnProperty;
	var toStr = Object.prototype.toString;
	var isArgs = __webpack_require__(119); // eslint-disable-line global-require
	var isEnumerable = Object.prototype.propertyIsEnumerable;
	var hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');
	var hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');
	var dontEnums = [
		'toString',
		'toLocaleString',
		'valueOf',
		'hasOwnProperty',
		'isPrototypeOf',
		'propertyIsEnumerable',
		'constructor'
	];
	var equalsConstructorPrototype = function (o) {
		var ctor = o.constructor;
		return ctor && ctor.prototype === o;
	};
	var excludedKeys = {
		$applicationCache: true,
		$console: true,
		$external: true,
		$frame: true,
		$frameElement: true,
		$frames: true,
		$innerHeight: true,
		$innerWidth: true,
		$onmozfullscreenchange: true,
		$onmozfullscreenerror: true,
		$outerHeight: true,
		$outerWidth: true,
		$pageXOffset: true,
		$pageYOffset: true,
		$parent: true,
		$scrollLeft: true,
		$scrollTop: true,
		$scrollX: true,
		$scrollY: true,
		$self: true,
		$webkitIndexedDB: true,
		$webkitStorageInfo: true,
		$window: true
	};
	var hasAutomationEqualityBug = (function () {
		/* global window */
		if (typeof window === 'undefined') { return false; }
		for (var k in window) {
			try {
				if (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {
					try {
						equalsConstructorPrototype(window[k]);
					} catch (e) {
						return true;
					}
				}
			} catch (e) {
				return true;
			}
		}
		return false;
	}());
	var equalsConstructorPrototypeIfNotBuggy = function (o) {
		/* global window */
		if (typeof window === 'undefined' || !hasAutomationEqualityBug) {
			return equalsConstructorPrototype(o);
		}
		try {
			return equalsConstructorPrototype(o);
		} catch (e) {
			return false;
		}
	};

	keysShim = function keys(object) {
		var isObject = object !== null && typeof object === 'object';
		var isFunction = toStr.call(object) === '[object Function]';
		var isArguments = isArgs(object);
		var isString = isObject && toStr.call(object) === '[object String]';
		var theKeys = [];

		if (!isObject && !isFunction && !isArguments) {
			throw new TypeError('Object.keys called on a non-object');
		}

		var skipProto = hasProtoEnumBug && isFunction;
		if (isString && object.length > 0 && !has.call(object, 0)) {
			for (var i = 0; i < object.length; ++i) {
				theKeys.push(String(i));
			}
		}

		if (isArguments && object.length > 0) {
			for (var j = 0; j < object.length; ++j) {
				theKeys.push(String(j));
			}
		} else {
			for (var name in object) {
				if (!(skipProto && name === 'prototype') && has.call(object, name)) {
					theKeys.push(String(name));
				}
			}
		}

		if (hasDontEnumBug) {
			var skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);

			for (var k = 0; k < dontEnums.length; ++k) {
				if (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {
					theKeys.push(dontEnums[k]);
				}
			}
		}
		return theKeys;
	};
}
module.exports = keysShim;


/***/ }),
/* 173 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// http://www.ecma-international.org/ecma-262/5.1/#sec-9.11

module.exports = __webpack_require__(174);


/***/ }),
/* 174 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var fnToStr = Function.prototype.toString;

var constructorRegex = /^\s*class\b/;
var isES6ClassFn = function isES6ClassFunction(value) {
	try {
		var fnStr = fnToStr.call(value);
		return constructorRegex.test(fnStr);
	} catch (e) {
		return false; // not a function
	}
};

var tryFunctionObject = function tryFunctionToStr(value) {
	try {
		if (isES6ClassFn(value)) { return false; }
		fnToStr.call(value);
		return true;
	} catch (e) {
		return false;
	}
};
var toStr = Object.prototype.toString;
var fnClass = '[object Function]';
var genClass = '[object GeneratorFunction]';
var hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';

module.exports = function isCallable(value) {
	if (!value) { return false; }
	if (typeof value !== 'function' && typeof value !== 'object') { return false; }
	if (typeof value === 'function' && !value.prototype) { return true; }
	if (hasToStringTag) { return tryFunctionObject(value); }
	if (isES6ClassFn(value)) { return false; }
	var strClass = toStr.call(value);
	return strClass === fnClass || strClass === genClass;
};


/***/ }),
/* 175 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var GetIntrinsic = __webpack_require__(176);

var $species = GetIntrinsic('%Symbol.species%', true);
var $TypeError = GetIntrinsic('%TypeError%');

var IsConstructor = __webpack_require__(179);
var Type = __webpack_require__(121);

// https://ecma-international.org/ecma-262/6.0/#sec-speciesconstructor

module.exports = function SpeciesConstructor(O, defaultConstructor) {
	if (Type(O) !== 'Object') {
		throw new $TypeError('Assertion failed: Type(O) is not Object');
	}
	var C = O.constructor;
	if (typeof C === 'undefined') {
		return defaultConstructor;
	}
	if (Type(C) !== 'Object') {
		throw new $TypeError('O.constructor is not an Object');
	}
	var S = $species ? C[$species] : void 0;
	if (S == null) {
		return defaultConstructor;
	}
	if (IsConstructor(S)) {
		return S;
	}
	throw new $TypeError('no constructor found');
};


/***/ }),
/* 176 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* globals
	Atomics,
	SharedArrayBuffer,
*/

var undefined;

var $TypeError = TypeError;

var $gOPD = Object.getOwnPropertyDescriptor;
if ($gOPD) {
	try {
		$gOPD({}, '');
	} catch (e) {
		$gOPD = null; // this is IE 8, which has a broken gOPD
	}
}

var throwTypeError = function () { throw new $TypeError(); };
var ThrowTypeError = $gOPD
	? (function () {
		try {
			// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties
			arguments.callee; // IE 8 does not throw here
			return throwTypeError;
		} catch (calleeThrows) {
			try {
				// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')
				return $gOPD(arguments, 'callee').get;
			} catch (gOPDthrows) {
				return throwTypeError;
			}
		}
	}())
	: throwTypeError;

var hasSymbols = __webpack_require__(177)();

var getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto

var generator; // = function * () {};
var generatorFunction = generator ? getProto(generator) : undefined;
var asyncFn; // async function() {};
var asyncFunction = asyncFn ? asyncFn.constructor : undefined;
var asyncGen; // async function * () {};
var asyncGenFunction = asyncGen ? getProto(asyncGen) : undefined;
var asyncGenIterator = asyncGen ? asyncGen() : undefined;

var TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);

var INTRINSICS = {
	'%Array%': Array,
	'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,
	'%ArrayBufferPrototype%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer.prototype,
	'%ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,
	'%ArrayPrototype%': Array.prototype,
	'%ArrayProto_entries%': Array.prototype.entries,
	'%ArrayProto_forEach%': Array.prototype.forEach,
	'%ArrayProto_keys%': Array.prototype.keys,
	'%ArrayProto_values%': Array.prototype.values,
	'%AsyncFromSyncIteratorPrototype%': undefined,
	'%AsyncFunction%': asyncFunction,
	'%AsyncFunctionPrototype%': asyncFunction ? asyncFunction.prototype : undefined,
	'%AsyncGenerator%': asyncGen ? getProto(asyncGenIterator) : undefined,
	'%AsyncGeneratorFunction%': asyncGenFunction,
	'%AsyncGeneratorPrototype%': asyncGenFunction ? asyncGenFunction.prototype : undefined,
	'%AsyncIteratorPrototype%': asyncGenIterator && hasSymbols && Symbol.asyncIterator ? asyncGenIterator[Symbol.asyncIterator]() : undefined,
	'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,
	'%Boolean%': Boolean,
	'%BooleanPrototype%': Boolean.prototype,
	'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,
	'%DataViewPrototype%': typeof DataView === 'undefined' ? undefined : DataView.prototype,
	'%Date%': Date,
	'%DatePrototype%': Date.prototype,
	'%decodeURI%': decodeURI,
	'%decodeURIComponent%': decodeURIComponent,
	'%encodeURI%': encodeURI,
	'%encodeURIComponent%': encodeURIComponent,
	'%Error%': Error,
	'%ErrorPrototype%': Error.prototype,
	'%eval%': eval, // eslint-disable-line no-eval
	'%EvalError%': EvalError,
	'%EvalErrorPrototype%': EvalError.prototype,
	'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,
	'%Float32ArrayPrototype%': typeof Float32Array === 'undefined' ? undefined : Float32Array.prototype,
	'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,
	'%Float64ArrayPrototype%': typeof Float64Array === 'undefined' ? undefined : Float64Array.prototype,
	'%Function%': Function,
	'%FunctionPrototype%': Function.prototype,
	'%Generator%': generator ? getProto(generator()) : undefined,
	'%GeneratorFunction%': generatorFunction,
	'%GeneratorPrototype%': generatorFunction ? generatorFunction.prototype : undefined,
	'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,
	'%Int8ArrayPrototype%': typeof Int8Array === 'undefined' ? undefined : Int8Array.prototype,
	'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,
	'%Int16ArrayPrototype%': typeof Int16Array === 'undefined' ? undefined : Int8Array.prototype,
	'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,
	'%Int32ArrayPrototype%': typeof Int32Array === 'undefined' ? undefined : Int32Array.prototype,
	'%isFinite%': isFinite,
	'%isNaN%': isNaN,
	'%IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,
	'%JSON%': typeof JSON === 'object' ? JSON : undefined,
	'%JSONParse%': typeof JSON === 'object' ? JSON.parse : undefined,
	'%Map%': typeof Map === 'undefined' ? undefined : Map,
	'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),
	'%MapPrototype%': typeof Map === 'undefined' ? undefined : Map.prototype,
	'%Math%': Math,
	'%Number%': Number,
	'%NumberPrototype%': Number.prototype,
	'%Object%': Object,
	'%ObjectPrototype%': Object.prototype,
	'%ObjProto_toString%': Object.prototype.toString,
	'%ObjProto_valueOf%': Object.prototype.valueOf,
	'%parseFloat%': parseFloat,
	'%parseInt%': parseInt,
	'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,
	'%PromisePrototype%': typeof Promise === 'undefined' ? undefined : Promise.prototype,
	'%PromiseProto_then%': typeof Promise === 'undefined' ? undefined : Promise.prototype.then,
	'%Promise_all%': typeof Promise === 'undefined' ? undefined : Promise.all,
	'%Promise_reject%': typeof Promise === 'undefined' ? undefined : Promise.reject,
	'%Promise_resolve%': typeof Promise === 'undefined' ? undefined : Promise.resolve,
	'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,
	'%RangeError%': RangeError,
	'%RangeErrorPrototype%': RangeError.prototype,
	'%ReferenceError%': ReferenceError,
	'%ReferenceErrorPrototype%': ReferenceError.prototype,
	'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,
	'%RegExp%': RegExp,
	'%RegExpPrototype%': RegExp.prototype,
	'%Set%': typeof Set === 'undefined' ? undefined : Set,
	'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),
	'%SetPrototype%': typeof Set === 'undefined' ? undefined : Set.prototype,
	'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,
	'%SharedArrayBufferPrototype%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer.prototype,
	'%String%': String,
	'%StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,
	'%StringPrototype%': String.prototype,
	'%Symbol%': hasSymbols ? Symbol : undefined,
	'%SymbolPrototype%': hasSymbols ? Symbol.prototype : undefined,
	'%SyntaxError%': SyntaxError,
	'%SyntaxErrorPrototype%': SyntaxError.prototype,
	'%ThrowTypeError%': ThrowTypeError,
	'%TypedArray%': TypedArray,
	'%TypedArrayPrototype%': TypedArray ? TypedArray.prototype : undefined,
	'%TypeError%': $TypeError,
	'%TypeErrorPrototype%': $TypeError.prototype,
	'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,
	'%Uint8ArrayPrototype%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array.prototype,
	'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,
	'%Uint8ClampedArrayPrototype%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray.prototype,
	'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,
	'%Uint16ArrayPrototype%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array.prototype,
	'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,
	'%Uint32ArrayPrototype%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array.prototype,
	'%URIError%': URIError,
	'%URIErrorPrototype%': URIError.prototype,
	'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,
	'%WeakMapPrototype%': typeof WeakMap === 'undefined' ? undefined : WeakMap.prototype,
	'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,
	'%WeakSetPrototype%': typeof WeakSet === 'undefined' ? undefined : WeakSet.prototype
};

var bind = __webpack_require__(117);
var $replace = bind.call(Function.call, String.prototype.replace);

/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */
var rePropName = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;
var reEscapeChar = /\\(\\)?/g; /** Used to match backslashes in property paths. */
var stringToPath = function stringToPath(string) {
	var result = [];
	$replace(string, rePropName, function (match, number, quote, subString) {
		result[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : (number || match);
	});
	return result;
};
/* end adaptation */

var getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {
	if (!(name in INTRINSICS)) {
		throw new SyntaxError('intrinsic ' + name + ' does not exist!');
	}

	// istanbul ignore if // hopefully this is impossible to test :-)
	if (typeof INTRINSICS[name] === 'undefined' && !allowMissing) {
		throw new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');
	}

	return INTRINSICS[name];
};

module.exports = function GetIntrinsic(name, allowMissing) {
	if (typeof name !== 'string' || name.length === 0) {
		throw new TypeError('intrinsic name must be a non-empty string');
	}
	if (arguments.length > 1 && typeof allowMissing !== 'boolean') {
		throw new TypeError('"allowMissing" argument must be a boolean');
	}

	var parts = stringToPath(name);

	var value = getBaseIntrinsic('%' + (parts.length > 0 ? parts[0] : '') + '%', allowMissing);
	for (var i = 1; i < parts.length; i += 1) {
		if (value != null) {
			if ($gOPD && (i + 1) >= parts.length) {
				var desc = $gOPD(value, parts[i]);
				if (!allowMissing && !(parts[i] in value)) {
					throw new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');
				}
				value = desc ? (desc.get || desc.value) : value[parts[i]];
			} else {
				value = value[parts[i]];
			}
		}
	}
	return value;
};


/***/ }),
/* 177 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {

var origSymbol = global.Symbol;
var hasSymbolSham = __webpack_require__(178);

module.exports = function hasNativeSymbols() {
	if (typeof origSymbol !== 'function') { return false; }
	if (typeof Symbol !== 'function') { return false; }
	if (typeof origSymbol('foo') !== 'symbol') { return false; }
	if (typeof Symbol('bar') !== 'symbol') { return false; }

	return hasSymbolSham();
};

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(38)))

/***/ }),
/* 178 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* eslint complexity: [2, 18], max-statements: [2, 33] */
module.exports = function hasSymbols() {
	if (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }
	if (typeof Symbol.iterator === 'symbol') { return true; }

	var obj = {};
	var sym = Symbol('test');
	var symObj = Object(sym);
	if (typeof sym === 'string') { return false; }

	if (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }
	if (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }

	// temp disabled per https://github.com/ljharb/object.assign/issues/17
	// if (sym instanceof Symbol) { return false; }
	// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4
	// if (!(symObj instanceof Symbol)) { return false; }

	// if (typeof Symbol.prototype.toString !== 'function') { return false; }
	// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }

	var symVal = 42;
	obj[sym] = symVal;
	for (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax
	if (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }

	if (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }

	var syms = Object.getOwnPropertySymbols(obj);
	if (syms.length !== 1 || syms[0] !== sym) { return false; }

	if (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }

	if (typeof Object.getOwnPropertyDescriptor === 'function') {
		var descriptor = Object.getOwnPropertyDescriptor(obj, sym);
		if (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }
	}

	return true;
};


/***/ }),
/* 179 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// https://www.ecma-international.org/ecma-262/6.0/#sec-isconstructor

module.exports = function IsConstructor(argument) {
	return typeof argument === 'function' && !!argument.prototype; // unfortunately there's no way to truly check this without try/catch `new argument`
};


/***/ }),
/* 180 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// https://www.ecma-international.org/ecma-262/5.1/#sec-8

module.exports = function Type(x) {
	if (x === null) {
		return 'Null';
	}
	if (typeof x === 'undefined') {
		return 'Undefined';
	}
	if (typeof x === 'function' || typeof x === 'object') {
		return 'Object';
	}
	if (typeof x === 'number') {
		return 'Number';
	}
	if (typeof x === 'boolean') {
		return 'Boolean';
	}
	if (typeof x === 'string') {
		return 'String';
	}
};


/***/ }),
/* 181 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var requirePromise = __webpack_require__(87);

var getPolyfill = __webpack_require__(122);
var define = __webpack_require__(118);

module.exports = function shimPromiseFinally() {
	requirePromise();

	var polyfill = getPolyfill();
	define(Promise.prototype, { 'finally': polyfill }, {
		'finally': function testFinally() {
			return Promise.prototype['finally'] !== polyfill;
		}
	});
	return polyfill;
};


/***/ }),
/* 182 */
/***/ (function(module, exports) {

/**
 * Default options.
 */

/**
 * @typedef {Object} Options
 * @property {Function} [createWebSocket=url => new WebSocket(url)] - custom function for WebSocket construction.
  *
 * @property {Function} [packMessage=noop] - packs message for sending. For example, `data => JSON.stringify(data)`.
 *
 * @property {Function} [unpackMessage=noop] - unpacks received message. For example, `data => JSON.parse(data)`.
 *
 * @property {Function} [attachRequestId=noop] - injects request id into data.
 * For example, `(data, requestId) => Object.assign({requestId}, data)`.
 *
 * @property {Function} [extractRequestId=noop] - extracts request id from received data.
 * For example, `data => data.requestId`.
 *
 * @property {Function} [extractMessageData=event => event.data] - extracts data from event object.
 *
 * @property {Number} timeout=0 - timeout for opening connection and sending messages.
 *
 * @property {Number} connectionTimeout=0 - special timeout for opening connection, by default equals to `timeout`.
 *
 * @defaults
 * please see [options.js](https://github.com/vitalets/websocket-as-promised/blob/master/src/options.js)
 */

module.exports = {
  /**
   * See {@link Options.createWebSocket}
   *
   * @param {String} url
   * @returns {WebSocket}
   */
  createWebSocket: url => new WebSocket(url),

  /**
   * See {@link Options.packMessage}
   *
   * @param {*} data
   * @returns {String|ArrayBuffer|Blob}
   */
  packMessage: null,

  /**
   * See {@link Options.unpackMessage}
   *
   * @param {String|ArrayBuffer|Blob} data
   * @returns {*}
   */
  unpackMessage: null,

  /**
   * See {@link Options.attachRequestId}
   *
   * @param {*} data
   * @param {String|Number} requestId
   * @returns {*}
   */
  attachRequestId: null,

  /**
   * See {@link Options.extractRequestId}
   *
   * @param {*} data
   * @returns {String|Number|undefined}
   */
  extractRequestId: null,

  /**
   * See {@link Options.extractMessageData}
   *
   * @param {*} event
   * @returns {*}
   */
  extractMessageData: event => event.data,

  /**
   * See {@link Options.timeout}
   */
  timeout: 0,

  /**
   * See {@link Options.connectionTimeout}
   */
  connectionTimeout: 0,
};


/***/ }),
/* 183 */
/***/ (function(module, exports) {


exports.throwIf = (condition, message) => {
  if (condition) {
    throw new Error(message);
  }
};


/***/ }),
/* 184 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



// If obj.hasOwnProperty has been overridden, then calling
// obj.hasOwnProperty(prop) will break.
// See: https://github.com/joyent/node/issues/1707
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

module.exports = function(qs, sep, eq, options) {
  sep = sep || '&';
  eq = eq || '=';
  var obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options && typeof options.maxKeys === 'number') {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys <= 0 means that we should not limit keys count
  if (maxKeys > 0 && len > maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i < len; ++i) {
    var x = qs[i].replace(regexp, '%20'),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx >= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    k = decodeURIComponent(kstr);
    v = decodeURIComponent(vstr);

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};


/***/ }),
/* 185 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var stringifyPrimitive = function(v) {
  switch (typeof v) {
    case 'string':
      return v;

    case 'boolean':
      return v ? 'true' : 'false';

    case 'number':
      return isFinite(v) ? v : '';

    default:
      return '';
  }
};

module.exports = function(obj, sep, eq, name) {
  sep = sep || '&';
  eq = eq || '=';
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === 'object') {
    return map(objectKeys(obj), function(k) {
      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
      if (isArray(obj[k])) {
        return map(obj[k], function(v) {
          return ks + encodeURIComponent(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return '';
  return encodeURIComponent(stringifyPrimitive(name)) + eq +
         encodeURIComponent(stringifyPrimitive(obj));
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};

function map (xs, f) {
  if (xs.map) return xs.map(f);
  var res = [];
  for (var i = 0; i < xs.length; i++) {
    res.push(f(xs[i], i));
  }
  return res;
}

var objectKeys = Object.keys || function (obj) {
  var res = [];
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);
  }
  return res;
};


/***/ }),
/* 186 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// minimal library entry point.


module.exports = __webpack_require__(187);


/***/ }),
/* 187 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var protobuf = exports;

/**
 * Build type, one of `"full"`, `"light"` or `"minimal"`.
 * @name build
 * @type {string}
 * @const
 */
protobuf.build = "minimal";

// Serialization
protobuf.Writer       = __webpack_require__(123);
protobuf.BufferWriter = __webpack_require__(196);
protobuf.Reader       = __webpack_require__(124);
protobuf.BufferReader = __webpack_require__(197);

// Utility
protobuf.util         = __webpack_require__(25);
protobuf.rpc          = __webpack_require__(198);
protobuf.roots        = __webpack_require__(200);
protobuf.configure    = configure;

/* istanbul ignore next */
/**
 * Reconfigures the library according to the environment.
 * @returns {undefined}
 */
function configure() {
    protobuf.util._configure();
    protobuf.Writer._configure(protobuf.BufferWriter);
    protobuf.Reader._configure(protobuf.BufferReader);
}

// Set up buffer utility according to the environment
configure();


/***/ }),
/* 188 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = asPromise;

/**
 * Callback as used by {@link util.asPromise}.
 * @typedef asPromiseCallback
 * @type {function}
 * @param {Error|null} error Error, if any
 * @param {...*} params Additional arguments
 * @returns {undefined}
 */

/**
 * Returns a promise from a node-style callback function.
 * @memberof util
 * @param {asPromiseCallback} fn Function to call
 * @param {*} ctx Function context
 * @param {...*} params Function arguments
 * @returns {Promise<*>} Promisified function
 */
function asPromise(fn, ctx/*, varargs */) {
    var params  = new Array(arguments.length - 1),
        offset  = 0,
        index   = 2,
        pending = true;
    while (index < arguments.length)
        params[offset++] = arguments[index++];
    return new Promise(function executor(resolve, reject) {
        params[offset] = function callback(err/*, varargs */) {
            if (pending) {
                pending = false;
                if (err)
                    reject(err);
                else {
                    var params = new Array(arguments.length - 1),
                        offset = 0;
                    while (offset < params.length)
                        params[offset++] = arguments[offset];
                    resolve.apply(null, params);
                }
            }
        };
        try {
            fn.apply(ctx || null, params);
        } catch (err) {
            if (pending) {
                pending = false;
                reject(err);
            }
        }
    });
}


/***/ }),
/* 189 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A minimal base64 implementation for number arrays.
 * @memberof util
 * @namespace
 */
var base64 = exports;

/**
 * Calculates the byte length of a base64 encoded string.
 * @param {string} string Base64 encoded string
 * @returns {number} Byte length
 */
base64.length = function length(string) {
    var p = string.length;
    if (!p)
        return 0;
    var n = 0;
    while (--p % 4 > 1 && string.charAt(p) === "=")
        ++n;
    return Math.ceil(string.length * 3) / 4 - n;
};

// Base64 encoding table
var b64 = new Array(64);

// Base64 decoding table
var s64 = new Array(123);

// 65..90, 97..122, 48..57, 43, 47
for (var i = 0; i < 64;)
    s64[b64[i] = i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i - 59 | 43] = i++;

/**
 * Encodes a buffer to a base64 encoded string.
 * @param {Uint8Array} buffer Source buffer
 * @param {number} start Source start
 * @param {number} end Source end
 * @returns {string} Base64 encoded string
 */
base64.encode = function encode(buffer, start, end) {
    var parts = null,
        chunk = [];
    var i = 0, // output index
        j = 0, // goto index
        t;     // temporary
    while (start < end) {
        var b = buffer[start++];
        switch (j) {
            case 0:
                chunk[i++] = b64[b >> 2];
                t = (b & 3) << 4;
                j = 1;
                break;
            case 1:
                chunk[i++] = b64[t | b >> 4];
                t = (b & 15) << 2;
                j = 2;
                break;
            case 2:
                chunk[i++] = b64[t | b >> 6];
                chunk[i++] = b64[b & 63];
                j = 0;
                break;
        }
        if (i > 8191) {
            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
            i = 0;
        }
    }
    if (j) {
        chunk[i++] = b64[t];
        chunk[i++] = 61;
        if (j === 1)
            chunk[i++] = 61;
    }
    if (parts) {
        if (i)
            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));
        return parts.join("");
    }
    return String.fromCharCode.apply(String, chunk.slice(0, i));
};

var invalidEncoding = "invalid encoding";

/**
 * Decodes a base64 encoded string to a buffer.
 * @param {string} string Source string
 * @param {Uint8Array} buffer Destination buffer
 * @param {number} offset Destination offset
 * @returns {number} Number of bytes written
 * @throws {Error} If encoding is invalid
 */
base64.decode = function decode(string, buffer, offset) {
    var start = offset;
    var j = 0, // goto index
        t;     // temporary
    for (var i = 0; i < string.length;) {
        var c = string.charCodeAt(i++);
        if (c === 61 && j > 1)
            break;
        if ((c = s64[c]) === undefined)
            throw Error(invalidEncoding);
        switch (j) {
            case 0:
                t = c;
                j = 1;
                break;
            case 1:
                buffer[offset++] = t << 2 | (c & 48) >> 4;
                t = c;
                j = 2;
                break;
            case 2:
                buffer[offset++] = (t & 15) << 4 | (c & 60) >> 2;
                t = c;
                j = 3;
                break;
            case 3:
                buffer[offset++] = (t & 3) << 6 | c;
                j = 0;
                break;
        }
    }
    if (j === 1)
        throw Error(invalidEncoding);
    return offset - start;
};

/**
 * Tests if the specified string appears to be base64 encoded.
 * @param {string} string String to test
 * @returns {boolean} `true` if probably base64 encoded, otherwise false
 */
base64.test = function test(string) {
    return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string);
};


/***/ }),
/* 190 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = EventEmitter;

/**
 * Constructs a new event emitter instance.
 * @classdesc A minimal event emitter.
 * @memberof util
 * @constructor
 */
function EventEmitter() {

    /**
     * Registered listeners.
     * @type {Object.<string,*>}
     * @private
     */
    this._listeners = {};
}

/**
 * Registers an event listener.
 * @param {string} evt Event name
 * @param {function} fn Listener
 * @param {*} [ctx] Listener context
 * @returns {util.EventEmitter} `this`
 */
EventEmitter.prototype.on = function on(evt, fn, ctx) {
    (this._listeners[evt] || (this._listeners[evt] = [])).push({
        fn  : fn,
        ctx : ctx || this
    });
    return this;
};

/**
 * Removes an event listener or any matching listeners if arguments are omitted.
 * @param {string} [evt] Event name. Removes all listeners if omitted.
 * @param {function} [fn] Listener to remove. Removes all listeners of `evt` if omitted.
 * @returns {util.EventEmitter} `this`
 */
EventEmitter.prototype.off = function off(evt, fn) {
    if (evt === undefined)
        this._listeners = {};
    else {
        if (fn === undefined)
            this._listeners[evt] = [];
        else {
            var listeners = this._listeners[evt];
            for (var i = 0; i < listeners.length;)
                if (listeners[i].fn === fn)
                    listeners.splice(i, 1);
                else
                    ++i;
        }
    }
    return this;
};

/**
 * Emits an event by calling its listeners with the specified arguments.
 * @param {string} evt Event name
 * @param {...*} args Arguments
 * @returns {util.EventEmitter} `this`
 */
EventEmitter.prototype.emit = function emit(evt) {
    var listeners = this._listeners[evt];
    if (listeners) {
        var args = [],
            i = 1;
        for (; i < arguments.length;)
            args.push(arguments[i++]);
        for (i = 0; i < listeners.length;)
            listeners[i].fn.apply(listeners[i++].ctx, args);
    }
    return this;
};


/***/ }),
/* 191 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = factory(factory);

/**
 * Reads / writes floats / doubles from / to buffers.
 * @name util.float
 * @namespace
 */

/**
 * Writes a 32 bit float to a buffer using little endian byte order.
 * @name util.float.writeFloatLE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Writes a 32 bit float to a buffer using big endian byte order.
 * @name util.float.writeFloatBE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Reads a 32 bit float from a buffer using little endian byte order.
 * @name util.float.readFloatLE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

/**
 * Reads a 32 bit float from a buffer using big endian byte order.
 * @name util.float.readFloatBE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

/**
 * Writes a 64 bit double to a buffer using little endian byte order.
 * @name util.float.writeDoubleLE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Writes a 64 bit double to a buffer using big endian byte order.
 * @name util.float.writeDoubleBE
 * @function
 * @param {number} val Value to write
 * @param {Uint8Array} buf Target buffer
 * @param {number} pos Target buffer offset
 * @returns {undefined}
 */

/**
 * Reads a 64 bit double from a buffer using little endian byte order.
 * @name util.float.readDoubleLE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

/**
 * Reads a 64 bit double from a buffer using big endian byte order.
 * @name util.float.readDoubleBE
 * @function
 * @param {Uint8Array} buf Source buffer
 * @param {number} pos Source buffer offset
 * @returns {number} Value read
 */

// Factory function for the purpose of node-based testing in modified global environments
function factory(exports) {

    // float: typed array
    if (typeof Float32Array !== "undefined") (function() {

        var f32 = new Float32Array([ -0 ]),
            f8b = new Uint8Array(f32.buffer),
            le  = f8b[3] === 128;

        function writeFloat_f32_cpy(val, buf, pos) {
            f32[0] = val;
            buf[pos    ] = f8b[0];
            buf[pos + 1] = f8b[1];
            buf[pos + 2] = f8b[2];
            buf[pos + 3] = f8b[3];
        }

        function writeFloat_f32_rev(val, buf, pos) {
            f32[0] = val;
            buf[pos    ] = f8b[3];
            buf[pos + 1] = f8b[2];
            buf[pos + 2] = f8b[1];
            buf[pos + 3] = f8b[0];
        }

        /* istanbul ignore next */
        exports.writeFloatLE = le ? writeFloat_f32_cpy : writeFloat_f32_rev;
        /* istanbul ignore next */
        exports.writeFloatBE = le ? writeFloat_f32_rev : writeFloat_f32_cpy;

        function readFloat_f32_cpy(buf, pos) {
            f8b[0] = buf[pos    ];
            f8b[1] = buf[pos + 1];
            f8b[2] = buf[pos + 2];
            f8b[3] = buf[pos + 3];
            return f32[0];
        }

        function readFloat_f32_rev(buf, pos) {
            f8b[3] = buf[pos    ];
            f8b[2] = buf[pos + 1];
            f8b[1] = buf[pos + 2];
            f8b[0] = buf[pos + 3];
            return f32[0];
        }

        /* istanbul ignore next */
        exports.readFloatLE = le ? readFloat_f32_cpy : readFloat_f32_rev;
        /* istanbul ignore next */
        exports.readFloatBE = le ? readFloat_f32_rev : readFloat_f32_cpy;

    // float: ieee754
    })(); else (function() {

        function writeFloat_ieee754(writeUint, val, buf, pos) {
            var sign = val < 0 ? 1 : 0;
            if (sign)
                val = -val;
            if (val === 0)
                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos);
            else if (isNaN(val))
                writeUint(2143289344, buf, pos);
            else if (val > 3.4028234663852886e+38) // +-Infinity
                writeUint((sign << 31 | 2139095040) >>> 0, buf, pos);
            else if (val < 1.1754943508222875e-38) // denormal
                writeUint((sign << 31 | Math.round(val / 1.401298464324817e-45)) >>> 0, buf, pos);
            else {
                var exponent = Math.floor(Math.log(val) / Math.LN2),
                    mantissa = Math.round(val * Math.pow(2, -exponent) * 8388608) & 8388607;
                writeUint((sign << 31 | exponent + 127 << 23 | mantissa) >>> 0, buf, pos);
            }
        }

        exports.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE);
        exports.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE);

        function readFloat_ieee754(readUint, buf, pos) {
            var uint = readUint(buf, pos),
                sign = (uint >> 31) * 2 + 1,
                exponent = uint >>> 23 & 255,
                mantissa = uint & 8388607;
            return exponent === 255
                ? mantissa
                ? NaN
                : sign * Infinity
                : exponent === 0 // denormal
                ? sign * 1.401298464324817e-45 * mantissa
                : sign * Math.pow(2, exponent - 150) * (mantissa + 8388608);
        }

        exports.readFloatLE = readFloat_ieee754.bind(null, readUintLE);
        exports.readFloatBE = readFloat_ieee754.bind(null, readUintBE);

    })();

    // double: typed array
    if (typeof Float64Array !== "undefined") (function() {

        var f64 = new Float64Array([-0]),
            f8b = new Uint8Array(f64.buffer),
            le  = f8b[7] === 128;

        function writeDouble_f64_cpy(val, buf, pos) {
            f64[0] = val;
            buf[pos    ] = f8b[0];
            buf[pos + 1] = f8b[1];
            buf[pos + 2] = f8b[2];
            buf[pos + 3] = f8b[3];
            buf[pos + 4] = f8b[4];
            buf[pos + 5] = f8b[5];
            buf[pos + 6] = f8b[6];
            buf[pos + 7] = f8b[7];
        }

        function writeDouble_f64_rev(val, buf, pos) {
            f64[0] = val;
            buf[pos    ] = f8b[7];
            buf[pos + 1] = f8b[6];
            buf[pos + 2] = f8b[5];
            buf[pos + 3] = f8b[4];
            buf[pos + 4] = f8b[3];
            buf[pos + 5] = f8b[2];
            buf[pos + 6] = f8b[1];
            buf[pos + 7] = f8b[0];
        }

        /* istanbul ignore next */
        exports.writeDoubleLE = le ? writeDouble_f64_cpy : writeDouble_f64_rev;
        /* istanbul ignore next */
        exports.writeDoubleBE = le ? writeDouble_f64_rev : writeDouble_f64_cpy;

        function readDouble_f64_cpy(buf, pos) {
            f8b[0] = buf[pos    ];
            f8b[1] = buf[pos + 1];
            f8b[2] = buf[pos + 2];
            f8b[3] = buf[pos + 3];
            f8b[4] = buf[pos + 4];
            f8b[5] = buf[pos + 5];
            f8b[6] = buf[pos + 6];
            f8b[7] = buf[pos + 7];
            return f64[0];
        }

        function readDouble_f64_rev(buf, pos) {
            f8b[7] = buf[pos    ];
            f8b[6] = buf[pos + 1];
            f8b[5] = buf[pos + 2];
            f8b[4] = buf[pos + 3];
            f8b[3] = buf[pos + 4];
            f8b[2] = buf[pos + 5];
            f8b[1] = buf[pos + 6];
            f8b[0] = buf[pos + 7];
            return f64[0];
        }

        /* istanbul ignore next */
        exports.readDoubleLE = le ? readDouble_f64_cpy : readDouble_f64_rev;
        /* istanbul ignore next */
        exports.readDoubleBE = le ? readDouble_f64_rev : readDouble_f64_cpy;

    // double: ieee754
    })(); else (function() {

        function writeDouble_ieee754(writeUint, off0, off1, val, buf, pos) {
            var sign = val < 0 ? 1 : 0;
            if (sign)
                val = -val;
            if (val === 0) {
                writeUint(0, buf, pos + off0);
                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos + off1);
            } else if (isNaN(val)) {
                writeUint(0, buf, pos + off0);
                writeUint(2146959360, buf, pos + off1);
            } else if (val > 1.7976931348623157e+308) { // +-Infinity
                writeUint(0, buf, pos + off0);
                writeUint((sign << 31 | 2146435072) >>> 0, buf, pos + off1);
            } else {
                var mantissa;
                if (val < 2.2250738585072014e-308) { // denormal
                    mantissa = val / 5e-324;
                    writeUint(mantissa >>> 0, buf, pos + off0);
                    writeUint((sign << 31 | mantissa / 4294967296) >>> 0, buf, pos + off1);
                } else {
                    var exponent = Math.floor(Math.log(val) / Math.LN2);
                    if (exponent === 1024)
                        exponent = 1023;
                    mantissa = val * Math.pow(2, -exponent);
                    writeUint(mantissa * 4503599627370496 >>> 0, buf, pos + off0);
                    writeUint((sign << 31 | exponent + 1023 << 20 | mantissa * 1048576 & 1048575) >>> 0, buf, pos + off1);
                }
            }
        }

        exports.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4);
        exports.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0);

        function readDouble_ieee754(readUint, off0, off1, buf, pos) {
            var lo = readUint(buf, pos + off0),
                hi = readUint(buf, pos + off1);
            var sign = (hi >> 31) * 2 + 1,
                exponent = hi >>> 20 & 2047,
                mantissa = 4294967296 * (hi & 1048575) + lo;
            return exponent === 2047
                ? mantissa
                ? NaN
                : sign * Infinity
                : exponent === 0 // denormal
                ? sign * 5e-324 * mantissa
                : sign * Math.pow(2, exponent - 1075) * (mantissa + 4503599627370496);
        }

        exports.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4);
        exports.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0);

    })();

    return exports;
}

// uint helpers

function writeUintLE(val, buf, pos) {
    buf[pos    ] =  val        & 255;
    buf[pos + 1] =  val >>> 8  & 255;
    buf[pos + 2] =  val >>> 16 & 255;
    buf[pos + 3] =  val >>> 24;
}

function writeUintBE(val, buf, pos) {
    buf[pos    ] =  val >>> 24;
    buf[pos + 1] =  val >>> 16 & 255;
    buf[pos + 2] =  val >>> 8  & 255;
    buf[pos + 3] =  val        & 255;
}

function readUintLE(buf, pos) {
    return (buf[pos    ]
          | buf[pos + 1] << 8
          | buf[pos + 2] << 16
          | buf[pos + 3] << 24) >>> 0;
}

function readUintBE(buf, pos) {
    return (buf[pos    ] << 24
          | buf[pos + 1] << 16
          | buf[pos + 2] << 8
          | buf[pos + 3]) >>> 0;
}


/***/ }),
/* 192 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = inquire;

/**
 * Requires a module only if available.
 * @memberof util
 * @param {string} moduleName Module to require
 * @returns {?Object} Required module if available and not empty, otherwise `null`
 */
function inquire(moduleName) {
    try {
        var mod = eval("quire".replace(/^/,"re"))(moduleName); // eslint-disable-line no-eval
        if (mod && (mod.length || Object.keys(mod).length))
            return mod;
    } catch (e) {} // eslint-disable-line no-empty
    return null;
}


/***/ }),
/* 193 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A minimal UTF8 implementation for number arrays.
 * @memberof util
 * @namespace
 */
var utf8 = exports;

/**
 * Calculates the UTF8 byte length of a string.
 * @param {string} string String
 * @returns {number} Byte length
 */
utf8.length = function utf8_length(string) {
    var len = 0,
        c = 0;
    for (var i = 0; i < string.length; ++i) {
        c = string.charCodeAt(i);
        if (c < 128)
            len += 1;
        else if (c < 2048)
            len += 2;
        else if ((c & 0xFC00) === 0xD800 && (string.charCodeAt(i + 1) & 0xFC00) === 0xDC00) {
            ++i;
            len += 4;
        } else
            len += 3;
    }
    return len;
};

/**
 * Reads UTF8 bytes as a string.
 * @param {Uint8Array} buffer Source buffer
 * @param {number} start Source start
 * @param {number} end Source end
 * @returns {string} String read
 */
utf8.read = function utf8_read(buffer, start, end) {
    var len = end - start;
    if (len < 1)
        return "";
    var parts = null,
        chunk = [],
        i = 0, // char offset
        t;     // temporary
    while (start < end) {
        t = buffer[start++];
        if (t < 128)
            chunk[i++] = t;
        else if (t > 191 && t < 224)
            chunk[i++] = (t & 31) << 6 | buffer[start++] & 63;
        else if (t > 239 && t < 365) {
            t = ((t & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 0x10000;
            chunk[i++] = 0xD800 + (t >> 10);
            chunk[i++] = 0xDC00 + (t & 1023);
        } else
            chunk[i++] = (t & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;
        if (i > 8191) {
            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
            i = 0;
        }
    }
    if (parts) {
        if (i)
            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));
        return parts.join("");
    }
    return String.fromCharCode.apply(String, chunk.slice(0, i));
};

/**
 * Writes a string as UTF8 bytes.
 * @param {string} string Source string
 * @param {Uint8Array} buffer Destination buffer
 * @param {number} offset Destination offset
 * @returns {number} Bytes written
 */
utf8.write = function utf8_write(string, buffer, offset) {
    var start = offset,
        c1, // character 1
        c2; // character 2
    for (var i = 0; i < string.length; ++i) {
        c1 = string.charCodeAt(i);
        if (c1 < 128) {
            buffer[offset++] = c1;
        } else if (c1 < 2048) {
            buffer[offset++] = c1 >> 6       | 192;
            buffer[offset++] = c1       & 63 | 128;
        } else if ((c1 & 0xFC00) === 0xD800 && ((c2 = string.charCodeAt(i + 1)) & 0xFC00) === 0xDC00) {
            c1 = 0x10000 + ((c1 & 0x03FF) << 10) + (c2 & 0x03FF);
            ++i;
            buffer[offset++] = c1 >> 18      | 240;
            buffer[offset++] = c1 >> 12 & 63 | 128;
            buffer[offset++] = c1 >> 6  & 63 | 128;
            buffer[offset++] = c1       & 63 | 128;
        } else {
            buffer[offset++] = c1 >> 12      | 224;
            buffer[offset++] = c1 >> 6  & 63 | 128;
            buffer[offset++] = c1       & 63 | 128;
        }
    }
    return offset - start;
};


/***/ }),
/* 194 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = pool;

/**
 * An allocator as used by {@link util.pool}.
 * @typedef PoolAllocator
 * @type {function}
 * @param {number} size Buffer size
 * @returns {Uint8Array} Buffer
 */

/**
 * A slicer as used by {@link util.pool}.
 * @typedef PoolSlicer
 * @type {function}
 * @param {number} start Start offset
 * @param {number} end End offset
 * @returns {Uint8Array} Buffer slice
 * @this {Uint8Array}
 */

/**
 * A general purpose buffer pool.
 * @memberof util
 * @function
 * @param {PoolAllocator} alloc Allocator
 * @param {PoolSlicer} slice Slicer
 * @param {number} [size=8192] Slab size
 * @returns {PoolAllocator} Pooled allocator
 */
function pool(alloc, slice, size) {
    var SIZE   = size || 8192;
    var MAX    = SIZE >>> 1;
    var slab   = null;
    var offset = SIZE;
    return function pool_alloc(size) {
        if (size < 1 || size > MAX)
            return alloc(size);
        if (offset + size > SIZE) {
            slab = alloc(SIZE);
            offset = 0;
        }
        var buf = slice.call(slab, offset, offset += size);
        if (offset & 7) // align to 32 bit
            offset = (offset | 7) + 1;
        return buf;
    };
}


/***/ }),
/* 195 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = LongBits;

var util = __webpack_require__(25);

/**
 * Constructs new long bits.
 * @classdesc Helper class for working with the low and high bits of a 64 bit value.
 * @memberof util
 * @constructor
 * @param {number} lo Low 32 bits, unsigned
 * @param {number} hi High 32 bits, unsigned
 */
function LongBits(lo, hi) {

    // note that the casts below are theoretically unnecessary as of today, but older statically
    // generated converter code might still call the ctor with signed 32bits. kept for compat.

    /**
     * Low bits.
     * @type {number}
     */
    this.lo = lo >>> 0;

    /**
     * High bits.
     * @type {number}
     */
    this.hi = hi >>> 0;
}

/**
 * Zero bits.
 * @memberof util.LongBits
 * @type {util.LongBits}
 */
var zero = LongBits.zero = new LongBits(0, 0);

zero.toNumber = function() { return 0; };
zero.zzEncode = zero.zzDecode = function() { return this; };
zero.length = function() { return 1; };

/**
 * Zero hash.
 * @memberof util.LongBits
 * @type {string}
 */
var zeroHash = LongBits.zeroHash = "\0\0\0\0\0\0\0\0";

/**
 * Constructs new long bits from the specified number.
 * @param {number} value Value
 * @returns {util.LongBits} Instance
 */
LongBits.fromNumber = function fromNumber(value) {
    if (value === 0)
        return zero;
    var sign = value < 0;
    if (sign)
        value = -value;
    var lo = value >>> 0,
        hi = (value - lo) / 4294967296 >>> 0;
    if (sign) {
        hi = ~hi >>> 0;
        lo = ~lo >>> 0;
        if (++lo > 4294967295) {
            lo = 0;
            if (++hi > 4294967295)
                hi = 0;
        }
    }
    return new LongBits(lo, hi);
};

/**
 * Constructs new long bits from a number, long or string.
 * @param {Long|number|string} value Value
 * @returns {util.LongBits} Instance
 */
LongBits.from = function from(value) {
    if (typeof value === "number")
        return LongBits.fromNumber(value);
    if (util.isString(value)) {
        /* istanbul ignore else */
        if (util.Long)
            value = util.Long.fromString(value);
        else
            return LongBits.fromNumber(parseInt(value, 10));
    }
    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;
};

/**
 * Converts this long bits to a possibly unsafe JavaScript number.
 * @param {boolean} [unsigned=false] Whether unsigned or not
 * @returns {number} Possibly unsafe number
 */
LongBits.prototype.toNumber = function toNumber(unsigned) {
    if (!unsigned && this.hi >>> 31) {
        var lo = ~this.lo + 1 >>> 0,
            hi = ~this.hi     >>> 0;
        if (!lo)
            hi = hi + 1 >>> 0;
        return -(lo + hi * 4294967296);
    }
    return this.lo + this.hi * 4294967296;
};

/**
 * Converts this long bits to a long.
 * @param {boolean} [unsigned=false] Whether unsigned or not
 * @returns {Long} Long
 */
LongBits.prototype.toLong = function toLong(unsigned) {
    return util.Long
        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))
        /* istanbul ignore next */
        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };
};

var charCodeAt = String.prototype.charCodeAt;

/**
 * Constructs new long bits from the specified 8 characters long hash.
 * @param {string} hash Hash
 * @returns {util.LongBits} Bits
 */
LongBits.fromHash = function fromHash(hash) {
    if (hash === zeroHash)
        return zero;
    return new LongBits(
        ( charCodeAt.call(hash, 0)
        | charCodeAt.call(hash, 1) << 8
        | charCodeAt.call(hash, 2) << 16
        | charCodeAt.call(hash, 3) << 24) >>> 0
    ,
        ( charCodeAt.call(hash, 4)
        | charCodeAt.call(hash, 5) << 8
        | charCodeAt.call(hash, 6) << 16
        | charCodeAt.call(hash, 7) << 24) >>> 0
    );
};

/**
 * Converts this long bits to a 8 characters long hash.
 * @returns {string} Hash
 */
LongBits.prototype.toHash = function toHash() {
    return String.fromCharCode(
        this.lo        & 255,
        this.lo >>> 8  & 255,
        this.lo >>> 16 & 255,
        this.lo >>> 24      ,
        this.hi        & 255,
        this.hi >>> 8  & 255,
        this.hi >>> 16 & 255,
        this.hi >>> 24
    );
};

/**
 * Zig-zag encodes this long bits.
 * @returns {util.LongBits} `this`
 */
LongBits.prototype.zzEncode = function zzEncode() {
    var mask =   this.hi >> 31;
    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;
    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;
    return this;
};

/**
 * Zig-zag decodes this long bits.
 * @returns {util.LongBits} `this`
 */
LongBits.prototype.zzDecode = function zzDecode() {
    var mask = -(this.lo & 1);
    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;
    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;
    return this;
};

/**
 * Calculates the length of this longbits when encoded as a varint.
 * @returns {number} Length
 */
LongBits.prototype.length = function length() {
    var part0 =  this.lo,
        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,
        part2 =  this.hi >>> 24;
    return part2 === 0
         ? part1 === 0
           ? part0 < 16384
             ? part0 < 128 ? 1 : 2
             : part0 < 2097152 ? 3 : 4
           : part1 < 16384
             ? part1 < 128 ? 5 : 6
             : part1 < 2097152 ? 7 : 8
         : part2 < 128 ? 9 : 10;
};


/***/ }),
/* 196 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = BufferWriter;

// extends Writer
var Writer = __webpack_require__(123);
(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;

var util = __webpack_require__(25);

/**
 * Constructs a new buffer writer instance.
 * @classdesc Wire format writer using node buffers.
 * @extends Writer
 * @constructor
 */
function BufferWriter() {
    Writer.call(this);
}

BufferWriter._configure = function () {
    /**
     * Allocates a buffer of the specified size.
     * @param {number} size Buffer size
     * @returns {Buffer} Buffer
     */
    BufferWriter.alloc = util._Buffer_allocUnsafe;

    BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === "set"
        ? function writeBytesBuffer_set(val, buf, pos) {
          buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)
          // also works for plain array values
        }
        /* istanbul ignore next */
        : function writeBytesBuffer_copy(val, buf, pos) {
          if (val.copy) // Buffer values
            val.copy(buf, pos, 0, val.length);
          else for (var i = 0; i < val.length;) // plain array values
            buf[pos++] = val[i++];
        };
};


/**
 * @override
 */
BufferWriter.prototype.bytes = function write_bytes_buffer(value) {
    if (util.isString(value))
        value = util._Buffer_from(value, "base64");
    var len = value.length >>> 0;
    this.uint32(len);
    if (len)
        this._push(BufferWriter.writeBytesBuffer, len, value);
    return this;
};

function writeStringBuffer(val, buf, pos) {
    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)
        util.utf8.write(val, buf, pos);
    else
        buf.utf8Write ? buf.utf8Write(val, pos) : buf.write(val, pos);
}

/**
 * @override
 */
BufferWriter.prototype.string = function write_string_buffer(value) {
    var len = util.Buffer.byteLength(value);
    this.uint32(len);
    if (len)
        this._push(writeStringBuffer, len, value);
    return this;
};


/**
 * Finishes the write operation.
 * @name BufferWriter#finish
 * @function
 * @returns {Buffer} Finished buffer
 */

BufferWriter._configure();


/***/ }),
/* 197 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = BufferReader;

// extends Reader
var Reader = __webpack_require__(124);
(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;

var util = __webpack_require__(25);

/**
 * Constructs a new buffer reader instance.
 * @classdesc Wire format reader using node buffers.
 * @extends Reader
 * @constructor
 * @param {Buffer} buffer Buffer to read from
 */
function BufferReader(buffer) {
    Reader.call(this, buffer);

    /**
     * Read buffer.
     * @name BufferReader#buf
     * @type {Buffer}
     */
}

BufferReader._configure = function () {
    /* istanbul ignore else */
    if (util.Buffer)
        BufferReader.prototype._slice = util.Buffer.prototype.slice;
};


/**
 * @override
 */
BufferReader.prototype.string = function read_string_buffer() {
    var len = this.uint32(); // modifies pos
    return this.buf.utf8Slice
        ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len))
        : this.buf.toString('utf-8', this.pos, this.pos = Math.min(this.pos + len, this.len))
};

/**
 * Reads a sequence of bytes preceeded by its length as a varint.
 * @name BufferReader#bytes
 * @function
 * @returns {Buffer} Value read
 */

BufferReader._configure();


/***/ }),
/* 198 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Streaming RPC helpers.
 * @namespace
 */
var rpc = exports;

/**
 * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.
 * @typedef RPCImpl
 * @type {function}
 * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called
 * @param {Uint8Array} requestData Request data
 * @param {RPCImplCallback} callback Callback function
 * @returns {undefined}
 * @example
 * function rpcImpl(method, requestData, callback) {
 *     if (protobuf.util.lcFirst(method.name) !== "myMethod") // compatible with static code
 *         throw Error("no such method");
 *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {
 *         callback(err, responseData);
 *     });
 * }
 */

/**
 * Node-style callback as used by {@link RPCImpl}.
 * @typedef RPCImplCallback
 * @type {function}
 * @param {Error|null} error Error, if any, otherwise `null`
 * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error
 * @returns {undefined}
 */

rpc.Service = __webpack_require__(199);


/***/ }),
/* 199 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = Service;

var util = __webpack_require__(25);

// Extends EventEmitter
(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;

/**
 * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.
 *
 * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.
 * @typedef rpc.ServiceMethodCallback
 * @template TRes extends Message<TRes>
 * @type {function}
 * @param {Error|null} error Error, if any
 * @param {TRes} [response] Response message
 * @returns {undefined}
 */

/**
 * A service method part of a {@link rpc.Service} as created by {@link Service.create}.
 * @typedef rpc.ServiceMethod
 * @template TReq extends Message<TReq>
 * @template TRes extends Message<TRes>
 * @type {function}
 * @param {TReq|Properties<TReq>} request Request message or plain object
 * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message
 * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`
 */

/**
 * Constructs a new RPC service instance.
 * @classdesc An RPC service as returned by {@link Service#create}.
 * @exports rpc.Service
 * @extends util.EventEmitter
 * @constructor
 * @param {RPCImpl} rpcImpl RPC implementation
 * @param {boolean} [requestDelimited=false] Whether requests are length-delimited
 * @param {boolean} [responseDelimited=false] Whether responses are length-delimited
 */
function Service(rpcImpl, requestDelimited, responseDelimited) {

    if (typeof rpcImpl !== "function")
        throw TypeError("rpcImpl must be a function");

    util.EventEmitter.call(this);

    /**
     * RPC implementation. Becomes `null` once the service is ended.
     * @type {RPCImpl|null}
     */
    this.rpcImpl = rpcImpl;

    /**
     * Whether requests are length-delimited.
     * @type {boolean}
     */
    this.requestDelimited = Boolean(requestDelimited);

    /**
     * Whether responses are length-delimited.
     * @type {boolean}
     */
    this.responseDelimited = Boolean(responseDelimited);
}

/**
 * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.
 * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method
 * @param {Constructor<TReq>} requestCtor Request constructor
 * @param {Constructor<TRes>} responseCtor Response constructor
 * @param {TReq|Properties<TReq>} request Request message or plain object
 * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback
 * @returns {undefined}
 * @template TReq extends Message<TReq>
 * @template TRes extends Message<TRes>
 */
Service.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {

    if (!request)
        throw TypeError("request must be specified");

    var self = this;
    if (!callback)
        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);

    if (!self.rpcImpl) {
        setTimeout(function() { callback(Error("already ended")); }, 0);
        return undefined;
    }

    try {
        return self.rpcImpl(
            method,
            requestCtor[self.requestDelimited ? "encodeDelimited" : "encode"](request).finish(),
            function rpcCallback(err, response) {

                if (err) {
                    self.emit("error", err, method);
                    return callback(err);
                }

                if (response === null) {
                    self.end(/* endedByRPC */ true);
                    return undefined;
                }

                if (!(response instanceof responseCtor)) {
                    try {
                        response = responseCtor[self.responseDelimited ? "decodeDelimited" : "decode"](response);
                    } catch (err) {
                        self.emit("error", err, method);
                        return callback(err);
                    }
                }

                self.emit("data", response, method);
                return callback(null, response);
            }
        );
    } catch (err) {
        self.emit("error", err, method);
        setTimeout(function() { callback(err); }, 0);
        return undefined;
    }
};

/**
 * Ends this service and emits the `end` event.
 * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.
 * @returns {rpc.Service} `this`
 */
Service.prototype.end = function end(endedByRPC) {
    if (this.rpcImpl) {
        if (!endedByRPC) // signal end to rpcImpl
            this.rpcImpl(null, null, null);
        this.rpcImpl = null;
        this.emit("end").off();
    }
    return this;
};


/***/ }),
/* 200 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = {};

/**
 * Named roots.
 * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).
 * Can also be used manually to make roots available accross modules.
 * @name roots
 * @type {Object.<string,Root>}
 * @example
 * // pbjs -r myroot -o compiled.js ...
 *
 * // in another module:
 * require("./compiled.js");
 *
 * // in any subsequent module:
 * var root = protobuf.roots["myroot"];
 */


/***/ }),
/* 201 */
/***/ (function(module, exports, __webpack_require__) {

var $ = __webpack_require__(14);
var assign = __webpack_require__(202);

// `Object.assign` method
// https://tc39.github.io/ecma262/#sec-object.assign
$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {
  assign: assign
});


/***/ }),
/* 202 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__(10);
var fails = __webpack_require__(4);
var objectKeys = __webpack_require__(43);
var getOwnPropertySymbolsModule = __webpack_require__(59);
var propertyIsEnumerableModule = __webpack_require__(58);
var toObject = __webpack_require__(16);
var IndexedObject = __webpack_require__(39);

var nativeAssign = Object.assign;
var defineProperty = Object.defineProperty;

// `Object.assign` method
// https://tc39.github.io/ecma262/#sec-object.assign
module.exports = !nativeAssign || fails(function () {
  // should have correct order of operations (Edge bug)
  if (DESCRIPTORS && nativeAssign({ b: 1 }, nativeAssign(defineProperty({}, 'a', {
    enumerable: true,
    get: function () {
      defineProperty(this, 'b', {
        value: 3,
        enumerable: false
      });
    }
  }), { b: 2 })).b !== 1) return true;
  // should work with symbols and should have deterministic property order (V8 bug)
  var A = {};
  var B = {};
  // eslint-disable-next-line no-undef
  var symbol = Symbol();
  var alphabet = 'abcdefghijklmnopqrst';
  A[symbol] = 7;
  alphabet.split('').forEach(function (chr) { B[chr] = chr; });
  return nativeAssign({}, A)[symbol] != 7 || objectKeys(nativeAssign({}, B)).join('') != alphabet;
}) ? function assign(target, source) { // eslint-disable-line no-unused-vars
  var T = toObject(target);
  var argumentsLength = arguments.length;
  var index = 1;
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  var propertyIsEnumerable = propertyIsEnumerableModule.f;
  while (argumentsLength > index) {
    var S = IndexedObject(arguments[index++]);
    var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);
    var length = keys.length;
    var j = 0;
    var key;
    while (length > j) {
      key = keys[j++];
      if (!DESCRIPTORS || propertyIsEnumerable.call(S, key)) T[key] = S[key];
    }
  } return T;
} : nativeAssign;


/***/ }),
/* 203 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(14);
var global = __webpack_require__(2);
var getBuiltIn = __webpack_require__(27);
var IS_PURE = __webpack_require__(26);
var DESCRIPTORS = __webpack_require__(10);
var NATIVE_SYMBOL = __webpack_require__(55);
var USE_SYMBOL_AS_UID = __webpack_require__(92);
var fails = __webpack_require__(4);
var has = __webpack_require__(7);
var isArray = __webpack_require__(114);
var isObject = __webpack_require__(8);
var anObject = __webpack_require__(13);
var toObject = __webpack_require__(16);
var toIndexedObject = __webpack_require__(20);
var toPrimitive = __webpack_require__(40);
var createPropertyDescriptor = __webpack_require__(30);
var nativeObjectCreate = __webpack_require__(42);
var objectKeys = __webpack_require__(43);
var getOwnPropertyNamesModule = __webpack_require__(32);
var getOwnPropertyNamesExternal = __webpack_require__(204);
var getOwnPropertySymbolsModule = __webpack_require__(59);
var getOwnPropertyDescriptorModule = __webpack_require__(28);
var definePropertyModule = __webpack_require__(12);
var propertyIsEnumerableModule = __webpack_require__(58);
var createNonEnumerableProperty = __webpack_require__(15);
var redefine = __webpack_require__(19);
var shared = __webpack_require__(52);
var sharedKey = __webpack_require__(47);
var hiddenKeys = __webpack_require__(46);
var uid = __webpack_require__(41);
var wellKnownSymbol = __webpack_require__(5);
var wrappedWellKnownSymbolModule = __webpack_require__(127);
var defineWellKnownSymbol = __webpack_require__(128);
var setToStringTag = __webpack_require__(33);
var InternalStateModule = __webpack_require__(23);
var $forEach = __webpack_require__(17).forEach;

var HIDDEN = sharedKey('hidden');
var SYMBOL = 'Symbol';
var PROTOTYPE = 'prototype';
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(SYMBOL);
var ObjectPrototype = Object[PROTOTYPE];
var $Symbol = global.Symbol;
var $stringify = getBuiltIn('JSON', 'stringify');
var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
var nativeDefineProperty = definePropertyModule.f;
var nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;
var nativePropertyIsEnumerable = propertyIsEnumerableModule.f;
var AllSymbols = shared('symbols');
var ObjectPrototypeSymbols = shared('op-symbols');
var StringToSymbolRegistry = shared('string-to-symbol-registry');
var SymbolToStringRegistry = shared('symbol-to-string-registry');
var WellKnownSymbolsStore = shared('wks');
var QObject = global.QObject;
// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173
var USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;

// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687
var setSymbolDescriptor = DESCRIPTORS && fails(function () {
  return nativeObjectCreate(nativeDefineProperty({}, 'a', {
    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }
  })).a != 7;
}) ? function (O, P, Attributes) {
  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);
  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];
  nativeDefineProperty(O, P, Attributes);
  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {
    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);
  }
} : nativeDefineProperty;

var wrap = function (tag, description) {
  var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);
  setInternalState(symbol, {
    type: SYMBOL,
    tag: tag,
    description: description
  });
  if (!DESCRIPTORS) symbol.description = description;
  return symbol;
};

var isSymbol = USE_SYMBOL_AS_UID ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  return Object(it) instanceof $Symbol;
};

var $defineProperty = function defineProperty(O, P, Attributes) {
  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);
  anObject(O);
  var key = toPrimitive(P, true);
  anObject(Attributes);
  if (has(AllSymbols, key)) {
    if (!Attributes.enumerable) {
      if (!has(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));
      O[HIDDEN][key] = true;
    } else {
      if (has(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;
      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });
    } return setSymbolDescriptor(O, key, Attributes);
  } return nativeDefineProperty(O, key, Attributes);
};

var $defineProperties = function defineProperties(O, Properties) {
  anObject(O);
  var properties = toIndexedObject(Properties);
  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));
  $forEach(keys, function (key) {
    if (!DESCRIPTORS || $propertyIsEnumerable.call(properties, key)) $defineProperty(O, key, properties[key]);
  });
  return O;
};

var $create = function create(O, Properties) {
  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);
};

var $propertyIsEnumerable = function propertyIsEnumerable(V) {
  var P = toPrimitive(V, true);
  var enumerable = nativePropertyIsEnumerable.call(this, P);
  if (this === ObjectPrototype && has(AllSymbols, P) && !has(ObjectPrototypeSymbols, P)) return false;
  return enumerable || !has(this, P) || !has(AllSymbols, P) || has(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;
};

var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {
  var it = toIndexedObject(O);
  var key = toPrimitive(P, true);
  if (it === ObjectPrototype && has(AllSymbols, key) && !has(ObjectPrototypeSymbols, key)) return;
  var descriptor = nativeGetOwnPropertyDescriptor(it, key);
  if (descriptor && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) {
    descriptor.enumerable = true;
  }
  return descriptor;
};

var $getOwnPropertyNames = function getOwnPropertyNames(O) {
  var names = nativeGetOwnPropertyNames(toIndexedObject(O));
  var result = [];
  $forEach(names, function (key) {
    if (!has(AllSymbols, key) && !has(hiddenKeys, key)) result.push(key);
  });
  return result;
};

var $getOwnPropertySymbols = function getOwnPropertySymbols(O) {
  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;
  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));
  var result = [];
  $forEach(names, function (key) {
    if (has(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || has(ObjectPrototype, key))) {
      result.push(AllSymbols[key]);
    }
  });
  return result;
};

// `Symbol` constructor
// https://tc39.github.io/ecma262/#sec-symbol-constructor
if (!NATIVE_SYMBOL) {
  $Symbol = function Symbol() {
    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor');
    var description = !arguments.length || arguments[0] === undefined ? undefined : String(arguments[0]);
    var tag = uid(description);
    var setter = function (value) {
      if (this === ObjectPrototype) setter.call(ObjectPrototypeSymbols, value);
      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;
      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));
    };
    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });
    return wrap(tag, description);
  };

  redefine($Symbol[PROTOTYPE], 'toString', function toString() {
    return getInternalState(this).tag;
  });

  redefine($Symbol, 'withoutSetter', function (description) {
    return wrap(uid(description), description);
  });

  propertyIsEnumerableModule.f = $propertyIsEnumerable;
  definePropertyModule.f = $defineProperty;
  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;
  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;
  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;

  wrappedWellKnownSymbolModule.f = function (name) {
    return wrap(wellKnownSymbol(name), name);
  };

  if (DESCRIPTORS) {
    // https://github.com/tc39/proposal-Symbol-description
    nativeDefineProperty($Symbol[PROTOTYPE], 'description', {
      configurable: true,
      get: function description() {
        return getInternalState(this).description;
      }
    });
    if (!IS_PURE) {
      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });
    }
  }
}

$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {
  Symbol: $Symbol
});

$forEach(objectKeys(WellKnownSymbolsStore), function (name) {
  defineWellKnownSymbol(name);
});

$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {
  // `Symbol.for` method
  // https://tc39.github.io/ecma262/#sec-symbol.for
  'for': function (key) {
    var string = String(key);
    if (has(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];
    var symbol = $Symbol(string);
    StringToSymbolRegistry[string] = symbol;
    SymbolToStringRegistry[symbol] = string;
    return symbol;
  },
  // `Symbol.keyFor` method
  // https://tc39.github.io/ecma262/#sec-symbol.keyfor
  keyFor: function keyFor(sym) {
    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');
    if (has(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];
  },
  useSetter: function () { USE_SETTER = true; },
  useSimple: function () { USE_SETTER = false; }
});

$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {
  // `Object.create` method
  // https://tc39.github.io/ecma262/#sec-object.create
  create: $create,
  // `Object.defineProperty` method
  // https://tc39.github.io/ecma262/#sec-object.defineproperty
  defineProperty: $defineProperty,
  // `Object.defineProperties` method
  // https://tc39.github.io/ecma262/#sec-object.defineproperties
  defineProperties: $defineProperties,
  // `Object.getOwnPropertyDescriptor` method
  // https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptors
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor
});

$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {
  // `Object.getOwnPropertyNames` method
  // https://tc39.github.io/ecma262/#sec-object.getownpropertynames
  getOwnPropertyNames: $getOwnPropertyNames,
  // `Object.getOwnPropertySymbols` method
  // https://tc39.github.io/ecma262/#sec-object.getownpropertysymbols
  getOwnPropertySymbols: $getOwnPropertySymbols
});

// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives
// https://bugs.chromium.org/p/v8/issues/detail?id=3443
$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {
  getOwnPropertySymbols: function getOwnPropertySymbols(it) {
    return getOwnPropertySymbolsModule.f(toObject(it));
  }
});

// `JSON.stringify` method behavior with symbols
// https://tc39.github.io/ecma262/#sec-json.stringify
if ($stringify) {
  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {
    var symbol = $Symbol();
    // MS Edge converts symbol values to JSON as {}
    return $stringify([symbol]) != '[null]'
      // WebKit converts symbol values to JSON as null
      || $stringify({ a: symbol }) != '{}'
      // V8 throws on boxed symbols
      || $stringify(Object(symbol)) != '{}';
  });

  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {
    // eslint-disable-next-line no-unused-vars
    stringify: function stringify(it, replacer, space) {
      var args = [it];
      var index = 1;
      var $replacer;
      while (arguments.length > index) args.push(arguments[index++]);
      $replacer = replacer;
      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined
      if (!isArray(replacer)) replacer = function (key, value) {
        if (typeof $replacer == 'function') value = $replacer.call(this, key, value);
        if (!isSymbol(value)) return value;
      };
      args[1] = replacer;
      return $stringify.apply(null, args);
    }
  });
}

// `Symbol.prototype[@@toPrimitive]` method
// https://tc39.github.io/ecma262/#sec-symbol.prototype-@@toprimitive
if (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) {
  createNonEnumerableProperty($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);
}
// `Symbol.prototype[@@toStringTag]` property
// https://tc39.github.io/ecma262/#sec-symbol.prototype-@@tostringtag
setToStringTag($Symbol, SYMBOL);

hiddenKeys[HIDDEN] = true;


/***/ }),
/* 204 */
/***/ (function(module, exports, __webpack_require__) {

var toIndexedObject = __webpack_require__(20);
var nativeGetOwnPropertyNames = __webpack_require__(32).f;

var toString = {}.toString;

var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames
  ? Object.getOwnPropertyNames(window) : [];

var getWindowNames = function (it) {
  try {
    return nativeGetOwnPropertyNames(it);
  } catch (error) {
    return windowNames.slice();
  }
};

// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window
module.exports.f = function getOwnPropertyNames(it) {
  return windowNames && toString.call(it) == '[object Window]'
    ? getWindowNames(it)
    : nativeGetOwnPropertyNames(toIndexedObject(it));
};


/***/ }),
/* 205 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// `Symbol.prototype.description` getter
// https://tc39.github.io/ecma262/#sec-symbol.prototype.description

var $ = __webpack_require__(14);
var DESCRIPTORS = __webpack_require__(10);
var global = __webpack_require__(2);
var has = __webpack_require__(7);
var isObject = __webpack_require__(8);
var defineProperty = __webpack_require__(12).f;
var copyConstructorProperties = __webpack_require__(97);

var NativeSymbol = global.Symbol;

if (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||
  // Safari 12 bug
  NativeSymbol().description !== undefined
)) {
  var EmptyStringDescriptionStore = {};
  // wrap Symbol constructor for correct work with undefined description
  var SymbolWrapper = function Symbol() {
    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);
    var result = this instanceof SymbolWrapper
      ? new NativeSymbol(description)
      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'
      : description === undefined ? NativeSymbol() : NativeSymbol(description);
    if (description === '') EmptyStringDescriptionStore[result] = true;
    return result;
  };
  copyConstructorProperties(SymbolWrapper, NativeSymbol);
  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;
  symbolPrototype.constructor = SymbolWrapper;

  var symbolToString = symbolPrototype.toString;
  var native = String(NativeSymbol('test')) == 'Symbol(test)';
  var regexp = /^Symbol\((.*)\)[^)]+$/;
  defineProperty(symbolPrototype, 'description', {
    configurable: true,
    get: function description() {
      var symbol = isObject(this) ? this.valueOf() : this;
      var string = symbolToString.call(symbol);
      if (has(EmptyStringDescriptionStore, symbol)) return '';
      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');
      return desc === '' ? undefined : desc;
    }
  });

  $({ global: true, forced: true }, {
    Symbol: SymbolWrapper
  });
}


/***/ }),
/* 206 */
/***/ (function(module, exports, __webpack_require__) {

var defineWellKnownSymbol = __webpack_require__(128);

// `Symbol.iterator` well-known symbol
// https://tc39.github.io/ecma262/#sec-symbol.iterator
defineWellKnownSymbol('iterator');


/***/ }),
/* 207 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(14);
var $map = __webpack_require__(17).map;
var arrayMethodHasSpeciesSupport = __webpack_require__(208);
var arrayMethodUsesToLength = __webpack_require__(75);

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');
// FF49- issue
var USES_TO_LENGTH = arrayMethodUsesToLength('map');

// `Array.prototype.map` method
// https://tc39.github.io/ecma262/#sec-array.prototype.map
// with adding support of @@species
$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {
  map: function map(callbackfn /* , thisArg */) {
    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),
/* 208 */
/***/ (function(module, exports, __webpack_require__) {

var fails = __webpack_require__(4);
var wellKnownSymbol = __webpack_require__(5);
var V8_VERSION = __webpack_require__(109);

var SPECIES = wellKnownSymbol('species');

module.exports = function (METHOD_NAME) {
  // We can't use this feature detection in V8 since it causes
  // deoptimization and serious performance degradation
  // https://github.com/zloirock/core-js/issues/677
  return V8_VERSION >= 51 || !fails(function () {
    var array = [];
    var constructor = array.constructor = {};
    constructor[SPECIES] = function () {
      return { foo: 1 };
    };
    return array[METHOD_NAME](Boolean).foo !== 1;
  });
};


/***/ }),
/* 209 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(14);
var getOwnPropertyDescriptor = __webpack_require__(28).f;
var toLength = __webpack_require__(9);
var notARegExp = __webpack_require__(130);
var requireObjectCoercible = __webpack_require__(29);
var correctIsRegExpLogic = __webpack_require__(131);
var IS_PURE = __webpack_require__(26);

var nativeEndsWith = ''.endsWith;
var min = Math.min;

var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');
// https://github.com/zloirock/core-js/pull/702
var MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {
  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');
  return descriptor && !descriptor.writable;
}();

// `String.prototype.endsWith` method
// https://tc39.github.io/ecma262/#sec-string.prototype.endswith
$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {
  endsWith: function endsWith(searchString /* , endPosition = @length */) {
    var that = String(requireObjectCoercible(this));
    notARegExp(searchString);
    var endPosition = arguments.length > 1 ? arguments[1] : undefined;
    var len = toLength(that.length);
    var end = endPosition === undefined ? len : min(toLength(endPosition), len);
    var search = String(searchString);
    return nativeEndsWith
      ? nativeEndsWith.call(that, search, end)
      : that.slice(end - search.length, end) === search;
  }
});


/***/ }),
/* 210 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(8);
var classof = __webpack_require__(21);
var wellKnownSymbol = __webpack_require__(5);

var MATCH = wellKnownSymbol('match');

// `IsRegExp` abstract operation
// https://tc39.github.io/ecma262/#sec-isregexp
module.exports = function (it) {
  var isRegExp;
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');
};


/***/ }),
/* 211 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var charAt = __webpack_require__(212).charAt;
var InternalStateModule = __webpack_require__(23);
var defineIterator = __webpack_require__(96);

var STRING_ITERATOR = 'String Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);

// `String.prototype[@@iterator]` method
// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator
defineIterator(String, 'String', function (iterated) {
  setInternalState(this, {
    type: STRING_ITERATOR,
    string: String(iterated),
    index: 0
  });
// `%StringIteratorPrototype%.next` method
// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next
}, function next() {
  var state = getInternalState(this);
  var string = state.string;
  var index = state.index;
  var point;
  if (index >= string.length) return { value: undefined, done: true };
  point = charAt(string, index);
  state.index += point.length;
  return { value: point, done: false };
});


/***/ }),
/* 212 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(22);
var requireObjectCoercible = __webpack_require__(29);

// `String.prototype.{ codePointAt, at }` methods implementation
var createMethod = function (CONVERT_TO_STRING) {
  return function ($this, pos) {
    var S = String(requireObjectCoercible($this));
    var position = toInteger(pos);
    var size = S.length;
    var first, second;
    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;
    first = S.charCodeAt(position);
    return first < 0xD800 || first > 0xDBFF || position + 1 === size
      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF
        ? CONVERT_TO_STRING ? S.charAt(position) : first
        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
  };
};

module.exports = {
  // `String.prototype.codePointAt` method
  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat
  codeAt: createMethod(false),
  // `String.prototype.at` method
  // https://github.com/mathiasbynens/String.prototype.at
  charAt: createMethod(true)
};


/***/ }),
/* 213 */
/***/ (function(module, exports) {

// iterable DOM collections
// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods
module.exports = {
  CSSRuleList: 0,
  CSSStyleDeclaration: 0,
  CSSValueList: 0,
  ClientRectList: 0,
  DOMRectList: 0,
  DOMStringList: 0,
  DOMTokenList: 1,
  DataTransferItemList: 0,
  FileList: 0,
  HTMLAllCollection: 0,
  HTMLCollection: 0,
  HTMLFormElement: 0,
  HTMLSelectElement: 0,
  MediaList: 0,
  MimeTypeArray: 0,
  NamedNodeMap: 0,
  NodeList: 1,
  PaintRequestList: 0,
  Plugin: 0,
  PluginArray: 0,
  SVGLengthList: 0,
  SVGNumberList: 0,
  SVGPathSegList: 0,
  SVGPointList: 0,
  SVGStringList: 0,
  SVGTransformList: 0,
  SourceBufferList: 0,
  StyleSheetList: 0,
  TextTrackCueList: 0,
  TextTrackList: 0,
  TouchList: 0
};


/***/ }),
/* 214 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(14);
var $includes = __webpack_require__(44).includes;
var addToUnscopables = __webpack_require__(89);
var arrayMethodUsesToLength = __webpack_require__(75);

var USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });

// `Array.prototype.includes` method
// https://tc39.github.io/ecma262/#sec-array.prototype.includes
$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {
  includes: function includes(el /* , fromIndex = 0 */) {
    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
  }
});

// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('includes');


/***/ }),
/* 215 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(14);
var exec = __webpack_require__(216);

$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {
  exec: exec
});


/***/ }),
/* 216 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var regexpFlags = __webpack_require__(126);
var stickyHelpers = __webpack_require__(217);

var nativeExec = RegExp.prototype.exec;
// This always refers to the native implementation, because the
// String#replace polyfill uses ./fix-regexp-well-known-symbol-logic.js,
// which loads this file before patching the method.
var nativeReplace = String.prototype.replace;

var patchedExec = nativeExec;

var UPDATES_LAST_INDEX_WRONG = (function () {
  var re1 = /a/;
  var re2 = /b*/g;
  nativeExec.call(re1, 'a');
  nativeExec.call(re2, 'a');
  return re1.lastIndex !== 0 || re2.lastIndex !== 0;
})();

var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y || stickyHelpers.BROKEN_CARET;

// nonparticipating capturing group, copied from es5-shim's String#split patch.
var NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;

var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y;

if (PATCH) {
  patchedExec = function exec(str) {
    var re = this;
    var lastIndex, reCopy, match, i;
    var sticky = UNSUPPORTED_Y && re.sticky;
    var flags = regexpFlags.call(re);
    var source = re.source;
    var charsAdded = 0;
    var strCopy = str;

    if (sticky) {
      flags = flags.replace('y', '');
      if (flags.indexOf('g') === -1) {
        flags += 'g';
      }

      strCopy = String(str).slice(re.lastIndex);
      // Support anchored sticky behavior.
      if (re.lastIndex > 0 && (!re.multiline || re.multiline && str[re.lastIndex - 1] !== '\n')) {
        source = '(?: ' + source + ')';
        strCopy = ' ' + strCopy;
        charsAdded++;
      }
      // ^(? + rx + ) is needed, in combination with some str slicing, to
      // simulate the 'y' flag.
      reCopy = new RegExp('^(?:' + source + ')', flags);
    }

    if (NPCG_INCLUDED) {
      reCopy = new RegExp('^' + source + '$(?!\\s)', flags);
    }
    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;

    match = nativeExec.call(sticky ? reCopy : re, strCopy);

    if (sticky) {
      if (match) {
        match.input = match.input.slice(charsAdded);
        match[0] = match[0].slice(charsAdded);
        match.index = re.lastIndex;
        re.lastIndex += match[0].length;
      } else re.lastIndex = 0;
    } else if (UPDATES_LAST_INDEX_WRONG && match) {
      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;
    }
    if (NPCG_INCLUDED && match && match.length > 1) {
      // Fix browsers whose `exec` methods don't consistently return `undefined`
      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/
      nativeReplace.call(match[0], reCopy, function () {
        for (i = 1; i < arguments.length - 2; i++) {
          if (arguments[i] === undefined) match[i] = undefined;
        }
      });
    }

    return match;
  };
}

module.exports = patchedExec;


/***/ }),
/* 217 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var fails = __webpack_require__(4);

// babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError,
// so we use an intermediate function.
function RE(s, f) {
  return RegExp(s, f);
}

exports.UNSUPPORTED_Y = fails(function () {
  // babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError
  var re = RE('a', 'y');
  re.lastIndex = 2;
  return re.exec('abcd') != null;
});

exports.BROKEN_CARET = fails(function () {
  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687
  var re = RE('^r', 'gy');
  re.lastIndex = 2;
  return re.exec('str') != null;
});


/***/ }),
/* 218 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__(14);
var notARegExp = __webpack_require__(130);
var requireObjectCoercible = __webpack_require__(29);
var correctIsRegExpLogic = __webpack_require__(131);

// `String.prototype.includes` method
// https://tc39.github.io/ecma262/#sec-string.prototype.includes
$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {
  includes: function includes(searchString /* , position = 0 */) {
    return !!~String(requireObjectCoercible(this))
      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwvcmVxdWVzdC11dGlsLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlsL25vdGlmaWNhdGlvbi11dGlsLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2ZhaWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvcHJvdG8tYnVuZGxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9oYXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLW9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8tbGVuZ3RoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9kZXNjcmlwdG9ycy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9jb25zdGFudC10cmFuc2Zvcm1lci50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYW4tb2JqZWN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9leHBvcnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NyZWF0ZS1ub24tZW51bWVyYWJsZS1wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8tb2JqZWN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1pdGVyYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcmVkZWZpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jbGFzc29mLXJhdy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8taW50ZWdlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaW50ZXJuYWwtc3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIiwid2VicGFjazovLy9EOi9wcm90b2J1Zi5qcy9zcmMvdXRpbC9taW5pbWFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1wdXJlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9nZXQtYnVpbHQtaW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3JlcXVpcmUtb2JqZWN0LWNvZXJjaWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvY3JlYXRlLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2l0ZXJhdG9ycy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktbmFtZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NldC10by1zdHJpbmctdGFnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3Qtc2V0LXByb3RvdHlwZS1vZi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2EtZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NwZWNpZXMtY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaW5kZXhlZC1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLXByaW1pdGl2ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdWlkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3QtY3JlYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3Qta2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLWFic29sdXRlLWluZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9oaWRkZW4ta2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc2hhcmVkLWtleS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWdldC1wcm90b3R5cGUtb2YuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NsYXNzb2YuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2Z1bmN0aW9uLWJpbmQtY29udGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NoYXJlZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc2V0LWdsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZG9jdW1lbnQtY3JlYXRlLWVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL25hdGl2ZS1zeW1ib2wuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2VudW0tYnVnLWtleXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2luc3BlY3Qtc291cmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3QtcHJvcGVydHktaXMtZW51bWVyYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktc3ltYm9scy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8tc3RyaW5nLXRhZy1zdXBwb3J0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hbi1pbnN0YW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LW1ldGhvZC11c2VzLXRvLWxlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9taXNlLnByb3RvdHlwZS5maW5hbGx5L3JlcXVpcmVQcm9taXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FkZC10by11bnNjb3BhYmxlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc2hhcmVkLXN0b3JlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pZTgtZG9tLWRlZmluZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdXNlLXN5bWJvbC1hcy11aWQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1rZXlzLWludGVybmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9odG1sLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9wYXRoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9kZWZpbmUtaXRlcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NvcHktY29uc3RydWN0b3ItcHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaXMtZm9yY2VkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pdGVyYXRvcnMtY29yZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcmVkZWZpbmUtYWxsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9zZXQtc3BlY2llcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaXMtYXJyYXktaXRlcmF0b3ItbWV0aG9kLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9nZXQtaXRlcmF0b3ItbWV0aG9kLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jaGVjay1jb3JyZWN0bmVzcy1vZi1pdGVyYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3Rhc2suanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2VuZ2luZS1pcy1pb3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2VuZ2luZS11c2VyLWFnZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9uZXctcHJvbWlzZS1jYXBhYmlsaXR5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9lbmdpbmUtdjgtdmVyc2lvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktYnVmZmVyLW5hdGl2ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8taW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LWZpbGwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLW9mZnNldC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaXMtYXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LXJlZHVjZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvbWlzZS1jb250cm9sbGVyL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZnVuY3Rpb24tYmluZC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGVmaW5lLXByb3BlcnRpZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29iamVjdC1rZXlzL2lzQXJndW1lbnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9taXNlLnByb3RvdHlwZS5maW5hbGx5L2ltcGxlbWVudGF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9lcy1hYnN0cmFjdC8yMDE4L1R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb21pc2UucHJvdG90eXBlLmZpbmFsbHkvcG9seWZpbGwuanMiLCJ3ZWJwYWNrOi8vL0Q6L3Byb3RvYnVmLmpzL3NyYy93cml0ZXIuanMiLCJ3ZWJwYWNrOi8vL0Q6L3Byb3RvYnVmLmpzL3NyYy9yZWFkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9yZWdleHAtZmxhZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sLXdyYXBwZWQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2RlZmluZS13ZWxsLWtub3duLXN5bWJvbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9ub3QtYS1yZWdleHAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NvcnJlY3QtaXMtcmVnZXhwLWxvZ2ljLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQtYXMtcHJvbWlzZWQvc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zZXJ2aWNlL3VzZXItc2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VydmljZS9ncm91cC1zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9zZXJ2aWNlL25vdGlmaWNhdGlvbi1zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlsL2lucHV0LWZpbGUtcmVhZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlsL3RpbWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC90dXJtcy1zdGF0dXMtY29kZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvdHVybXMtZXJyb3IudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3VuZmV0Y2gvZGlzdC91bmZldGNoLm1qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZHJpdmVyL3R1cm1zLWRyaXZlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvbWVzc2FnZS1hZGRpdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VydmljZS9tZXNzYWdlLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3R1cm1zLWNsaWVudC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0aWVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9uYXRpdmUtd2Vhay1tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL293bi1rZXlzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jcmVhdGUtaXRlcmF0b3ItY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NvcnJlY3QtcHJvdG90eXBlLWdldHRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYS1wb3NzaWJsZS1wcm90b3R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC10by1zdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL25hdGl2ZS1wcm9taXNlLWNvbnN0cnVjdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pdGVyYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jYWxsLXdpdGgtc2FmZS1pdGVyYXRpb24tY2xvc2luZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvbWljcm90YXNrLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9wcm9taXNlLXJlc29sdmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2hvc3QtcmVwb3J0LWVycm9ycy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcGVyZm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdHlwZWQtYXJyYXktY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3R5cGVkLWFycmF5LWNvbnN0cnVjdG9ycy1yZXF1aXJlLXdyYXBwZXJzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1idWZmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2llZWU3NTQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLXBvc2l0aXZlLWludGVnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3R5cGVkLWFycmF5LWZyb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY3JlYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pbmhlcml0LWlmLXJlcXVpcmVkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1jb3B5LXdpdGhpbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktbGFzdC1pbmRleC1vZi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktbWV0aG9kLWlzLXN0cmljdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2hubC9kaXN0L2NoYW5uZWwuY2pzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9taXNlLWNvbnRyb2xsZXIvc3JjL2RlZmF1bHRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9taXNlLWNvbnRyb2xsZXIvc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQtYXMtcHJvbWlzZWQvc3JjL3JlcXVlc3RzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9taXNlLnByb3RvdHlwZS5maW5hbGx5L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9mdW5jdGlvbi1iaW5kL2ltcGxlbWVudGF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vYmplY3Qta2V5cy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2JqZWN0LWtleXMvaW1wbGVtZW50YXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2VzLWFic3RyYWN0LzIwMTgvSXNDYWxsYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaXMtY2FsbGFibGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2VzLWFic3RyYWN0LzIwMTgvU3BlY2llc0NvbnN0cnVjdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9lcy1hYnN0cmFjdC9HZXRJbnRyaW5zaWMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2hhcy1zeW1ib2xzL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9oYXMtc3ltYm9scy9zaGFtcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXMtYWJzdHJhY3QvMjAxOC9Jc0NvbnN0cnVjdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9lcy1hYnN0cmFjdC81L1R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb21pc2UucHJvdG90eXBlLmZpbmFsbHkvc2hpbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2Vic29ja2V0LWFzLXByb21pc2VkL3NyYy9vcHRpb25zLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJzb2NrZXQtYXMtcHJvbWlzZWQvc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZGVjb2RlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZW5jb2RlLmpzIiwid2VicGFjazovLy9EOi9wcm90b2J1Zi5qcy9taW5pbWFsLmpzIiwid2VicGFjazovLy9EOi9wcm90b2J1Zi5qcy9zcmMvaW5kZXgtbWluaW1hbC5qcyIsIndlYnBhY2s6Ly8vRDovcHJvdG9idWYuanMvbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL2FzcHJvbWlzZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vRDovcHJvdG9idWYuanMvbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL2Jhc2U2NC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vRDovcHJvdG9idWYuanMvbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL2V2ZW50ZW1pdHRlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vRDovcHJvdG9idWYuanMvbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL2Zsb2F0L2luZGV4LmpzIiwid2VicGFjazovLy9EOi9wcm90b2J1Zi5qcy9ub2RlX21vZHVsZXMvQHByb3RvYnVmanMvaW5xdWlyZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vRDovcHJvdG9idWYuanMvbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL3V0ZjgvaW5kZXguanMiLCJ3ZWJwYWNrOi8vL0Q6L3Byb3RvYnVmLmpzL25vZGVfbW9kdWxlcy9AcHJvdG9idWZqcy9wb29sL2luZGV4LmpzIiwid2VicGFjazovLy9EOi9wcm90b2J1Zi5qcy9zcmMvdXRpbC9sb25nYml0cy5qcyIsIndlYnBhY2s6Ly8vRDovcHJvdG9idWYuanMvc3JjL3dyaXRlcl9idWZmZXIuanMiLCJ3ZWJwYWNrOi8vL0Q6L3Byb3RvYnVmLmpzL3NyYy9yZWFkZXJfYnVmZmVyLmpzIiwid2VicGFjazovLy9EOi9wcm90b2J1Zi5qcy9zcmMvcnBjLmpzIiwid2VicGFjazovLy9EOi9wcm90b2J1Zi5qcy9zcmMvcnBjL3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vL0Q6L3Byb3RvYnVmLmpzL3NyYy9yb290cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5hc3NpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1hc3NpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LW5hbWVzLWV4dGVybmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1tZXRob2QtaGFzLXNwZWNpZXMtc3VwcG9ydC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5lbmRzLXdpdGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLXJlZ2V4cC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc3RyaW5nLW11bHRpYnl0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZG9tLWl0ZXJhYmxlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3JlZ2V4cC1leGVjLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9yZWdleHAtc3RpY2t5LWhlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMENBQTBDLGdDQUFnQztRQUMxRTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLHdEQUF3RCxrQkFBa0I7UUFDMUU7UUFDQSxpREFBaUQsY0FBYztRQUMvRDs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtR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QTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsb0VBQW9FO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsb0RBQW9EO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIseURBQXlEO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQWdFO0FBQzVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsdURBQXVEO0FBQ25GO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsMERBQTBEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNERBQTREO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNkRBQTZEO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIseURBQXlEO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNkRBQTZEO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsaURBQWlEO0FBQzdFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsMERBQTBEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQThEO0FBQzFGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIseURBQXlEO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQThEO0FBQzFGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIseURBQXlEO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsMERBQTBEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQTJEO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQThEO0FBQzFGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIseURBQXlEO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsMERBQTBEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQThEO0FBQzFGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIseURBQXlEO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsa0RBQWtEO0FBQzlFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsa0RBQWtEO0FBQzlFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsaURBQWlEO0FBQzdFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQTJEO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNkRBQTZEO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsa0RBQWtEO0FBQzlFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsaUVBQWlFO0FBQzdGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsaUVBQWlFO0FBQzdGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsb0VBQW9FO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsc0VBQXNFO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIscUVBQXFFO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNERBQTREO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNkRBQTZEO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQThEO0FBQzFGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNERBQTREO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNkRBQTZEO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQThEO0FBQzFGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNERBQTREO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsNkRBQTZEO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQThEO0FBQzFGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQThEO0FBQzFGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsd0RBQXdEO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsd0RBQXdEO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsd0RBQXdEO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIsd0RBQXdEO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRCQUE0Qiw2Z0RBQTZnRDtBQUN6aUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBLG9GQUFvRixnREFBZ0Q7QUFDcEk7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDZCQUE2QjtBQUN4RCwyQkFBMkIsaUJBQWlCO0FBQzVDLDZCQUE2QixpQkFBaUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw0QkFBNEI7QUFDdkQsMkJBQTJCLE9BQU87QUFDbEMsNkJBQTZCLDRCQUE0QjtBQUN6RCw0QkFBNEIsTUFBTTtBQUNsQyw0QkFBNEIsNkJBQTZCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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T0FBTztBQUNsQixhQUFhLE9BQU87QUFDcEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFdBQVc7QUFDdEIsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsT0FBTztBQUNwQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFdBQVc7QUFDdEIsV0FBVyxPQUFPO0FBQ2xCLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFdBQVc7QUFDdEIsV0FBVyxPQUFPO0FBQ2xCLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsV0FBVztBQUN0QixXQUFXLE9BQU87QUFDbEIsYUFBYSxPQUFPO0FBQ3BCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxXQUFXO0FBQ3RCLFdBQVcsT0FBTztBQUNsQixhQUFhLE9BQU87QUFDcEI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUssSUFBSTs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUssSUFBSTs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYSwwQ0FBMEM7QUFDdkQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDOVVhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBLEtBQUssYUFBYTtBQUNsQjtBQUNBOzs7Ozs7OztBQ2hCYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNs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O0FBQ0E7QUFDQSxDQUFDOzs7Ozs7OztBQ3RCWTtBQUNiLFFBQVEsbUJBQU8sQ0FBQyxFQUFxQjtBQUNyQyxpQkFBaUIsbUJBQU8sQ0FBQyxHQUEyQjtBQUNwRCw2QkFBNkIsbUJBQU8sQ0FBQyxFQUF1QztBQUM1RSwyQkFBMkIsbUJBQU8sQ0FBQyxHQUFzQzs7QUFFekU7QUFDQTtBQUNBLEdBQUcsMkVBQTJFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsImZpbGUiOiJ0dXJtcy1jbGllbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTM5KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcXVlc3RVdGlsIHtcclxuICAgIHN0YXRpYyBFUlJPUiA9IG5ldyBFcnJvcihcIklsbGVnYWwgcGFyYW1ldGVyc1wiKTtcclxuXHJcbiAgICBzdGF0aWMgd3JhcFZhbHVlSWZOb3ROdWxsKHZhbHVlOiBhbnkpOiBhbnkgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSA/IHt2YWx1ZX0gOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHdyYXBUaW1lSWZOb3ROdWxsKHZhbHVlOiBEYXRlKTogYW55IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUgPyB7dmFsdWU6IHZhbHVlLmdldFRpbWUoKX0gOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc3RhdGljIGdldERhdGVJZk5vdE51bGwodmFsdWU6IEludDY0VmFsdWUpOiBEYXRlIHwgdW5kZWZpbmVkIHtcclxuICAgIC8vICAgICByZXR1cm4gdmFsdWUgJiYgdmFsdWUudmFsdWUgPyBuZXcgRGF0ZSh2YWx1ZS52YWx1ZSkgOiB1bmRlZmluZWQ7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaXNGYWxzeSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGlzVHJ1dGh5KHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuaXNGYWxzeSh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHRocm93SWZFbXB0eSh2YWx1ZSk6IHZvaWQge1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IHRoaXMuRVJST1I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB0aHJvd0lmQW55RmFsc3koLi4udmFsdWVzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRmFsc3kodmFsdWVzKSkge1xyXG4gICAgICAgICAgICB0aHJvdyB0aGlzLkVSUk9SO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ZhbHN5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHRoaXMuRVJST1I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHRocm93SWZBbGxGYWxzeSguLi52YWx1ZXM6IGFueVtdKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKFJlcXVlc3RVdGlsLmFyZUFsbEZhbHN5KHZhbHVlcykpIHtcclxuICAgICAgICAgICAgdGhyb3cgdGhpcy5FUlJPUjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFyZUFsbEZhbHN5KC4uLnZhbHVlczogYW55W10pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5pc0ZhbHN5KHZhbHVlcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJ1dGh5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge2dvb2dsZSwgaW19IGZyb20gXCIuLi9tb2RlbC9wcm90by1idW5kbGVcIjtcclxuaW1wb3J0IHtQYXJzZWRNb2RlbH0gZnJvbSBcIi4uL21vZGVsL3BhcnNlZC1tb2RlbFwiO1xyXG5pbXBvcnQgVHVybXNOb3RpZmljYXRpb24gPSBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbjtcclxuaW1wb3J0IElJbnQ2NFZhbHVlID0gZ29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90aWZpY2F0aW9uVXRpbCB7XHJcbiAgICBzdGF0aWMgdHJhbnNmb3JtKGRhdGE/OiBvYmplY3QgfCBudW1iZXIgfCBzdHJpbmcsIHBhcmVudEtleT86IHN0cmluZyk6IG9iamVjdCB8IG51bWJlciB8IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgLy8gTm90ZSB0aGF0IGRhdGEgY2FuIGJlIDAgb3IgJydcclxuICAgICAgICBpZiAodHlwZW9mIGRhdGEgIT09ICd1bmRlZmluZWQnICYmIGRhdGEgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJlbnRLZXkgPT09ICdzdHJpbmcnICYmIChwYXJlbnRLZXkuZW5kc1dpdGgoJ0RhdGUnKSB8fCBwYXJlbnRLZXkuZW5kc1dpdGgoJ19kYXRlJykgfHwgcGFyZW50S2V5ID09PSAnZGF0ZScpXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VJbnQoZGF0YSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoa2V5ID09PSAndmFsdWUnIHx8IGtleSA9PT0gJ3ZhbHVlcycpICYmIGtleXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtrZXldID0gdGhpcy50cmFuc2Zvcm0oZGF0YVtrZXldLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0Rmlyc3RBcnJheUFuZFRyYW5zZm9ybShkYXRhPzogb2JqZWN0KTogQXJyYXk8YW55PiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhkYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBkYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0ubWFwKHZhbHVlID0+IHRoaXMudHJhbnNmb3JtKHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHRyYW5zZm9ybURhdGUoZGF0ZT86IElJbnQ2NFZhbHVlKTogRGF0ZSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKGRhdGUgJiYgdHlwZW9mIGRhdGUudmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldElkc1dpdGhWZXJzaW9uKG5vdGlmaWNhdGlvbjogVHVybXNOb3RpZmljYXRpb24pOiBQYXJzZWRNb2RlbC5JZHNXaXRoVmVyc2lvbiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWRzOiBub3RpZmljYXRpb24uZGF0YS5pZHNXaXRoVmVyc2lvbi52YWx1ZXMsXHJcbiAgICAgICAgICAgIGxhc3RVcGRhdGVkRGF0ZTogbm90aWZpY2F0aW9uLmRhdGEuaWRzV2l0aFZlcnNpb24ubGFzdFVwZGF0ZWREYXRlICYmIG5vdGlmaWNhdGlvbi5kYXRhLmlkc1dpdGhWZXJzaW9uLmxhc3RVcGRhdGVkRGF0ZS52YWx1ZSA/XHJcbiAgICAgICAgICAgICAgICBuZXcgRGF0ZShub3RpZmljYXRpb24uZGF0YS5pZHNXaXRoVmVyc2lvbi5sYXN0VXBkYXRlZERhdGUudmFsdWUpIDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIiwidmFyIGNoZWNrID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpdCAmJiBpdC5NYXRoID09IE1hdGggJiYgaXQ7XG59O1xuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxubW9kdWxlLmV4cG9ydHMgPVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgY2hlY2sodHlwZW9mIGdsb2JhbFRoaXMgPT0gJ29iamVjdCcgJiYgZ2xvYmFsVGhpcykgfHxcbiAgY2hlY2sodHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyAmJiB3aW5kb3cpIHx8XG4gIGNoZWNrKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYpIHx8XG4gIGNoZWNrKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsKSB8fFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBOQVRJVkVfQVJSQVlfQlVGRkVSID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci1uYXRpdmUnKTtcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBoYXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzJyk7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mJyk7XG52YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1ub24tZW51bWVyYWJsZS1wcm9wZXJ0eScpO1xudmFyIHJlZGVmaW5lID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZGVmaW5lJyk7XG52YXIgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpLmY7XG52YXIgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1wcm90b3R5cGUtb2YnKTtcbnZhciBzZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qtc2V0LXByb3RvdHlwZS1vZicpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xudmFyIHVpZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy91aWQnKTtcblxudmFyIEludDhBcnJheSA9IGdsb2JhbC5JbnQ4QXJyYXk7XG52YXIgSW50OEFycmF5UHJvdG90eXBlID0gSW50OEFycmF5ICYmIEludDhBcnJheS5wcm90b3R5cGU7XG52YXIgVWludDhDbGFtcGVkQXJyYXkgPSBnbG9iYWwuVWludDhDbGFtcGVkQXJyYXk7XG52YXIgVWludDhDbGFtcGVkQXJyYXlQcm90b3R5cGUgPSBVaW50OENsYW1wZWRBcnJheSAmJiBVaW50OENsYW1wZWRBcnJheS5wcm90b3R5cGU7XG52YXIgVHlwZWRBcnJheSA9IEludDhBcnJheSAmJiBnZXRQcm90b3R5cGVPZihJbnQ4QXJyYXkpO1xudmFyIFR5cGVkQXJyYXlQcm90b3R5cGUgPSBJbnQ4QXJyYXlQcm90b3R5cGUgJiYgZ2V0UHJvdG90eXBlT2YoSW50OEFycmF5UHJvdG90eXBlKTtcbnZhciBPYmplY3RQcm90b3R5cGUgPSBPYmplY3QucHJvdG90eXBlO1xudmFyIGlzUHJvdG90eXBlT2YgPSBPYmplY3RQcm90b3R5cGUuaXNQcm90b3R5cGVPZjtcblxudmFyIFRPX1NUUklOR19UQUcgPSB3ZWxsS25vd25TeW1ib2woJ3RvU3RyaW5nVGFnJyk7XG52YXIgVFlQRURfQVJSQVlfVEFHID0gdWlkKCdUWVBFRF9BUlJBWV9UQUcnKTtcbi8vIEZpeGluZyBuYXRpdmUgdHlwZWQgYXJyYXlzIGluIE9wZXJhIFByZXN0byBjcmFzaGVzIHRoZSBicm93c2VyLCBzZWUgIzU5NVxudmFyIE5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MgPSBOQVRJVkVfQVJSQVlfQlVGRkVSICYmICEhc2V0UHJvdG90eXBlT2YgJiYgY2xhc3NvZihnbG9iYWwub3BlcmEpICE9PSAnT3BlcmEnO1xudmFyIFRZUEVEX0FSUkFZX1RBR19SRVFJUkVEID0gZmFsc2U7XG52YXIgTkFNRTtcblxudmFyIFR5cGVkQXJyYXlDb25zdHJ1Y3RvcnNMaXN0ID0ge1xuICBJbnQ4QXJyYXk6IDEsXG4gIFVpbnQ4QXJyYXk6IDEsXG4gIFVpbnQ4Q2xhbXBlZEFycmF5OiAxLFxuICBJbnQxNkFycmF5OiAyLFxuICBVaW50MTZBcnJheTogMixcbiAgSW50MzJBcnJheTogNCxcbiAgVWludDMyQXJyYXk6IDQsXG4gIEZsb2F0MzJBcnJheTogNCxcbiAgRmxvYXQ2NEFycmF5OiA4XG59O1xuXG52YXIgaXNWaWV3ID0gZnVuY3Rpb24gaXNWaWV3KGl0KSB7XG4gIHZhciBrbGFzcyA9IGNsYXNzb2YoaXQpO1xuICByZXR1cm4ga2xhc3MgPT09ICdEYXRhVmlldycgfHwgaGFzKFR5cGVkQXJyYXlDb25zdHJ1Y3RvcnNMaXN0LCBrbGFzcyk7XG59O1xuXG52YXIgaXNUeXBlZEFycmF5ID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpc09iamVjdChpdCkgJiYgaGFzKFR5cGVkQXJyYXlDb25zdHJ1Y3RvcnNMaXN0LCBjbGFzc29mKGl0KSk7XG59O1xuXG52YXIgYVR5cGVkQXJyYXkgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKGlzVHlwZWRBcnJheShpdCkpIHJldHVybiBpdDtcbiAgdGhyb3cgVHlwZUVycm9yKCdUYXJnZXQgaXMgbm90IGEgdHlwZWQgYXJyYXknKTtcbn07XG5cbnZhciBhVHlwZWRBcnJheUNvbnN0cnVjdG9yID0gZnVuY3Rpb24gKEMpIHtcbiAgaWYgKHNldFByb3RvdHlwZU9mKSB7XG4gICAgaWYgKGlzUHJvdG90eXBlT2YuY2FsbChUeXBlZEFycmF5LCBDKSkgcmV0dXJuIEM7XG4gIH0gZWxzZSBmb3IgKHZhciBBUlJBWSBpbiBUeXBlZEFycmF5Q29uc3RydWN0b3JzTGlzdCkgaWYgKGhhcyhUeXBlZEFycmF5Q29uc3RydWN0b3JzTGlzdCwgTkFNRSkpIHtcbiAgICB2YXIgVHlwZWRBcnJheUNvbnN0cnVjdG9yID0gZ2xvYmFsW0FSUkFZXTtcbiAgICBpZiAoVHlwZWRBcnJheUNvbnN0cnVjdG9yICYmIChDID09PSBUeXBlZEFycmF5Q29uc3RydWN0b3IgfHwgaXNQcm90b3R5cGVPZi5jYWxsKFR5cGVkQXJyYXlDb25zdHJ1Y3RvciwgQykpKSB7XG4gICAgICByZXR1cm4gQztcbiAgICB9XG4gIH0gdGhyb3cgVHlwZUVycm9yKCdUYXJnZXQgaXMgbm90IGEgdHlwZWQgYXJyYXkgY29uc3RydWN0b3InKTtcbn07XG5cbnZhciBleHBvcnRUeXBlZEFycmF5TWV0aG9kID0gZnVuY3Rpb24gKEtFWSwgcHJvcGVydHksIGZvcmNlZCkge1xuICBpZiAoIURFU0NSSVBUT1JTKSByZXR1cm47XG4gIGlmIChmb3JjZWQpIGZvciAodmFyIEFSUkFZIGluIFR5cGVkQXJyYXlDb25zdHJ1Y3RvcnNMaXN0KSB7XG4gICAgdmFyIFR5cGVkQXJyYXlDb25zdHJ1Y3RvciA9IGdsb2JhbFtBUlJBWV07XG4gICAgaWYgKFR5cGVkQXJyYXlDb25zdHJ1Y3RvciAmJiBoYXMoVHlwZWRBcnJheUNvbnN0cnVjdG9yLnByb3RvdHlwZSwgS0VZKSkge1xuICAgICAgZGVsZXRlIFR5cGVkQXJyYXlDb25zdHJ1Y3Rvci5wcm90b3R5cGVbS0VZXTtcbiAgICB9XG4gIH1cbiAgaWYgKCFUeXBlZEFycmF5UHJvdG90eXBlW0tFWV0gfHwgZm9yY2VkKSB7XG4gICAgcmVkZWZpbmUoVHlwZWRBcnJheVByb3RvdHlwZSwgS0VZLCBmb3JjZWQgPyBwcm9wZXJ0eVxuICAgICAgOiBOQVRJVkVfQVJSQVlfQlVGRkVSX1ZJRVdTICYmIEludDhBcnJheVByb3RvdHlwZVtLRVldIHx8IHByb3BlcnR5KTtcbiAgfVxufTtcblxudmFyIGV4cG9ydFR5cGVkQXJyYXlTdGF0aWNNZXRob2QgPSBmdW5jdGlvbiAoS0VZLCBwcm9wZXJ0eSwgZm9yY2VkKSB7XG4gIHZhciBBUlJBWSwgVHlwZWRBcnJheUNvbnN0cnVjdG9yO1xuICBpZiAoIURFU0NSSVBUT1JTKSByZXR1cm47XG4gIGlmIChzZXRQcm90b3R5cGVPZikge1xuICAgIGlmIChmb3JjZWQpIGZvciAoQVJSQVkgaW4gVHlwZWRBcnJheUNvbnN0cnVjdG9yc0xpc3QpIHtcbiAgICAgIFR5cGVkQXJyYXlDb25zdHJ1Y3RvciA9IGdsb2JhbFtBUlJBWV07XG4gICAgICBpZiAoVHlwZWRBcnJheUNvbnN0cnVjdG9yICYmIGhhcyhUeXBlZEFycmF5Q29uc3RydWN0b3IsIEtFWSkpIHtcbiAgICAgICAgZGVsZXRlIFR5cGVkQXJyYXlDb25zdHJ1Y3RvcltLRVldO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIVR5cGVkQXJyYXlbS0VZXSB8fCBmb3JjZWQpIHtcbiAgICAgIC8vIFY4IH4gQ2hyb21lIDQ5LTUwIGAlVHlwZWRBcnJheSVgIG1ldGhvZHMgYXJlIG5vbi13cml0YWJsZSBub24tY29uZmlndXJhYmxlXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gcmVkZWZpbmUoVHlwZWRBcnJheSwgS0VZLCBmb3JjZWQgPyBwcm9wZXJ0eSA6IE5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MgJiYgSW50OEFycmF5W0tFWV0gfHwgcHJvcGVydHkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxuICAgIH0gZWxzZSByZXR1cm47XG4gIH1cbiAgZm9yIChBUlJBWSBpbiBUeXBlZEFycmF5Q29uc3RydWN0b3JzTGlzdCkge1xuICAgIFR5cGVkQXJyYXlDb25zdHJ1Y3RvciA9IGdsb2JhbFtBUlJBWV07XG4gICAgaWYgKFR5cGVkQXJyYXlDb25zdHJ1Y3RvciAmJiAoIVR5cGVkQXJyYXlDb25zdHJ1Y3RvcltLRVldIHx8IGZvcmNlZCkpIHtcbiAgICAgIHJlZGVmaW5lKFR5cGVkQXJyYXlDb25zdHJ1Y3RvciwgS0VZLCBwcm9wZXJ0eSk7XG4gICAgfVxuICB9XG59O1xuXG5mb3IgKE5BTUUgaW4gVHlwZWRBcnJheUNvbnN0cnVjdG9yc0xpc3QpIHtcbiAgaWYgKCFnbG9iYWxbTkFNRV0pIE5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MgPSBmYWxzZTtcbn1cblxuLy8gV2ViS2l0IGJ1ZyAtIHR5cGVkIGFycmF5cyBjb25zdHJ1Y3RvcnMgcHJvdG90eXBlIGlzIE9iamVjdC5wcm90b3R5cGVcbmlmICghTkFUSVZFX0FSUkFZX0JVRkZFUl9WSUVXUyB8fCB0eXBlb2YgVHlwZWRBcnJheSAhPSAnZnVuY3Rpb24nIHx8IFR5cGVkQXJyYXkgPT09IEZ1bmN0aW9uLnByb3RvdHlwZSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2hhZG93XG4gIFR5cGVkQXJyYXkgPSBmdW5jdGlvbiBUeXBlZEFycmF5KCkge1xuICAgIHRocm93IFR5cGVFcnJvcignSW5jb3JyZWN0IGludm9jYXRpb24nKTtcbiAgfTtcbiAgaWYgKE5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MpIGZvciAoTkFNRSBpbiBUeXBlZEFycmF5Q29uc3RydWN0b3JzTGlzdCkge1xuICAgIGlmIChnbG9iYWxbTkFNRV0pIHNldFByb3RvdHlwZU9mKGdsb2JhbFtOQU1FXSwgVHlwZWRBcnJheSk7XG4gIH1cbn1cblxuaWYgKCFOQVRJVkVfQVJSQVlfQlVGRkVSX1ZJRVdTIHx8ICFUeXBlZEFycmF5UHJvdG90eXBlIHx8IFR5cGVkQXJyYXlQcm90b3R5cGUgPT09IE9iamVjdFByb3RvdHlwZSkge1xuICBUeXBlZEFycmF5UHJvdG90eXBlID0gVHlwZWRBcnJheS5wcm90b3R5cGU7XG4gIGlmIChOQVRJVkVfQVJSQVlfQlVGRkVSX1ZJRVdTKSBmb3IgKE5BTUUgaW4gVHlwZWRBcnJheUNvbnN0cnVjdG9yc0xpc3QpIHtcbiAgICBpZiAoZ2xvYmFsW05BTUVdKSBzZXRQcm90b3R5cGVPZihnbG9iYWxbTkFNRV0ucHJvdG90eXBlLCBUeXBlZEFycmF5UHJvdG90eXBlKTtcbiAgfVxufVxuXG4vLyBXZWJLaXQgYnVnIC0gb25lIG1vcmUgb2JqZWN0IGluIFVpbnQ4Q2xhbXBlZEFycmF5IHByb3RvdHlwZSBjaGFpblxuaWYgKE5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MgJiYgZ2V0UHJvdG90eXBlT2YoVWludDhDbGFtcGVkQXJyYXlQcm90b3R5cGUpICE9PSBUeXBlZEFycmF5UHJvdG90eXBlKSB7XG4gIHNldFByb3RvdHlwZU9mKFVpbnQ4Q2xhbXBlZEFycmF5UHJvdG90eXBlLCBUeXBlZEFycmF5UHJvdG90eXBlKTtcbn1cblxuaWYgKERFU0NSSVBUT1JTICYmICFoYXMoVHlwZWRBcnJheVByb3RvdHlwZSwgVE9fU1RSSU5HX1RBRykpIHtcbiAgVFlQRURfQVJSQVlfVEFHX1JFUUlSRUQgPSB0cnVlO1xuICBkZWZpbmVQcm9wZXJ0eShUeXBlZEFycmF5UHJvdG90eXBlLCBUT19TVFJJTkdfVEFHLCB7IGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBpc09iamVjdCh0aGlzKSA/IHRoaXNbVFlQRURfQVJSQVlfVEFHXSA6IHVuZGVmaW5lZDtcbiAgfSB9KTtcbiAgZm9yIChOQU1FIGluIFR5cGVkQXJyYXlDb25zdHJ1Y3RvcnNMaXN0KSBpZiAoZ2xvYmFsW05BTUVdKSB7XG4gICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KGdsb2JhbFtOQU1FXSwgVFlQRURfQVJSQVlfVEFHLCBOQU1FKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgTkFUSVZFX0FSUkFZX0JVRkZFUl9WSUVXUzogTkFUSVZFX0FSUkFZX0JVRkZFUl9WSUVXUyxcbiAgVFlQRURfQVJSQVlfVEFHOiBUWVBFRF9BUlJBWV9UQUdfUkVRSVJFRCAmJiBUWVBFRF9BUlJBWV9UQUcsXG4gIGFUeXBlZEFycmF5OiBhVHlwZWRBcnJheSxcbiAgYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcjogYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcixcbiAgZXhwb3J0VHlwZWRBcnJheU1ldGhvZDogZXhwb3J0VHlwZWRBcnJheU1ldGhvZCxcbiAgZXhwb3J0VHlwZWRBcnJheVN0YXRpY01ldGhvZDogZXhwb3J0VHlwZWRBcnJheVN0YXRpY01ldGhvZCxcbiAgaXNWaWV3OiBpc1ZpZXcsXG4gIGlzVHlwZWRBcnJheTogaXNUeXBlZEFycmF5LFxuICBUeXBlZEFycmF5OiBUeXBlZEFycmF5LFxuICBUeXBlZEFycmF5UHJvdG90eXBlOiBUeXBlZEFycmF5UHJvdG90eXBlXG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhlYykge1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgc2hhcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZCcpO1xudmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciB1aWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdWlkJyk7XG52YXIgTkFUSVZFX1NZTUJPTCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9uYXRpdmUtc3ltYm9sJyk7XG52YXIgVVNFX1NZTUJPTF9BU19VSUQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdXNlLXN5bWJvbC1hcy11aWQnKTtcblxudmFyIFdlbGxLbm93blN5bWJvbHNTdG9yZSA9IHNoYXJlZCgnd2tzJyk7XG52YXIgU3ltYm9sID0gZ2xvYmFsLlN5bWJvbDtcbnZhciBjcmVhdGVXZWxsS25vd25TeW1ib2wgPSBVU0VfU1lNQk9MX0FTX1VJRCA/IFN5bWJvbCA6IFN5bWJvbCAmJiBTeW1ib2wud2l0aG91dFNldHRlciB8fCB1aWQ7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgaWYgKCFoYXMoV2VsbEtub3duU3ltYm9sc1N0b3JlLCBuYW1lKSkge1xuICAgIGlmIChOQVRJVkVfU1lNQk9MICYmIGhhcyhTeW1ib2wsIG5hbWUpKSBXZWxsS25vd25TeW1ib2xzU3RvcmVbbmFtZV0gPSBTeW1ib2xbbmFtZV07XG4gICAgZWxzZSBXZWxsS25vd25TeW1ib2xzU3RvcmVbbmFtZV0gPSBjcmVhdGVXZWxsS25vd25TeW1ib2woJ1N5bWJvbC4nICsgbmFtZSk7XG4gIH0gcmV0dXJuIFdlbGxLbm93blN5bWJvbHNTdG9yZVtuYW1lXTtcbn07XG4iLCIvKmVzbGludC1kaXNhYmxlIGJsb2NrLXNjb3BlZC12YXIsIGlkLWxlbmd0aCwgbm8tY29udHJvbC1yZWdleCwgbm8tbWFnaWMtbnVtYmVycywgbm8tcHJvdG90eXBlLWJ1aWx0aW5zLCBuby1yZWRlY2xhcmUsIG5vLXNoYWRvdywgbm8tdmFyLCBzb3J0LXZhcnMqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciAkcHJvdG9idWYgPSByZXF1aXJlKFwicHJvdG9idWZqcy9taW5pbWFsXCIpO1xuXG4vLyBDb21tb24gYWxpYXNlc1xudmFyICRSZWFkZXIgPSAkcHJvdG9idWYuUmVhZGVyLCAkV3JpdGVyID0gJHByb3RvYnVmLldyaXRlciwgJHV0aWwgPSAkcHJvdG9idWYudXRpbDtcblxuLy8gRXhwb3J0ZWQgcm9vdCBuYW1lc3BhY2VcbnZhciAkcm9vdCA9ICRwcm90b2J1Zi5yb290c1tcImRlZmF1bHRcIl0gfHwgKCRwcm90b2J1Zi5yb290c1tcImRlZmF1bHRcIl0gPSB7fSk7XG5cbiRyb290LmltID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogTmFtZXNwYWNlIGltLlxuICAgICAqIEBleHBvcnRzIGltXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqL1xuICAgIHZhciBpbSA9IHt9O1xuXG4gICAgaW0udHVybXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5hbWVzcGFjZSB0dXJtcy5cbiAgICAgICAgICogQG1lbWJlcm9mIGltXG4gICAgICAgICAqIEBuYW1lc3BhY2VcbiAgICAgICAgICovXG4gICAgICAgIHZhciB0dXJtcyA9IHt9O1xuXG4gICAgICAgIHR1cm1zLnByb3RvID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIE5hbWVzcGFjZSBwcm90by5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtc1xuICAgICAgICAgICAgICogQG5hbWVzcGFjZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgcHJvdG8gPSB7fTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDaGF0VHlwZSBlbnVtLlxuICAgICAgICAgICAgICogQG5hbWUgaW0udHVybXMucHJvdG8uQ2hhdFR5cGVcbiAgICAgICAgICAgICAqIEBlbnVtIHtzdHJpbmd9XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUFJJVkFURT0wIFBSSVZBVEUgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBHUk9VUD0xIEdST1VQIHZhbHVlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHByb3RvLkNoYXRUeXBlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXNCeUlkID0ge30sIHZhbHVlcyA9IE9iamVjdC5jcmVhdGUodmFsdWVzQnlJZCk7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIlBSSVZBVEVcIl0gPSAwO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJHUk9VUFwiXSA9IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGV2aWNlVHlwZSBlbnVtLlxuICAgICAgICAgICAgICogQG5hbWUgaW0udHVybXMucHJvdG8uRGV2aWNlVHlwZVxuICAgICAgICAgICAgICogQGVudW0ge3N0cmluZ31cbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBERVNLVE9QPTAgREVTS1RPUCB2YWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEJST1dTRVI9MSBCUk9XU0VSIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gSU9TPTIgSU9TIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQU5EUk9JRD0zIEFORFJPSUQgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBPVEhFUlM9NCBPVEhFUlMgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTktOT1dOPTUgVU5LTk9XTiB2YWx1ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwcm90by5EZXZpY2VUeXBlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXNCeUlkID0ge30sIHZhbHVlcyA9IE9iamVjdC5jcmVhdGUodmFsdWVzQnlJZCk7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIkRFU0tUT1BcIl0gPSAwO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJCUk9XU0VSXCJdID0gMTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiSU9TXCJdID0gMjtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiQU5EUk9JRFwiXSA9IDM7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNF0gPSBcIk9USEVSU1wiXSA9IDQ7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNV0gPSBcIlVOS05PV05cIl0gPSA1O1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdyb3VwTWVtYmVyUm9sZSBlbnVtLlxuICAgICAgICAgICAgICogQG5hbWUgaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJSb2xlXG4gICAgICAgICAgICAgKiBAZW51bSB7c3RyaW5nfVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IE9XTkVSPTAgT1dORVIgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBNQU5BR0VSPTEgTUFOQUdFUiB2YWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IE1FTUJFUj0yIE1FTUJFUiB2YWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEdVRVNUPTMgR1VFU1QgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBBTk9OWU1PVVNfR1VFU1Q9NCBBTk9OWU1PVVNfR1VFU1QgdmFsdWVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcHJvdG8uR3JvdXBNZW1iZXJSb2xlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXNCeUlkID0ge30sIHZhbHVlcyA9IE9iamVjdC5jcmVhdGUodmFsdWVzQnlJZCk7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIk9XTkVSXCJdID0gMDtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiTUFOQUdFUlwiXSA9IDE7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIk1FTUJFUlwiXSA9IDI7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbM10gPSBcIkdVRVNUXCJdID0gMztcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs0XSA9IFwiQU5PTllNT1VTX0dVRVNUXCJdID0gNDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNZXNzYWdlRGVsaXZlcnlTdGF0dXMgZW51bS5cbiAgICAgICAgICAgICAqIEBuYW1lIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VEZWxpdmVyeVN0YXR1c1xuICAgICAgICAgICAgICogQGVudW0ge3N0cmluZ31cbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSRUFEWT0wIFJFQURZIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gU0VORElORz0xIFNFTkRJTkcgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSRUNFSVZFRD0yIFJFQ0VJVkVEIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUkVDQUxMSU5HPTMgUkVDQUxMSU5HIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUkVDQUxMRUQ9NCBSRUNBTExFRCB2YWx1ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwcm90by5NZXNzYWdlRGVsaXZlcnlTdGF0dXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlc0J5SWQgPSB7fSwgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZSh2YWx1ZXNCeUlkKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFswXSA9IFwiUkVBRFlcIl0gPSAwO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJTRU5ESU5HXCJdID0gMTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiUkVDRUlWRURcIl0gPSAyO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzNdID0gXCJSRUNBTExJTkdcIl0gPSAzO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzRdID0gXCJSRUNBTExFRFwiXSA9IDQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvZmlsZUFjY2Vzc1N0cmF0ZWd5IGVudW0uXG4gICAgICAgICAgICAgKiBAbmFtZSBpbS50dXJtcy5wcm90by5Qcm9maWxlQWNjZXNzU3RyYXRlZ3lcbiAgICAgICAgICAgICAqIEBlbnVtIHtzdHJpbmd9XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQUxMPTAgQUxMIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQUxMX0VYQ0VQVF9CTEFDS0xJU1RFRF9VU0VSUz0xIEFMTF9FWENFUFRfQkxBQ0tMSVNURURfVVNFUlMgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBGUklFTkRTPTIgRlJJRU5EUyB2YWx1ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwcm90by5Qcm9maWxlQWNjZXNzU3RyYXRlZ3kgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlc0J5SWQgPSB7fSwgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZSh2YWx1ZXNCeUlkKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFswXSA9IFwiQUxMXCJdID0gMDtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiQUxMX0VYQ0VQVF9CTEFDS0xJU1RFRF9VU0VSU1wiXSA9IDE7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIkZSSUVORFNcIl0gPSAyO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlcXVlc3RTdGF0dXMgZW51bS5cbiAgICAgICAgICAgICAqIEBuYW1lIGltLnR1cm1zLnByb3RvLlJlcXVlc3RTdGF0dXNcbiAgICAgICAgICAgICAqIEBlbnVtIHtzdHJpbmd9XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gUEVORElORz0wIFBFTkRJTkcgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBBQ0NFUFRFRD0xIEFDQ0VQVEVEIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQUNDRVBURURfV0lUSE9VVF9DT05GSVJNPTIgQUNDRVBURURfV0lUSE9VVF9DT05GSVJNIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gREVDTElORUQ9MyBERUNMSU5FRCB2YWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IElHTk9SRUQ9NCBJR05PUkVEIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gRVhQSVJFRD01IEVYUElSRUQgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDQU5DRUxFRD02IENBTkNFTEVEIHZhbHVlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHByb3RvLlJlcXVlc3RTdGF0dXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlc0J5SWQgPSB7fSwgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZSh2YWx1ZXNCeUlkKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFswXSA9IFwiUEVORElOR1wiXSA9IDA7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMV0gPSBcIkFDQ0VQVEVEXCJdID0gMTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiQUNDRVBURURfV0lUSE9VVF9DT05GSVJNXCJdID0gMjtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiREVDTElORURcIl0gPSAzO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzRdID0gXCJJR05PUkVEXCJdID0gNDtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs1XSA9IFwiRVhQSVJFRFwiXSA9IDU7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNl0gPSBcIkNBTkNFTEVEXCJdID0gNjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXNwb25zZUFjdGlvbiBlbnVtLlxuICAgICAgICAgICAgICogQG5hbWUgaW0udHVybXMucHJvdG8uUmVzcG9uc2VBY3Rpb25cbiAgICAgICAgICAgICAqIEBlbnVtIHtzdHJpbmd9XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQUNDRVBUPTAgQUNDRVBUIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gREVDTElORT0xIERFQ0xJTkUgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBJR05PUkU9MiBJR05PUkUgdmFsdWVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcHJvdG8uUmVzcG9uc2VBY3Rpb24gPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlc0J5SWQgPSB7fSwgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZSh2YWx1ZXNCeUlkKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFswXSA9IFwiQUNDRVBUXCJdID0gMDtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiREVDTElORVwiXSA9IDE7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIklHTk9SRVwiXSA9IDI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVXNlclN0YXR1cyBlbnVtLlxuICAgICAgICAgICAgICogQG5hbWUgaW0udHVybXMucHJvdG8uVXNlclN0YXR1c1xuICAgICAgICAgICAgICogQGVudW0ge3N0cmluZ31cbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBBVkFJTEFCTEU9MCBBVkFJTEFCTEUgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBPRkZMSU5FPTEgT0ZGTElORSB2YWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IElOVklTSUJMRT0yIElOVklTSUJMRSB2YWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEJVU1k9MyBCVVNZIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gRE9fTk9UX0RJU1RVUkI9NCBET19OT1RfRElTVFVSQiB2YWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IEFXQVk9NSBBV0FZIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQkVfUklHSFRfQkFDSz02IEJFX1JJR0hUX0JBQ0sgdmFsdWVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcHJvdG8uVXNlclN0YXR1cyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzBdID0gXCJBVkFJTEFCTEVcIl0gPSAwO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJPRkZMSU5FXCJdID0gMTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiSU5WSVNJQkxFXCJdID0gMjtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiQlVTWVwiXSA9IDM7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNF0gPSBcIkRPX05PVF9ESVNUVVJCXCJdID0gNDtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs1XSA9IFwiQVdBWVwiXSA9IDU7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNl0gPSBcIkJFX1JJR0hUX0JBQ0tcIl0gPSA2O1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5JbnQ2NFZhbHVlc1dpdGhWZXJzaW9uID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhbiBJbnQ2NFZhbHVlc1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUludDY0VmFsdWVzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxzdHJpbmc+fG51bGx9IFt2YWx1ZXNdIEludDY0VmFsdWVzV2l0aFZlcnNpb24gdmFsdWVzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2xhc3RVcGRhdGVkRGF0ZV0gSW50NjRWYWx1ZXNXaXRoVmVyc2lvbiBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgSW50NjRWYWx1ZXNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYW4gSW50NjRWYWx1ZXNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJSW50NjRWYWx1ZXNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUludDY0VmFsdWVzV2l0aFZlcnNpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBJbnQ2NFZhbHVlc1dpdGhWZXJzaW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJbnQ2NFZhbHVlc1dpdGhWZXJzaW9uIHZhbHVlcy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48c3RyaW5nPn0gdmFsdWVzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkludDY0VmFsdWVzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBJbnQ2NFZhbHVlc1dpdGhWZXJzaW9uLnByb3RvdHlwZS52YWx1ZXMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSW50NjRWYWx1ZXNXaXRoVmVyc2lvbiBsYXN0VXBkYXRlZERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uSW50NjRWYWx1ZXNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEludDY0VmFsdWVzV2l0aFZlcnNpb24ucHJvdG90eXBlLmxhc3RVcGRhdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgSW50NjRWYWx1ZXNXaXRoVmVyc2lvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5JbnQ2NFZhbHVlc1dpdGhWZXJzaW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uSW50NjRWYWx1ZXNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklJbnQ2NFZhbHVlc1dpdGhWZXJzaW9ufSBtZXNzYWdlIEludDY0VmFsdWVzV2l0aFZlcnNpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEludDY0VmFsdWVzV2l0aFZlcnNpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnZhbHVlcyAhPSBudWxsICYmIG1lc3NhZ2UudmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UudmFsdWVzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5pbnQ2NChtZXNzYWdlLnZhbHVlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhbiBJbnQ2NFZhbHVlc1dpdGhWZXJzaW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5JbnQ2NFZhbHVlc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkludDY0VmFsdWVzV2l0aFZlcnNpb259IEludDY0VmFsdWVzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEludDY0VmFsdWVzV2l0aFZlcnNpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uSW50NjRWYWx1ZXNXaXRoVmVyc2lvbigpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS52YWx1ZXMgJiYgbWVzc2FnZS52YWx1ZXMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmQyID0gcmVhZGVyLnVpbnQzMigpICsgcmVhZGVyLnBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZXMucHVzaChyZWFkZXIuaW50NjQoKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZXMucHVzaChyZWFkZXIuaW50NjQoKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEludDY0VmFsdWVzV2l0aFZlcnNpb247XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5JbnQ2NFZhbHVlcyA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gSW50NjRWYWx1ZXMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJSW50NjRWYWx1ZXNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxzdHJpbmc+fG51bGx9IFt2YWx1ZXNdIEludDY0VmFsdWVzIHZhbHVlc1xuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBJbnQ2NFZhbHVlcy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYW4gSW50NjRWYWx1ZXMuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUludDY0VmFsdWVzXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JSW50NjRWYWx1ZXM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBJbnQ2NFZhbHVlcyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSW50NjRWYWx1ZXMgdmFsdWVzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxzdHJpbmc+fSB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uSW50NjRWYWx1ZXNcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBJbnQ2NFZhbHVlcy5wcm90b3R5cGUudmFsdWVzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBJbnQ2NFZhbHVlcyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5JbnQ2NFZhbHVlcy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkludDY0VmFsdWVzXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUludDY0VmFsdWVzfSBtZXNzYWdlIEludDY0VmFsdWVzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBJbnQ2NFZhbHVlcy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWVzICE9IG51bGwgJiYgbWVzc2FnZS52YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS52YWx1ZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmludDY0KG1lc3NhZ2UudmFsdWVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGFuIEludDY0VmFsdWVzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5JbnQ2NFZhbHVlc1xuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5JbnQ2NFZhbHVlc30gSW50NjRWYWx1ZXNcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEludDY0VmFsdWVzLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkludDY0VmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnZhbHVlcyAmJiBtZXNzYWdlLnZhbHVlcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGFnICYgNykgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZDIgPSByZWFkZXIudWludDMyKCkgKyByZWFkZXIucG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZhbHVlcy5wdXNoKHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZhbHVlcy5wdXNoKHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBJbnQ2NFZhbHVlcztcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkF1ZGlvRmlsZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gQXVkaW9GaWxlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUF1ZGlvRmlsZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uQXVkaW9GaWxlLklEZXNjcmlwdGlvbnxudWxsfSBbZGVzY3JpcHRpb25dIEF1ZGlvRmlsZSBkZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklCeXRlc1ZhbHVlfG51bGx9IFtkYXRhXSBBdWRpb0ZpbGUgZGF0YVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBBdWRpb0ZpbGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIEF1ZGlvRmlsZS5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJQXVkaW9GaWxlXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JQXVkaW9GaWxlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQXVkaW9GaWxlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBBdWRpb0ZpbGUgZGVzY3JpcHRpb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uQXVkaW9GaWxlLklEZXNjcmlwdGlvbnxudWxsfHVuZGVmaW5lZH0gZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQXVkaW9GaWxlXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQXVkaW9GaWxlLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBBdWRpb0ZpbGUgZGF0YS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUJ5dGVzVmFsdWV8bnVsbHx1bmRlZmluZWR9IGRhdGFcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQXVkaW9GaWxlXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQXVkaW9GaWxlLnByb3RvdHlwZS5kYXRhID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBBdWRpb0ZpbGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uQXVkaW9GaWxlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQXVkaW9GaWxlXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUF1ZGlvRmlsZX0gbWVzc2FnZSBBdWRpb0ZpbGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEF1ZGlvRmlsZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVzY3JpcHRpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlc2NyaXB0aW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uQXVkaW9GaWxlLkRlc2NyaXB0aW9uLmVuY29kZShtZXNzYWdlLmRlc2NyaXB0aW9uLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRhdGEgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRhdGFcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuQnl0ZXNWYWx1ZS5lbmNvZGUobWVzc2FnZS5kYXRhLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYW4gQXVkaW9GaWxlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5BdWRpb0ZpbGVcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uQXVkaW9GaWxlfSBBdWRpb0ZpbGVcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEF1ZGlvRmlsZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5BdWRpb0ZpbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVzY3JpcHRpb24gPSAkcm9vdC5pbS50dXJtcy5wcm90by5BdWRpb0ZpbGUuRGVzY3JpcHRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuQnl0ZXNWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIEF1ZGlvRmlsZS5EZXNjcmlwdGlvbiA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIERlc2NyaXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQXVkaW9GaWxlXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt1cmxdIERlc2NyaXB0aW9uIHVybFxuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfSBbZHVyYXRpb25dIERlc2NyaXB0aW9uIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFtzaXplXSBEZXNjcmlwdGlvbiBzaXplXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbZm9ybWF0XSBEZXNjcmlwdGlvbiBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGVzY3JpcHRpb24uXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5BdWRpb0ZpbGVcbiAgICAgICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGVzY3JpcHRpb24uXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5BdWRpb0ZpbGUuSURlc2NyaXB0aW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBEZXNjcmlwdGlvbihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERlc2NyaXB0aW9uIHVybC5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSB1cmxcbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkF1ZGlvRmlsZS5EZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uLnByb3RvdHlwZS51cmwgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEZXNjcmlwdGlvbiBkdXJhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBkdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQXVkaW9GaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24ucHJvdG90eXBlLmR1cmF0aW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGVzY3JpcHRpb24gc2l6ZS5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBzaXplXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5BdWRpb0ZpbGUuRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbi5wcm90b3R5cGUuc2l6ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERlc2NyaXB0aW9uIGZvcm1hdC5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5BdWRpb0ZpbGUuRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbi5wcm90b3R5cGUuZm9ybWF0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlc2NyaXB0aW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkF1ZGlvRmlsZS5EZXNjcmlwdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQXVkaW9GaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5BdWRpb0ZpbGUuSURlc2NyaXB0aW9ufSBtZXNzYWdlIERlc2NyaXB0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVybCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXJsXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmR1cmF0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkdXJhdGlvblwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5kdXJhdGlvbiwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2l6ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2l6ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5zaXplLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5mb3JtYXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImZvcm1hdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UuZm9ybWF0LCB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGVzY3JpcHRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQXVkaW9GaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5BdWRpb0ZpbGUuRGVzY3JpcHRpb259IERlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQXVkaW9GaWxlLkRlc2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXJsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2l6ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mb3JtYXQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBBdWRpb0ZpbGU7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5GaWxlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEZpbGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJRmlsZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uRmlsZS5JRGVzY3JpcHRpb258bnVsbH0gW2Rlc2NyaXB0aW9uXSBGaWxlIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUJ5dGVzVmFsdWV8bnVsbH0gW2RhdGFdIEZpbGUgZGF0YVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBGaWxlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEZpbGUuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUZpbGVcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklGaWxlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gRmlsZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRmlsZSBkZXNjcmlwdGlvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5GaWxlLklEZXNjcmlwdGlvbnxudWxsfHVuZGVmaW5lZH0gZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRmlsZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEZpbGUucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEZpbGUgZGF0YS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUJ5dGVzVmFsdWV8bnVsbHx1bmRlZmluZWR9IGRhdGFcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRmlsZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEZpbGUucHJvdG90eXBlLmRhdGEgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZpbGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uRmlsZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkZpbGVcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRmlsZX0gbWVzc2FnZSBGaWxlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBGaWxlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXNjcmlwdGlvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGVzY3JpcHRpb25cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5GaWxlLkRlc2NyaXB0aW9uLmVuY29kZShtZXNzYWdlLmRlc2NyaXB0aW9uLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRhdGEgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRhdGFcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuQnl0ZXNWYWx1ZS5lbmNvZGUobWVzc2FnZS5kYXRhLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBGaWxlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5GaWxlXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkZpbGV9IEZpbGVcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEZpbGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uRmlsZSgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXNjcmlwdGlvbiA9ICRyb290LmltLnR1cm1zLnByb3RvLkZpbGUuRGVzY3JpcHRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuQnl0ZXNWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIEZpbGUuRGVzY3JpcHRpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZXNjcmlwdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkZpbGVcbiAgICAgICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3VybF0gRGVzY3JpcHRpb24gdXJsXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFtzaXplXSBEZXNjcmlwdGlvbiBzaXplXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbZm9ybWF0XSBEZXNjcmlwdGlvbiBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGVzY3JpcHRpb24uXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5GaWxlXG4gICAgICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERlc2NyaXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uRmlsZS5JRGVzY3JpcHRpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIERlc2NyaXB0aW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGVzY3JpcHRpb24gdXJsLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHVybFxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRmlsZS5EZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uLnByb3RvdHlwZS51cmwgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEZXNjcmlwdGlvbiBzaXplLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbHx1bmRlZmluZWR9IHNpemVcbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkZpbGUuRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbi5wcm90b3R5cGUuc2l6ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERlc2NyaXB0aW9uIGZvcm1hdC5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5GaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24ucHJvdG90eXBlLmZvcm1hdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZXNjcmlwdGlvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5GaWxlLkRlc2NyaXB0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5GaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5GaWxlLklEZXNjcmlwdGlvbn0gbWVzc2FnZSBEZXNjcmlwdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51cmwgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInVybFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zaXplICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzaXplXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmVuY29kZShtZXNzYWdlLnNpemUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmZvcm1hdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZm9ybWF0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5mb3JtYXQsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBEZXNjcmlwdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5GaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5GaWxlLkRlc2NyaXB0aW9ufSBEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkZpbGUuRGVzY3JpcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51cmwgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zaXplID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZvcm1hdCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZpbGU7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5JbWFnZUZpbGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGFuIEltYWdlRmlsZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElJbWFnZUZpbGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLkltYWdlRmlsZS5JRGVzY3JpcHRpb258bnVsbH0gW2Rlc2NyaXB0aW9uXSBJbWFnZUZpbGUgZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JQnl0ZXNWYWx1ZXxudWxsfSBbZGF0YV0gSW1hZ2VGaWxlIGRhdGFcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgSW1hZ2VGaWxlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhbiBJbWFnZUZpbGUuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUltYWdlRmlsZVxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUltYWdlRmlsZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEltYWdlRmlsZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSW1hZ2VGaWxlIGRlc2NyaXB0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLkltYWdlRmlsZS5JRGVzY3JpcHRpb258bnVsbHx1bmRlZmluZWR9IGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkltYWdlRmlsZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEltYWdlRmlsZS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSW1hZ2VGaWxlIGRhdGEuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklCeXRlc1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBkYXRhXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkltYWdlRmlsZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEltYWdlRmlsZS5wcm90b3R5cGUuZGF0YSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgSW1hZ2VGaWxlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkltYWdlRmlsZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkltYWdlRmlsZVxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklJbWFnZUZpbGV9IG1lc3NhZ2UgSW1hZ2VGaWxlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBJbWFnZUZpbGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlc2NyaXB0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZXNjcmlwdGlvblwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkltYWdlRmlsZS5EZXNjcmlwdGlvbi5lbmNvZGUobWVzc2FnZS5kZXNjcmlwdGlvbiwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkYXRhXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJ5dGVzVmFsdWUuZW5jb2RlKG1lc3NhZ2UuZGF0YSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGFuIEltYWdlRmlsZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uSW1hZ2VGaWxlXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkltYWdlRmlsZX0gSW1hZ2VGaWxlXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBJbWFnZUZpbGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uSW1hZ2VGaWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlc2NyaXB0aW9uID0gJHJvb3QuaW0udHVybXMucHJvdG8uSW1hZ2VGaWxlLkRlc2NyaXB0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kYXRhID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJ5dGVzVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBJbWFnZUZpbGUuRGVzY3JpcHRpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZXNjcmlwdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkltYWdlRmlsZVxuICAgICAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbdXJsXSBEZXNjcmlwdGlvbiB1cmxcbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfSBbb3JpZ2luYWxdIERlc2NyaXB0aW9uIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFtpbWFnZVNpemVdIERlc2NyaXB0aW9uIGltYWdlU2l6ZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfSBbZmlsZVNpemVdIERlc2NyaXB0aW9uIGZpbGVTaXplXG4gICAgICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERlc2NyaXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uSW1hZ2VGaWxlXG4gICAgICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERlc2NyaXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSW1hZ2VGaWxlLklEZXNjcmlwdGlvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gRGVzY3JpcHRpb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEZXNjcmlwdGlvbiB1cmwuXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gdXJsXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5JbWFnZUZpbGUuRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbi5wcm90b3R5cGUudXJsID0gXCJcIjtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGVzY3JpcHRpb24gb3JpZ2luYWwuXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx8dW5kZWZpbmVkfSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uSW1hZ2VGaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24ucHJvdG90eXBlLm9yaWdpbmFsID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGVzY3JpcHRpb24gaW1hZ2VTaXplLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbHx1bmRlZmluZWR9IGltYWdlU2l6ZVxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uSW1hZ2VGaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24ucHJvdG90eXBlLmltYWdlU2l6ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERlc2NyaXB0aW9uIGZpbGVTaXplLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbHx1bmRlZmluZWR9IGZpbGVTaXplXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5JbWFnZUZpbGUuRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbi5wcm90b3R5cGUuZmlsZVNpemUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGVzY3JpcHRpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uSW1hZ2VGaWxlLkRlc2NyaXB0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5JbWFnZUZpbGUuRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLkltYWdlRmlsZS5JRGVzY3JpcHRpb259IG1lc3NhZ2UgRGVzY3JpcHRpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbi5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXJsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1cmxcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS51cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub3JpZ2luYWwgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm9yaWdpbmFsXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZW5jb2RlKG1lc3NhZ2Uub3JpZ2luYWwsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmltYWdlU2l6ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaW1hZ2VTaXplXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmVuY29kZShtZXNzYWdlLmltYWdlU2l6ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZVNpemUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImZpbGVTaXplXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmVuY29kZShtZXNzYWdlLmZpbGVTaXplLCB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGVzY3JpcHRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uSW1hZ2VGaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5JbWFnZUZpbGUuRGVzY3JpcHRpb259IERlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uSW1hZ2VGaWxlLkRlc2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXJsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub3JpZ2luYWwgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbWFnZVNpemUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZVNpemUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEltYWdlRmlsZTtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlZpZGVvRmlsZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBWaWRlb0ZpbGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJVmlkZW9GaWxlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5WaWRlb0ZpbGUuSURlc2NyaXB0aW9ufG51bGx9IFtkZXNjcmlwdGlvbl0gVmlkZW9GaWxlIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUJ5dGVzVmFsdWV8bnVsbH0gW2RhdGFdIFZpZGVvRmlsZSBkYXRhXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFZpZGVvRmlsZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBWaWRlb0ZpbGUuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVZpZGVvRmlsZVxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVZpZGVvRmlsZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFZpZGVvRmlsZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVmlkZW9GaWxlIGRlc2NyaXB0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLlZpZGVvRmlsZS5JRGVzY3JpcHRpb258bnVsbHx1bmRlZmluZWR9IGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlZpZGVvRmlsZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFZpZGVvRmlsZS5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVmlkZW9GaWxlIGRhdGEuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklCeXRlc1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBkYXRhXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlZpZGVvRmlsZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFZpZGVvRmlsZS5wcm90b3R5cGUuZGF0YSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVmlkZW9GaWxlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlZpZGVvRmlsZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlZpZGVvRmlsZVxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklWaWRlb0ZpbGV9IG1lc3NhZ2UgVmlkZW9GaWxlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBWaWRlb0ZpbGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlc2NyaXB0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZXNjcmlwdGlvblwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlZpZGVvRmlsZS5EZXNjcmlwdGlvbi5lbmNvZGUobWVzc2FnZS5kZXNjcmlwdGlvbiwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkYXRhXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJ5dGVzVmFsdWUuZW5jb2RlKG1lc3NhZ2UuZGF0YSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgVmlkZW9GaWxlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5WaWRlb0ZpbGVcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uVmlkZW9GaWxlfSBWaWRlb0ZpbGVcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFZpZGVvRmlsZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5WaWRlb0ZpbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVzY3JpcHRpb24gPSAkcm9vdC5pbS50dXJtcy5wcm90by5WaWRlb0ZpbGUuRGVzY3JpcHRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuQnl0ZXNWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIFZpZGVvRmlsZS5EZXNjcmlwdGlvbiA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIERlc2NyaXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVmlkZW9GaWxlXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt1cmxdIERlc2NyaXB0aW9uIHVybFxuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfSBbZHVyYXRpb25dIERlc2NyaXB0aW9uIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFtzaXplXSBEZXNjcmlwdGlvbiBzaXplXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbZm9ybWF0XSBEZXNjcmlwdGlvbiBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGVzY3JpcHRpb24uXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5WaWRlb0ZpbGVcbiAgICAgICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGVzY3JpcHRpb24uXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5WaWRlb0ZpbGUuSURlc2NyaXB0aW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBEZXNjcmlwdGlvbihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERlc2NyaXB0aW9uIHVybC5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSB1cmxcbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlZpZGVvRmlsZS5EZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uLnByb3RvdHlwZS51cmwgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEZXNjcmlwdGlvbiBkdXJhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBkdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVmlkZW9GaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24ucHJvdG90eXBlLmR1cmF0aW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGVzY3JpcHRpb24gc2l6ZS5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBzaXplXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5WaWRlb0ZpbGUuRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbi5wcm90b3R5cGUuc2l6ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERlc2NyaXB0aW9uIGZvcm1hdC5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5WaWRlb0ZpbGUuRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbi5wcm90b3R5cGUuZm9ybWF0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlc2NyaXB0aW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlZpZGVvRmlsZS5EZXNjcmlwdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVmlkZW9GaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5WaWRlb0ZpbGUuSURlc2NyaXB0aW9ufSBtZXNzYWdlIERlc2NyaXB0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVybCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXJsXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmR1cmF0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkdXJhdGlvblwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5kdXJhdGlvbiwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2l6ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2l6ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5zaXplLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5mb3JtYXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImZvcm1hdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UuZm9ybWF0LCB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGVzY3JpcHRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVmlkZW9GaWxlLkRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5WaWRlb0ZpbGUuRGVzY3JpcHRpb259IERlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVmlkZW9GaWxlLkRlc2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXJsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2l6ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mb3JtYXQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBWaWRlb0ZpbGU7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5Hcm91cEludml0YXRpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgR3JvdXBJbnZpdGF0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUdyb3VwSW52aXRhdGlvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtpZF0gR3JvdXBJbnZpdGF0aW9uIGlkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2NyZWF0aW9uRGF0ZV0gR3JvdXBJbnZpdGF0aW9uIGNyZWF0aW9uRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbY29udGVudF0gR3JvdXBJbnZpdGF0aW9uIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLlJlcXVlc3RTdGF0dXN8bnVsbH0gW3N0YXR1c10gR3JvdXBJbnZpdGF0aW9uIHN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtleHBpcmF0aW9uRGF0ZV0gR3JvdXBJbnZpdGF0aW9uIGV4cGlyYXRpb25EYXRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2dyb3VwSWRdIEdyb3VwSW52aXRhdGlvbiBncm91cElkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2ludml0ZXJJZF0gR3JvdXBJbnZpdGF0aW9uIGludml0ZXJJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtpbnZpdGVlSWRdIEdyb3VwSW52aXRhdGlvbiBpbnZpdGVlSWRcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgR3JvdXBJbnZpdGF0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEdyb3VwSW52aXRhdGlvbi5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJR3JvdXBJbnZpdGF0aW9uXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JR3JvdXBJbnZpdGF0aW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gR3JvdXBJbnZpdGF0aW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cEludml0YXRpb24gaWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBpZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEludml0YXRpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEludml0YXRpb24ucHJvdG90eXBlLmlkID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSW52aXRhdGlvbiBjcmVhdGlvbkRhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBjcmVhdGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBJbnZpdGF0aW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBJbnZpdGF0aW9uLnByb3RvdHlwZS5jcmVhdGlvbkRhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBJbnZpdGF0aW9uIGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gY29udGVudFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEludml0YXRpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEludml0YXRpb24ucHJvdG90eXBlLmNvbnRlbnQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBJbnZpdGF0aW9uIHN0YXR1cy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5SZXF1ZXN0U3RhdHVzfSBzdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBJbnZpdGF0aW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBJbnZpdGF0aW9uLnByb3RvdHlwZS5zdGF0dXMgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBJbnZpdGF0aW9uIGV4cGlyYXRpb25EYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZXhwaXJhdGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBJbnZpdGF0aW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBJbnZpdGF0aW9uLnByb3RvdHlwZS5leHBpcmF0aW9uRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cEludml0YXRpb24gZ3JvdXBJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBJbnZpdGF0aW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBJbnZpdGF0aW9uLnByb3RvdHlwZS5ncm91cElkID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSW52aXRhdGlvbiBpbnZpdGVySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBpbnZpdGVySWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBJbnZpdGF0aW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBJbnZpdGF0aW9uLnByb3RvdHlwZS5pbnZpdGVySWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBJbnZpdGF0aW9uIGludml0ZWVJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGludml0ZWVJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEludml0YXRpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEludml0YXRpb24ucHJvdG90eXBlLmludml0ZWVJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgR3JvdXBJbnZpdGF0aW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkdyb3VwSW52aXRhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSW52aXRhdGlvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklHcm91cEludml0YXRpb259IG1lc3NhZ2UgR3JvdXBJbnZpdGF0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEludml0YXRpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmlkLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNyZWF0aW9uRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY3JlYXRpb25EYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuY3JlYXRpb25EYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNvbnRlbnRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UuY29udGVudCwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGF0dXMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMCA9Ki8zMikuaW50MzIobWVzc2FnZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5leHBpcmF0aW9uRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZXhwaXJhdGlvbkRhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5leHBpcmF0aW9uRGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cElkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuZ3JvdXBJZCwgd3JpdGVyLnVpbnQzMigvKiBpZCA2LCB3aXJlVHlwZSAyID0qLzUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbnZpdGVySWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImludml0ZXJJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmludml0ZXJJZCwgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSAyID0qLzU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbnZpdGVlSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImludml0ZWVJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmludml0ZWVJZCwgd3JpdGVyLnVpbnQzMigvKiBpZCA4LCB3aXJlVHlwZSAyID0qLzY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgR3JvdXBJbnZpdGF0aW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEludml0YXRpb25cbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uR3JvdXBJbnZpdGF0aW9ufSBHcm91cEludml0YXRpb25cbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSW52aXRhdGlvbi5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cEludml0YXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY3JlYXRpb25EYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRlbnQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXR1cyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXhwaXJhdGlvbkRhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbnZpdGVySWQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW52aXRlZUlkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gR3JvdXBJbnZpdGF0aW9uO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uR3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElHcm91cEludml0YXRpb25zV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxpbS50dXJtcy5wcm90by5JR3JvdXBJbnZpdGF0aW9uPnxudWxsfSBbZ3JvdXBJbnZpdGF0aW9uc10gR3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uIGdyb3VwSW52aXRhdGlvbnNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbGFzdFVwZGF0ZWREYXRlXSBHcm91cEludml0YXRpb25zV2l0aFZlcnNpb24gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBHcm91cEludml0YXRpb25zV2l0aFZlcnNpb24uXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBJbnZpdGF0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbiBncm91cEludml0YXRpb25zLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxpbS50dXJtcy5wcm90by5JR3JvdXBJbnZpdGF0aW9uPn0gZ3JvdXBJbnZpdGF0aW9uc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEludml0YXRpb25zV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEludml0YXRpb25zV2l0aFZlcnNpb24ucHJvdG90eXBlLmdyb3VwSW52aXRhdGlvbnMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uIGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEludml0YXRpb25zV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEludml0YXRpb25zV2l0aFZlcnNpb24ucHJvdG90eXBlLmxhc3RVcGRhdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgR3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklHcm91cEludml0YXRpb25zV2l0aFZlcnNpb259IG1lc3NhZ2UgR3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEludml0YXRpb25zV2l0aFZlcnNpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSW52aXRhdGlvbnMgIT0gbnVsbCAmJiBtZXNzYWdlLmdyb3VwSW52aXRhdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmdyb3VwSW52aXRhdGlvbnMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uR3JvdXBJbnZpdGF0aW9uLmVuY29kZShtZXNzYWdlLmdyb3VwSW52aXRhdGlvbnNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIEdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbn0gR3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEludml0YXRpb25zV2l0aFZlcnNpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uR3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmdyb3VwSW52aXRhdGlvbnMgJiYgbWVzc2FnZS5ncm91cEludml0YXRpb25zLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJbnZpdGF0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJbnZpdGF0aW9ucy5wdXNoKCRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwSW52aXRhdGlvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbjtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkdyb3VwSm9pblF1ZXN0aW9uID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEdyb3VwSm9pblF1ZXN0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUdyb3VwSm9pblF1ZXN0aW9uXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2lkXSBHcm91cEpvaW5RdWVzdGlvbiBpZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtncm91cElkXSBHcm91cEpvaW5RdWVzdGlvbiBncm91cElkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx9IFtxdWVzdGlvbl0gR3JvdXBKb2luUXVlc3Rpb24gcXVlc3Rpb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5Ljxnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlPnxudWxsfSBbYW5zd2Vyc10gR3JvdXBKb2luUXVlc3Rpb24gYW5zd2Vyc1xuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFtzY29yZV0gR3JvdXBKb2luUXVlc3Rpb24gc2NvcmVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgR3JvdXBKb2luUXVlc3Rpb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgR3JvdXBKb2luUXVlc3Rpb24uXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUdyb3VwSm9pblF1ZXN0aW9uXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JR3JvdXBKb2luUXVlc3Rpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBHcm91cEpvaW5RdWVzdGlvbihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5zd2VycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSm9pblF1ZXN0aW9uIGlkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gaWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUXVlc3Rpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEpvaW5RdWVzdGlvbi5wcm90b3R5cGUuaWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBKb2luUXVlc3Rpb24gZ3JvdXBJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUXVlc3Rpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEpvaW5RdWVzdGlvbi5wcm90b3R5cGUuZ3JvdXBJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cEpvaW5RdWVzdGlvbiBxdWVzdGlvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBxdWVzdGlvblxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEpvaW5RdWVzdGlvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblF1ZXN0aW9uLnByb3RvdHlwZS5xdWVzdGlvbiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cEpvaW5RdWVzdGlvbiBhbnN3ZXJzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5Ljxnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlPn0gYW5zd2Vyc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEpvaW5RdWVzdGlvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblF1ZXN0aW9uLnByb3RvdHlwZS5hbnN3ZXJzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSm9pblF1ZXN0aW9uIHNjb3JlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfHVuZGVmaW5lZH0gc2NvcmVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUXVlc3Rpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEpvaW5RdWVzdGlvbi5wcm90b3R5cGUuc2NvcmUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEdyb3VwSm9pblF1ZXN0aW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUXVlc3Rpb25cbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JR3JvdXBKb2luUXVlc3Rpb259IG1lc3NhZ2UgR3JvdXBKb2luUXVlc3Rpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblF1ZXN0aW9uLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5pZCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cElkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuZ3JvdXBJZCwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5xdWVzdGlvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlc3Rpb25cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UucXVlc3Rpb24sIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYW5zd2VycyAhPSBudWxsICYmIG1lc3NhZ2UuYW5zd2Vycy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuYW5zd2Vycy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UuYW5zd2Vyc1tpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zY29yZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2NvcmVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5zY29yZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgR3JvdXBKb2luUXVlc3Rpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9ufSBHcm91cEpvaW5RdWVzdGlvblxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBKb2luUXVlc3Rpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uR3JvdXBKb2luUXVlc3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVzdGlvbiA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UuYW5zd2VycyAmJiBtZXNzYWdlLmFuc3dlcnMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hbnN3ZXJzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hbnN3ZXJzLnB1c2goJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NvcmUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBHcm91cEpvaW5RdWVzdGlvbjtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJR3JvdXBKb2luUXVlc3Rpb25zQW5zd2VyUmVzdWx0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3Njb3JlXSBHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHQgc2NvcmVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxzdHJpbmc+fG51bGx9IFtxdWVzdGlvbnNJZHNdIEdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdCBxdWVzdGlvbnNJZHNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW2pvaW5lZF0gR3JvdXBKb2luUXVlc3Rpb25zQW5zd2VyUmVzdWx0IGpvaW5lZFxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgR3JvdXBKb2luUXVlc3Rpb25zQW5zd2VyUmVzdWx0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHRcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHQocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0lkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdCBzY29yZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHNjb3JlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdC5wcm90b3R5cGUuc2NvcmUgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBKb2luUXVlc3Rpb25zQW5zd2VyUmVzdWx0IHF1ZXN0aW9uc0lkcy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48c3RyaW5nPn0gcXVlc3Rpb25zSWRzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdC5wcm90b3R5cGUucXVlc3Rpb25zSWRzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdCBqb2luZWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn0gam9pbmVkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdC5wcm90b3R5cGUuam9pbmVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgR3JvdXBKb2luUXVlc3Rpb25zQW5zd2VyUmVzdWx0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHR9IG1lc3NhZ2UgR3JvdXBKb2luUXVlc3Rpb25zQW5zd2VyUmVzdWx0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNjb3JlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzY29yZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQzMihtZXNzYWdlLnNjb3JlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlc3Rpb25zSWRzICE9IG51bGwgJiYgbWVzc2FnZS5xdWVzdGlvbnNJZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5xdWVzdGlvbnNJZHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmludDY0KG1lc3NhZ2UucXVlc3Rpb25zSWRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5qb2luZWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImpvaW5lZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMCA9Ki8yNCkuYm9vbChtZXNzYWdlLmpvaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5Hcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHR9IEdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBKb2luUXVlc3Rpb25zQW5zd2VyUmVzdWx0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zY29yZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UucXVlc3Rpb25zSWRzICYmIG1lc3NhZ2UucXVlc3Rpb25zSWRzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVlc3Rpb25zSWRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVlc3Rpb25zSWRzLnB1c2gocmVhZGVyLmludDY0KCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVlc3Rpb25zSWRzLnB1c2gocmVhZGVyLmludDY0KCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5qb2luZWQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJSZXN1bHQ7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5Hcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbiA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBHcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElHcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPGltLnR1cm1zLnByb3RvLklHcm91cEpvaW5RdWVzdGlvbj58bnVsbH0gW2dyb3VwSm9pblF1ZXN0aW9uc10gR3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb24gZ3JvdXBKb2luUXVlc3Rpb25zXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2xhc3RVcGRhdGVkRGF0ZV0gR3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb24gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElHcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gR3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwSm9pblF1ZXN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uIGdyb3VwSm9pblF1ZXN0aW9ucy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48aW0udHVybXMucHJvdG8uSUdyb3VwSm9pblF1ZXN0aW9uPn0gZ3JvdXBKb2luUXVlc3Rpb25zXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb24ucHJvdG90eXBlLmdyb3VwSm9pblF1ZXN0aW9ucyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbiBsYXN0VXBkYXRlZERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbi5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBHcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5Hcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9ufSBtZXNzYWdlIEdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbi5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBKb2luUXVlc3Rpb25zICE9IG51bGwgJiYgbWVzc2FnZS5ncm91cEpvaW5RdWVzdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmdyb3VwSm9pblF1ZXN0aW9ucy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cEpvaW5RdWVzdGlvbi5lbmNvZGUobWVzc2FnZS5ncm91cEpvaW5RdWVzdGlvbnNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIEdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5Hcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbn0gR3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmdyb3VwSm9pblF1ZXN0aW9ucyAmJiBtZXNzYWdlLmdyb3VwSm9pblF1ZXN0aW9ucy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSm9pblF1ZXN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBKb2luUXVlc3Rpb25zLnB1c2goJHJvb3QuaW0udHVybXMucHJvdG8uR3JvdXBKb2luUXVlc3Rpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBHcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbjtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkdyb3VwSm9pblJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgR3JvdXBKb2luUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElHcm91cEpvaW5SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2lkXSBHcm91cEpvaW5SZXF1ZXN0IGlkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2NyZWF0aW9uRGF0ZV0gR3JvdXBKb2luUmVxdWVzdCBjcmVhdGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW2NvbnRlbnRdIEdyb3VwSm9pblJlcXVlc3QgY29udGVudFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uUmVxdWVzdFN0YXR1c3xudWxsfSBbc3RhdHVzXSBHcm91cEpvaW5SZXF1ZXN0IHN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtleHBpcmF0aW9uRGF0ZV0gR3JvdXBKb2luUmVxdWVzdCBleHBpcmF0aW9uRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtncm91cElkXSBHcm91cEpvaW5SZXF1ZXN0IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbcmVxdWVzdGVySWRdIEdyb3VwSm9pblJlcXVlc3QgcmVxdWVzdGVySWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbcmVzcG9uZGVySWRdIEdyb3VwSm9pblJlcXVlc3QgcmVzcG9uZGVySWRcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgR3JvdXBKb2luUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBHcm91cEpvaW5SZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElHcm91cEpvaW5SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JR3JvdXBKb2luUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEdyb3VwSm9pblJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSm9pblJlcXVlc3QgaWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBpZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEpvaW5SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBKb2luUmVxdWVzdC5wcm90b3R5cGUuaWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBKb2luUmVxdWVzdCBjcmVhdGlvbkRhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBjcmVhdGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblJlcXVlc3QucHJvdG90eXBlLmNyZWF0aW9uRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cEpvaW5SZXF1ZXN0IGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gY29udGVudFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEpvaW5SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBKb2luUmVxdWVzdC5wcm90b3R5cGUuY29udGVudCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cEpvaW5SZXF1ZXN0IHN0YXR1cy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5SZXF1ZXN0U3RhdHVzfSBzdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblJlcXVlc3QucHJvdG90eXBlLnN0YXR1cyA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cEpvaW5SZXF1ZXN0IGV4cGlyYXRpb25EYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZXhwaXJhdGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblJlcXVlc3QucHJvdG90eXBlLmV4cGlyYXRpb25EYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSm9pblJlcXVlc3QgZ3JvdXBJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblJlcXVlc3QucHJvdG90eXBlLmdyb3VwSWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBKb2luUmVxdWVzdCByZXF1ZXN0ZXJJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHJlcXVlc3RlcklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEpvaW5SZXF1ZXN0LnByb3RvdHlwZS5yZXF1ZXN0ZXJJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cEpvaW5SZXF1ZXN0IHJlc3BvbmRlcklkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gcmVzcG9uZGVySWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblJlcXVlc3QucHJvdG90eXBlLnJlc3BvbmRlcklkID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBHcm91cEpvaW5SZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEpvaW5SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUdyb3VwSm9pblJlcXVlc3R9IG1lc3NhZ2UgR3JvdXBKb2luUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBKb2luUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuaWQsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY3JlYXRpb25EYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjcmVhdGlvbkRhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5jcmVhdGlvbkRhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29udGVudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY29udGVudFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5jb250ZW50LCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXR1cyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RhdHVzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAwID0qLzMyKS5pbnQzMihtZXNzYWdlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmV4cGlyYXRpb25EYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJleHBpcmF0aW9uRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmV4cGlyYXRpb25EYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5ncm91cElkLCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RlcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZXF1ZXN0ZXJJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLnJlcXVlc3RlcklkLCB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDIgPSovNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlc3BvbmRlcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZXNwb25kZXJJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLnJlc3BvbmRlcklkLCB3cml0ZXIudWludDMyKC8qIGlkIDgsIHdpcmVUeXBlIDIgPSovNjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBHcm91cEpvaW5SZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cEpvaW5SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkdyb3VwSm9pblJlcXVlc3R9IEdyb3VwSm9pblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uR3JvdXBKb2luUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jcmVhdGlvbkRhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhdHVzID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5leHBpcmF0aW9uRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cElkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RlcklkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc3BvbmRlcklkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gR3JvdXBKb2luUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElHcm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48aW0udHVybXMucHJvdG8uSUdyb3VwSm9pblJlcXVlc3Q+fG51bGx9IFtncm91cEpvaW5SZXF1ZXN0c10gR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbiBncm91cEpvaW5SZXF1ZXN0c1xuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIEdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBHcm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cEpvaW5SZXF1ZXN0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24gZ3JvdXBKb2luUmVxdWVzdHMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPGltLnR1cm1zLnByb3RvLklHcm91cEpvaW5SZXF1ZXN0Pn0gZ3JvdXBKb2luUmVxdWVzdHNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24ucHJvdG90eXBlLmdyb3VwSm9pblJlcXVlc3RzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24gbGFzdFVwZGF0ZWREYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uLnByb3RvdHlwZS5sYXN0VXBkYXRlZERhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbn0gbWVzc2FnZSBHcm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cEpvaW5SZXF1ZXN0cyAhPSBudWxsICYmIG1lc3NhZ2UuZ3JvdXBKb2luUmVxdWVzdHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmdyb3VwSm9pblJlcXVlc3RzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwSm9pblJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UuZ3JvdXBKb2luUmVxdWVzdHNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIEdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbn0gR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbi5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmdyb3VwSm9pblJlcXVlc3RzICYmIG1lc3NhZ2UuZ3JvdXBKb2luUmVxdWVzdHMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cEpvaW5SZXF1ZXN0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBKb2luUmVxdWVzdHMucHVzaCgkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cEpvaW5SZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gR3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbjtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkdyb3VwTWVtYmVyID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEdyb3VwTWVtYmVyLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUdyb3VwTWVtYmVyXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2dyb3VwSWRdIEdyb3VwTWVtYmVyIGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbdXNlcklkXSBHcm91cE1lbWJlciB1c2VySWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW25hbWVdIEdyb3VwTWVtYmVyIG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyUm9sZXxudWxsfSBbcm9sZV0gR3JvdXBNZW1iZXIgcm9sZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtqb2luRGF0ZV0gR3JvdXBNZW1iZXIgam9pbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbXV0ZUVuZERhdGVdIEdyb3VwTWVtYmVyIG11dGVFbmREYXRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5Vc2VyU3RhdHVzfG51bGx9IFt1c2VyU3RhdHVzXSBHcm91cE1lbWJlciB1c2VyU3RhdHVzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48aW0udHVybXMucHJvdG8uRGV2aWNlVHlwZT58bnVsbH0gW3VzaW5nRGV2aWNlVHlwZXNdIEdyb3VwTWVtYmVyIHVzaW5nRGV2aWNlVHlwZXNcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgR3JvdXBNZW1iZXIuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgR3JvdXBNZW1iZXIuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUdyb3VwTWVtYmVyXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JR3JvdXBNZW1iZXI9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBHcm91cE1lbWJlcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXNpbmdEZXZpY2VUeXBlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwTWVtYmVyIGdyb3VwSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBncm91cElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBNZW1iZXIucHJvdG90eXBlLmdyb3VwSWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBNZW1iZXIgdXNlcklkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gdXNlcklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBNZW1iZXIucHJvdG90eXBlLnVzZXJJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cE1lbWJlciBuYW1lLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbHx1bmRlZmluZWR9IG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cE1lbWJlci5wcm90b3R5cGUubmFtZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cE1lbWJlciByb2xlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyUm9sZX0gcm9sZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cE1lbWJlclxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwTWVtYmVyLnByb3RvdHlwZS5yb2xlID0gMDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwTWVtYmVyIGpvaW5EYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gam9pbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cE1lbWJlci5wcm90b3R5cGUuam9pbkRhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBNZW1iZXIgbXV0ZUVuZERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBtdXRlRW5kRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cE1lbWJlclxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwTWVtYmVyLnByb3RvdHlwZS5tdXRlRW5kRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cE1lbWJlciB1c2VyU3RhdHVzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLlVzZXJTdGF0dXN9IHVzZXJTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cE1lbWJlci5wcm90b3R5cGUudXNlclN0YXR1cyA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cE1lbWJlciB1c2luZ0RldmljZVR5cGVzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxpbS50dXJtcy5wcm90by5EZXZpY2VUeXBlPn0gdXNpbmdEZXZpY2VUeXBlc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cE1lbWJlclxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwTWVtYmVyLnByb3RvdHlwZS51c2luZ0RldmljZVR5cGVzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBHcm91cE1lbWJlciBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5Hcm91cE1lbWJlci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUdyb3VwTWVtYmVyfSBtZXNzYWdlIEdyb3VwTWVtYmVyIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cE1lbWJlci5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmdyb3VwSWQsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1c2VySWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS51c2VySWQsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5uYW1lLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJvbGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJvbGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDAgPSovMzIpLmludDMyKG1lc3NhZ2Uucm9sZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmpvaW5EYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJqb2luRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmpvaW5EYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm11dGVFbmREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtdXRlRW5kRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLm11dGVFbmREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJTdGF0dXMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInVzZXJTdGF0dXNcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDAgPSovNTYpLmludDMyKG1lc3NhZ2UudXNlclN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzaW5nRGV2aWNlVHlwZXMgIT0gbnVsbCAmJiBtZXNzYWdlLnVzaW5nRGV2aWNlVHlwZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDgsIHdpcmVUeXBlIDIgPSovNjYpLmZvcmsoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS51c2luZ0RldmljZVR5cGVzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5pbnQzMihtZXNzYWdlLnVzaW5nRGV2aWNlVHlwZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBHcm91cE1lbWJlciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJ9IEdyb3VwTWVtYmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cE1lbWJlci5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cE1lbWJlcigpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cElkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5qb2luRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tdXRlRW5kRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51c2VyU3RhdHVzID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS51c2luZ0RldmljZVR5cGVzICYmIG1lc3NhZ2UudXNpbmdEZXZpY2VUeXBlcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzaW5nRGV2aWNlVHlwZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmQyID0gcmVhZGVyLnVpbnQzMigpICsgcmVhZGVyLnBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51c2luZ0RldmljZVR5cGVzLnB1c2gocmVhZGVyLmludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzaW5nRGV2aWNlVHlwZXMucHVzaChyZWFkZXIuaW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdyb3VwTWVtYmVyO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uR3JvdXBNZW1iZXJzV2l0aFZlcnNpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgR3JvdXBNZW1iZXJzV2l0aFZlcnNpb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJR3JvdXBNZW1iZXJzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxpbS50dXJtcy5wcm90by5JR3JvdXBNZW1iZXI+fG51bGx9IFtncm91cE1lbWJlcnNdIEdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uIGdyb3VwTWVtYmVyc1xuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIEdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uIGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBHcm91cE1lbWJlcnNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBHcm91cE1lbWJlcnNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJR3JvdXBNZW1iZXJzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklHcm91cE1lbWJlcnNXaXRoVmVyc2lvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cE1lbWJlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cE1lbWJlcnNXaXRoVmVyc2lvbiBncm91cE1lbWJlcnMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPGltLnR1cm1zLnByb3RvLklHcm91cE1lbWJlcj59IGdyb3VwTWVtYmVyc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cE1lbWJlcnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uLnByb3RvdHlwZS5ncm91cE1lbWJlcnMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBNZW1iZXJzV2l0aFZlcnNpb24gbGFzdFVwZGF0ZWREYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBNZW1iZXJzV2l0aFZlcnNpb24ucHJvdG90eXBlLmxhc3RVcGRhdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgR3JvdXBNZW1iZXJzV2l0aFZlcnNpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJzV2l0aFZlcnNpb24udmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cE1lbWJlcnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklHcm91cE1lbWJlcnNXaXRoVmVyc2lvbn0gbWVzc2FnZSBHcm91cE1lbWJlcnNXaXRoVmVyc2lvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBNZW1iZXJzV2l0aFZlcnNpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwTWVtYmVycyAhPSBudWxsICYmIG1lc3NhZ2UuZ3JvdXBNZW1iZXJzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5ncm91cE1lbWJlcnMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXIuZW5jb2RlKG1lc3NhZ2UuZ3JvdXBNZW1iZXJzW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBHcm91cE1lbWJlcnNXaXRoVmVyc2lvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJzV2l0aFZlcnNpb259IEdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cE1lbWJlcnNXaXRoVmVyc2lvbi5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cE1lbWJlcnNXaXRoVmVyc2lvbigpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5ncm91cE1lbWJlcnMgJiYgbWVzc2FnZS5ncm91cE1lbWJlcnMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cE1lbWJlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwTWVtYmVycy5wdXNoKCRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gR3JvdXBNZW1iZXJzV2l0aFZlcnNpb247XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5Hcm91cCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBHcm91cC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElHcm91cFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtpZF0gR3JvdXAgaWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbdHlwZUlkXSBHcm91cCB0eXBlSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbY3JlYXRvcklkXSBHcm91cCBjcmVhdG9ySWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbb3duZXJJZF0gR3JvdXAgb3duZXJJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbbmFtZV0gR3JvdXAgbmFtZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbaW50cm9dIEdyb3VwIGludHJvXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx9IFthbm5vdW5jZW1lbnRdIEdyb3VwIGFubm91bmNlbWVudFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbcHJvZmlsZVBpY3R1cmVVcmxdIEdyb3VwIHByb2ZpbGVQaWN0dXJlVXJsXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2NyZWF0aW9uRGF0ZV0gR3JvdXAgY3JlYXRpb25EYXRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2RlbGV0aW9uRGF0ZV0gR3JvdXAgZGVsZXRpb25EYXRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW211dGVFbmREYXRlXSBHcm91cCBtdXRlRW5kRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklCb29sVmFsdWV8bnVsbH0gW2FjdGl2ZV0gR3JvdXAgYWN0aXZlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEdyb3VwLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEdyb3VwLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElHcm91cFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUdyb3VwPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gR3JvdXAocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwIGlkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gaWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cC5wcm90b3R5cGUuaWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXAgdHlwZUlkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gdHlwZUlkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXAucHJvdG90eXBlLnR5cGVJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cCBjcmVhdG9ySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBjcmVhdG9ySWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cC5wcm90b3R5cGUuY3JlYXRvcklkID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwIG93bmVySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBvd25lcklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXAucHJvdG90eXBlLm93bmVySWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXAgbmFtZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBuYW1lXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXAucHJvdG90eXBlLm5hbWUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXAgaW50cm8uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gaW50cm9cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cC5wcm90b3R5cGUuaW50cm8gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXAgYW5ub3VuY2VtZW50LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbHx1bmRlZmluZWR9IGFubm91bmNlbWVudFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwLnByb3RvdHlwZS5hbm5vdW5jZW1lbnQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXAgcHJvZmlsZVBpY3R1cmVVcmwuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gcHJvZmlsZVBpY3R1cmVVcmxcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cC5wcm90b3R5cGUucHJvZmlsZVBpY3R1cmVVcmwgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXAgY3JlYXRpb25EYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gY3JlYXRpb25EYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXAucHJvdG90eXBlLmNyZWF0aW9uRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cCBkZWxldGlvbkRhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBkZWxldGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cC5wcm90b3R5cGUuZGVsZXRpb25EYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdyb3VwIG11dGVFbmREYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbXV0ZUVuZERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cC5wcm90b3R5cGUubXV0ZUVuZERhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXAgYWN0aXZlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx8dW5kZWZpbmVkfSBhY3RpdmVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cC5wcm90b3R5cGUuYWN0aXZlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBHcm91cCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5Hcm91cC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3VwXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUdyb3VwfSBtZXNzYWdlIEdyb3VwIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuaWQsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZUlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0eXBlSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS50eXBlSWQsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY3JlYXRvcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjcmVhdG9ySWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5jcmVhdG9ySWQsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub3duZXJJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwib3duZXJJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLm93bmVySWQsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5uYW1lLCB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmludHJvICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbnRyb1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5pbnRybywgd3JpdGVyLnVpbnQzMigvKiBpZCA2LCB3aXJlVHlwZSAyID0qLzUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hbm5vdW5jZW1lbnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImFubm91bmNlbWVudFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5hbm5vdW5jZW1lbnQsIHdyaXRlci51aW50MzIoLyogaWQgNywgd2lyZVR5cGUgMiA9Ki81OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucHJvZmlsZVBpY3R1cmVVcmwgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInByb2ZpbGVQaWN0dXJlVXJsXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmVuY29kZShtZXNzYWdlLnByb2ZpbGVQaWN0dXJlVXJsLCB3cml0ZXIudWludDMyKC8qIGlkIDgsIHdpcmVUeXBlIDIgPSovNjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNyZWF0aW9uRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY3JlYXRpb25EYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuY3JlYXRpb25EYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDksIHdpcmVUeXBlIDIgPSovNzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGV0aW9uRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGVsZXRpb25EYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuZGVsZXRpb25EYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDEwLCB3aXJlVHlwZSAyID0qLzgyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tdXRlRW5kRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibXV0ZUVuZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5tdXRlRW5kRGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMSwgd2lyZVR5cGUgMiA9Ki85MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWN0aXZlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJhY3RpdmVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmVuY29kZShtZXNzYWdlLmFjdGl2ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMiwgd2lyZVR5cGUgMiA9Ki85OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIEdyb3VwIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5Hcm91cH0gR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3VwLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnR5cGVJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jcmVhdG9ySWQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub3duZXJJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbnRybyA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYW5ub3VuY2VtZW50ID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcm9maWxlUGljdHVyZVVybCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY3JlYXRpb25EYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWxldGlvbkRhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm11dGVFbmREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hY3RpdmUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdyb3VwO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uR3JvdXBzV2l0aFZlcnNpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgR3JvdXBzV2l0aFZlcnNpb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJR3JvdXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxpbS50dXJtcy5wcm90by5JR3JvdXA+fG51bGx9IFtncm91cHNdIEdyb3Vwc1dpdGhWZXJzaW9uIGdyb3Vwc1xuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIEdyb3Vwc1dpdGhWZXJzaW9uIGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBHcm91cHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBHcm91cHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJR3JvdXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklHcm91cHNXaXRoVmVyc2lvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEdyb3Vwc1dpdGhWZXJzaW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHcm91cHNXaXRoVmVyc2lvbiBncm91cHMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPGltLnR1cm1zLnByb3RvLklHcm91cD59IGdyb3Vwc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEdyb3Vwc1dpdGhWZXJzaW9uLnByb3RvdHlwZS5ncm91cHMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR3JvdXBzV2l0aFZlcnNpb24gbGFzdFVwZGF0ZWREYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkdyb3Vwc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBzV2l0aFZlcnNpb24ucHJvdG90eXBlLmxhc3RVcGRhdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgR3JvdXBzV2l0aFZlcnNpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uR3JvdXBzV2l0aFZlcnNpb24udmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Hcm91cHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklHcm91cHNXaXRoVmVyc2lvbn0gbWVzc2FnZSBHcm91cHNXaXRoVmVyc2lvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgR3JvdXBzV2l0aFZlcnNpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwcyAhPSBudWxsICYmIG1lc3NhZ2UuZ3JvdXBzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5ncm91cHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uR3JvdXAuZW5jb2RlKG1lc3NhZ2UuZ3JvdXBzW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBHcm91cHNXaXRoVmVyc2lvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uR3JvdXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uR3JvdXBzV2l0aFZlcnNpb259IEdyb3Vwc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBHcm91cHNXaXRoVmVyc2lvbi5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cHNXaXRoVmVyc2lvbigpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5ncm91cHMgJiYgbWVzc2FnZS5ncm91cHMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3Vwcy5wdXNoKCRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gR3JvdXBzV2l0aFZlcnNpb247XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5NZXNzYWdlU3RhdHVzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIE1lc3NhZ2VTdGF0dXMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJTWVzc2FnZVN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFttZXNzYWdlSWRdIE1lc3NhZ2VTdGF0dXMgbWVzc2FnZUlkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW3RvVXNlcklkXSBNZXNzYWdlU3RhdHVzIHRvVXNlcklkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5NZXNzYWdlRGVsaXZlcnlTdGF0dXN8bnVsbH0gW2RlbGl2ZXJ5U3RhdHVzXSBNZXNzYWdlU3RhdHVzIGRlbGl2ZXJ5U3RhdHVzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW3JlY2VwdGlvbkRhdGVdIE1lc3NhZ2VTdGF0dXMgcmVjZXB0aW9uRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtyZWFkRGF0ZV0gTWVzc2FnZVN0YXR1cyByZWFkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtyZWNhbGxEYXRlXSBNZXNzYWdlU3RhdHVzIHJlY2FsbERhdGVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTWVzc2FnZVN0YXR1cy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBNZXNzYWdlU3RhdHVzLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElNZXNzYWdlU3RhdHVzXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JTWVzc2FnZVN0YXR1cz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE1lc3NhZ2VTdGF0dXMocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIE1lc3NhZ2VTdGF0dXMgbWVzc2FnZUlkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbWVzc2FnZUlkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlU3RhdHVzLnByb3RvdHlwZS5tZXNzYWdlSWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWVzc2FnZVN0YXR1cyB0b1VzZXJJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHRvVXNlcklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlU3RhdHVzLnByb3RvdHlwZS50b1VzZXJJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBNZXNzYWdlU3RhdHVzIGRlbGl2ZXJ5U3RhdHVzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLk1lc3NhZ2VEZWxpdmVyeVN0YXR1c30gZGVsaXZlcnlTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZVN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTdGF0dXMucHJvdG90eXBlLmRlbGl2ZXJ5U3RhdHVzID0gMDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIE1lc3NhZ2VTdGF0dXMgcmVjZXB0aW9uRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHJlY2VwdGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZVN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTdGF0dXMucHJvdG90eXBlLnJlY2VwdGlvbkRhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWVzc2FnZVN0YXR1cyByZWFkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHJlYWREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlU3RhdHVzLnByb3RvdHlwZS5yZWFkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBNZXNzYWdlU3RhdHVzIHJlY2FsbERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSByZWNhbGxEYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlU3RhdHVzLnByb3RvdHlwZS5yZWNhbGxEYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBNZXNzYWdlU3RhdHVzIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5NZXNzYWdlU3RhdHVzXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSU1lc3NhZ2VTdGF0dXN9IG1lc3NhZ2UgTWVzc2FnZVN0YXR1cyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZVN0YXR1cy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZUlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtZXNzYWdlSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5tZXNzYWdlSWQsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudG9Vc2VySWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRvVXNlcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UudG9Vc2VySWQsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVsaXZlcnlTdGF0dXMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGl2ZXJ5U3RhdHVzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAwID0qLzI0KS5pbnQzMihtZXNzYWdlLmRlbGl2ZXJ5U3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVjZXB0aW9uRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVjZXB0aW9uRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLnJlY2VwdGlvbkRhdGUsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVhZERhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlYWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UucmVhZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVjYWxsRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVjYWxsRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLnJlY2FsbERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIE1lc3NhZ2VTdGF0dXMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uTWVzc2FnZVN0YXR1c30gTWVzc2FnZVN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZVN0YXR1cy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5NZXNzYWdlU3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50b1VzZXJJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWxpdmVyeVN0YXR1cyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVjZXB0aW9uRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWFkRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWNhbGxEYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZVN0YXR1cztcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLk1lc3NhZ2VTdGF0dXNlcyA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBNZXNzYWdlU3RhdHVzZXMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJTWVzc2FnZVN0YXR1c2VzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48aW0udHVybXMucHJvdG8uSU1lc3NhZ2VTdGF0dXM+fG51bGx9IFttZXNzYWdlU3RhdHVzZXNdIE1lc3NhZ2VTdGF0dXNlcyBtZXNzYWdlU3RhdHVzZXNcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTWVzc2FnZVN0YXR1c2VzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIE1lc3NhZ2VTdGF0dXNlcy5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJTWVzc2FnZVN0YXR1c2VzXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JTWVzc2FnZVN0YXR1c2VzPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gTWVzc2FnZVN0YXR1c2VzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlU3RhdHVzZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBNZXNzYWdlU3RhdHVzZXMgbWVzc2FnZVN0YXR1c2VzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxpbS50dXJtcy5wcm90by5JTWVzc2FnZVN0YXR1cz59IG1lc3NhZ2VTdGF0dXNlc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5NZXNzYWdlU3RhdHVzZXNcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlU3RhdHVzZXMucHJvdG90eXBlLm1lc3NhZ2VTdGF0dXNlcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgTWVzc2FnZVN0YXR1c2VzIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXNlcy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXNlc1xuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklNZXNzYWdlU3RhdHVzZXN9IG1lc3NhZ2UgTWVzc2FnZVN0YXR1c2VzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlU3RhdHVzZXMuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VTdGF0dXNlcyAhPSBudWxsICYmIG1lc3NhZ2UubWVzc2FnZVN0YXR1c2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5tZXNzYWdlU3RhdHVzZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uTWVzc2FnZVN0YXR1cy5lbmNvZGUobWVzc2FnZS5tZXNzYWdlU3RhdHVzZXNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIE1lc3NhZ2VTdGF0dXNlcyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZVN0YXR1c2VzXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXNlc30gTWVzc2FnZVN0YXR1c2VzXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlU3RhdHVzZXMuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uTWVzc2FnZVN0YXR1c2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLm1lc3NhZ2VTdGF0dXNlcyAmJiBtZXNzYWdlLm1lc3NhZ2VTdGF0dXNlcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VTdGF0dXNlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZVN0YXR1c2VzLnB1c2goJHJvb3QuaW0udHVybXMucHJvdG8uTWVzc2FnZVN0YXR1cy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZVN0YXR1c2VzO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uTWVzc2FnZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBNZXNzYWdlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbaWRdIE1lc3NhZ2UgaWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbZGVsaXZlcnlEYXRlXSBNZXNzYWdlIGRlbGl2ZXJ5RGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtkZWxldGlvbkRhdGVdIE1lc3NhZ2UgZGVsZXRpb25EYXRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx9IFt0ZXh0XSBNZXNzYWdlIHRleHRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbc2VuZGVySWRdIE1lc3NhZ2Ugc2VuZGVySWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbZ3JvdXBJZF0gTWVzc2FnZSBncm91cElkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfSBbaXNTeXN0ZW1NZXNzYWdlXSBNZXNzYWdlIGlzU3lzdGVtTWVzc2FnZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtyZWNpcGllbnRJZF0gTWVzc2FnZSByZWNpcGllbnRJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPGdvb2dsZS5wcm90b2J1Zi5JQnl0ZXNWYWx1ZT58bnVsbH0gW3JlY29yZHNdIE1lc3NhZ2UgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBNZXNzYWdlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIE1lc3NhZ2UuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklNZXNzYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gTWVzc2FnZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIE1lc3NhZ2UgaWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBpZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5NZXNzYWdlXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZS5wcm90b3R5cGUuaWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWVzc2FnZSBkZWxpdmVyeURhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBkZWxpdmVyeURhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIE1lc3NhZ2UucHJvdG90eXBlLmRlbGl2ZXJ5RGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBNZXNzYWdlIGRlbGV0aW9uRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGRlbGV0aW9uRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5NZXNzYWdlXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZS5wcm90b3R5cGUuZGVsZXRpb25EYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIE1lc3NhZ2UgdGV4dC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSB0ZXh0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlLnByb3RvdHlwZS50ZXh0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIE1lc3NhZ2Ugc2VuZGVySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBzZW5kZXJJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5NZXNzYWdlXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZS5wcm90b3R5cGUuc2VuZGVySWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWVzc2FnZSBncm91cElkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5NZXNzYWdlXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZS5wcm90b3R5cGUuZ3JvdXBJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBNZXNzYWdlIGlzU3lzdGVtTWVzc2FnZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfHVuZGVmaW5lZH0gaXNTeXN0ZW1NZXNzYWdlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlLnByb3RvdHlwZS5pc1N5c3RlbU1lc3NhZ2UgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWVzc2FnZSByZWNpcGllbnRJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHJlY2lwaWVudElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlLnByb3RvdHlwZS5yZWNpcGllbnRJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBNZXNzYWdlIHJlY29yZHMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPGdvb2dsZS5wcm90b2J1Zi5JQnl0ZXNWYWx1ZT59IHJlY29yZHNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIE1lc3NhZ2UucHJvdG90eXBlLnJlY29yZHMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIE1lc3NhZ2UgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uTWVzc2FnZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JTWVzc2FnZX0gbWVzc2FnZSBNZXNzYWdlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5pZCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWxpdmVyeURhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGl2ZXJ5RGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmRlbGl2ZXJ5RGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWxldGlvbkRhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGV0aW9uRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmRlbGV0aW9uRGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50ZXh0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0ZXh0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmVuY29kZShtZXNzYWdlLnRleHQsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VuZGVySWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNlbmRlcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2Uuc2VuZGVySWQsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmdyb3VwSWQsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaXNTeXN0ZW1NZXNzYWdlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpc1N5c3RlbU1lc3NhZ2VcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmVuY29kZShtZXNzYWdlLmlzU3lzdGVtTWVzc2FnZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSAyID0qLzU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWNpcGllbnRJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVjaXBpZW50SWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5yZWNpcGllbnRJZCwgd3JpdGVyLnVpbnQzMigvKiBpZCA4LCB3aXJlVHlwZSAyID0qLzY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWNvcmRzICE9IG51bGwgJiYgbWVzc2FnZS5yZWNvcmRzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5yZWNvcmRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5CeXRlc1ZhbHVlLmVuY29kZShtZXNzYWdlLnJlY29yZHNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgOSwgd2lyZVR5cGUgMiA9Ki83NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIE1lc3NhZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uTWVzc2FnZX0gTWVzc2FnZVxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5NZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGl2ZXJ5RGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWxldGlvbkRhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGV4dCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VuZGVySWQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pc1N5c3RlbU1lc3NhZ2UgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWNpcGllbnRJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5yZWNvcmRzICYmIG1lc3NhZ2UucmVjb3Jkcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlY29yZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlY29yZHMucHVzaCgkcm9vdC5nb29nbGUucHJvdG9idWYuQnl0ZXNWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZTtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsTGlzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBNZXNzYWdlc1dpdGhUb3RhbExpc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJTWVzc2FnZXNXaXRoVG90YWxMaXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48aW0udHVybXMucHJvdG8uSU1lc3NhZ2VzV2l0aFRvdGFsPnxudWxsfSBbbWVzc2FnZXNXaXRoVG90YWxMaXN0XSBNZXNzYWdlc1dpdGhUb3RhbExpc3QgbWVzc2FnZXNXaXRoVG90YWxMaXN0XG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IE1lc3NhZ2VzV2l0aFRvdGFsTGlzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBNZXNzYWdlc1dpdGhUb3RhbExpc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSU1lc3NhZ2VzV2l0aFRvdGFsTGlzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSU1lc3NhZ2VzV2l0aFRvdGFsTGlzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE1lc3NhZ2VzV2l0aFRvdGFsTGlzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNXaXRoVG90YWxMaXN0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWVzc2FnZXNXaXRoVG90YWxMaXN0IG1lc3NhZ2VzV2l0aFRvdGFsTGlzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48aW0udHVybXMucHJvdG8uSU1lc3NhZ2VzV2l0aFRvdGFsPn0gbWVzc2FnZXNXaXRoVG90YWxMaXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsTGlzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VzV2l0aFRvdGFsTGlzdC5wcm90b3R5cGUubWVzc2FnZXNXaXRoVG90YWxMaXN0ID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBNZXNzYWdlc1dpdGhUb3RhbExpc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uTWVzc2FnZXNXaXRoVG90YWxMaXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZXNXaXRoVG90YWxMaXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSU1lc3NhZ2VzV2l0aFRvdGFsTGlzdH0gbWVzc2FnZSBNZXNzYWdlc1dpdGhUb3RhbExpc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VzV2l0aFRvdGFsTGlzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZXNXaXRoVG90YWxMaXN0ICE9IG51bGwgJiYgbWVzc2FnZS5tZXNzYWdlc1dpdGhUb3RhbExpc3QubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLm1lc3NhZ2VzV2l0aFRvdGFsTGlzdC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5NZXNzYWdlc1dpdGhUb3RhbC5lbmNvZGUobWVzc2FnZS5tZXNzYWdlc1dpdGhUb3RhbExpc3RbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIE1lc3NhZ2VzV2l0aFRvdGFsTGlzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZXNXaXRoVG90YWxMaXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsTGlzdH0gTWVzc2FnZXNXaXRoVG90YWxMaXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlc1dpdGhUb3RhbExpc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uTWVzc2FnZXNXaXRoVG90YWxMaXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLm1lc3NhZ2VzV2l0aFRvdGFsTGlzdCAmJiBtZXNzYWdlLm1lc3NhZ2VzV2l0aFRvdGFsTGlzdC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VzV2l0aFRvdGFsTGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZXNXaXRoVG90YWxMaXN0LnB1c2goJHJvb3QuaW0udHVybXMucHJvdG8uTWVzc2FnZXNXaXRoVG90YWwuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VzV2l0aFRvdGFsTGlzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIE1lc3NhZ2VzV2l0aFRvdGFsLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSU1lc3NhZ2VzV2l0aFRvdGFsXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3RvdGFsXSBNZXNzYWdlc1dpdGhUb3RhbCB0b3RhbFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uQ2hhdFR5cGV8bnVsbH0gW2NoYXRUeXBlXSBNZXNzYWdlc1dpdGhUb3RhbCBjaGF0VHlwZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtmcm9tSWRdIE1lc3NhZ2VzV2l0aFRvdGFsIGZyb21JZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPGltLnR1cm1zLnByb3RvLklNZXNzYWdlPnxudWxsfSBbbWVzc2FnZXNdIE1lc3NhZ2VzV2l0aFRvdGFsIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IE1lc3NhZ2VzV2l0aFRvdGFsLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIE1lc3NhZ2VzV2l0aFRvdGFsLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElNZXNzYWdlc1dpdGhUb3RhbFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSU1lc3NhZ2VzV2l0aFRvdGFsPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gTWVzc2FnZXNXaXRoVG90YWwocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWVzc2FnZXNXaXRoVG90YWwgdG90YWwuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSB0b3RhbFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5NZXNzYWdlc1dpdGhUb3RhbFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VzV2l0aFRvdGFsLnByb3RvdHlwZS50b3RhbCA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBNZXNzYWdlc1dpdGhUb3RhbCBjaGF0VHlwZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5DaGF0VHlwZX0gY2hhdFR5cGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZXNXaXRoVG90YWxcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlc1dpdGhUb3RhbC5wcm90b3R5cGUuY2hhdFR5cGUgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWVzc2FnZXNXaXRoVG90YWwgZnJvbUlkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZnJvbUlkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZXNXaXRoVG90YWwucHJvdG90eXBlLmZyb21JZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogTWVzc2FnZXNXaXRoVG90YWwgbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPGltLnR1cm1zLnByb3RvLklNZXNzYWdlPn0gbWVzc2FnZXNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZXNXaXRoVG90YWxcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlc1dpdGhUb3RhbC5wcm90b3R5cGUubWVzc2FnZXMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIE1lc3NhZ2VzV2l0aFRvdGFsIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZXNXaXRoVG90YWxcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JTWVzc2FnZXNXaXRoVG90YWx9IG1lc3NhZ2UgTWVzc2FnZXNXaXRoVG90YWwgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VzV2l0aFRvdGFsLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50b3RhbCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidG90YWxcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50MzIobWVzc2FnZS50b3RhbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNoYXRUeXBlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjaGF0VHlwZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikuaW50MzIobWVzc2FnZS5jaGF0VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmZyb21JZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZnJvbUlkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAwID0qLzI0KS5pbnQ2NChtZXNzYWdlLmZyb21JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VzICE9IG51bGwgJiYgbWVzc2FnZS5tZXNzYWdlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UubWVzc2FnZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uTWVzc2FnZS5lbmNvZGUobWVzc2FnZS5tZXNzYWdlc1tpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgTWVzc2FnZXNXaXRoVG90YWwgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsfSBNZXNzYWdlc1dpdGhUb3RhbFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZXNXaXRoVG90YWwuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uTWVzc2FnZXNXaXRoVG90YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudG90YWwgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNoYXRUeXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mcm9tSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UubWVzc2FnZXMgJiYgbWVzc2FnZS5tZXNzYWdlcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlcy5wdXNoKCRyb290LmltLnR1cm1zLnByb3RvLk1lc3NhZ2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VzV2l0aFRvdGFsO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uTWVzc2FnZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgTWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJTWVzc2FnZXNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxpbS50dXJtcy5wcm90by5JTWVzc2FnZT58bnVsbH0gW21lc3NhZ2VzXSBNZXNzYWdlcyBtZXNzYWdlc1xuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBNZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBNZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJTWVzc2FnZXNcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklNZXNzYWdlcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE1lc3NhZ2VzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIE1lc3NhZ2VzIG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxpbS50dXJtcy5wcm90by5JTWVzc2FnZT59IG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgTWVzc2FnZXMucHJvdG90eXBlLm1lc3NhZ2VzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBNZXNzYWdlcyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5NZXNzYWdlcy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLk1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSU1lc3NhZ2VzfSBtZXNzYWdlIE1lc3NhZ2VzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlcy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZXMgIT0gbnVsbCAmJiBtZXNzYWdlLm1lc3NhZ2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5tZXNzYWdlcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5NZXNzYWdlLmVuY29kZShtZXNzYWdlLm1lc3NhZ2VzW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBNZXNzYWdlcyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uTWVzc2FnZXNcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uTWVzc2FnZXN9IE1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBNZXNzYWdlcy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5NZXNzYWdlcygpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5tZXNzYWdlcyAmJiBtZXNzYWdlLm1lc3NhZ2VzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VzLnB1c2goJHJvb3QuaW0udHVybXMucHJvdG8uTWVzc2FnZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZXM7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5BY2tub3dsZWRnZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gQWNrbm93bGVkZ2UuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJQWNrbm93bGVkZ2VcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZGVsaXZlcnlEYXRlXSBBY2tub3dsZWRnZSBkZWxpdmVyeURhdGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbWVzc2FnZUlkXSBBY2tub3dsZWRnZSBtZXNzYWdlSWRcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQWNrbm93bGVkZ2UuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIEFja25vd2xlZGdlLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElBY2tub3dsZWRnZVxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUFja25vd2xlZGdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQWNrbm93bGVkZ2UocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEFja25vd2xlZGdlIGRlbGl2ZXJ5RGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGRlbGl2ZXJ5RGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5BY2tub3dsZWRnZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEFja25vd2xlZGdlLnByb3RvdHlwZS5kZWxpdmVyeURhdGUgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEFja25vd2xlZGdlIG1lc3NhZ2VJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IG1lc3NhZ2VJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5BY2tub3dsZWRnZVxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEFja25vd2xlZGdlLnByb3RvdHlwZS5tZXNzYWdlSWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEFja25vd2xlZGdlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkFja25vd2xlZGdlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQWNrbm93bGVkZ2VcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JQWNrbm93bGVkZ2V9IG1lc3NhZ2UgQWNrbm93bGVkZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEFja25vd2xlZGdlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWxpdmVyeURhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGl2ZXJ5RGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLmRlbGl2ZXJ5RGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWVzc2FnZUlkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubWVzc2FnZUlkLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYW4gQWNrbm93bGVkZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkFja25vd2xlZGdlXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkFja25vd2xlZGdlfSBBY2tub3dsZWRnZVxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQWNrbm93bGVkZ2UuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQWNrbm93bGVkZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVsaXZlcnlEYXRlID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFja25vd2xlZGdlO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uU2Vzc2lvbiA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBTZXNzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVNlc3Npb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbc2Vzc2lvbklkXSBTZXNzaW9uIHNlc3Npb25JZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFthZGRyZXNzXSBTZXNzaW9uIGFkZHJlc3NcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU2Vzc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBTZXNzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElTZXNzaW9uXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JU2Vzc2lvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFNlc3Npb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNlc3Npb24gc2Vzc2lvbklkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gc2Vzc2lvbklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlNlc3Npb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTZXNzaW9uLnByb3RvdHlwZS5zZXNzaW9uSWQgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2Vzc2lvbiBhZGRyZXNzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gYWRkcmVzc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5TZXNzaW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgU2Vzc2lvbi5wcm90b3R5cGUuYWRkcmVzcyA9IFwiXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU2Vzc2lvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5TZXNzaW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uU2Vzc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklTZXNzaW9ufSBtZXNzYWdlIFNlc3Npb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFNlc3Npb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlc3Npb25JZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2Vzc2lvbklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hZGRyZXNzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJhZGRyZXNzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS5hZGRyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFNlc3Npb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlNlc3Npb25cbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uU2Vzc2lvbn0gU2Vzc2lvblxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgU2Vzc2lvbi5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5TZXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlc3Npb25JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFkZHJlc3MgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFNlc3Npb247XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5Vc2VyRnJpZW5kUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBVc2VyRnJpZW5kUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElVc2VyRnJpZW5kUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtpZF0gVXNlckZyaWVuZFJlcXVlc3QgaWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbY3JlYXRpb25EYXRlXSBVc2VyRnJpZW5kUmVxdWVzdCBjcmVhdGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW2NvbnRlbnRdIFVzZXJGcmllbmRSZXF1ZXN0IGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLlJlcXVlc3RTdGF0dXN8bnVsbH0gW3JlcXVlc3RTdGF0dXNdIFVzZXJGcmllbmRSZXF1ZXN0IHJlcXVlc3RTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW3JlYXNvbl0gVXNlckZyaWVuZFJlcXVlc3QgcmVhc29uXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2V4cGlyYXRpb25EYXRlXSBVc2VyRnJpZW5kUmVxdWVzdCBleHBpcmF0aW9uRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtyZXF1ZXN0ZXJJZF0gVXNlckZyaWVuZFJlcXVlc3QgcmVxdWVzdGVySWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbcmVjaXBpZW50SWRdIFVzZXJGcmllbmRSZXF1ZXN0IHJlY2lwaWVudElkXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFVzZXJGcmllbmRSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFVzZXJGcmllbmRSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVc2VyRnJpZW5kUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJGcmllbmRSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXNlckZyaWVuZFJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJGcmllbmRSZXF1ZXN0IGlkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gaWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckZyaWVuZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyRnJpZW5kUmVxdWVzdC5wcm90b3R5cGUuaWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlckZyaWVuZFJlcXVlc3QgY3JlYXRpb25EYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gY3JlYXRpb25EYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJGcmllbmRSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlckZyaWVuZFJlcXVlc3QucHJvdG90eXBlLmNyZWF0aW9uRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyRnJpZW5kUmVxdWVzdCBjb250ZW50LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbHx1bmRlZmluZWR9IGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckZyaWVuZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyRnJpZW5kUmVxdWVzdC5wcm90b3R5cGUuY29udGVudCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyRnJpZW5kUmVxdWVzdCByZXF1ZXN0U3RhdHVzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLlJlcXVlc3RTdGF0dXN9IHJlcXVlc3RTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckZyaWVuZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyRnJpZW5kUmVxdWVzdC5wcm90b3R5cGUucmVxdWVzdFN0YXR1cyA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyRnJpZW5kUmVxdWVzdCByZWFzb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gcmVhc29uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJGcmllbmRSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlckZyaWVuZFJlcXVlc3QucHJvdG90eXBlLnJlYXNvbiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyRnJpZW5kUmVxdWVzdCBleHBpcmF0aW9uRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGV4cGlyYXRpb25EYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJGcmllbmRSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlckZyaWVuZFJlcXVlc3QucHJvdG90eXBlLmV4cGlyYXRpb25EYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJGcmllbmRSZXF1ZXN0IHJlcXVlc3RlcklkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gcmVxdWVzdGVySWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckZyaWVuZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyRnJpZW5kUmVxdWVzdC5wcm90b3R5cGUucmVxdWVzdGVySWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlckZyaWVuZFJlcXVlc3QgcmVjaXBpZW50SWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSByZWNpcGllbnRJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyRnJpZW5kUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJGcmllbmRSZXF1ZXN0LnByb3RvdHlwZS5yZWNpcGllbnRJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVXNlckZyaWVuZFJlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uVXNlckZyaWVuZFJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyRnJpZW5kUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVc2VyRnJpZW5kUmVxdWVzdH0gbWVzc2FnZSBVc2VyRnJpZW5kUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlckZyaWVuZFJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmlkLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNyZWF0aW9uRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY3JlYXRpb25EYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuY3JlYXRpb25EYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNvbnRlbnRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UuY29udGVudCwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0U3RhdHVzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZXF1ZXN0U3RhdHVzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAwID0qLzMyKS5pbnQzMihtZXNzYWdlLnJlcXVlc3RTdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWFzb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlYXNvblwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5yZWFzb24sIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZXhwaXJhdGlvbkRhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImV4cGlyYXRpb25EYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuZXhwaXJhdGlvbkRhdGUsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVxdWVzdGVySWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlcXVlc3RlcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UucmVxdWVzdGVySWQsIHdyaXRlci51aW50MzIoLyogaWQgNywgd2lyZVR5cGUgMiA9Ki81OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVjaXBpZW50SWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlY2lwaWVudElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UucmVjaXBpZW50SWQsIHdyaXRlci51aW50MzIoLyogaWQgOCwgd2lyZVR5cGUgMiA9Ki82NikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFVzZXJGcmllbmRSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyRnJpZW5kUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5Vc2VyRnJpZW5kUmVxdWVzdH0gVXNlckZyaWVuZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJGcmllbmRSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJGcmllbmRSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNyZWF0aW9uRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZW50ID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXF1ZXN0U3RhdHVzID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWFzb24gPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmV4cGlyYXRpb25EYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RlcklkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlY2lwaWVudElkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlckZyaWVuZFJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5Vc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbiA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBVc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElVc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPGltLnR1cm1zLnByb3RvLklVc2VyRnJpZW5kUmVxdWVzdD58bnVsbH0gW3VzZXJGcmllbmRSZXF1ZXN0c10gVXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb24gdXNlckZyaWVuZFJlcXVlc3RzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2xhc3RVcGRhdGVkRGF0ZV0gVXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb24gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJGcmllbmRSZXF1ZXN0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uIHVzZXJGcmllbmRSZXF1ZXN0cy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48aW0udHVybXMucHJvdG8uSVVzZXJGcmllbmRSZXF1ZXN0Pn0gdXNlckZyaWVuZFJlcXVlc3RzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb24ucHJvdG90eXBlLnVzZXJGcmllbmRSZXF1ZXN0cyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbiBsYXN0VXBkYXRlZERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbi5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5Vc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9ufSBtZXNzYWdlIFVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbi5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlckZyaWVuZFJlcXVlc3RzICE9IG51bGwgJiYgbWVzc2FnZS51c2VyRnJpZW5kUmVxdWVzdHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnVzZXJGcmllbmRSZXF1ZXN0cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5Vc2VyRnJpZW5kUmVxdWVzdC5lbmNvZGUobWVzc2FnZS51c2VyRnJpZW5kUmVxdWVzdHNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5Vc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbn0gVXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnVzZXJGcmllbmRSZXF1ZXN0cyAmJiBtZXNzYWdlLnVzZXJGcmllbmRSZXF1ZXN0cy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJGcmllbmRSZXF1ZXN0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlckZyaWVuZFJlcXVlc3RzLnB1c2goJHJvb3QuaW0udHVybXMucHJvdG8uVXNlckZyaWVuZFJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBVc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbjtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlVzZXJJbmZvID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFVzZXJJbmZvLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVVzZXJJbmZvXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2lkXSBVc2VySW5mbyBpZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbbmFtZV0gVXNlckluZm8gbmFtZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbaW50cm9dIFVzZXJJbmZvIGludHJvXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx9IFtwcm9maWxlUGljdHVyZVVybF0gVXNlckluZm8gcHJvZmlsZVBpY3R1cmVVcmxcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbcmVnaXN0cmF0aW9uRGF0ZV0gVXNlckluZm8gcmVnaXN0cmF0aW9uRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtkZWxldGlvbkRhdGVdIFVzZXJJbmZvIGRlbGV0aW9uRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklCb29sVmFsdWV8bnVsbH0gW2FjdGl2ZV0gVXNlckluZm8gYWN0aXZlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5Qcm9maWxlQWNjZXNzU3RyYXRlZ3l8bnVsbH0gW3Byb2ZpbGVBY2Nlc3NTdHJhdGVneV0gVXNlckluZm8gcHJvZmlsZUFjY2Vzc1N0cmF0ZWd5XG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFVzZXJJbmZvLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFVzZXJJbmZvLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVc2VySW5mb1xuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJJbmZvPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXNlckluZm8ocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJJbmZvIGlkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gaWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckluZm9cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VySW5mby5wcm90b3R5cGUuaWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlckluZm8gbmFtZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBuYW1lXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJJbmZvXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlckluZm8ucHJvdG90eXBlLm5hbWUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlckluZm8gaW50cm8uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gaW50cm9cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckluZm9cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VySW5mby5wcm90b3R5cGUuaW50cm8gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlckluZm8gcHJvZmlsZVBpY3R1cmVVcmwuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gcHJvZmlsZVBpY3R1cmVVcmxcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckluZm9cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VySW5mby5wcm90b3R5cGUucHJvZmlsZVBpY3R1cmVVcmwgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlckluZm8gcmVnaXN0cmF0aW9uRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHJlZ2lzdHJhdGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckluZm9cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VySW5mby5wcm90b3R5cGUucmVnaXN0cmF0aW9uRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VySW5mbyBkZWxldGlvbkRhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBkZWxldGlvbkRhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckluZm9cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VySW5mby5wcm90b3R5cGUuZGVsZXRpb25EYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJJbmZvIGFjdGl2ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfHVuZGVmaW5lZH0gYWN0aXZlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJJbmZvXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlckluZm8ucHJvdG90eXBlLmFjdGl2ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VySW5mbyBwcm9maWxlQWNjZXNzU3RyYXRlZ3kuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uUHJvZmlsZUFjY2Vzc1N0cmF0ZWd5fSBwcm9maWxlQWNjZXNzU3RyYXRlZ3lcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckluZm9cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VySW5mby5wcm90b3R5cGUucHJvZmlsZUFjY2Vzc1N0cmF0ZWd5ID0gMDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVc2VySW5mbyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5Vc2VySW5mby52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJJbmZvXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJJbmZvfSBtZXNzYWdlIFVzZXJJbmZvIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VySW5mby5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuaWQsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5uYW1lLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmludHJvICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbnRyb1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5pbnRybywgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wcm9maWxlUGljdHVyZVVybCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicHJvZmlsZVBpY3R1cmVVcmxcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UucHJvZmlsZVBpY3R1cmVVcmwsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVnaXN0cmF0aW9uRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVnaXN0cmF0aW9uRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLnJlZ2lzdHJhdGlvbkRhdGUsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVsZXRpb25EYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZWxldGlvbkRhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5kZWxldGlvbkRhdGUsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWN0aXZlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJhY3RpdmVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmVuY29kZShtZXNzYWdlLmFjdGl2ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSAyID0qLzU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wcm9maWxlQWNjZXNzU3RyYXRlZ3kgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInByb2ZpbGVBY2Nlc3NTdHJhdGVneVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgOCwgd2lyZVR5cGUgMCA9Ki82NCkuaW50MzIobWVzc2FnZS5wcm9maWxlQWNjZXNzU3RyYXRlZ3kpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgVXNlckluZm8gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJJbmZvXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlVzZXJJbmZvfSBVc2VySW5mb1xuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlckluZm8uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVXNlckluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW50cm8gPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByb2ZpbGVQaWN0dXJlVXJsID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWdpc3RyYXRpb25EYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGV0aW9uRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hY3RpdmUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcm9maWxlQWNjZXNzU3RyYXRlZ3kgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlckluZm87XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5Vc2VyTG9jYXRpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVXNlckxvY2F0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVVzZXJMb2NhdGlvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtsYXRpdHVkZV0gVXNlckxvY2F0aW9uIGxhdGl0dWRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2xvbmdpdHVkZV0gVXNlckxvY2F0aW9uIGxvbmdpdHVkZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbbmFtZV0gVXNlckxvY2F0aW9uIG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW2FkZHJlc3NdIFVzZXJMb2NhdGlvbiBhZGRyZXNzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW3RpbWVzdGFtcF0gVXNlckxvY2F0aW9uIHRpbWVzdGFtcFxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBVc2VyTG9jYXRpb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVXNlckxvY2F0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVc2VyTG9jYXRpb25cbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVc2VyTG9jYXRpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBVc2VyTG9jYXRpb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJMb2NhdGlvbiBsYXRpdHVkZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGxhdGl0dWRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJMb2NhdGlvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJMb2NhdGlvbi5wcm90b3R5cGUubGF0aXR1ZGUgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlckxvY2F0aW9uIGxvbmdpdHVkZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGxvbmdpdHVkZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyTG9jYXRpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyTG9jYXRpb24ucHJvdG90eXBlLmxvbmdpdHVkZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyTG9jYXRpb24gbmFtZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBuYW1lXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJMb2NhdGlvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJMb2NhdGlvbi5wcm90b3R5cGUubmFtZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyTG9jYXRpb24gYWRkcmVzcy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBhZGRyZXNzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJMb2NhdGlvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJMb2NhdGlvbi5wcm90b3R5cGUuYWRkcmVzcyA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyTG9jYXRpb24gdGltZXN0YW1wLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gdGltZXN0YW1wXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJMb2NhdGlvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJMb2NhdGlvbi5wcm90b3R5cGUudGltZXN0YW1wID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVc2VyTG9jYXRpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uVXNlckxvY2F0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlckxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJMb2NhdGlvbn0gbWVzc2FnZSBVc2VyTG9jYXRpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJMb2NhdGlvbi5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGF0aXR1ZGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxhdGl0dWRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSA1ID0qLzEzKS5mbG9hdChtZXNzYWdlLmxhdGl0dWRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubG9uZ2l0dWRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsb25naXR1ZGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDUgPSovMjEpLmZsb2F0KG1lc3NhZ2UubG9uZ2l0dWRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5uYW1lLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFkZHJlc3MgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImFkZHJlc3NcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UuYWRkcmVzcywgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50aW1lc3RhbXAgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRpbWVzdGFtcFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLnRpbWVzdGFtcCwgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgVXNlckxvY2F0aW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyTG9jYXRpb25cbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uVXNlckxvY2F0aW9ufSBVc2VyTG9jYXRpb25cbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJMb2NhdGlvbi5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5Vc2VyTG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF0aXR1ZGUgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxvbmdpdHVkZSA9IHJlYWRlci5mbG9hdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWRkcmVzcyA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGltZXN0YW1wID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlckxvY2F0aW9uO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uVXNlclJlbGF0aW9uc2hpcEdyb3VwID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFVzZXJSZWxhdGlvbnNoaXBHcm91cC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElVc2VyUmVsYXRpb25zaGlwR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbaW5kZXhdIFVzZXJSZWxhdGlvbnNoaXBHcm91cCBpbmRleFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtuYW1lXSBVc2VyUmVsYXRpb25zaGlwR3JvdXAgbmFtZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBVc2VyUmVsYXRpb25zaGlwR3JvdXAuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVXNlclJlbGF0aW9uc2hpcEdyb3VwLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVc2VyUmVsYXRpb25zaGlwR3JvdXBcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVc2VyUmVsYXRpb25zaGlwR3JvdXA9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBVc2VyUmVsYXRpb25zaGlwR3JvdXAocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJSZWxhdGlvbnNoaXBHcm91cCBpbmRleC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGluZGV4XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJSZWxhdGlvbnNoaXBHcm91cC5wcm90b3R5cGUuaW5kZXggPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlclJlbGF0aW9uc2hpcEdyb3VwIG5hbWUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBuYW1lXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJSZWxhdGlvbnNoaXBHcm91cC5wcm90b3R5cGUubmFtZSA9IFwiXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVXNlclJlbGF0aW9uc2hpcEdyb3VwIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVc2VyUmVsYXRpb25zaGlwR3JvdXB9IG1lc3NhZ2UgVXNlclJlbGF0aW9uc2hpcEdyb3VwIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyUmVsYXRpb25zaGlwR3JvdXAuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbmRleFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQzMihtZXNzYWdlLmluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBVc2VyUmVsYXRpb25zaGlwR3JvdXAgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwR3JvdXB9IFVzZXJSZWxhdGlvbnNoaXBHcm91cFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlclJlbGF0aW9uc2hpcEdyb3VwLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlclJlbGF0aW9uc2hpcEdyb3VwO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElVc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxpbS50dXJtcy5wcm90by5JVXNlclJlbGF0aW9uc2hpcEdyb3VwPnxudWxsfSBbdXNlclJlbGF0aW9uc2hpcEdyb3Vwc10gVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uIHVzZXJSZWxhdGlvbnNoaXBHcm91cHNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbGFzdFVwZGF0ZWREYXRlXSBVc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb24gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBVc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb24uXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXNlclJlbGF0aW9uc2hpcEdyb3VwcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbiB1c2VyUmVsYXRpb25zaGlwR3JvdXBzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxpbS50dXJtcy5wcm90by5JVXNlclJlbGF0aW9uc2hpcEdyb3VwPn0gdXNlclJlbGF0aW9uc2hpcEdyb3Vwc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb24ucHJvdG90eXBlLnVzZXJSZWxhdGlvbnNoaXBHcm91cHMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uIGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb24ucHJvdG90eXBlLmxhc3RVcGRhdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb259IG1lc3NhZ2UgVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBHcm91cHMgIT0gbnVsbCAmJiBtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBHcm91cHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBHcm91cHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcEdyb3VwLmVuY29kZShtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBHcm91cHNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbn0gVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBHcm91cHMgJiYgbWVzc2FnZS51c2VyUmVsYXRpb25zaGlwR3JvdXBzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlclJlbGF0aW9uc2hpcEdyb3VwcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlclJlbGF0aW9uc2hpcEdyb3Vwcy5wdXNoKCRyb290LmltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBHcm91cC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbjtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlVzZXJSZWxhdGlvbnNoaXAgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVXNlclJlbGF0aW9uc2hpcC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElVc2VyUmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW293bmVySWRdIFVzZXJSZWxhdGlvbnNoaXAgb3duZXJJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtyZWxhdGVkVXNlcklkXSBVc2VyUmVsYXRpb25zaGlwIHJlbGF0ZWRVc2VySWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx9IFtpc0Jsb2NrZWRdIFVzZXJSZWxhdGlvbnNoaXAgaXNCbG9ja2VkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2dyb3VwSW5kZXhdIFVzZXJSZWxhdGlvbnNoaXAgZ3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtlc3RhYmxpc2htZW50RGF0ZV0gVXNlclJlbGF0aW9uc2hpcCBlc3RhYmxpc2htZW50RGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBVc2VyUmVsYXRpb25zaGlwLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFVzZXJSZWxhdGlvbnNoaXAuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVVzZXJSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVc2VyUmVsYXRpb25zaGlwPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXNlclJlbGF0aW9uc2hpcChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlclJlbGF0aW9uc2hpcCBvd25lcklkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gb3duZXJJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlclJlbGF0aW9uc2hpcC5wcm90b3R5cGUub3duZXJJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyUmVsYXRpb25zaGlwIHJlbGF0ZWRVc2VySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSByZWxhdGVkVXNlcklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyUmVsYXRpb25zaGlwLnByb3RvdHlwZS5yZWxhdGVkVXNlcklkID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJSZWxhdGlvbnNoaXAgaXNCbG9ja2VkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx8dW5kZWZpbmVkfSBpc0Jsb2NrZWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJSZWxhdGlvbnNoaXAucHJvdG90eXBlLmlzQmxvY2tlZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyUmVsYXRpb25zaGlwIGdyb3VwSW5kZXguXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBncm91cEluZGV4XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyUmVsYXRpb25zaGlwLnByb3RvdHlwZS5ncm91cEluZGV4ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJSZWxhdGlvbnNoaXAgZXN0YWJsaXNobWVudERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBlc3RhYmxpc2htZW50RGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlclJlbGF0aW9uc2hpcC5wcm90b3R5cGUuZXN0YWJsaXNobWVudERhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFVzZXJSZWxhdGlvbnNoaXAgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JVXNlclJlbGF0aW9uc2hpcH0gbWVzc2FnZSBVc2VyUmVsYXRpb25zaGlwIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyUmVsYXRpb25zaGlwLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5vd25lcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJvd25lcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2Uub3duZXJJZCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWxhdGVkVXNlcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZWxhdGVkVXNlcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UucmVsYXRlZFVzZXJJZCwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pc0Jsb2NrZWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlzQmxvY2tlZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZW5jb2RlKG1lc3NhZ2UuaXNCbG9ja2VkLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSW5kZXggIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSW5kZXhcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5ncm91cEluZGV4LCB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVzdGFibGlzaG1lbnREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlc3RhYmxpc2htZW50RGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmVzdGFibGlzaG1lbnREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBVc2VyUmVsYXRpb25zaGlwIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXB9IFVzZXJSZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJSZWxhdGlvbnNoaXAuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vd25lcklkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlbGF0ZWRVc2VySWQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXNCbG9ja2VkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJbmRleCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lc3RhYmxpc2htZW50RGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJSZWxhdGlvbnNoaXA7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5Vc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJVXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPGltLnR1cm1zLnByb3RvLklVc2VyUmVsYXRpb25zaGlwPnxudWxsfSBbdXNlclJlbGF0aW9uc2hpcHNdIFVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24gdXNlclJlbGF0aW9uc2hpcHNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbGFzdFVwZGF0ZWREYXRlXSBVc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uIGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBVc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24uXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvbihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXNlclJlbGF0aW9uc2hpcHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uIHVzZXJSZWxhdGlvbnNoaXBzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxpbS50dXJtcy5wcm90by5JVXNlclJlbGF0aW9uc2hpcD59IHVzZXJSZWxhdGlvbnNoaXBzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uLnByb3RvdHlwZS51c2VyUmVsYXRpb25zaGlwcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uIGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvbi5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24udmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb259IG1lc3NhZ2UgVXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvbi5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlclJlbGF0aW9uc2hpcHMgIT0gbnVsbCAmJiBtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS51c2VyUmVsYXRpb25zaGlwcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwLmVuY29kZShtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBzW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBVc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb259IFVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvbigpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS51c2VyUmVsYXRpb25zaGlwcyAmJiBtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlclJlbGF0aW9uc2hpcHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBzLnB1c2goJHJvb3QuaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb247XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5Vc2VyU3RhdHVzRGV0YWlsID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFVzZXJTdGF0dXNEZXRhaWwuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJVXNlclN0YXR1c0RldGFpbFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt1c2VySWRdIFVzZXJTdGF0dXNEZXRhaWwgdXNlcklkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5Vc2VyU3RhdHVzfG51bGx9IFt1c2VyU3RhdHVzXSBVc2VyU3RhdHVzRGV0YWlsIHVzZXJTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxpbS50dXJtcy5wcm90by5EZXZpY2VUeXBlPnxudWxsfSBbdXNpbmdEZXZpY2VUeXBlc10gVXNlclN0YXR1c0RldGFpbCB1c2luZ0RldmljZVR5cGVzXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFVzZXJTdGF0dXNEZXRhaWwuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVXNlclN0YXR1c0RldGFpbC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJVXNlclN0YXR1c0RldGFpbFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJTdGF0dXNEZXRhaWw9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBVc2VyU3RhdHVzRGV0YWlsKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2luZ0RldmljZVR5cGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlclN0YXR1c0RldGFpbCB1c2VySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSB1c2VySWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlclN0YXR1c0RldGFpbFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJTdGF0dXNEZXRhaWwucHJvdG90eXBlLnVzZXJJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlclN0YXR1c0RldGFpbCB1c2VyU3RhdHVzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLlVzZXJTdGF0dXN9IHVzZXJTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlclN0YXR1c0RldGFpbFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJTdGF0dXNEZXRhaWwucHJvdG90eXBlLnVzZXJTdGF0dXMgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlclN0YXR1c0RldGFpbCB1c2luZ0RldmljZVR5cGVzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxpbS50dXJtcy5wcm90by5EZXZpY2VUeXBlPn0gdXNpbmdEZXZpY2VUeXBlc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2VyU3RhdHVzRGV0YWlsXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlclN0YXR1c0RldGFpbC5wcm90b3R5cGUudXNpbmdEZXZpY2VUeXBlcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVXNlclN0YXR1c0RldGFpbCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5Vc2VyU3RhdHVzRGV0YWlsLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlclN0YXR1c0RldGFpbFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVc2VyU3RhdHVzRGV0YWlsfSBtZXNzYWdlIFVzZXJTdGF0dXNEZXRhaWwgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVzZXJTdGF0dXNEZXRhaWwuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXNlcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UudXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlclN0YXR1cyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXNlclN0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikuaW50MzIobWVzc2FnZS51c2VyU3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNpbmdEZXZpY2VUeXBlcyAhPSBudWxsICYmIG1lc3NhZ2UudXNpbmdEZXZpY2VUeXBlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnVzaW5nRGV2aWNlVHlwZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmludDMyKG1lc3NhZ2UudXNpbmdEZXZpY2VUeXBlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFVzZXJTdGF0dXNEZXRhaWwgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJTdGF0dXNEZXRhaWxcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uVXNlclN0YXR1c0RldGFpbH0gVXNlclN0YXR1c0RldGFpbFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlclN0YXR1c0RldGFpbC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5Vc2VyU3RhdHVzRGV0YWlsKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51c2VyU3RhdHVzID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS51c2luZ0RldmljZVR5cGVzICYmIG1lc3NhZ2UudXNpbmdEZXZpY2VUeXBlcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzaW5nRGV2aWNlVHlwZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmQyID0gcmVhZGVyLnVpbnQzMigpICsgcmVhZGVyLnBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51c2luZ0RldmljZVR5cGVzLnB1c2gocmVhZGVyLmludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzaW5nRGV2aWNlVHlwZXMucHVzaChyZWFkZXIuaW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJTdGF0dXNEZXRhaWw7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5Vc2Vyc0luZm9zV2l0aFZlcnNpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVXNlcnNJbmZvc1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVVzZXJzSW5mb3NXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPGltLnR1cm1zLnByb3RvLklVc2VySW5mbz58bnVsbH0gW3VzZXJJbmZvc10gVXNlcnNJbmZvc1dpdGhWZXJzaW9uIHVzZXJJbmZvc1xuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIFVzZXJzSW5mb3NXaXRoVmVyc2lvbiBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVXNlcnNJbmZvc1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFVzZXJzSW5mb3NXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJVXNlcnNJbmZvc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JVXNlcnNJbmZvc1dpdGhWZXJzaW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXNlcnNJbmZvc1dpdGhWZXJzaW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VySW5mb3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVc2Vyc0luZm9zV2l0aFZlcnNpb24gdXNlckluZm9zLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxpbS50dXJtcy5wcm90by5JVXNlckluZm8+fSB1c2VySW5mb3NcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlcnNJbmZvc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlcnNJbmZvc1dpdGhWZXJzaW9uLnByb3RvdHlwZS51c2VySW5mb3MgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXNlcnNJbmZvc1dpdGhWZXJzaW9uIGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2Vyc0luZm9zV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2Vyc0luZm9zV2l0aFZlcnNpb24ucHJvdG90eXBlLmxhc3RVcGRhdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVXNlcnNJbmZvc1dpdGhWZXJzaW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlVzZXJzSW5mb3NXaXRoVmVyc2lvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJzSW5mb3NXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVc2Vyc0luZm9zV2l0aFZlcnNpb259IG1lc3NhZ2UgVXNlcnNJbmZvc1dpdGhWZXJzaW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2Vyc0luZm9zV2l0aFZlcnNpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJJbmZvcyAhPSBudWxsICYmIG1lc3NhZ2UudXNlckluZm9zLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS51c2VySW5mb3MubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXNlckluZm8uZW5jb2RlKG1lc3NhZ2UudXNlckluZm9zW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBVc2Vyc0luZm9zV2l0aFZlcnNpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVzZXJzSW5mb3NXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5Vc2Vyc0luZm9zV2l0aFZlcnNpb259IFVzZXJzSW5mb3NXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlcnNJbmZvc1dpdGhWZXJzaW9uLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJzSW5mb3NXaXRoVmVyc2lvbigpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS51c2VySW5mb3MgJiYgbWVzc2FnZS51c2VySW5mb3MubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51c2VySW5mb3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJJbmZvcy5wdXNoKCRyb290LmltLnR1cm1zLnByb3RvLlVzZXJJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlcnNJbmZvc1dpdGhWZXJzaW9uO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uVXNlcnNPbmxpbmVTdGF0dXNlcyA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBVc2Vyc09ubGluZVN0YXR1c2VzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVVzZXJzT25saW5lU3RhdHVzZXNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxpbS50dXJtcy5wcm90by5JVXNlclN0YXR1c0RldGFpbD58bnVsbH0gW3VzZXJTdGF0dXNlc10gVXNlcnNPbmxpbmVTdGF0dXNlcyB1c2VyU3RhdHVzZXNcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVXNlcnNPbmxpbmVTdGF0dXNlcy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBVc2Vyc09ubGluZVN0YXR1c2VzLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVc2Vyc09ubGluZVN0YXR1c2VzXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JVXNlcnNPbmxpbmVTdGF0dXNlcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFVzZXJzT25saW5lU3RhdHVzZXMocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJTdGF0dXNlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVzZXJzT25saW5lU3RhdHVzZXMgdXNlclN0YXR1c2VzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxpbS50dXJtcy5wcm90by5JVXNlclN0YXR1c0RldGFpbD59IHVzZXJTdGF0dXNlc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2Vyc09ubGluZVN0YXR1c2VzXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlcnNPbmxpbmVTdGF0dXNlcy5wcm90b3R5cGUudXNlclN0YXR1c2VzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVc2Vyc09ubGluZVN0YXR1c2VzIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlVzZXJzT25saW5lU3RhdHVzZXMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5Vc2Vyc09ubGluZVN0YXR1c2VzXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVzZXJzT25saW5lU3RhdHVzZXN9IG1lc3NhZ2UgVXNlcnNPbmxpbmVTdGF0dXNlcyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXNlcnNPbmxpbmVTdGF0dXNlcy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlclN0YXR1c2VzICE9IG51bGwgJiYgbWVzc2FnZS51c2VyU3RhdHVzZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnVzZXJTdGF0dXNlcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5Vc2VyU3RhdHVzRGV0YWlsLmVuY29kZShtZXNzYWdlLnVzZXJTdGF0dXNlc1tpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgVXNlcnNPbmxpbmVTdGF0dXNlcyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXNlcnNPbmxpbmVTdGF0dXNlc1xuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5Vc2Vyc09ubGluZVN0YXR1c2VzfSBVc2Vyc09ubGluZVN0YXR1c2VzXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVc2Vyc09ubGluZVN0YXR1c2VzLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJzT25saW5lU3RhdHVzZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UudXNlclN0YXR1c2VzICYmIG1lc3NhZ2UudXNlclN0YXR1c2VzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlclN0YXR1c2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51c2VyU3RhdHVzZXMucHVzaCgkcm9vdC5pbS50dXJtcy5wcm90by5Vc2VyU3RhdHVzRGV0YWlsLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBVc2Vyc09ubGluZVN0YXR1c2VzO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uVHVybXNOb3RpZmljYXRpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVHVybXNOb3RpZmljYXRpb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJVHVybXNOb3RpZmljYXRpb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbcmVxdWVzdElkXSBUdXJtc05vdGlmaWNhdGlvbiByZXF1ZXN0SWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfSBbY29kZV0gVHVybXNOb3RpZmljYXRpb24gY29kZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbcmVhc29uXSBUdXJtc05vdGlmaWNhdGlvbiByZWFzb25cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uLklEYXRhfG51bGx9IFtkYXRhXSBUdXJtc05vdGlmaWNhdGlvbiBkYXRhXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JVHVybXNSZXF1ZXN0fG51bGx9IFtyZWxheWVkUmVxdWVzdF0gVHVybXNOb3RpZmljYXRpb24gcmVsYXllZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbcmVxdWVzdGVySWRdIFR1cm1zTm90aWZpY2F0aW9uIHJlcXVlc3RlcklkXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFR1cm1zTm90aWZpY2F0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFR1cm1zTm90aWZpY2F0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElUdXJtc05vdGlmaWNhdGlvblxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVR1cm1zTm90aWZpY2F0aW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVHVybXNOb3RpZmljYXRpb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zTm90aWZpY2F0aW9uIHJlcXVlc3RJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHJlcXVlc3RJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zTm90aWZpY2F0aW9uLnByb3RvdHlwZS5yZXF1ZXN0SWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNOb3RpZmljYXRpb24gY29kZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbHx1bmRlZmluZWR9IGNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc05vdGlmaWNhdGlvbi5wcm90b3R5cGUuY29kZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc05vdGlmaWNhdGlvbiByZWFzb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gcmVhc29uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNOb3RpZmljYXRpb24ucHJvdG90eXBlLnJlYXNvbiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc05vdGlmaWNhdGlvbiBkYXRhLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uLklEYXRhfG51bGx8dW5kZWZpbmVkfSBkYXRhXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNOb3RpZmljYXRpb24ucHJvdG90eXBlLmRhdGEgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNOb3RpZmljYXRpb24gcmVsYXllZFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVR1cm1zUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gcmVsYXllZFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb25cbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc05vdGlmaWNhdGlvbi5wcm90b3R5cGUucmVsYXllZFJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNOb3RpZmljYXRpb24gcmVxdWVzdGVySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSByZXF1ZXN0ZXJJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvblxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zTm90aWZpY2F0aW9uLnByb3RvdHlwZS5yZXF1ZXN0ZXJJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVHVybXNOb3RpZmljYXRpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24udmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvblxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklUdXJtc05vdGlmaWNhdGlvbn0gbWVzc2FnZSBUdXJtc05vdGlmaWNhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNOb3RpZmljYXRpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVxdWVzdElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UucmVxdWVzdElkLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvZGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNvZGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5jb2RlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlYXNvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVhc29uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmVuY29kZShtZXNzYWdlLnJlYXNvbiwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkYXRhXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YS5lbmNvZGUobWVzc2FnZS5kYXRhLCB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlbGF5ZWRSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZWxheWVkUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5yZWxheWVkUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0ZXJJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVxdWVzdGVySWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5yZXF1ZXN0ZXJJZCwgd3JpdGVyLnVpbnQzMigvKiBpZCA2LCB3aXJlVHlwZSAyID0qLzUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgVHVybXNOb3RpZmljYXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9ufSBUdXJtc05vdGlmaWNhdGlvblxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNOb3RpZmljYXRpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdElkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNvZGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVhc29uID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kYXRhID0gJHJvb3QuaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVsYXllZFJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RlcklkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBUdXJtc05vdGlmaWNhdGlvbi5EYXRhID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRGF0YS5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURhdGFcbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JSW50NjRWYWx1ZXN8bnVsbH0gW2lkc10gRGF0YSBpZHNcbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JSW50NjRWYWx1ZXNXaXRoVmVyc2lvbnxudWxsfSBbaWRzV2l0aFZlcnNpb25dIERhdGEgaWRzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfSBbc3VjY2Vzc10gRGF0YSBzdWNjZXNzXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSUFja25vd2xlZGdlfG51bGx9IFthY2tub3dsZWRnZV0gRGF0YSBhY2tub3dsZWRnZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklTZXNzaW9ufG51bGx9IFtzZXNzaW9uXSBEYXRhIHNlc3Npb25cbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JTWVzc2FnZXN8bnVsbH0gW21lc3NhZ2VzXSBEYXRhIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSU1lc3NhZ2VTdGF0dXNlc3xudWxsfSBbbWVzc2FnZVN0YXR1c2VzXSBEYXRhIG1lc3NhZ2VTdGF0dXNlc1xuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklNZXNzYWdlc1dpdGhUb3RhbExpc3R8bnVsbH0gW21lc3NhZ2VzV2l0aFRvdGFsTGlzdF0gRGF0YSBtZXNzYWdlc1dpdGhUb3RhbExpc3RcbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JVXNlcnNJbmZvc1dpdGhWZXJzaW9ufG51bGx9IFt1c2Vyc0luZm9zV2l0aFZlcnNpb25dIERhdGEgdXNlcnNJbmZvc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVVzZXJzT25saW5lU3RhdHVzZXN8bnVsbH0gW3VzZXJzT25saW5lU3RhdHVzZXNdIERhdGEgdXNlcnNPbmxpbmVTdGF0dXNlc1xuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklVc2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbnxudWxsfSBbdXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb25dIERhdGEgdXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9ufG51bGx9IFt1c2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb25dIERhdGEgdXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb258bnVsbH0gW3VzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb25dIERhdGEgdXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklHcm91cEludml0YXRpb25zV2l0aFZlcnNpb258bnVsbH0gW2dyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbl0gRGF0YSBncm91cEludml0YXRpb25zV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JR3JvdXBKb2luUXVlc3Rpb25zQW5zd2VyUmVzdWx0fG51bGx9IFtncm91cEpvaW5RdWVzdGlvbkFuc3dlclJlc3VsdF0gRGF0YSBncm91cEpvaW5RdWVzdGlvbkFuc3dlclJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklHcm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9ufG51bGx9IFtncm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uXSBEYXRhIGdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JR3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb258bnVsbH0gW2dyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uXSBEYXRhIGdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSUdyb3VwTWVtYmVyc1dpdGhWZXJzaW9ufG51bGx9IFtncm91cE1lbWJlcnNXaXRoVmVyc2lvbl0gRGF0YSBncm91cE1lbWJlcnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklHcm91cHNXaXRoVmVyc2lvbnxudWxsfSBbZ3JvdXBzV2l0aFZlcnNpb25dIERhdGEgZ3JvdXBzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGF0YS5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERhdGEuXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElEYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uLklEYXRhPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBEYXRhKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSBpZHMuXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklJbnQ2NFZhbHVlc3xudWxsfHVuZGVmaW5lZH0gaWRzXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGF0YS5wcm90b3R5cGUuaWRzID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSBpZHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUludDY0VmFsdWVzV2l0aFZlcnNpb258bnVsbHx1bmRlZmluZWR9IGlkc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGF0YS5wcm90b3R5cGUuaWRzV2l0aFZlcnNpb24gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEYXRhIHN1Y2Nlc3MuXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx8dW5kZWZpbmVkfSBzdWNjZXNzXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGF0YS5wcm90b3R5cGUuc3VjY2VzcyA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERhdGEgYWNrbm93bGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklBY2tub3dsZWRnZXxudWxsfHVuZGVmaW5lZH0gYWNrbm93bGVkZ2VcbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uLkRhdGFcbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEYXRhLnByb3RvdHlwZS5hY2tub3dsZWRnZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERhdGEgc2Vzc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVNlc3Npb258bnVsbHx1bmRlZmluZWR9IHNlc3Npb25cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uLkRhdGFcbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEYXRhLnByb3RvdHlwZS5zZXNzaW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSU1lc3NhZ2VzfG51bGx8dW5kZWZpbmVkfSBtZXNzYWdlc1xuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERhdGEucHJvdG90eXBlLm1lc3NhZ2VzID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSBtZXNzYWdlU3RhdHVzZXMuXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklNZXNzYWdlU3RhdHVzZXN8bnVsbHx1bmRlZmluZWR9IG1lc3NhZ2VTdGF0dXNlc1xuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERhdGEucHJvdG90eXBlLm1lc3NhZ2VTdGF0dXNlcyA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERhdGEgbWVzc2FnZXNXaXRoVG90YWxMaXN0LlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JTWVzc2FnZXNXaXRoVG90YWxMaXN0fG51bGx8dW5kZWZpbmVkfSBtZXNzYWdlc1dpdGhUb3RhbExpc3RcbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uLkRhdGFcbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEYXRhLnByb3RvdHlwZS5tZXNzYWdlc1dpdGhUb3RhbExpc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEYXRhIHVzZXJzSW5mb3NXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVVzZXJzSW5mb3NXaXRoVmVyc2lvbnxudWxsfHVuZGVmaW5lZH0gdXNlcnNJbmZvc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGF0YS5wcm90b3R5cGUudXNlcnNJbmZvc1dpdGhWZXJzaW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSB1c2Vyc09ubGluZVN0YXR1c2VzLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JVXNlcnNPbmxpbmVTdGF0dXNlc3xudWxsfHVuZGVmaW5lZH0gdXNlcnNPbmxpbmVTdGF0dXNlc1xuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERhdGEucHJvdG90eXBlLnVzZXJzT25saW5lU3RhdHVzZXMgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEYXRhIHVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JVXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb258bnVsbHx1bmRlZmluZWR9IHVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGF0YS5wcm90b3R5cGUudXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb24gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEYXRhIHVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbnxudWxsfHVuZGVmaW5lZH0gdXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGF0YS5wcm90b3R5cGUudXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSB1c2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JVXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvbnxudWxsfHVuZGVmaW5lZH0gdXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERhdGEucHJvdG90eXBlLnVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEYXRhIGdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbnxudWxsfHVuZGVmaW5lZH0gZ3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGF0YS5wcm90b3R5cGUuZ3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSBncm91cEpvaW5RdWVzdGlvbkFuc3dlclJlc3VsdC5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdHxudWxsfHVuZGVmaW5lZH0gZ3JvdXBKb2luUXVlc3Rpb25BbnN3ZXJSZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uLkRhdGFcbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEYXRhLnByb3RvdHlwZS5ncm91cEpvaW5RdWVzdGlvbkFuc3dlclJlc3VsdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIERhdGEgZ3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb258bnVsbHx1bmRlZmluZWR9IGdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zTm90aWZpY2F0aW9uLkRhdGFcbiAgICAgICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBEYXRhLnByb3RvdHlwZS5ncm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSBncm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9ufG51bGx8dW5kZWZpbmVkfSBncm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERhdGEucHJvdG90eXBlLmdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSBncm91cE1lbWJlcnNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUdyb3VwTWVtYmVyc1dpdGhWZXJzaW9ufG51bGx8dW5kZWZpbmVkfSBncm91cE1lbWJlcnNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERhdGEucHJvdG90eXBlLmdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSBncm91cHNXaXRoVmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUdyb3Vwc1dpdGhWZXJzaW9ufG51bGx8dW5kZWZpbmVkfSBncm91cHNXaXRoVmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERhdGEucHJvdG90eXBlLmdyb3Vwc1dpdGhWZXJzaW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBPbmVPZiBmaWVsZCBuYW1lcyBib3VuZCB0byB2aXJ0dWFsIGdldHRlcnMgYW5kIHNldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgdmFyICRvbmVPZkZpZWxkcztcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRGF0YSBraW5kLlxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtcImlkc1wifFwiaWRzV2l0aFZlcnNpb25cInxcInN1Y2Nlc3NcInxcImFja25vd2xlZGdlXCJ8XCJzZXNzaW9uXCJ8XCJtZXNzYWdlc1wifFwibWVzc2FnZVN0YXR1c2VzXCJ8XCJtZXNzYWdlc1dpdGhUb3RhbExpc3RcInxcInVzZXJzSW5mb3NXaXRoVmVyc2lvblwifFwidXNlcnNPbmxpbmVTdGF0dXNlc1wifFwidXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb25cInxcInVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvblwifFwidXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvblwifFwiZ3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uXCJ8XCJncm91cEpvaW5RdWVzdGlvbkFuc3dlclJlc3VsdFwifFwiZ3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvblwifFwiZ3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb25cInxcImdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uXCJ8XCJncm91cHNXaXRoVmVyc2lvblwifHVuZGVmaW5lZH0ga2luZFxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEYXRhLnByb3RvdHlwZSwgXCJraW5kXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogJHV0aWwub25lT2ZHZXR0ZXIoJG9uZU9mRmllbGRzID0gW1wiaWRzXCIsIFwiaWRzV2l0aFZlcnNpb25cIiwgXCJzdWNjZXNzXCIsIFwiYWNrbm93bGVkZ2VcIiwgXCJzZXNzaW9uXCIsIFwibWVzc2FnZXNcIiwgXCJtZXNzYWdlU3RhdHVzZXNcIiwgXCJtZXNzYWdlc1dpdGhUb3RhbExpc3RcIiwgXCJ1c2Vyc0luZm9zV2l0aFZlcnNpb25cIiwgXCJ1c2Vyc09ubGluZVN0YXR1c2VzXCIsIFwidXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb25cIiwgXCJ1c2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb25cIiwgXCJ1c2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uXCIsIFwiZ3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uXCIsIFwiZ3JvdXBKb2luUXVlc3Rpb25BbnN3ZXJSZXN1bHRcIiwgXCJncm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uXCIsIFwiZ3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb25cIiwgXCJncm91cE1lbWJlcnNXaXRoVmVyc2lvblwiLCBcImdyb3Vwc1dpdGhWZXJzaW9uXCJdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDogJHV0aWwub25lT2ZTZXR0ZXIoJG9uZU9mRmllbGRzKVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERhdGEgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uRGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uVHVybXNOb3RpZmljYXRpb24uSURhdGF9IG1lc3NhZ2UgRGF0YSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIERhdGEuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaWRzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkludDY0VmFsdWVzLmVuY29kZShtZXNzYWdlLmlkcywgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWRzV2l0aFZlcnNpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlkc1dpdGhWZXJzaW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkludDY0VmFsdWVzV2l0aFZlcnNpb24uZW5jb2RlKG1lc3NhZ2UuaWRzV2l0aFZlcnNpb24sIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN1Y2Nlc3MgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN1Y2Nlc3NcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZS5lbmNvZGUobWVzc2FnZS5zdWNjZXNzLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hY2tub3dsZWRnZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiYWNrbm93bGVkZ2VcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uQWNrbm93bGVkZ2UuZW5jb2RlKG1lc3NhZ2UuYWNrbm93bGVkZ2UsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlc3Npb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNlc3Npb25cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uU2Vzc2lvbi5lbmNvZGUobWVzc2FnZS5zZXNzaW9uLCB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWVzc2FnZXNcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uTWVzc2FnZXMuZW5jb2RlKG1lc3NhZ2UubWVzc2FnZXMsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VTdGF0dXNlcyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWVzc2FnZVN0YXR1c2VzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLk1lc3NhZ2VTdGF0dXNlcy5lbmNvZGUobWVzc2FnZS5tZXNzYWdlU3RhdHVzZXMsIHdyaXRlci51aW50MzIoLyogaWQgNywgd2lyZVR5cGUgMiA9Ki81OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VzV2l0aFRvdGFsTGlzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWVzc2FnZXNXaXRoVG90YWxMaXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsTGlzdC5lbmNvZGUobWVzc2FnZS5tZXNzYWdlc1dpdGhUb3RhbExpc3QsIHdyaXRlci51aW50MzIoLyogaWQgOCwgd2lyZVR5cGUgMiA9Ki82NikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJzSW5mb3NXaXRoVmVyc2lvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXNlcnNJbmZvc1dpdGhWZXJzaW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJzSW5mb3NXaXRoVmVyc2lvbi5lbmNvZGUobWVzc2FnZS51c2Vyc0luZm9zV2l0aFZlcnNpb24sIHdyaXRlci51aW50MzIoLyogaWQgOSwgd2lyZVR5cGUgMiA9Ki83NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJzT25saW5lU3RhdHVzZXMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInVzZXJzT25saW5lU3RhdHVzZXNcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXNlcnNPbmxpbmVTdGF0dXNlcy5lbmNvZGUobWVzc2FnZS51c2Vyc09ubGluZVN0YXR1c2VzLCB3cml0ZXIudWludDMyKC8qIGlkIDEwLCB3aXJlVHlwZSAyID0qLzgyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uLmVuY29kZShtZXNzYWdlLnVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uLCB3cml0ZXIudWludDMyKC8qIGlkIDExLCB3aXJlVHlwZSAyID0qLzkwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1c2VyUmVsYXRpb25zaGlwR3JvdXBzV2l0aFZlcnNpb25cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uLmVuY29kZShtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbiwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMiwgd2lyZVR5cGUgMiA9Ki85OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb25cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvbi5lbmNvZGUobWVzc2FnZS51c2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uLCB3cml0ZXIudWludDMyKC8qIGlkIDEzLCB3aXJlVHlwZSAyID0qLzEwNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwSW52aXRhdGlvbnNXaXRoVmVyc2lvbi5lbmNvZGUobWVzc2FnZS5ncm91cEludml0YXRpb25zV2l0aFZlcnNpb24sIHdyaXRlci51aW50MzIoLyogaWQgMTQsIHdpcmVUeXBlIDIgPSovMTE0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBKb2luUXVlc3Rpb25BbnN3ZXJSZXN1bHQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSm9pblF1ZXN0aW9uQW5zd2VyUmVzdWx0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdC5lbmNvZGUobWVzc2FnZS5ncm91cEpvaW5RdWVzdGlvbkFuc3dlclJlc3VsdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxNSwgd2lyZVR5cGUgMiA9Ki8xMjIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24uZW5jb2RlKG1lc3NhZ2UuZ3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbiwgd3JpdGVyLnVpbnQzMigvKiBpZCAxNiwgd2lyZVR5cGUgMiA9Ki8xMzApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb25cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uR3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb24uZW5jb2RlKG1lc3NhZ2UuZ3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb24sIHdyaXRlci51aW50MzIoLyogaWQgMTcsIHdpcmVUeXBlIDIgPSovMTM4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBNZW1iZXJzV2l0aFZlcnNpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uLmVuY29kZShtZXNzYWdlLmdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uLCB3cml0ZXIudWludDMyKC8qIGlkIDE4LCB3aXJlVHlwZSAyID0qLzE0NikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3Vwc1dpdGhWZXJzaW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cHNXaXRoVmVyc2lvblwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cHNXaXRoVmVyc2lvbi5lbmNvZGUobWVzc2FnZS5ncm91cHNXaXRoVmVyc2lvbiwgd3JpdGVyLnVpbnQzMigvKiBpZCAxOSwgd2lyZVR5cGUgMiA9Ki8xNTQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGF0YSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhfSBEYXRhXG4gICAgICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRGF0YS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbi5EYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWRzID0gJHJvb3QuaW0udHVybXMucHJvdG8uSW50NjRWYWx1ZXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkc1dpdGhWZXJzaW9uID0gJHJvb3QuaW0udHVybXMucHJvdG8uSW50NjRWYWx1ZXNXaXRoVmVyc2lvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3VjY2VzcyA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFja25vd2xlZGdlID0gJHJvb3QuaW0udHVybXMucHJvdG8uQWNrbm93bGVkZ2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlc3Npb24gPSAkcm9vdC5pbS50dXJtcy5wcm90by5TZXNzaW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlcyA9ICRyb290LmltLnR1cm1zLnByb3RvLk1lc3NhZ2VzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlU3RhdHVzZXMgPSAkcm9vdC5pbS50dXJtcy5wcm90by5NZXNzYWdlU3RhdHVzZXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VzV2l0aFRvdGFsTGlzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLk1lc3NhZ2VzV2l0aFRvdGFsTGlzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlcnNJbmZvc1dpdGhWZXJzaW9uID0gJHJvb3QuaW0udHVybXMucHJvdG8uVXNlcnNJbmZvc1dpdGhWZXJzaW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlcnNPbmxpbmVTdGF0dXNlcyA9ICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJzT25saW5lU3RhdHVzZXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51c2VyRnJpZW5kUmVxdWVzdHNXaXRoVmVyc2lvbiA9ICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJGcmllbmRSZXF1ZXN0c1dpdGhWZXJzaW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uID0gJHJvb3QuaW0udHVybXMucHJvdG8uVXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvbiA9ICRyb290LmltLnR1cm1zLnByb3RvLlVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cEludml0YXRpb25zV2l0aFZlcnNpb24gPSAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cEludml0YXRpb25zV2l0aFZlcnNpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cEpvaW5RdWVzdGlvbkFuc3dlclJlc3VsdCA9ICRyb290LmltLnR1cm1zLnByb3RvLkdyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlclJlc3VsdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSm9pblJlcXVlc3RzV2l0aFZlcnNpb24gPSAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBKb2luUXVlc3Rpb25zV2l0aFZlcnNpb24gPSAkcm9vdC5pbS50dXJtcy5wcm90by5Hcm91cEpvaW5RdWVzdGlvbnNXaXRoVmVyc2lvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uID0gJHJvb3QuaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJzV2l0aFZlcnNpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cHNXaXRoVmVyc2lvbiA9ICRyb290LmltLnR1cm1zLnByb3RvLkdyb3Vwc1dpdGhWZXJzaW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGE7XG4gICAgICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBUdXJtc05vdGlmaWNhdGlvbjtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkNyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2dyb3VwSWRdIENyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdCBncm91cElkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2JsYWNrbGlzdGVkVXNlcklkXSBDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgYmxhY2tsaXN0ZWRVc2VySWRcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgZ3JvdXBJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0LnByb3RvdHlwZS5ncm91cElkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgYmxhY2tsaXN0ZWRVc2VySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBibGFja2xpc3RlZFVzZXJJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QucHJvdG90eXBlLmJsYWNrbGlzdGVkVXNlcklkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3R9IG1lc3NhZ2UgQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5ncm91cElkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYmxhY2tsaXN0ZWRVc2VySWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImJsYWNrbGlzdGVkVXNlcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS5pbnQ2NChtZXNzYWdlLmJsYWNrbGlzdGVkVXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIENyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdH0gQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYmxhY2tsaXN0ZWRVc2VySWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5EZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtncm91cElkXSBEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt1bmJsYWNrbGlzdGVkVXNlcklkXSBEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgdW5ibGFja2xpc3RlZFVzZXJJZFxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdCBncm91cElkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QucHJvdG90eXBlLmdyb3VwSWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdCB1bmJsYWNrbGlzdGVkVXNlcklkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gdW5ibGFja2xpc3RlZFVzZXJJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QucHJvdG90eXBlLnVuYmxhY2tsaXN0ZWRVc2VySWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSURlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdH0gbWVzc2FnZSBEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLmdyb3VwSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51bmJsYWNrbGlzdGVkVXNlcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1bmJsYWNrbGlzdGVkVXNlcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS5pbnQ2NChtZXNzYWdlLnVuYmxhY2tsaXN0ZWRVc2VySWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0fSBEZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5EZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51bmJsYWNrbGlzdGVkVXNlcklkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gRGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZ3JvdXBJZF0gUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbGFzdFVwZGF0ZWREYXRlXSBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0IGdyb3VwSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBncm91cElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3QucHJvdG90eXBlLmxhc3RVcGRhdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3R9IG1lc3NhZ2UgUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5ncm91cElkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdH0gUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZ3JvdXBJZF0gUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3QgZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIFF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdCBncm91cElkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0LnByb3RvdHlwZS5ncm91cElkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdCBsYXN0VXBkYXRlZERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdC5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0fSBtZXNzYWdlIFF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLmdyb3VwSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxhc3RVcGRhdGVkRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0fSBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkNyZWF0ZUdyb3VwUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBDcmVhdGVHcm91cFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJQ3JlYXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW25hbWVdIENyZWF0ZUdyb3VwUmVxdWVzdCBuYW1lXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx9IFtpbnRyb10gQ3JlYXRlR3JvdXBSZXF1ZXN0IGludHJvXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx9IFthbm5vdW5jZW1lbnRdIENyZWF0ZUdyb3VwUmVxdWVzdCBhbm5vdW5jZW1lbnRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW3Byb2ZpbGVQaWN0dXJlVXJsXSBDcmVhdGVHcm91cFJlcXVlc3QgcHJvZmlsZVBpY3R1cmVVcmxcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfSBbbWluaW11bVNjb3JlXSBDcmVhdGVHcm91cFJlcXVlc3QgbWluaW11bVNjb3JlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2dyb3VwVHlwZUlkXSBDcmVhdGVHcm91cFJlcXVlc3QgZ3JvdXBUeXBlSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbXV0ZUVuZERhdGVdIENyZWF0ZUdyb3VwUmVxdWVzdCBtdXRlRW5kRGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBDcmVhdGVHcm91cFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ3JlYXRlR3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElDcmVhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cFJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBDcmVhdGVHcm91cFJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUdyb3VwUmVxdWVzdCBuYW1lLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gbmFtZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cFJlcXVlc3QucHJvdG90eXBlLm5hbWUgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBSZXF1ZXN0IGludHJvLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbHx1bmRlZmluZWR9IGludHJvXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZUdyb3VwUmVxdWVzdC5wcm90b3R5cGUuaW50cm8gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBSZXF1ZXN0IGFubm91bmNlbWVudC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBhbm5vdW5jZW1lbnRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBSZXF1ZXN0LnByb3RvdHlwZS5hbm5vdW5jZW1lbnQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBSZXF1ZXN0IHByb2ZpbGVQaWN0dXJlVXJsLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbHx1bmRlZmluZWR9IHByb2ZpbGVQaWN0dXJlVXJsXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZUdyb3VwUmVxdWVzdC5wcm90b3R5cGUucHJvZmlsZVBpY3R1cmVVcmwgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBSZXF1ZXN0IG1pbmltdW1TY29yZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbHx1bmRlZmluZWR9IG1pbmltdW1TY29yZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cFJlcXVlc3QucHJvdG90eXBlLm1pbmltdW1TY29yZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVHcm91cFJlcXVlc3QgZ3JvdXBUeXBlSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBncm91cFR5cGVJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cFJlcXVlc3QucHJvdG90eXBlLmdyb3VwVHlwZUlkID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUdyb3VwUmVxdWVzdCBtdXRlRW5kRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IG11dGVFbmREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZUdyb3VwUmVxdWVzdC5wcm90b3R5cGUubXV0ZUVuZERhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENyZWF0ZUdyb3VwUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cFJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlR3JvdXBSZXF1ZXN0fSBtZXNzYWdlIENyZWF0ZUdyb3VwUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJuYW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW50cm8gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImludHJvXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmVuY29kZShtZXNzYWdlLmludHJvLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFubm91bmNlbWVudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiYW5ub3VuY2VtZW50XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmVuY29kZShtZXNzYWdlLmFubm91bmNlbWVudCwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wcm9maWxlUGljdHVyZVVybCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicHJvZmlsZVBpY3R1cmVVcmxcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UucHJvZmlsZVBpY3R1cmVVcmwsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWluaW11bVNjb3JlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtaW5pbXVtU2NvcmVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5taW5pbXVtU2NvcmUsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBUeXBlSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwVHlwZUlkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuZ3JvdXBUeXBlSWQsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubXV0ZUVuZERhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm11dGVFbmREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubXV0ZUVuZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgNywgd2lyZVR5cGUgMiA9Ki81OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIENyZWF0ZUdyb3VwUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwUmVxdWVzdH0gQ3JlYXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cFJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbnRybyA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYW5ub3VuY2VtZW50ID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcm9maWxlUGljdHVyZVVybCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWluaW11bVNjb3JlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwVHlwZUlkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm11dGVFbmREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gQ3JlYXRlR3JvdXBSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uRGVsZXRlR3JvdXBSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIERlbGV0ZUdyb3VwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElEZWxldGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZ3JvdXBJZF0gRGVsZXRlR3JvdXBSZXF1ZXN0IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGVsZXRlR3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERlbGV0ZUdyb3VwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGVsZXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gRGVsZXRlR3JvdXBSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWxldGVHcm91cFJlcXVlc3QgZ3JvdXBJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlR3JvdXBSZXF1ZXN0LnByb3RvdHlwZS5ncm91cElkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGVsZXRlR3JvdXBSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklEZWxldGVHcm91cFJlcXVlc3R9IG1lc3NhZ2UgRGVsZXRlR3JvdXBSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVHcm91cFJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5ncm91cElkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIERlbGV0ZUdyb3VwUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwUmVxdWVzdH0gRGVsZXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVHcm91cFJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBEZWxldGVHcm91cFJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5DaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIENoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsc3RyaW5nPnxudWxsfSBbcXVlc3Rpb25JZEFuZEFuc3dlcl0gQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdCBxdWVzdGlvbklkQW5kQW5zd2VyXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBDaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbklkQW5kQW5zd2VyID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdCBxdWVzdGlvbklkQW5kQW5zd2VyLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge09iamVjdC48c3RyaW5nLHN0cmluZz59IHF1ZXN0aW9uSWRBbmRBbnN3ZXJcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3QucHJvdG90eXBlLnF1ZXN0aW9uSWRBbmRBbnN3ZXIgPSAkdXRpbC5lbXB0eU9iamVjdDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3R9IG1lc3NhZ2UgQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlc3Rpb25JZEFuZEFuc3dlciAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlc3Rpb25JZEFuZEFuc3dlclwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhtZXNzYWdlLnF1ZXN0aW9uSWRBbmRBbnN3ZXIpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQoa2V5c1tpXSkudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLnF1ZXN0aW9uSWRBbmRBbnN3ZXJba2V5c1tpXV0pLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5DaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0fSBDaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3QoKSwga2V5O1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXAoKS5wb3MrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5xdWVzdGlvbklkQW5kQW5zd2VyID09PSAkdXRpbC5lbXB0eU9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVzdGlvbklkQW5kQW5zd2VyID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gcmVhZGVyLmludDY0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnBvcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVlc3Rpb25JZEFuZEFuc3dlclt0eXBlb2Yga2V5ID09PSBcIm9iamVjdFwiID8gJHV0aWwubG9uZ1RvSGFzaChrZXkpIDoga2V5XSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElDcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2dyb3VwSWRdIENyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtpbnZpdGVlSWRdIENyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgaW52aXRlZUlkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2NvbnRlbnRdIENyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgY29udGVudFxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBDcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdCBncm91cElkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdCBpbnZpdGVlSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBpbnZpdGVlSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QucHJvdG90eXBlLmludml0ZWVJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdCBjb250ZW50LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gY29udGVudFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdC5wcm90b3R5cGUuY29udGVudCA9IFwiXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0fSBtZXNzYWdlIENyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5ncm91cElkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW52aXRlZUlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbnZpdGVlSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmludDY0KG1lc3NhZ2UuaW52aXRlZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29udGVudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY29udGVudFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuc3RyaW5nKG1lc3NhZ2UuY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBDcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3R9IENyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cElkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmludml0ZWVJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZW50ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBDcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIENyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElDcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZ3JvdXBJZF0gQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbcXVlc3Rpb25dIENyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBxdWVzdGlvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHN0cmluZz58bnVsbH0gW2Fuc3dlcnNdIENyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBhbnN3ZXJzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3Njb3JlXSBDcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3Qgc2NvcmVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbnN3ZXJzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0IGdyb3VwSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBncm91cElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0IHF1ZXN0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gcXVlc3Rpb25cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LnByb3RvdHlwZS5xdWVzdGlvbiA9IFwiXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgYW5zd2Vycy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48c3RyaW5nPn0gYW5zd2Vyc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QucHJvdG90eXBlLmFuc3dlcnMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0IHNjb3JlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gc2NvcmVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LnByb3RvdHlwZS5zY29yZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3R9IG1lc3NhZ2UgQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5ncm91cElkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlc3Rpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXN0aW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS5xdWVzdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFuc3dlcnMgIT0gbnVsbCAmJiBtZXNzYWdlLmFuc3dlcnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmFuc3dlcnMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5zdHJpbmcobWVzc2FnZS5hbnN3ZXJzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2NvcmUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNjb3JlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAwID0qLzMyKS5pbnQzMihtZXNzYWdlLnNjb3JlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIENyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdH0gQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVlc3Rpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5hbnN3ZXJzICYmIG1lc3NhZ2UuYW5zd2Vycy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFuc3dlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFuc3dlcnMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NvcmUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZ3JvdXBJZF0gQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QgZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtjb250ZW50XSBDcmVhdGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdCBjb250ZW50XG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElDcmVhdGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0IGdyb3VwSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBncm91cElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QucHJvdG90eXBlLmdyb3VwSWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0IGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBjb250ZW50XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QucHJvdG90eXBlLmNvbnRlbnQgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3R9IG1lc3NhZ2UgQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cElkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UuZ3JvdXBJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNvbnRlbnRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0fSBDcmVhdGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZW50ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBDcmVhdGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElEZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2ludml0YXRpb25JZF0gRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdCBpbnZpdGF0aW9uSWRcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBEZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElEZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIERlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgaW52aXRhdGlvbklkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gaW52aXRhdGlvbklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0LnByb3RvdHlwZS5pbnZpdGF0aW9uSWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSURlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3R9IG1lc3NhZ2UgRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW52aXRhdGlvbklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbnZpdGF0aW9uSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5pbnZpdGF0aW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5EZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0fSBEZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW52aXRhdGlvbklkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkRlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJRGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3F1ZXN0aW9uSWRdIERlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBxdWVzdGlvbklkXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBEZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSURlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIERlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0IHF1ZXN0aW9uSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBxdWVzdGlvbklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5wcm90b3R5cGUucXVlc3Rpb25JZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5EZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0fSBtZXNzYWdlIERlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5xdWVzdGlvbklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJxdWVzdGlvbklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UucXVlc3Rpb25JZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBEZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5EZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3R9IERlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVzdGlvbklkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gRGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbcmVxdWVzdElkXSBEZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdCByZXF1ZXN0SWRcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBEZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QgcmVxdWVzdElkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gcmVxdWVzdElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QucHJvdG90eXBlLnJlcXVlc3RJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3R9IG1lc3NhZ2UgRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0SWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlcXVlc3RJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLnJlcXVlc3RJZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBEZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3R9IERlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5EZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXF1ZXN0SWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBEZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2dyb3VwSWRdIFF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QgZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIFF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBRdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0IGdyb3VwSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBncm91cElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0LnByb3RvdHlwZS5ncm91cElkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdC5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3R9IG1lc3NhZ2UgUXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLmdyb3VwSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxhc3RVcGRhdGVkRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0fSBRdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZ3JvdXBJZF0gUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW3dpdGhBbnN3ZXJzXSBRdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3Qgd2l0aEFuc3dlcnNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbGFzdFVwZGF0ZWREYXRlXSBRdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0IGdyb3VwSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBncm91cElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0IHdpdGhBbnN3ZXJzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IHdpdGhBbnN3ZXJzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdC5wcm90b3R5cGUud2l0aEFuc3dlcnMgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdCBsYXN0VXBkYXRlZERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0LnByb3RvdHlwZS5sYXN0VXBkYXRlZERhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0fSBtZXNzYWdlIFF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cElkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UuZ3JvdXBJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLndpdGhBbnN3ZXJzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ3aXRoQW5zd2Vyc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikuYm9vbChtZXNzYWdlLndpdGhBbnN3ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdH0gUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2l0aEFuc3dlcnMgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZ3JvdXBJZF0gUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3QgZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIFF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdCBncm91cElkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0LnByb3RvdHlwZS5ncm91cElkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdCBsYXN0VXBkYXRlZERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdC5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0fSBtZXNzYWdlIFF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLmdyb3VwSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxhc3RVcGRhdGVkRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0fSBRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtxdWVzdGlvbklkXSBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgcXVlc3Rpb25JZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbcXVlc3Rpb25dIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBxdWVzdGlvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHN0cmluZz58bnVsbH0gW2Fuc3dlcnNdIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBhbnN3ZXJzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbH0gW3Njb3JlXSBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3Qgc2NvcmVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhbiBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5zd2VycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBxdWVzdGlvbklkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gcXVlc3Rpb25JZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QucHJvdG90eXBlLnF1ZXN0aW9uSWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBxdWVzdGlvbi5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBxdWVzdGlvblxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QucHJvdG90eXBlLnF1ZXN0aW9uID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBhbnN3ZXJzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxzdHJpbmc+fSBhbnN3ZXJzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5wcm90b3R5cGUuYW5zd2VycyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3Qgc2NvcmUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBzY29yZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QucHJvdG90eXBlLnNjb3JlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdH0gbWVzc2FnZSBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlc3Rpb25JZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlc3Rpb25JZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLnF1ZXN0aW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5xdWVzdGlvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlc3Rpb25cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UucXVlc3Rpb24sIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYW5zd2VycyAhPSBudWxsICYmIG1lc3NhZ2UuYW5zd2Vycy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuYW5zd2Vycy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLnN0cmluZyhtZXNzYWdlLmFuc3dlcnNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zY29yZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2NvcmVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5zY29yZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGFuIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdH0gVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXN0aW9uSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVlc3Rpb24gPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmFuc3dlcnMgJiYgbWVzc2FnZS5hbnN3ZXJzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYW5zd2VycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYW5zd2Vycy5wdXNoKHJlYWRlci5zdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zY29yZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkNyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBDcmVhdGVHcm91cE1lbWJlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2dyb3VwSWRdIENyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBncm91cElkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3VzZXJJZF0gQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0IHVzZXJJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbbmFtZV0gQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0IG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyUm9sZXxudWxsfSBbcm9sZV0gQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0IHJvbGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbXV0ZUVuZERhdGVdIENyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtdXRlRW5kRGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBDcmVhdGVHcm91cE1lbWJlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElDcmVhdGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cE1lbWJlclJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBDcmVhdGVHcm91cE1lbWJlclJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBncm91cElkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cE1lbWJlclJlcXVlc3QucHJvdG90eXBlLmdyb3VwSWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdCB1c2VySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSB1c2VySWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LnByb3RvdHlwZS51c2VySWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBuYW1lLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbHx1bmRlZmluZWR9IG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LnByb3RvdHlwZS5uYW1lID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdCByb2xlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyUm9sZX0gcm9sZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cE1lbWJlclJlcXVlc3QucHJvdG90eXBlLnJvbGUgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0IG11dGVFbmREYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbXV0ZUVuZERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LnByb3RvdHlwZS5tdXRlRW5kRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cE1lbWJlclJlcXVlc3R9IG1lc3NhZ2UgQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVHcm91cE1lbWJlclJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5ncm91cElkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1c2VySWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmludDY0KG1lc3NhZ2UudXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5uYW1lLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJvbGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJvbGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDAgPSovMzIpLmludDMyKG1lc3NhZ2Uucm9sZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm11dGVFbmREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtdXRlRW5kRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLm11dGVFbmREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBDcmVhdGVHcm91cE1lbWJlclJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5DcmVhdGVHcm91cE1lbWJlclJlcXVlc3R9IENyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cElkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tdXRlRW5kRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIENyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZWxldGVHcm91cE1lbWJlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2dyb3VwSWRdIERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdCBncm91cElkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2dyb3VwTWVtYmVySWRdIERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdCBncm91cE1lbWJlcklkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW3N1Y2Nlc3NvcklkXSBEZWxldGVHcm91cE1lbWJlclJlcXVlc3Qgc3VjY2Vzc29ySWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx9IFtxdWl0QWZ0ZXJUcmFuc2Zlcl0gRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0IHF1aXRBZnRlclRyYW5zZmVyXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBEZWxldGVHcm91cE1lbWJlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSURlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0IGdyb3VwSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBncm91cElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0IGdyb3VwTWVtYmVySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBncm91cE1lbWJlcklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBNZW1iZXJJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0IHN1Y2Nlc3NvcklkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gc3VjY2Vzc29ySWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0LnByb3RvdHlwZS5zdWNjZXNzb3JJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWxldGVHcm91cE1lbWJlclJlcXVlc3QgcXVpdEFmdGVyVHJhbnNmZXIuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklCb29sVmFsdWV8bnVsbHx1bmRlZmluZWR9IHF1aXRBZnRlclRyYW5zZmVyXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdC5wcm90b3R5cGUucXVpdEFmdGVyVHJhbnNmZXIgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5EZWxldGVHcm91cE1lbWJlclJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0fSBtZXNzYWdlIERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cElkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UuZ3JvdXBJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwTWVtYmVySWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwTWVtYmVySWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmludDY0KG1lc3NhZ2UuZ3JvdXBNZW1iZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN1Y2Nlc3NvcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdWNjZXNzb3JJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLnN1Y2Nlc3NvcklkLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1aXRBZnRlclRyYW5zZmVyICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJxdWl0QWZ0ZXJUcmFuc2ZlclwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZW5jb2RlKG1lc3NhZ2UucXVpdEFmdGVyVHJhbnNmZXIsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIERlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdH0gRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVHcm91cE1lbWJlclJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBNZW1iZXJJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdWNjZXNzb3JJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWl0QWZ0ZXJUcmFuc2ZlciA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZ3JvdXBJZF0gUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbGFzdFVwZGF0ZWREYXRlXSBRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48c3RyaW5nPnxudWxsfSBbZ3JvdXBNZW1iZXJzSWRzXSBRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3QgZ3JvdXBNZW1iZXJzSWRzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfSBbd2l0aFN0YXR1c10gUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0IHdpdGhTdGF0dXNcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cE1lbWJlcnNJZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3QgZ3JvdXBJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0LnByb3RvdHlwZS5ncm91cElkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdC5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdCBncm91cE1lbWJlcnNJZHMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPHN0cmluZz59IGdyb3VwTWVtYmVyc0lkc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3QucHJvdG90eXBlLmdyb3VwTWVtYmVyc0lkcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3Qgd2l0aFN0YXR1cy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfHVuZGVmaW5lZH0gd2l0aFN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3QucHJvdG90eXBlLndpdGhTdGF0dXMgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0fSBtZXNzYWdlIFF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cElkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UuZ3JvdXBJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwTWVtYmVyc0lkcyAhPSBudWxsICYmIG1lc3NhZ2UuZ3JvdXBNZW1iZXJzSWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuZ3JvdXBNZW1iZXJzSWRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5pbnQ2NChtZXNzYWdlLmdyb3VwTWVtYmVyc0lkc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uud2l0aFN0YXR1cyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwid2l0aFN0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZW5jb2RlKG1lc3NhZ2Uud2l0aFN0YXR1cywgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0fSBRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UuZ3JvdXBNZW1iZXJzSWRzICYmIG1lc3NhZ2UuZ3JvdXBNZW1iZXJzSWRzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBNZW1iZXJzSWRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBNZW1iZXJzSWRzLnB1c2gocmVhZGVyLmludDY0KCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBNZW1iZXJzSWRzLnB1c2gocmVhZGVyLmludDY0KCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS53aXRoU3RhdHVzID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5VcGRhdGVHcm91cE1lbWJlclJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGFuIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElVcGRhdGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZ3JvdXBJZF0gVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbbWVtYmVySWRdIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtZW1iZXJJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbbmFtZV0gVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0IG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLkdyb3VwTWVtYmVyUm9sZXxudWxsfSBbcm9sZV0gVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0IHJvbGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbXV0ZUVuZERhdGVdIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtdXRlRW5kRGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBVcGRhdGVHcm91cE1lbWJlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVHcm91cE1lbWJlclJlcXVlc3QgZ3JvdXBJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LnByb3RvdHlwZS5ncm91cElkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVHcm91cE1lbWJlclJlcXVlc3QgbWVtYmVySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBtZW1iZXJJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cE1lbWJlclJlcXVlc3QucHJvdG90eXBlLm1lbWJlcklkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVHcm91cE1lbWJlclJlcXVlc3QgbmFtZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBuYW1lXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdC5wcm90b3R5cGUubmFtZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVHcm91cE1lbWJlclJlcXVlc3Qgcm9sZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5Hcm91cE1lbWJlclJvbGV9IHJvbGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LnByb3RvdHlwZS5yb2xlID0gMDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtdXRlRW5kRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IG11dGVFbmREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdC5wcm90b3R5cGUubXV0ZUVuZERhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cE1lbWJlclJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0fSBtZXNzYWdlIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cElkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UuZ3JvdXBJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lbWJlcklkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtZW1iZXJJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikuaW50NjQobWVzc2FnZS5tZW1iZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm5hbWVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UubmFtZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yb2xlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyb2xlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAwID0qLzMyKS5pbnQzMihtZXNzYWdlLnJvbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tdXRlRW5kRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibXV0ZUVuZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5tdXRlRW5kRGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGFuIFVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdH0gVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cE1lbWJlclJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVtYmVySWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubXV0ZUVuZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBVcGRhdGVHcm91cE1lbWJlclJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5RdWVyeUdyb3VwUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBRdWVyeUdyb3VwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtncm91cElkXSBRdWVyeUdyb3VwUmVxdWVzdCBncm91cElkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2xhc3RVcGRhdGVkRGF0ZV0gUXVlcnlHcm91cFJlcXVlc3QgbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5R3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5R3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElRdWVyeUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUXVlcnlHcm91cFJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5R3JvdXBSZXF1ZXN0IGdyb3VwSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBncm91cElkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlHcm91cFJlcXVlc3QucHJvdG90eXBlLmdyb3VwSWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5R3JvdXBSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5R3JvdXBSZXF1ZXN0LnByb3RvdHlwZS5sYXN0VXBkYXRlZERhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5R3JvdXBSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cFJlcXVlc3R9IG1lc3NhZ2UgUXVlcnlHcm91cFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5R3JvdXBSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cElkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UuZ3JvdXBJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBRdWVyeUdyb3VwUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uUXVlcnlHcm91cFJlcXVlc3R9IFF1ZXJ5R3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUdyb3VwUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeUdyb3VwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cElkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFF1ZXJ5R3JvdXBSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uUXVlcnlKb2luZWRHcm91cHNJZHNSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbGFzdFVwZGF0ZWREYXRlXSBRdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlKb2luZWRHcm91cHNJZHNSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3QucHJvdG90eXBlLmxhc3RVcGRhdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUXVlcnlKb2luZWRHcm91cHNJZHNSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3R9IG1lc3NhZ2UgUXVlcnlKb2luZWRHcm91cHNJZHNSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBRdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5RdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3R9IFF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlKb2luZWRHcm91cHNJZHNSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5RdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBRdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIFF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBRdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlKb2luZWRHcm91cHNJbmZvc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdCBsYXN0VXBkYXRlZERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlKb2luZWRHcm91cHNJbmZvc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdC5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5RdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0fSBtZXNzYWdlIFF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5RdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdH0gUXVlcnlKb2luZWRHcm91cHNJbmZvc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uVXBkYXRlR3JvdXBSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhbiBVcGRhdGVHcm91cFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJVXBkYXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2dyb3VwSWRdIFVwZGF0ZUdyb3VwUmVxdWVzdCBncm91cElkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx9IFtncm91cE5hbWVdIFVwZGF0ZUdyb3VwUmVxdWVzdCBncm91cE5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW2ludHJvXSBVcGRhdGVHcm91cFJlcXVlc3QgaW50cm9cbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW2Fubm91bmNlbWVudF0gVXBkYXRlR3JvdXBSZXF1ZXN0IGFubm91bmNlbWVudFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbcHJvZmlsZVBpY3R1cmVVcmxdIFVwZGF0ZUdyb3VwUmVxdWVzdCBwcm9maWxlUGljdHVyZVVybFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFttaW5pbXVtU2NvcmVdIFVwZGF0ZUdyb3VwUmVxdWVzdCBtaW5pbXVtU2NvcmVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbZ3JvdXBUeXBlSWRdIFVwZGF0ZUdyb3VwUmVxdWVzdCBncm91cFR5cGVJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFttdXRlRW5kRGF0ZV0gVXBkYXRlR3JvdXBSZXF1ZXN0IG11dGVFbmREYXRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW3N1Y2Nlc3NvcklkXSBVcGRhdGVHcm91cFJlcXVlc3Qgc3VjY2Vzc29ySWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx9IFtxdWl0QWZ0ZXJUcmFuc2Zlcl0gVXBkYXRlR3JvdXBSZXF1ZXN0IHF1aXRBZnRlclRyYW5zZmVyXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFVwZGF0ZUdyb3VwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYW4gVXBkYXRlR3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVcGRhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVcGRhdGVHcm91cFJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBVcGRhdGVHcm91cFJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwUmVxdWVzdCBncm91cElkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cFJlcXVlc3QucHJvdG90eXBlLmdyb3VwSWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwUmVxdWVzdCBncm91cE5hbWUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZ3JvdXBOYW1lXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUdyb3VwUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBOYW1lID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwUmVxdWVzdCBpbnRyby5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBpbnRyb1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cFJlcXVlc3QucHJvdG90eXBlLmludHJvID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwUmVxdWVzdCBhbm5vdW5jZW1lbnQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gYW5ub3VuY2VtZW50XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUdyb3VwUmVxdWVzdC5wcm90b3R5cGUuYW5ub3VuY2VtZW50ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwUmVxdWVzdCBwcm9maWxlUGljdHVyZVVybC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSBwcm9maWxlUGljdHVyZVVybFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cFJlcXVlc3QucHJvdG90eXBlLnByb2ZpbGVQaWN0dXJlVXJsID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwUmVxdWVzdCBtaW5pbXVtU2NvcmUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBtaW5pbXVtU2NvcmVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlR3JvdXBSZXF1ZXN0LnByb3RvdHlwZS5taW5pbXVtU2NvcmUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXBkYXRlR3JvdXBSZXF1ZXN0IGdyb3VwVHlwZUlkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZ3JvdXBUeXBlSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlR3JvdXBSZXF1ZXN0LnByb3RvdHlwZS5ncm91cFR5cGVJZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVHcm91cFJlcXVlc3QgbXV0ZUVuZERhdGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBtdXRlRW5kRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cFJlcXVlc3QucHJvdG90eXBlLm11dGVFbmREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUdyb3VwUmVxdWVzdCBzdWNjZXNzb3JJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHN1Y2Nlc3NvcklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUdyb3VwUmVxdWVzdC5wcm90b3R5cGUuc3VjY2Vzc29ySWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXBkYXRlR3JvdXBSZXF1ZXN0IHF1aXRBZnRlclRyYW5zZmVyLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx8dW5kZWZpbmVkfSBxdWl0QWZ0ZXJUcmFuc2ZlclxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVHcm91cFJlcXVlc3QucHJvdG90eXBlLnF1aXRBZnRlclRyYW5zZmVyID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVcGRhdGVHcm91cFJlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZUdyb3VwUmVxdWVzdH0gbWVzc2FnZSBVcGRhdGVHcm91cFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUdyb3VwUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLmdyb3VwSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cE5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwTmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5ncm91cE5hbWUsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW50cm8gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImludHJvXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmVuY29kZShtZXNzYWdlLmludHJvLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFubm91bmNlbWVudCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiYW5ub3VuY2VtZW50XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmVuY29kZShtZXNzYWdlLmFubm91bmNlbWVudCwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wcm9maWxlUGljdHVyZVVybCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicHJvZmlsZVBpY3R1cmVVcmxcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UucHJvZmlsZVBpY3R1cmVVcmwsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWluaW11bVNjb3JlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtaW5pbXVtU2NvcmVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5taW5pbXVtU2NvcmUsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBUeXBlSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwVHlwZUlkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuZ3JvdXBUeXBlSWQsIHdyaXRlci51aW50MzIoLyogaWQgNywgd2lyZVR5cGUgMiA9Ki81OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubXV0ZUVuZERhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm11dGVFbmREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubXV0ZUVuZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgOCwgd2lyZVR5cGUgMiA9Ki82NikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3VjY2Vzc29ySWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN1Y2Nlc3NvcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2Uuc3VjY2Vzc29ySWQsIHdyaXRlci51aW50MzIoLyogaWQgOSwgd2lyZVR5cGUgMiA9Ki83NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVpdEFmdGVyVHJhbnNmZXIgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1aXRBZnRlclRyYW5zZmVyXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZS5lbmNvZGUobWVzc2FnZS5xdWl0QWZ0ZXJUcmFuc2Zlciwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMCwgd2lyZVR5cGUgMiA9Ki84MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhbiBVcGRhdGVHcm91cFJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5VcGRhdGVHcm91cFJlcXVlc3R9IFVwZGF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlR3JvdXBSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cElkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwTmFtZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW50cm8gPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFubm91bmNlbWVudCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJvZmlsZVBpY3R1cmVVcmwgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1pbmltdW1TY29yZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cFR5cGVJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tdXRlRW5kRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdWNjZXNzb3JJZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVpdEFmdGVyVHJhbnNmZXIgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVwZGF0ZUdyb3VwUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkNyZWF0ZU1lc3NhZ2VSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIENyZWF0ZU1lc3NhZ2VSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUNyZWF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW21lc3NhZ2VJZF0gQ3JlYXRlTWVzc2FnZVJlcXVlc3QgbWVzc2FnZUlkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5DaGF0VHlwZXxudWxsfSBbY2hhdFR5cGVdIENyZWF0ZU1lc3NhZ2VSZXF1ZXN0IGNoYXRUeXBlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfSBbaXNTeXN0ZW1NZXNzYWdlXSBDcmVhdGVNZXNzYWdlUmVxdWVzdCBpc1N5c3RlbU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbdG9JZF0gQ3JlYXRlTWVzc2FnZVJlcXVlc3QgdG9JZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtkZWxpdmVyeURhdGVdIENyZWF0ZU1lc3NhZ2VSZXF1ZXN0IGRlbGl2ZXJ5RGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbdGV4dF0gQ3JlYXRlTWVzc2FnZVJlcXVlc3QgdGV4dFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPFVpbnQ4QXJyYXk+fG51bGx9IFtyZWNvcmRzXSBDcmVhdGVNZXNzYWdlUmVxdWVzdCByZWNvcmRzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbH0gW2J1cm5BZnRlcl0gQ3JlYXRlTWVzc2FnZVJlcXVlc3QgYnVybkFmdGVyXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENyZWF0ZU1lc3NhZ2VSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENyZWF0ZU1lc3NhZ2VSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElDcmVhdGVNZXNzYWdlUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUNyZWF0ZU1lc3NhZ2VSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlTWVzc2FnZVJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVNZXNzYWdlUmVxdWVzdCBtZXNzYWdlSWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBtZXNzYWdlSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVNZXNzYWdlUmVxdWVzdC5wcm90b3R5cGUubWVzc2FnZUlkID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZU1lc3NhZ2VSZXF1ZXN0IGNoYXRUeXBlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLkNoYXRUeXBlfSBjaGF0VHlwZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVNZXNzYWdlUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZU1lc3NhZ2VSZXF1ZXN0LnByb3RvdHlwZS5jaGF0VHlwZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVNZXNzYWdlUmVxdWVzdCBpc1N5c3RlbU1lc3NhZ2UuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklCb29sVmFsdWV8bnVsbHx1bmRlZmluZWR9IGlzU3lzdGVtTWVzc2FnZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVNZXNzYWdlUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZU1lc3NhZ2VSZXF1ZXN0LnByb3RvdHlwZS5pc1N5c3RlbU1lc3NhZ2UgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlTWVzc2FnZVJlcXVlc3QgdG9JZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHRvSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVNZXNzYWdlUmVxdWVzdC5wcm90b3R5cGUudG9JZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlTWVzc2FnZVJlcXVlc3QgZGVsaXZlcnlEYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZGVsaXZlcnlEYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlTWVzc2FnZVJlcXVlc3QucHJvdG90eXBlLmRlbGl2ZXJ5RGF0ZSA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlTWVzc2FnZVJlcXVlc3QgdGV4dC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx8dW5kZWZpbmVkfSB0ZXh0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlTWVzc2FnZVJlcXVlc3QucHJvdG90eXBlLnRleHQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlTWVzc2FnZVJlcXVlc3QgcmVjb3Jkcy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48VWludDhBcnJheT59IHJlY29yZHNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVNZXNzYWdlUmVxdWVzdC5wcm90b3R5cGUucmVjb3JkcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVNZXNzYWdlUmVxdWVzdCBidXJuQWZ0ZXIuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBidXJuQWZ0ZXJcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVNZXNzYWdlUmVxdWVzdC5wcm90b3R5cGUuYnVybkFmdGVyID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDcmVhdGVNZXNzYWdlUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5DcmVhdGVNZXNzYWdlUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUNyZWF0ZU1lc3NhZ2VSZXF1ZXN0fSBtZXNzYWdlIENyZWF0ZU1lc3NhZ2VSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVNZXNzYWdlUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZUlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtZXNzYWdlSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5tZXNzYWdlSWQsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2hhdFR5cGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNoYXRUeXBlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS5pbnQzMihtZXNzYWdlLmNoYXRUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaXNTeXN0ZW1NZXNzYWdlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpc1N5c3RlbU1lc3NhZ2VcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmVuY29kZShtZXNzYWdlLmlzU3lzdGVtTWVzc2FnZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50b0lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0b0lkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAwID0qLzMyKS5pbnQ2NChtZXNzYWdlLnRvSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWxpdmVyeURhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGl2ZXJ5RGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMCA9Ki80MCkuaW50NjQobWVzc2FnZS5kZWxpdmVyeURhdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50ZXh0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0ZXh0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmVuY29kZShtZXNzYWdlLnRleHQsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVjb3JkcyAhPSBudWxsICYmIG1lc3NhZ2UucmVjb3Jkcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UucmVjb3Jkcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDIgPSovNTgpLmJ5dGVzKG1lc3NhZ2UucmVjb3Jkc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmJ1cm5BZnRlciAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiYnVybkFmdGVyXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZW5jb2RlKG1lc3NhZ2UuYnVybkFmdGVyLCB3cml0ZXIudWludDMyKC8qIGlkIDgsIHdpcmVUeXBlIDIgPSovNjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBDcmVhdGVNZXNzYWdlUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uQ3JlYXRlTWVzc2FnZVJlcXVlc3R9IENyZWF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVNZXNzYWdlUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5DcmVhdGVNZXNzYWdlUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlSWQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2hhdFR5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlzU3lzdGVtTWVzc2FnZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRvSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVsaXZlcnlEYXRlID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRleHQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnJlY29yZHMgJiYgbWVzc2FnZS5yZWNvcmRzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVjb3JkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVjb3Jkcy5wdXNoKHJlYWRlci5ieXRlcygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJ1cm5BZnRlciA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIENyZWF0ZU1lc3NhZ2VSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uUXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbbWVzc2FnZUlkXSBRdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3QgbWVzc2FnZUlkXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0IG1lc3NhZ2VJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IG1lc3NhZ2VJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3QucHJvdG90eXBlLm1lc3NhZ2VJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0fSBtZXNzYWdlIFF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlSWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm1lc3NhZ2VJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLm1lc3NhZ2VJZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBRdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3R9IFF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5RdWVyeU1lc3NhZ2VzUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBRdWVyeU1lc3NhZ2VzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeU1lc3NhZ2VzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHN0cmluZz58bnVsbH0gW2lkc10gUXVlcnlNZXNzYWdlc1JlcXVlc3QgaWRzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbH0gW3NpemVdIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0IHNpemVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLkNoYXRUeXBlfG51bGx9IFtjaGF0VHlwZV0gUXVlcnlNZXNzYWdlc1JlcXVlc3QgY2hhdFR5cGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx9IFthcmVTeXN0ZW1NZXNzYWdlc10gUXVlcnlNZXNzYWdlc1JlcXVlc3QgYXJlU3lzdGVtTWVzc2FnZXNcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbZnJvbUlkXSBRdWVyeU1lc3NhZ2VzUmVxdWVzdCBmcm9tSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbZGVsaXZlcnlEYXRlQWZ0ZXJdIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0IGRlbGl2ZXJ5RGF0ZUFmdGVyXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2RlbGl2ZXJ5RGF0ZUJlZm9yZV0gUXVlcnlNZXNzYWdlc1JlcXVlc3QgZGVsaXZlcnlEYXRlQmVmb3JlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5NZXNzYWdlRGVsaXZlcnlTdGF0dXN8bnVsbH0gW2RlbGl2ZXJ5U3RhdHVzXSBRdWVyeU1lc3NhZ2VzUmVxdWVzdCBkZWxpdmVyeVN0YXR1c1xuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBRdWVyeU1lc3NhZ2VzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeU1lc3NhZ2VzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlNZXNzYWdlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeU1lc3NhZ2VzUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeU1lc3NhZ2VzUmVxdWVzdCBpZHMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPHN0cmluZz59IGlkc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0LnByb3RvdHlwZS5pZHMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlNZXNzYWdlc1JlcXVlc3Qgc2l6ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbHx1bmRlZmluZWR9IHNpemVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlNZXNzYWdlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeU1lc3NhZ2VzUmVxdWVzdC5wcm90b3R5cGUuc2l6ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeU1lc3NhZ2VzUmVxdWVzdCBjaGF0VHlwZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5DaGF0VHlwZX0gY2hhdFR5cGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlNZXNzYWdlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeU1lc3NhZ2VzUmVxdWVzdC5wcm90b3R5cGUuY2hhdFR5cGUgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlNZXNzYWdlc1JlcXVlc3QgYXJlU3lzdGVtTWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklCb29sVmFsdWV8bnVsbHx1bmRlZmluZWR9IGFyZVN5c3RlbU1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5TWVzc2FnZXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlNZXNzYWdlc1JlcXVlc3QucHJvdG90eXBlLmFyZVN5c3RlbU1lc3NhZ2VzID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0IGZyb21JZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGZyb21JZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0LnByb3RvdHlwZS5mcm9tSWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlNZXNzYWdlc1JlcXVlc3QgZGVsaXZlcnlEYXRlQWZ0ZXIuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBkZWxpdmVyeURhdGVBZnRlclxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0LnByb3RvdHlwZS5kZWxpdmVyeURhdGVBZnRlciA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeU1lc3NhZ2VzUmVxdWVzdCBkZWxpdmVyeURhdGVCZWZvcmUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSBkZWxpdmVyeURhdGVCZWZvcmVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlNZXNzYWdlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeU1lc3NhZ2VzUmVxdWVzdC5wcm90b3R5cGUuZGVsaXZlcnlEYXRlQmVmb3JlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0IGRlbGl2ZXJ5U3RhdHVzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLk1lc3NhZ2VEZWxpdmVyeVN0YXR1c30gZGVsaXZlcnlTdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlNZXNzYWdlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeU1lc3NhZ2VzUmVxdWVzdC5wcm90b3R5cGUuZGVsaXZlcnlTdGF0dXMgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlF1ZXJ5TWVzc2FnZXNSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlNZXNzYWdlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlNZXNzYWdlc1JlcXVlc3R9IG1lc3NhZ2UgUXVlcnlNZXNzYWdlc1JlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZHMgIT0gbnVsbCAmJiBtZXNzYWdlLmlkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmlkcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIuaW50NjQobWVzc2FnZS5pZHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNpemUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNpemVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5zaXplLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNoYXRUeXBlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjaGF0VHlwZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMCA9Ki8yNCkuaW50MzIobWVzc2FnZS5jaGF0VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFyZVN5c3RlbU1lc3NhZ2VzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJhcmVTeXN0ZW1NZXNzYWdlc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZW5jb2RlKG1lc3NhZ2UuYXJlU3lzdGVtTWVzc2FnZXMsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZnJvbUlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJmcm9tSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5mcm9tSWQsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVsaXZlcnlEYXRlQWZ0ZXIgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGl2ZXJ5RGF0ZUFmdGVyXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UuZGVsaXZlcnlEYXRlQWZ0ZXIsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVsaXZlcnlEYXRlQmVmb3JlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZWxpdmVyeURhdGVCZWZvcmVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5kZWxpdmVyeURhdGVCZWZvcmUsIHdyaXRlci51aW50MzIoLyogaWQgNywgd2lyZVR5cGUgMiA9Ki81OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVsaXZlcnlTdGF0dXMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGl2ZXJ5U3RhdHVzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA4LCB3aXJlVHlwZSAwID0qLzY0KS5pbnQzMihtZXNzYWdlLmRlbGl2ZXJ5U3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VzUmVxdWVzdH0gUXVlcnlNZXNzYWdlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5TWVzc2FnZXNSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLmlkcyAmJiBtZXNzYWdlLmlkcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGFnICYgNykgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZDIgPSByZWFkZXIudWludDMyKCkgKyByZWFkZXIucG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkcy5wdXNoKHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkcy5wdXNoKHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2l6ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jaGF0VHlwZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXJlU3lzdGVtTWVzc2FnZXMgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mcm9tSWQgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVsaXZlcnlEYXRlQWZ0ZXIgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVsaXZlcnlEYXRlQmVmb3JlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGl2ZXJ5U3RhdHVzID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFF1ZXJ5TWVzc2FnZXNSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeVBlbmRpbmdNZXNzYWdlc1dpdGhUb3RhbFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfSBbc2l6ZV0gUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0IHNpemVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeVBlbmRpbmdNZXNzYWdlc1dpdGhUb3RhbFJlcXVlc3Qgc2l6ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbHx1bmRlZmluZWR9IHNpemVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0LnByb3RvdHlwZS5zaXplID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeVBlbmRpbmdNZXNzYWdlc1dpdGhUb3RhbFJlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdH0gbWVzc2FnZSBRdWVyeVBlbmRpbmdNZXNzYWdlc1dpdGhUb3RhbFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2l6ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2l6ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmVuY29kZShtZXNzYWdlLnNpemUsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdH0gUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeVBlbmRpbmdNZXNzYWdlc1dpdGhUb3RhbFJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNpemUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeVBlbmRpbmdNZXNzYWdlc1dpdGhUb3RhbFJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5VcGRhdGVNZXNzYWdlUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gVXBkYXRlTWVzc2FnZVJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJVXBkYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbbWVzc2FnZUlkXSBVcGRhdGVNZXNzYWdlUmVxdWVzdCBtZXNzYWdlSWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx9IFtpc1N5c3RlbU1lc3NhZ2VdIFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0IGlzU3lzdGVtTWVzc2FnZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbdGV4dF0gVXBkYXRlTWVzc2FnZVJlcXVlc3QgdGV4dFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPFVpbnQ4QXJyYXk+fG51bGx9IFtyZWNvcmRzXSBVcGRhdGVNZXNzYWdlUmVxdWVzdCByZWNvcmRzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW3JlY2FsbERhdGVdIFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0IHJlY2FsbERhdGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbcmVhZERhdGVdIFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0IHJlYWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhbiBVcGRhdGVNZXNzYWdlUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJVXBkYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVcGRhdGVNZXNzYWdlUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXBkYXRlTWVzc2FnZVJlcXVlc3QgbWVzc2FnZUlkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gbWVzc2FnZUlkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlTWVzc2FnZVJlcXVlc3QucHJvdG90eXBlLm1lc3NhZ2VJZCA9IFwiMFwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXBkYXRlTWVzc2FnZVJlcXVlc3QgaXNTeXN0ZW1NZXNzYWdlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx8dW5kZWZpbmVkfSBpc1N5c3RlbU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVNZXNzYWdlUmVxdWVzdC5wcm90b3R5cGUuaXNTeXN0ZW1NZXNzYWdlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0IHRleHQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gdGV4dFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVNZXNzYWdlUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0LnByb3RvdHlwZS50ZXh0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0IHJlY29yZHMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPFVpbnQ4QXJyYXk+fSByZWNvcmRzXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlTWVzc2FnZVJlcXVlc3QucHJvdG90eXBlLnJlY29yZHMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXBkYXRlTWVzc2FnZVJlcXVlc3QgcmVjYWxsRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHJlY2FsbERhdGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVNZXNzYWdlUmVxdWVzdC5wcm90b3R5cGUucmVjYWxsRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVNZXNzYWdlUmVxdWVzdCByZWFkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IHJlYWREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlTWVzc2FnZVJlcXVlc3QucHJvdG90eXBlLnJlYWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVcGRhdGVNZXNzYWdlUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5VcGRhdGVNZXNzYWdlUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZU1lc3NhZ2VSZXF1ZXN0fSBtZXNzYWdlIFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVNZXNzYWdlUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVzc2FnZUlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtZXNzYWdlSWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5tZXNzYWdlSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pc1N5c3RlbU1lc3NhZ2UgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlzU3lzdGVtTWVzc2FnZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZW5jb2RlKG1lc3NhZ2UuaXNTeXN0ZW1NZXNzYWdlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRleHQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRleHRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UudGV4dCwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWNvcmRzICE9IG51bGwgJiYgbWVzc2FnZS5yZWNvcmRzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5yZWNvcmRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuYnl0ZXMobWVzc2FnZS5yZWNvcmRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVjYWxsRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVjYWxsRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLnJlY2FsbERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVhZERhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlYWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UucmVhZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhbiBVcGRhdGVNZXNzYWdlUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uVXBkYXRlTWVzc2FnZVJlcXVlc3R9IFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVNZXNzYWdlUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVNZXNzYWdlUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlSWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXNTeXN0ZW1NZXNzYWdlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGV4dCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UucmVjb3JkcyAmJiBtZXNzYWdlLnJlY29yZHMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWNvcmRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWNvcmRzLnB1c2gocmVhZGVyLmJ5dGVzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVjYWxsRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWFkRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVwZGF0ZU1lc3NhZ2VSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElVcGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5DaGF0VHlwZXxudWxsfSBbY2hhdFR5cGVdIFVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QgY2hhdFR5cGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbdG9JZF0gVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdCB0b0lkXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIFVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVcGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdCBjaGF0VHlwZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5DaGF0VHlwZX0gY2hhdFR5cGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QucHJvdG90eXBlLmNoYXRUeXBlID0gMDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QgdG9JZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHRvSWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QucHJvdG90eXBlLnRvSWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVcGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3R9IG1lc3NhZ2UgVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2hhdFR5cGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNoYXRUeXBlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDMyKG1lc3NhZ2UuY2hhdFR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50b0lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0b0lkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS5pbnQ2NChtZXNzYWdlLnRvSWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGFuIFVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdH0gVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNoYXRUeXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50b0lkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkFja1JlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGFuIEFja1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJQWNrUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHN0cmluZz58bnVsbH0gW21lc3NhZ2VzSWRzXSBBY2tSZXF1ZXN0IG1lc3NhZ2VzSWRzXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEFja1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIEFja1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUFja1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklBY2tSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQWNrUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNJZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBBY2tSZXF1ZXN0IG1lc3NhZ2VzSWRzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxzdHJpbmc+fSBtZXNzYWdlc0lkc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5BY2tSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQWNrUmVxdWVzdC5wcm90b3R5cGUubWVzc2FnZXNJZHMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEFja1JlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uQWNrUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkFja1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JQWNrUmVxdWVzdH0gbWVzc2FnZSBBY2tSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBBY2tSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlc0lkcyAhPSBudWxsICYmIG1lc3NhZ2UubWVzc2FnZXNJZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5tZXNzYWdlc0lkcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIuaW50NjQobWVzc2FnZS5tZXNzYWdlc0lkc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhbiBBY2tSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5BY2tSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkFja1JlcXVlc3R9IEFja1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIEFja1JlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQWNrUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5tZXNzYWdlc0lkcyAmJiBtZXNzYWdlLm1lc3NhZ2VzSWRzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZXNJZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmQyID0gcmVhZGVyLnVpbnQzMigpICsgcmVhZGVyLnBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXNzYWdlc0lkcy5wdXNoKHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VzSWRzLnB1c2gocmVhZGVyLmludDY0KCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFja1JlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5UdXJtc1JlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVHVybXNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtyZXF1ZXN0SWRdIFR1cm1zUmVxdWVzdCByZXF1ZXN0SWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklBY2tSZXF1ZXN0fG51bGx9IFthY2tSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgYWNrUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSUNyZWF0ZU1lc3NhZ2VSZXF1ZXN0fG51bGx9IFtjcmVhdGVNZXNzYWdlUmVxdWVzdF0gVHVybXNSZXF1ZXN0IGNyZWF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JUXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0fG51bGx9IFtxdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3RdIFR1cm1zUmVxdWVzdCBxdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklRdWVyeU1lc3NhZ2VzUmVxdWVzdHxudWxsfSBbcXVlcnlNZXNzYWdlc1JlcXVlc3RdIFR1cm1zUmVxdWVzdCBxdWVyeU1lc3NhZ2VzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdHxudWxsfSBbcXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgcXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JVXBkYXRlTWVzc2FnZVJlcXVlc3R8bnVsbH0gW3VwZGF0ZU1lc3NhZ2VSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgdXBkYXRlTWVzc2FnZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklVcGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0fG51bGx9IFt1cGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgdXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0fG51bGx9IFtxdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdF0gVHVybXNSZXF1ZXN0IHF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3R8bnVsbH0gW3F1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgcXVlcnlVc2VyUHJvZmlsZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklRdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdHxudWxsfSBbcXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3RdIFR1cm1zUmVxdWVzdCBxdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3R8bnVsbH0gW3F1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3RdIFR1cm1zUmVxdWVzdCBxdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JUXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3R8bnVsbH0gW3F1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgcXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklVcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0fG51bGx9IFt1cGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0XSBUdXJtc1JlcXVlc3QgdXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0fG51bGx9IFt1cGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdF0gVHVybXNSZXF1ZXN0IHVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JVXBkYXRlVXNlclJlcXVlc3R8bnVsbH0gW3VwZGF0ZVVzZXJSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgdXBkYXRlVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklDcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdHxudWxsfSBbY3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3RdIFR1cm1zUmVxdWVzdCBjcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSUNyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdHxudWxsfSBbY3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgY3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdHxudWxsfSBbY3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdF0gVHVybXNSZXF1ZXN0IGNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklEZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3R8bnVsbH0gW2RlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdF0gVHVybXNSZXF1ZXN0IGRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSURlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3R8bnVsbH0gW2RlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3RdIFR1cm1zUmVxdWVzdCBkZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3R8bnVsbH0gW3F1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgcXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklRdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3R8bnVsbH0gW3F1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdF0gVHVybXNSZXF1ZXN0IHF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdHxudWxsfSBbcXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgcXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdHxudWxsfSBbcXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdF0gVHVybXNSZXF1ZXN0IHF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdHxudWxsfSBbdXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3RdIFR1cm1zUmVxdWVzdCB1cGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdHxudWxsfSBbdXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgdXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdHxudWxsfSBbdXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdF0gVHVybXNSZXF1ZXN0IHVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cFJlcXVlc3R8bnVsbH0gW2NyZWF0ZUdyb3VwUmVxdWVzdF0gVHVybXNSZXF1ZXN0IGNyZWF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSURlbGV0ZUdyb3VwUmVxdWVzdHxudWxsfSBbZGVsZXRlR3JvdXBSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgZGVsZXRlR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cFJlcXVlc3R8bnVsbH0gW3F1ZXJ5R3JvdXBSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgcXVlcnlHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklRdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3R8bnVsbH0gW3F1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdF0gVHVybXNSZXF1ZXN0IHF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0fG51bGx9IFtxdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdF0gVHVybXNSZXF1ZXN0IHF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JVXBkYXRlR3JvdXBSZXF1ZXN0fG51bGx9IFt1cGRhdGVHcm91cFJlcXVlc3RdIFR1cm1zUmVxdWVzdCB1cGRhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3R8bnVsbH0gW2NyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdF0gVHVybXNSZXF1ZXN0IGNyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSURlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdHxudWxsfSBbZGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgZGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0fG51bGx9IFtxdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3RdIFR1cm1zUmVxdWVzdCBxdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdHxudWxsfSBbcXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3RdIFR1cm1zUmVxdWVzdCBxdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSUNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3R8bnVsbH0gW2NoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3RdIFR1cm1zUmVxdWVzdCBjaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JQ3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdHxudWxsfSBbY3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdF0gVHVybXNSZXF1ZXN0IGNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdHxudWxsfSBbY3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3RdIFR1cm1zUmVxdWVzdCBjcmVhdGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSUNyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdHxudWxsfSBbY3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XSBUdXJtc1JlcXVlc3QgY3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdHxudWxsfSBbZGVsZXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdF0gVHVybXNSZXF1ZXN0IGRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklEZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdHxudWxsfSBbZGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3RdIFR1cm1zUmVxdWVzdCBkZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSURlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdHxudWxsfSBbZGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XSBUdXJtc1JlcXVlc3QgZGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdHxudWxsfSBbcXVlcnlHcm91cEludml0YXRpb25zUmVxdWVzdF0gVHVybXNSZXF1ZXN0IHF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklRdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdHxudWxsfSBbcXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3RdIFR1cm1zUmVxdWVzdCBxdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdHxudWxsfSBbcXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgcXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0fG51bGx9IFt1cGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RdIFR1cm1zUmVxdWVzdCB1cGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cE1lbWJlclJlcXVlc3R8bnVsbH0gW2NyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdF0gVHVybXNSZXF1ZXN0IGNyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uSURlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdHxudWxsfSBbZGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0XSBUdXJtc1JlcXVlc3QgZGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0fG51bGx9IFtxdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3RdIFR1cm1zUmVxdWVzdCBxdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLklVcGRhdGVHcm91cE1lbWJlclJlcXVlc3R8bnVsbH0gW3VwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdF0gVHVybXNSZXF1ZXN0IHVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUdXJtc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVHVybXNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElUdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklUdXJtc1JlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBUdXJtc1JlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCByZXF1ZXN0SWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx8dW5kZWZpbmVkfSByZXF1ZXN0SWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5yZXF1ZXN0SWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGFja1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUFja1JlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGFja1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5hY2tSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBjcmVhdGVNZXNzYWdlUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlTWVzc2FnZVJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGNyZWF0ZU1lc3NhZ2VSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZVJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JUXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBxdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5xdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHF1ZXJ5TWVzc2FnZXNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklRdWVyeU1lc3NhZ2VzUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gcXVlcnlNZXNzYWdlc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5xdWVyeU1lc3NhZ2VzUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgcXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklRdWVyeVBlbmRpbmdNZXNzYWdlc1dpdGhUb3RhbFJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IHF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLnF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgdXBkYXRlTWVzc2FnZVJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVVwZGF0ZU1lc3NhZ2VSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSB1cGRhdGVNZXNzYWdlUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLnVwZGF0ZU1lc3NhZ2VSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCB1cGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklVcGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSB1cGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUudXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgcXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBxdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLnF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBxdWVyeVVzZXJQcm9maWxlUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IHF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUucXVlcnlVc2VyUHJvZmlsZVJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklRdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gcXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5xdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgcXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gcXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLnF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHF1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gcXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5xdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgdXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gdXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLnVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklVcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gdXBkYXRlVXNlck9ubGluZVN0YXR1c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS51cGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgdXBkYXRlVXNlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVVzZXJSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSB1cGRhdGVVc2VyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLnVwZGF0ZVVzZXJSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBjcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUuY3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGNyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBjcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5jcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5jcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBkZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSURlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gZGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUuZGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBkZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklEZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBkZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUuZGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgcXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBxdWVyeUZyaWVuZFJlcXVlc3RzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLnF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBxdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gcXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUucXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBxdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gcXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUucXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBxdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBxdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUucXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgdXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSB1cGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLnVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCB1cGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gdXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUudXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCB1cGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSB1cGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUudXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgY3JlYXRlR3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklDcmVhdGVHcm91cFJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGNyZWF0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLmNyZWF0ZUdyb3VwUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgZGVsZXRlR3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklEZWxldGVHcm91cFJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGRlbGV0ZUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLmRlbGV0ZUdyb3VwUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgcXVlcnlHcm91cFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBxdWVyeUdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLnF1ZXJ5R3JvdXBSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBxdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gcXVlcnlKb2luZWRHcm91cHNJZHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUucXVlcnlKb2luZWRHcm91cHNJZHNSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBxdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JUXVlcnlKb2luZWRHcm91cHNJbmZvc1JlcXVlc3R8bnVsbHx1bmRlZmluZWR9IHF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUucXVlcnlKb2luZWRHcm91cHNJbmZvc1JlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHVwZGF0ZUdyb3VwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JVXBkYXRlR3JvdXBSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSB1cGRhdGVHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS51cGRhdGVHcm91cFJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGNyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBjcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5jcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGRlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBkZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5kZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBxdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5xdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0lkc1JlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLklRdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gcXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5xdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUdXJtc1JlcXVlc3QgY2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JQ2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdHxudWxsfHVuZGVmaW5lZH0gY2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBUdXJtc1JlcXVlc3QucHJvdG90eXBlLmNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSUNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5jcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBjcmVhdGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUuY3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGNyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBjcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5jcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSURlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5kZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBkZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3R8bnVsbHx1bmRlZmluZWR9IGRlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUuZGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGRlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBkZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5kZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uSVF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3R8bnVsbHx1bmRlZmluZWR9IHF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5xdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBxdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3R8bnVsbHx1bmRlZmluZWR9IHF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5wcm90b3R5cGUucXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBxdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5xdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSB1cGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS51cGRhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGNyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBjcmVhdGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5jcmVhdGVHcm91cE1lbWJlclJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IGRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBkZWxldGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5kZWxldGVHcm91cE1lbWJlclJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSBxdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS5xdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVHVybXNSZXF1ZXN0IHVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5JVXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0fG51bGx8dW5kZWZpbmVkfSB1cGRhdGVHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LnByb3RvdHlwZS51cGRhdGVHcm91cE1lbWJlclJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLy8gT25lT2YgZmllbGQgbmFtZXMgYm91bmQgdG8gdmlydHVhbCBnZXR0ZXJzIGFuZCBzZXR0ZXJzXG4gICAgICAgICAgICAgICAgdmFyICRvbmVPZkZpZWxkcztcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFR1cm1zUmVxdWVzdCBraW5kLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge1wiYWNrUmVxdWVzdFwifFwiY3JlYXRlTWVzc2FnZVJlcXVlc3RcInxcInF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdFwifFwicXVlcnlNZXNzYWdlc1JlcXVlc3RcInxcInF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdFwifFwidXBkYXRlTWVzc2FnZVJlcXVlc3RcInxcInVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3RcInxcInF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XCJ8XCJxdWVyeVVzZXJQcm9maWxlUmVxdWVzdFwifFwicXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3RcInxcInF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3RcInxcInF1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0XCJ8XCJ1cGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0XCJ8XCJ1cGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdFwifFwidXBkYXRlVXNlclJlcXVlc3RcInxcImNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0XCJ8XCJjcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcInxcImNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcInxcImRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFwifFwiZGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdFwifFwicXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3RcInxcInF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdFwifFwicXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0XCJ8XCJxdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XCJ8XCJ1cGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFwifFwidXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XCJ8XCJ1cGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XCJ8XCJjcmVhdGVHcm91cFJlcXVlc3RcInxcImRlbGV0ZUdyb3VwUmVxdWVzdFwifFwicXVlcnlHcm91cFJlcXVlc3RcInxcInF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdFwifFwicXVlcnlKb2luZWRHcm91cHNJbmZvc1JlcXVlc3RcInxcInVwZGF0ZUdyb3VwUmVxdWVzdFwifFwiY3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0XCJ8XCJkZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcInxcInF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdFwifFwicXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3RcInxcImNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3RcInxcImNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcInxcImNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XCJ8XCJjcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcInxcImRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcInxcImRlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0XCJ8XCJkZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3RcInxcInF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3RcInxcInF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0XCJ8XCJxdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3RcInxcInVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFwifFwiY3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XCJ8XCJkZWxldGVHcm91cE1lbWJlclJlcXVlc3RcInxcInF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdFwifFwidXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0XCJ8dW5kZWZpbmVkfSBraW5kXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUdXJtc1JlcXVlc3QucHJvdG90eXBlLCBcImtpbmRcIiwge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6ICR1dGlsLm9uZU9mR2V0dGVyKCRvbmVPZkZpZWxkcyA9IFtcImFja1JlcXVlc3RcIiwgXCJjcmVhdGVNZXNzYWdlUmVxdWVzdFwiLCBcInF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdFwiLCBcInF1ZXJ5TWVzc2FnZXNSZXF1ZXN0XCIsIFwicXVlcnlQZW5kaW5nTWVzc2FnZXNXaXRoVG90YWxSZXF1ZXN0XCIsIFwidXBkYXRlTWVzc2FnZVJlcXVlc3RcIiwgXCJ1cGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0XCIsIFwicXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3RcIiwgXCJxdWVyeVVzZXJQcm9maWxlUmVxdWVzdFwiLCBcInF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0XCIsIFwicXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdFwiLCBcInF1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0XCIsIFwidXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdFwiLCBcInVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0XCIsIFwidXBkYXRlVXNlclJlcXVlc3RcIiwgXCJjcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFwiLCBcImNyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFwiLCBcImNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcIiwgXCJkZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcIiwgXCJkZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0XCIsIFwicXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3RcIiwgXCJxdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3RcIiwgXCJxdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3RcIiwgXCJxdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XCIsIFwidXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3RcIiwgXCJ1cGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcIiwgXCJ1cGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XCIsIFwiY3JlYXRlR3JvdXBSZXF1ZXN0XCIsIFwiZGVsZXRlR3JvdXBSZXF1ZXN0XCIsIFwicXVlcnlHcm91cFJlcXVlc3RcIiwgXCJxdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3RcIiwgXCJxdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdFwiLCBcInVwZGF0ZUdyb3VwUmVxdWVzdFwiLCBcImNyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdFwiLCBcImRlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdFwiLCBcInF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdFwiLCBcInF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0XCIsIFwiY2hlY2tHcm91cEpvaW5RdWVzdGlvbnNBbnN3ZXJzUmVxdWVzdFwiLCBcImNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcIiwgXCJjcmVhdGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdFwiLCBcImNyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFwiLCBcImRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcIiwgXCJkZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdFwiLCBcImRlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFwiLCBcInF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3RcIiwgXCJxdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdFwiLCBcInF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdFwiLCBcInVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFwiLCBcImNyZWF0ZUdyb3VwTWVtYmVyUmVxdWVzdFwiLCBcImRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdFwiLCBcInF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdFwiLCBcInVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdFwiXSksXG4gICAgICAgICAgICAgICAgICAgIHNldDogJHV0aWwub25lT2ZTZXR0ZXIoJG9uZU9mRmllbGRzKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFR1cm1zUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JVHVybXNSZXF1ZXN0fSBtZXNzYWdlIFR1cm1zUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVHVybXNSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXF1ZXN0SWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlcXVlc3RJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLnJlcXVlc3RJZCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hY2tSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJhY2tSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uQWNrUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5hY2tSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNyZWF0ZU1lc3NhZ2VSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjcmVhdGVNZXNzYWdlUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkNyZWF0ZU1lc3NhZ2VSZXF1ZXN0LmVuY29kZShtZXNzYWdlLmNyZWF0ZU1lc3NhZ2VSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnF1ZXJ5TWVzc2FnZVN0YXR1c2VzUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCA2LCB3aXJlVHlwZSAyID0qLzUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5xdWVyeU1lc3NhZ2VzUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlNZXNzYWdlc1JlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VzUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5xdWVyeU1lc3NhZ2VzUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSAyID0qLzU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5xdWVyeVBlbmRpbmdNZXNzYWdlc1dpdGhUb3RhbFJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5xdWVyeVBlbmRpbmdNZXNzYWdlc1dpdGhUb3RhbFJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgOCwgd2lyZVR5cGUgMiA9Ki82NikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXBkYXRlTWVzc2FnZVJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInVwZGF0ZU1lc3NhZ2VSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXBkYXRlTWVzc2FnZVJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UudXBkYXRlTWVzc2FnZVJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgOSwgd2lyZVR5cGUgMiA9Ki83NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UudXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMCwgd2lyZVR5cGUgMiA9Ki84MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgMTAwLCB3aXJlVHlwZSAyID0qLzgwMikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlVc2VyUHJvZmlsZVJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucXVlcnlVc2VyUHJvZmlsZVJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgMTAxLCB3aXJlVHlwZSAyID0qLzgxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgMTAyLCB3aXJlVHlwZSAyID0qLzgxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMDMsIHdpcmVUeXBlIDIgPSovODI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5xdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5xdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMDQsIHdpcmVUeXBlIDIgPSovODM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51cGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1cGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdC5lbmNvZGUobWVzc2FnZS51cGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDEwNSwgd2lyZVR5cGUgMiA9Ki84NDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1cGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDEwNiwgd2lyZVR5cGUgMiA9Ki84NTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVwZGF0ZVVzZXJSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1cGRhdGVVc2VyUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnVwZGF0ZVVzZXJSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDEwNywgd2lyZVR5cGUgMiA9Ki84NTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LmVuY29kZShtZXNzYWdlLmNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDIwMCwgd2lyZVR5cGUgMiA9Ki8xNjAyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkNyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5jcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgMjAxLCB3aXJlVHlwZSAyID0qLzE2MTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5DcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LmVuY29kZShtZXNzYWdlLmNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgMjAyLCB3aXJlVHlwZSAyID0qLzE2MTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LmVuY29kZShtZXNzYWdlLmRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAyMDMsIHdpcmVUeXBlIDIgPSovMTYyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UuZGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAyMDQsIHdpcmVUeXBlIDIgPSovMTYzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgMjA1LCB3aXJlVHlwZSAyID0qLzE2NDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAyMDYsIHdpcmVUeXBlIDIgPSovMTY1MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJxdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDIwNywgd2lyZVR5cGUgMiA9Ki8xNjU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5xdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJxdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5xdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDIwOCwgd2lyZVR5cGUgMiA9Ki8xNjY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51cGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdC5lbmNvZGUobWVzc2FnZS51cGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAyMDksIHdpcmVUeXBlIDIgPSovMTY3NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1cGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UudXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDIxMCwgd2lyZVR5cGUgMiA9Ki8xNjgyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51cGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1cGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdC5lbmNvZGUobWVzc2FnZS51cGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDIxMSwgd2lyZVR5cGUgMiA9Ki8xNjkwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jcmVhdGVHcm91cFJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNyZWF0ZUdyb3VwUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5jcmVhdGVHcm91cFJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgMzAwLCB3aXJlVHlwZSAyID0qLzI0MDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGV0ZUdyb3VwUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGVsZXRlR3JvdXBSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBSZXF1ZXN0LmVuY29kZShtZXNzYWdlLmRlbGV0ZUdyb3VwUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAzMDEsIHdpcmVUeXBlIDIgPSovMjQxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlHcm91cFJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5R3JvdXBSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cFJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucXVlcnlHcm91cFJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgMzAyLCB3aXJlVHlwZSAyID0qLzI0MTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlKb2luZWRHcm91cHNJZHNSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlKb2luZWRHcm91cHNJZHNSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAzMDMsIHdpcmVUeXBlIDIgPSovMjQyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlKb2luZWRHcm91cHNJbmZvc1JlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlKb2luZWRHcm91cHNJbmZvc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucXVlcnlKb2luZWRHcm91cHNJbmZvc1JlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgMzA0LCB3aXJlVHlwZSAyID0qLzI0MzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVwZGF0ZUdyb3VwUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXBkYXRlR3JvdXBSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnVwZGF0ZUdyb3VwUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCAzMDUsIHdpcmVUeXBlIDIgPSovMjQ0MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UuY3JlYXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDQwMCwgd2lyZVR5cGUgMiA9Ki8zMjAyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5kZWxldGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNDAxLCB3aXJlVHlwZSAyID0qLzMyMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCA0MDIsIHdpcmVUeXBlIDIgPSovMzIxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJbmZvc1JlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNDAzLCB3aXJlVHlwZSAyID0qLzMyMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5DaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0LmVuY29kZShtZXNzYWdlLmNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNTAwLCB3aXJlVHlwZSAyID0qLzQwMDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0LmVuY29kZShtZXNzYWdlLmNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNTAxLCB3aXJlVHlwZSAyID0qLzQwMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjcmVhdGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LmVuY29kZShtZXNzYWdlLmNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDUwMiwgd2lyZVR5cGUgMiA9Ki80MDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkNyZWF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5jcmVhdGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNTAzLCB3aXJlVHlwZSAyID0qLzQwMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5EZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0LmVuY29kZShtZXNzYWdlLmRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNTA0LCB3aXJlVHlwZSAyID0qLzQwMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LmVuY29kZShtZXNzYWdlLmRlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDUwNSwgd2lyZVR5cGUgMiA9Ki80MDQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5kZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNTA2LCB3aXJlVHlwZSAyID0qLzQwNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNTA3LCB3aXJlVHlwZSAyID0qLzQwNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJxdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDUwOCwgd2lyZVR5cGUgMiA9Ki80MDY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5xdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBKb2luUXVlc3Rpb25zUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5xdWVyeUdyb3VwSm9pblF1ZXN0aW9uc1JlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNTA5LCB3aXJlVHlwZSAyID0qLzQwNzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uVXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LmVuY29kZShtZXNzYWdlLnVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCA1MTAsIHdpcmVUeXBlIDIgPSovNDA4MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjcmVhdGVHcm91cE1lbWJlclJlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5DcmVhdGVHcm91cE1lbWJlclJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UuY3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDYwMCwgd2lyZVR5cGUgMiA9Ki80ODAyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZWxldGVHcm91cE1lbWJlclJlcXVlc3QgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5kZWxldGVHcm91cE1lbWJlclJlcXVlc3QsIHdyaXRlci51aW50MzIoLyogaWQgNjAxLCB3aXJlVHlwZSAyID0qLzQ4MTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cE1lbWJlcnNSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdCwgd3JpdGVyLnVpbnQzMigvKiBpZCA2MDIsIHdpcmVUeXBlIDIgPSovNDgxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ1cGRhdGVHcm91cE1lbWJlclJlcXVlc3RcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVHcm91cE1lbWJlclJlcXVlc3QuZW5jb2RlKG1lc3NhZ2UudXBkYXRlR3JvdXBNZW1iZXJSZXF1ZXN0LCB3cml0ZXIudWludDMyKC8qIGlkIDYwMywgd2lyZVR5cGUgMiA9Ki80ODI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgVHVybXNSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uVHVybXNSZXF1ZXN0fSBUdXJtc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFR1cm1zUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5UdXJtc1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdElkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFja1JlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5BY2tSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jcmVhdGVNZXNzYWdlUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLkNyZWF0ZU1lc3NhZ2VSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeU1lc3NhZ2VTdGF0dXNlc1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5TWVzc2FnZXNSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlNZXNzYWdlc1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXBkYXRlTWVzc2FnZVJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVNZXNzYWdlUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVUeXBpbmdTdGF0dXNSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVlcnlVc2VyUHJvZmlsZVJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeVVzZXJQcm9maWxlUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXBkYXRlVXNlck9ubGluZVN0YXR1c1JlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51cGRhdGVVc2VyUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5DcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeUZyaWVuZFJlcXVlc3RzUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjA4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51cGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjExOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY3JlYXRlR3JvdXBSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMwMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGV0ZUdyb3VwUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZUdyb3VwUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeUdyb3VwUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMwMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5Sm9pbmVkR3JvdXBzSWRzUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeUpvaW5lZEdyb3Vwc0luZm9zUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMwNTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVwZGF0ZUdyb3VwUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEJsYWNrbGlzdGVkVXNlclJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBCbGFja2xpc3RlZFVzZXJSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSWRzUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWVyeUdyb3VwQmxhY2tsaXN0ZWRVc2Vyc0luZm9zUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5DaGVja0dyb3VwSm9pblF1ZXN0aW9uc0Fuc3dlcnNSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNyZWF0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5DcmVhdGVHcm91cEludml0YXRpb25SZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGV0ZUdyb3VwSW52aXRhdGlvblJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5EZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwNTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGV0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBKb2luUmVxdWVzdFJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5R3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5R3JvdXBKb2luUmVxdWVzdHNSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEpvaW5SZXF1ZXN0c1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZUdyb3VwSm9pblF1ZXN0aW9uUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jcmVhdGVHcm91cE1lbWJlclJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5DcmVhdGVHcm91cE1lbWJlclJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0ID0gJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlR3JvdXBNZW1iZXJSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYwMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdCA9ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51cGRhdGVHcm91cE1lbWJlclJlcXVlc3QgPSAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVHcm91cE1lbWJlclJlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVHVybXNSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfSBbbGFzdFVwZGF0ZWREYXRlXSBRdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdCBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBRdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QucHJvdG90eXBlLmxhc3RVcGRhdGVkRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdH0gbWVzc2FnZSBRdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBRdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uUXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3R9IFF1ZXJ5VXNlckdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeVVzZXJHcm91cEludml0YXRpb25zUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3VzZXJJZF0gUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3QgdXNlcklkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2xhc3RVcGRhdGVkRGF0ZV0gUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3QgbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElRdWVyeVVzZXJQcm9maWxlUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0IHVzZXJJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHVzZXJJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVVzZXJQcm9maWxlUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0LnByb3RvdHlwZS51c2VySWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVVzZXJQcm9maWxlUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0LnByb3RvdHlwZS5sYXN0VXBkYXRlZERhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3R9IG1lc3NhZ2UgUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51c2VySWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInVzZXJJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBRdWVyeVVzZXJQcm9maWxlUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3R9IFF1ZXJ5VXNlclByb2ZpbGVSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeVVzZXJQcm9maWxlUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeVVzZXJQcm9maWxlUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51c2VySWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUXVlcnlVc2VyUHJvZmlsZVJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5RdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBRdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtsYXRpdHVkZV0gUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QgbGF0aXR1ZGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbbG9uZ2l0dWRlXSBRdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdCBsb25naXR1ZGVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JRmxvYXRWYWx1ZXxudWxsfSBbZGlzdGFuY2VdIFF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0IGRpc3RhbmNlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbH0gW21heE51bWJlcl0gUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QgbWF4TnVtYmVyXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElRdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0IGxhdGl0dWRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gbGF0aXR1ZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdC5wcm90b3R5cGUubGF0aXR1ZGUgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QgbG9uZ2l0dWRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gbG9uZ2l0dWRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QucHJvdG90eXBlLmxvbmdpdHVkZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdCBkaXN0YW5jZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUZsb2F0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGRpc3RhbmNlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QucHJvdG90eXBlLmRpc3RhbmNlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0IG1heE51bWJlci5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbHx1bmRlZmluZWR9IG1heE51bWJlclxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0LnByb3RvdHlwZS5tYXhOdW1iZXIgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3R9IG1lc3NhZ2UgUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYXRpdHVkZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGF0aXR1ZGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDUgPSovMTMpLmZsb2F0KG1lc3NhZ2UubGF0aXR1ZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sb25naXR1ZGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxvbmdpdHVkZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgNSA9Ki8yMSkuZmxvYXQobWVzc2FnZS5sb25naXR1ZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kaXN0YW5jZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGlzdGFuY2VcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuRmxvYXRWYWx1ZS5lbmNvZGUobWVzc2FnZS5kaXN0YW5jZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tYXhOdW1iZXIgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm1heE51bWJlclwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmVuY29kZShtZXNzYWdlLm1heE51bWJlciwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJZHNOZWFyYnlSZXF1ZXN0fSBRdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF0aXR1ZGUgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxvbmdpdHVkZSA9IHJlYWRlci5mbG9hdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzdGFuY2UgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuRmxvYXRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWF4TnVtYmVyID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUXVlcnlVc2Vyc0lkc05lYXJieVJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5RdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtsYXRpdHVkZV0gUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdCBsYXRpdHVkZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtsb25naXR1ZGVdIFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QgbG9uZ2l0dWRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUZsb2F0VmFsdWV8bnVsbH0gW2Rpc3RhbmNlXSBRdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0IGRpc3RhbmNlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVVJbnQzMlZhbHVlfG51bGx9IFttYXhOdW1iZXJdIFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QgbWF4TnVtYmVyXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBRdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0IGxhdGl0dWRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gbGF0aXR1ZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QucHJvdG90eXBlLmxhdGl0dWRlID0gMDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QgbG9uZ2l0dWRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gbG9uZ2l0dWRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0LnByb3RvdHlwZS5sb25naXR1ZGUgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdCBkaXN0YW5jZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUZsb2F0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGRpc3RhbmNlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0LnByb3RvdHlwZS5kaXN0YW5jZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0IG1heE51bWJlci5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSVVJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBtYXhOdW1iZXJcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QucHJvdG90eXBlLm1heE51bWJlciA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5RdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0fSBtZXNzYWdlIFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhdGl0dWRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXRpdHVkZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgNSA9Ki8xMykuZmxvYXQobWVzc2FnZS5sYXRpdHVkZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxvbmdpdHVkZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibG9uZ2l0dWRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSA1ID0qLzIxKS5mbG9hdChtZXNzYWdlLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRpc3RhbmNlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkaXN0YW5jZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5GbG9hdFZhbHVlLmVuY29kZShtZXNzYWdlLmRpc3RhbmNlLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1heE51bWJlciAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibWF4TnVtYmVyXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlVJbnQzMlZhbHVlLmVuY29kZShtZXNzYWdlLm1heE51bWJlciwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5RdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0fSBRdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeVVzZXJzSW5mb3NOZWFyYnlSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF0aXR1ZGUgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxvbmdpdHVkZSA9IHJlYWRlci5mbG9hdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzdGFuY2UgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuRmxvYXRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWF4TnVtYmVyID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlVJbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFF1ZXJ5VXNlcnNJbmZvc05lYXJieVJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5RdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHN0cmluZz58bnVsbH0gW3VzZXJzSWRzXSBRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdCB1c2Vyc0lkc1xuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2Vyc0lkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0IHVzZXJzSWRzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxzdHJpbmc+fSB1c2Vyc0lkc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0LnByb3RvdHlwZS51c2Vyc0lkcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdH0gbWVzc2FnZSBRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJzSWRzICE9IG51bGwgJiYgbWVzc2FnZS51c2Vyc0lkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnVzZXJzSWRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5pbnQ2NChtZXNzYWdlLnVzZXJzSWRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5VXNlcnNPbmxpbmVTdGF0dXNSZXF1ZXN0fSBRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UudXNlcnNJZHMgJiYgbWVzc2FnZS51c2Vyc0lkcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJzSWRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlcnNJZHMucHVzaChyZWFkZXIuaW50NjQoKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51c2Vyc0lkcy5wdXNoKHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIENyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3JlY2lwaWVudElkXSBDcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdCByZWNpcGllbnRJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtjb250ZW50XSBDcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdCBjb250ZW50XG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIENyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElDcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0IHJlY2lwaWVudElkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gcmVjaXBpZW50SWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdC5wcm90b3R5cGUucmVjaXBpZW50SWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0IGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBjb250ZW50XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QucHJvdG90eXBlLmNvbnRlbnQgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3R9IG1lc3NhZ2UgQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZWNpcGllbnRJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVjaXBpZW50SWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5yZWNpcGllbnRJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNvbnRlbnRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkNyZWF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0fSBDcmVhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVjaXBpZW50SWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gQ3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5DcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgQ3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUNyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtuYW1lXSBDcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgbmFtZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBDcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElDcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklDcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBDcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCBuYW1lLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gbmFtZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QucHJvdG90eXBlLm5hbWUgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5DcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JQ3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0fSBtZXNzYWdlIENyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJuYW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIENyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkNyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdH0gQ3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uQ3JlYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIENyZWF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElDcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3VzZXJJZF0gQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdCB1c2VySWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW58bnVsbH0gW2lzQmxvY2tlZF0gQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdCBpc0Jsb2NrZWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfSBbZ3JvdXBJbmRleF0gQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdCBncm91cEluZGV4XG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSUNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBDcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0IHVzZXJJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHVzZXJJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdC5wcm90b3R5cGUudXNlcklkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0IGlzQmxvY2tlZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufSBpc0Jsb2NrZWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QucHJvdG90eXBlLmlzQmxvY2tlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdCBncm91cEluZGV4LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZ3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5DcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBJbmRleCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5DcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklDcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0fSBtZXNzYWdlIENyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXNlcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UudXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaXNCbG9ja2VkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpc0Jsb2NrZWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmJvb2wobWVzc2FnZS5pc0Jsb2NrZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cEluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cEluZGV4XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZW5jb2RlKG1lc3NhZ2UuZ3JvdXBJbmRleCwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5DcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0fSBDcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBDcmVhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlcklkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlzQmxvY2tlZCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cEluZGV4ID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gQ3JlYXRlUmVsYXRpb25zaGlwUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwTWVtYmVyUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3VzZXJJZF0gRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0IHVzZXJJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtncm91cEluZGV4XSBEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3QgZ3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFt0YXJnZXRHcm91cEluZGV4XSBEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3QgdGFyZ2V0R3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwTWVtYmVyUmVxdWVzdCB1c2VySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSB1c2VySWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0LnByb3RvdHlwZS51c2VySWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwTWVtYmVyUmVxdWVzdCBncm91cEluZGV4LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gZ3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3QucHJvdG90eXBlLmdyb3VwSW5kZXggPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0IHRhcmdldEdyb3VwSW5kZXguXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSB0YXJnZXRHcm91cEluZGV4XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwTWVtYmVyUmVxdWVzdC5wcm90b3R5cGUudGFyZ2V0R3JvdXBJbmRleCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwTWVtYmVyUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwTWVtYmVyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3R9IG1lc3NhZ2UgRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZXJJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXNlcklkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UudXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJbmRleFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikuaW50MzIobWVzc2FnZS5ncm91cEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGFyZ2V0R3JvdXBJbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidGFyZ2V0R3JvdXBJbmRleFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmVuY29kZShtZXNzYWdlLnRhcmdldEdyb3VwSW5kZXgsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwTWVtYmVyUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwTWVtYmVyUmVxdWVzdH0gRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVSZWxhdGlvbnNoaXBHcm91cE1lbWJlclJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cEluZGV4ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50YXJnZXRHcm91cEluZGV4ID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBNZW1iZXJSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElEZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZ3JvdXBJbmRleF0gRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0IGdyb3VwSW5kZXhcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfSBbdGFyZ2V0R3JvdXBJbmRleF0gRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0IHRhcmdldEdyb3VwSW5kZXhcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgZ3JvdXBJbmRleC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGdyb3VwSW5kZXhcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LnByb3RvdHlwZS5ncm91cEluZGV4ID0gMDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCB0YXJnZXRHcm91cEluZGV4LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfHVuZGVmaW5lZH0gdGFyZ2V0R3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBEZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QucHJvdG90eXBlLnRhcmdldEdyb3VwSW5kZXggPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5EZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0fSBtZXNzYWdlIERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cEluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cEluZGV4XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDMyKG1lc3NhZ2UuZ3JvdXBJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRhcmdldEdyb3VwSW5kZXggIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRhcmdldEdyb3VwSW5kZXhcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS50YXJnZXRHcm91cEluZGV4LCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBEZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5EZWxldGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3R9IERlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cEluZGV4ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50YXJnZXRHcm91cEluZGV4ID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gRGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0O1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBEZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSURlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbcmVsYXRlZFVzZXJJZF0gRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdCByZWxhdGVkVXNlcklkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbH0gW2dyb3VwSW5kZXhdIERlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgZ3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFt0YXJnZXRHcm91cEluZGV4XSBEZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0IHRhcmdldEdyb3VwSW5kZXhcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBEZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElEZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIERlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgcmVsYXRlZFVzZXJJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHJlbGF0ZWRVc2VySWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QucHJvdG90eXBlLnJlbGF0ZWRVc2VySWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgZ3JvdXBJbmRleC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbHx1bmRlZmluZWR9IGdyb3VwSW5kZXhcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QucHJvdG90eXBlLmdyb3VwSW5kZXggPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdCB0YXJnZXRHcm91cEluZGV4LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfHVuZGVmaW5lZH0gdGFyZ2V0R3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5EZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdC5wcm90b3R5cGUudGFyZ2V0R3JvdXBJbmRleCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5EZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklEZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0fSBtZXNzYWdlIERlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIERlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlbGF0ZWRVc2VySWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlbGF0ZWRVc2VySWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS5yZWxhdGVkVXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJbmRleFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmVuY29kZShtZXNzYWdlLmdyb3VwSW5kZXgsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGFyZ2V0R3JvdXBJbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidGFyZ2V0R3JvdXBJbmRleFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmVuY29kZShtZXNzYWdlLnRhcmdldEdyb3VwSW5kZXgsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIERlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLkRlbGV0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdH0gRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5EZWxldGVSZWxhdGlvbnNoaXBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlbGF0ZWRVc2VySWQgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJbmRleCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50YXJnZXRHcm91cEluZGV4ID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gRGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2xhc3RVcGRhdGVkRGF0ZV0gUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElRdWVyeUZyaWVuZFJlcXVlc3RzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeUZyaWVuZFJlcXVlc3RzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0LnByb3RvdHlwZS5sYXN0VXBkYXRlZERhdGUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3R9IG1lc3NhZ2UgUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxhc3RVcGRhdGVkRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5RnJpZW5kUmVxdWVzdHNSZXF1ZXN0fSBRdWVyeUZyaWVuZFJlcXVlc3RzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5RdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklCb29sVmFsdWV8bnVsbH0gW2lzQmxvY2tlZF0gUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0IGlzQmxvY2tlZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFtncm91cEluZGV4XSBRdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3QgZ3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIFF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdCBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3QgaXNCbG9ja2VkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JQm9vbFZhbHVlfG51bGx8dW5kZWZpbmVkfSBpc0Jsb2NrZWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0LnByb3RvdHlwZS5pc0Jsb2NrZWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0IGdyb3VwSW5kZXguXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBncm91cEluZGV4XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBJbmRleCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdC5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdH0gbWVzc2FnZSBRdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaXNCbG9ja2VkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpc0Jsb2NrZWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLmVuY29kZShtZXNzYWdlLmlzQmxvY2tlZCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ncm91cEluZGV4ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJncm91cEluZGV4XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZW5jb2RlKG1lc3NhZ2UuZ3JvdXBJbmRleCwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxhc3RVcGRhdGVkRGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmVuY29kZShtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGVkVXNlcnNJZHNSZXF1ZXN0fSBRdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5UmVsYXRlZFVzZXJzSWRzUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5RdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXNCbG9ja2VkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3JvdXBJbmRleCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0VXBkYXRlZERhdGUgPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBRdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5RdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfG51bGx9IFtsYXN0VXBkYXRlZERhdGVdIFF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdCBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3QgbGFzdFVwZGF0ZWREYXRlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50NjRWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbGFzdFVwZGF0ZWREYXRlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdC5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdH0gbWVzc2FnZSBRdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0VXBkYXRlZERhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZS5lbmNvZGUobWVzc2FnZS5sYXN0VXBkYXRlZERhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdH0gUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGlvbnNoaXBHcm91cHNSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48c3RyaW5nPnxudWxsfSBbcmVsYXRlZFVzZXJzSWRzXSBRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0IHJlbGF0ZWRVc2Vyc0lkc1xuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklCb29sVmFsdWV8bnVsbH0gW2lzQmxvY2tlZF0gUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdCBpc0Jsb2NrZWRcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfSBbZ3JvdXBJbmRleF0gUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdCBncm91cEluZGV4XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbH0gW2xhc3RVcGRhdGVkRGF0ZV0gUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdCBsYXN0VXBkYXRlZERhdGVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbGF0ZWRVc2Vyc0lkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3QgcmVsYXRlZFVzZXJzSWRzLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge0FycmF5LjxzdHJpbmc+fSByZWxhdGVkVXNlcnNJZHNcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3QucHJvdG90eXBlLnJlbGF0ZWRVc2Vyc0lkcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0IGlzQmxvY2tlZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfHVuZGVmaW5lZH0gaXNCbG9ja2VkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0LnByb3RvdHlwZS5pc0Jsb2NrZWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdCBncm91cEluZGV4LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfHVuZGVmaW5lZH0gZ3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBJbmRleCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0IGxhc3RVcGRhdGVkRGF0ZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtnb29nbGUucHJvdG9idWYuSUludDY0VmFsdWV8bnVsbHx1bmRlZmluZWR9IGxhc3RVcGRhdGVkRGF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdC5wcm90b3R5cGUubGFzdFVwZGF0ZWREYXRlID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3R9IG1lc3NhZ2UgUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVsYXRlZFVzZXJzSWRzICE9IG51bGwgJiYgbWVzc2FnZS5yZWxhdGVkVXNlcnNJZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5yZWxhdGVkVXNlcnNJZHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmludDY0KG1lc3NhZ2UucmVsYXRlZFVzZXJzSWRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pc0Jsb2NrZWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImlzQmxvY2tlZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZW5jb2RlKG1lc3NhZ2UuaXNCbG9ja2VkLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmdyb3VwSW5kZXggIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImdyb3VwSW5kZXhcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5ncm91cEluZGV4LCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RVcGRhdGVkRGF0ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFzdFVwZGF0ZWREYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZW5jb2RlKG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlLCB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBRdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5RdWVyeVJlbGF0aW9uc2hpcHNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3R9IFF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5yZWxhdGVkVXNlcnNJZHMgJiYgbWVzc2FnZS5yZWxhdGVkVXNlcnNJZHMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWxhdGVkVXNlcnNJZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmQyID0gcmVhZGVyLnVpbnQzMigpICsgcmVhZGVyLnBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWxhdGVkVXNlcnNJZHMucHVzaChyZWFkZXIuaW50NjQoKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWxhdGVkVXNlcnNJZHMucHVzaChyZWFkZXIuaW50NjQoKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlzQmxvY2tlZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdyb3VwSW5kZXggPSAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFVwZGF0ZWREYXRlID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUXVlcnlSZWxhdGlvbnNoaXBzUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhbiBVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtyZXF1ZXN0SWRdIFVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0IHJlcXVlc3RJZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7aW0udHVybXMucHJvdG8uUmVzcG9uc2VBY3Rpb258bnVsbH0gW3Jlc3BvbnNlQWN0aW9uXSBVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdCByZXNwb25zZUFjdGlvblxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbcmVhc29uXSBVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdCByZWFzb25cbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIFVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0IHJlcXVlc3RJZC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHJlcXVlc3RJZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LnByb3RvdHlwZS5yZXF1ZXN0SWQgPSBcIjBcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0IHJlc3BvbnNlQWN0aW9uLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2ltLnR1cm1zLnByb3RvLlJlc3BvbnNlQWN0aW9ufSByZXNwb25zZUFjdGlvblxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25zZUFjdGlvbiA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdCByZWFzb24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gcmVhc29uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QucHJvdG90eXBlLnJlYXNvbiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdH0gbWVzc2FnZSBVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnJlcXVlc3RJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVxdWVzdElkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDY0KG1lc3NhZ2UucmVxdWVzdElkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVzcG9uc2VBY3Rpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJlc3BvbnNlQWN0aW9uXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS5pbnQzMihtZXNzYWdlLnJlc3BvbnNlQWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVhc29uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyZWFzb25cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UucmVhc29uLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYW4gVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlVwZGF0ZUZyaWVuZFJlcXVlc3RSZXF1ZXN0fSBVcGRhdGVGcmllbmRSZXF1ZXN0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdElkID0gcmVhZGVyLmludDY0KCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc3BvbnNlQWN0aW9uID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWFzb24gPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5VcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGFuIFVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElVcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZ3JvdXBJbmRleF0gVXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0IGdyb3VwSW5kZXhcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbbmV3TmFtZV0gVXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0IG5ld05hbWVcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhbiBVcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0IGdyb3VwSW5kZXguXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBncm91cEluZGV4XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdC5wcm90b3R5cGUuZ3JvdXBJbmRleCA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgbmV3TmFtZS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IG5ld05hbWVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LnByb3RvdHlwZS5uZXdOYW1lID0gXCJcIjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgaW0udHVybXMucHJvdG8uVXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdH0gbWVzc2FnZSBVcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZ3JvdXBJbmRleCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZ3JvdXBJbmRleFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQzMihtZXNzYWdlLmdyb3VwSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5uZXdOYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJuZXdOYW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS5uZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhbiBVcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5VcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3R9IFVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZVJlbGF0aW9uc2hpcEdyb3VwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ncm91cEluZGV4ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uZXdOYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBVcGRhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5VcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhbiBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbcmVsYXRlZFVzZXJJZF0gVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdCByZWxhdGVkVXNlcklkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZXxudWxsfSBbYmxvY2tlZF0gVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdCBibG9ja2VkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSUludDMyVmFsdWV8bnVsbH0gW25ld0dyb3VwSW5kZXhdIFVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QgbmV3R3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx9IFtkZWxldGVHcm91cEluZGV4XSBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0IGRlbGV0ZUdyb3VwSW5kZXhcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG9cbiAgICAgICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYW4gVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdC5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3Q9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0IHJlbGF0ZWRVc2VySWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSByZWxhdGVkVXNlcklkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LnByb3RvdHlwZS5yZWxhdGVkVXNlcklkID0gXCIwXCI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0IGJsb2NrZWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklCb29sVmFsdWV8bnVsbHx1bmRlZmluZWR9IGJsb2NrZWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QucHJvdG90eXBlLmJsb2NrZWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdCBuZXdHcm91cEluZGV4LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbmV3R3JvdXBJbmRleFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdC5wcm90b3R5cGUubmV3R3JvdXBJbmRleCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0IGRlbGV0ZUdyb3VwSW5kZXguXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfG51bGx8dW5kZWZpbmVkfSBkZWxldGVHcm91cEluZGV4XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LnByb3RvdHlwZS5kZWxldGVHcm91cEluZGV4ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3R9IG1lc3NhZ2UgVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVsYXRlZFVzZXJJZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicmVsYXRlZFVzZXJJZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQ2NChtZXNzYWdlLnJlbGF0ZWRVc2VySWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ibG9ja2VkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJibG9ja2VkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZS5lbmNvZGUobWVzc2FnZS5ibG9ja2VkLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5ld0dyb3VwSW5kZXggIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm5ld0dyb3VwSW5kZXhcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5uZXdHcm91cEluZGV4LCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGV0ZUdyb3VwSW5kZXggIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlbGV0ZUdyb3VwSW5kZXhcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5lbmNvZGUobWVzc2FnZS5kZWxldGVHcm91cEluZGV4LCB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYW4gVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5VcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0fSBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZVJlbGF0aW9uc2hpcFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVsYXRlZFVzZXJJZCA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ibG9ja2VkID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmV3R3JvdXBJbmRleCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWxldGVHcm91cEluZGV4ID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXBkYXRlUmVsYXRpb25zaGlwUmVxdWVzdDtcbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICAgIHByb3RvLlVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGFuIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtsYXRpdHVkZV0gVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdCBsYXRpdHVkZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtsb25naXR1ZGVdIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QgbG9uZ2l0dWRlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx9IFtuYW1lXSBVcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0IG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW2FkZHJlc3NdIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QgYWRkcmVzc1xuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBVcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90b1xuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhbiBVcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QgbGF0aXR1ZGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBsYXRpdHVkZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdC5wcm90b3R5cGUubGF0aXR1ZGUgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdCBsb25naXR1ZGUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBsb25naXR1ZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QucHJvdG90eXBlLmxvbmdpdHVkZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0IG5hbWUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbmFtZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdC5wcm90b3R5cGUubmFtZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBVcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0IGFkZHJlc3MuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gYWRkcmVzc1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdC5wcm90b3R5cGUuYWRkcmVzcyA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ltLnR1cm1zLnByb3RvLklVcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0fSBtZXNzYWdlIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhdGl0dWRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXRpdHVkZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgNSA9Ki8xMykuZmxvYXQobWVzc2FnZS5sYXRpdHVkZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxvbmdpdHVkZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibG9uZ2l0dWRlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSA1ID0qLzIxKS5mbG9hdChtZXNzYWdlLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm5hbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm5hbWVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UubmFtZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hZGRyZXNzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJhZGRyZXNzXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmVuY29kZShtZXNzYWdlLmFkZHJlc3MsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhbiBVcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyTG9jYXRpb25SZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2ltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3R9IFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3QuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuaW0udHVybXMucHJvdG8uVXBkYXRlVXNlckxvY2F0aW9uUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXRpdHVkZSA9IHJlYWRlci5mbG9hdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubG9uZ2l0dWRlID0gcmVhZGVyLmZsb2F0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZGRyZXNzID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5VcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gVXBkYXRlVXNlck9ubGluZVN0YXR1c1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJVXBkYXRlVXNlck9ubGluZVN0YXR1c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLlVzZXJTdGF0dXN8bnVsbH0gW3VzZXJTdGF0dXNdIFVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0IHVzZXJTdGF0dXNcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVXBkYXRlVXNlck9ubGluZVN0YXR1c1JlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIFVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXBkYXRlVXNlck9ubGluZVN0YXR1c1JlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0IHVzZXJTdGF0dXMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7aW0udHVybXMucHJvdG8uVXNlclN0YXR1c30gdXNlclN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0LnByb3RvdHlwZS51c2VyU3RhdHVzID0gMDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0fSBtZXNzYWdlIFVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudXNlclN0YXR1cyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidXNlclN0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5pbnQzMihtZXNzYWdlLnVzZXJTdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGFuIFVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyT25saW5lU3RhdHVzUmVxdWVzdH0gVXBkYXRlVXNlck9ubGluZVN0YXR1c1JlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LmltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJPbmxpbmVTdGF0dXNSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJTdGF0dXMgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXBkYXRlVXNlck9ubGluZVN0YXR1c1JlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICBwcm90by5VcGRhdGVVc2VyUmVxdWVzdCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gVXBkYXRlVXNlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJVXBkYXRlVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbH0gW3Bhc3N3b3JkXSBVcGRhdGVVc2VyUmVxdWVzdCBwYXNzd29yZFxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbbmFtZV0gVXBkYXRlVXNlclJlcXVlc3QgbmFtZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfSBbaW50cm9dIFVwZGF0ZVVzZXJSZXF1ZXN0IGludHJvXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtnb29nbGUucHJvdG9idWYuSVN0cmluZ1ZhbHVlfG51bGx9IFtwcm9maWxlUGljdHVyZVVybF0gVXBkYXRlVXNlclJlcXVlc3QgcHJvZmlsZVBpY3R1cmVVcmxcbiAgICAgICAgICAgICAgICAgKiBAcHJvcGVydHkge2ltLnR1cm1zLnByb3RvLlByb2ZpbGVBY2Nlc3NTdHJhdGVneXxudWxsfSBbcHJvZmlsZUFjY2Vzc1N0cmF0ZWd5XSBVcGRhdGVVc2VyUmVxdWVzdCBwcm9maWxlQWNjZXNzU3RyYXRlZ3lcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVXBkYXRlVXNlclJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvXG4gICAgICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIFVwZGF0ZVVzZXJSZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVcGRhdGVVc2VyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW0udHVybXMucHJvdG8uSVVwZGF0ZVVzZXJSZXF1ZXN0PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gVXBkYXRlVXNlclJlcXVlc3QocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZVVzZXJSZXF1ZXN0IHBhc3N3b3JkLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbHx1bmRlZmluZWR9IHBhc3N3b3JkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlVXNlclJlcXVlc3QucHJvdG90eXBlLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZVVzZXJSZXF1ZXN0IG5hbWUuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZXxudWxsfHVuZGVmaW5lZH0gbmFtZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVVzZXJSZXF1ZXN0LnByb3RvdHlwZS5uYW1lID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZVVzZXJSZXF1ZXN0IGludHJvLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbHx1bmRlZmluZWR9IGludHJvXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlVXNlclJlcXVlc3QucHJvdG90eXBlLmludHJvID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZVVzZXJSZXF1ZXN0IHByb2ZpbGVQaWN0dXJlVXJsLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV8bnVsbHx1bmRlZmluZWR9IHByb2ZpbGVQaWN0dXJlVXJsXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIGltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVXBkYXRlVXNlclJlcXVlc3QucHJvdG90eXBlLnByb2ZpbGVQaWN0dXJlVXJsID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFVwZGF0ZVVzZXJSZXF1ZXN0IHByb2ZpbGVBY2Nlc3NTdHJhdGVneS5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyIHtpbS50dXJtcy5wcm90by5Qcm9maWxlQWNjZXNzU3RyYXRlZ3l9IHByb2ZpbGVBY2Nlc3NTdHJhdGVneVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiBpbS50dXJtcy5wcm90by5VcGRhdGVVc2VyUmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVVzZXJSZXF1ZXN0LnByb3RvdHlwZS5wcm9maWxlQWNjZXNzU3RyYXRlZ3kgPSAwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFVwZGF0ZVVzZXJSZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGltLnR1cm1zLnByb3RvLlVwZGF0ZVVzZXJSZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbS50dXJtcy5wcm90by5JVXBkYXRlVXNlclJlcXVlc3R9IG1lc3NhZ2UgVXBkYXRlVXNlclJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFVwZGF0ZVVzZXJSZXF1ZXN0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wYXNzd29yZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicGFzc3dvcmRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UucGFzc3dvcmQsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5uYW1lLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmludHJvICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpbnRyb1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5lbmNvZGUobWVzc2FnZS5pbnRybywgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5wcm9maWxlUGljdHVyZVVybCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicHJvZmlsZVBpY3R1cmVVcmxcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZW5jb2RlKG1lc3NhZ2UucHJvZmlsZVBpY3R1cmVVcmwsIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucHJvZmlsZUFjY2Vzc1N0cmF0ZWd5ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwcm9maWxlQWNjZXNzU3RyYXRlZ3lcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDAgPSovNDApLmludDMyKG1lc3NhZ2UucHJvZmlsZUFjY2Vzc1N0cmF0ZWd5KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRGVjb2RlcyBhbiBVcGRhdGVVc2VyUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgaW0udHVybXMucHJvdG8uVXBkYXRlVXNlclJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7aW0udHVybXMucHJvdG8uVXBkYXRlVXNlclJlcXVlc3R9IFVwZGF0ZVVzZXJSZXF1ZXN0XG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBVcGRhdGVVc2VyUmVxdWVzdC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5pbS50dXJtcy5wcm90by5VcGRhdGVVc2VyUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXNzd29yZCA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW50cm8gPSAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByb2ZpbGVQaWN0dXJlVXJsID0gJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcm9maWxlQWNjZXNzU3RyYXRlZ3kgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVXBkYXRlVXNlclJlcXVlc3Q7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gcHJvdG87XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgcmV0dXJuIHR1cm1zO1xuICAgIH0pKCk7XG5cbiAgICByZXR1cm4gaW07XG59KSgpO1xuXG4kcm9vdC5nb29nbGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBOYW1lc3BhY2UgZ29vZ2xlLlxuICAgICAqIEBleHBvcnRzIGdvb2dsZVxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKi9cbiAgICB2YXIgZ29vZ2xlID0ge307XG5cbiAgICBnb29nbGUucHJvdG9idWYgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5hbWVzcGFjZSBwcm90b2J1Zi5cbiAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZVxuICAgICAgICAgKiBAbmFtZXNwYWNlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcHJvdG9idWYgPSB7fTtcblxuICAgICAgICBwcm90b2J1Zi5Eb3VibGVWYWx1ZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRG91YmxlVmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElEb3VibGVWYWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3ZhbHVlXSBEb3VibGVWYWx1ZSB2YWx1ZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEb3VibGVWYWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWZcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIERvdWJsZVZhbHVlLlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSURvdWJsZVZhbHVlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklEb3VibGVWYWx1ZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBEb3VibGVWYWx1ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEb3VibGVWYWx1ZSB2YWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gdmFsdWVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuRG91YmxlVmFsdWVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBEb3VibGVWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSAwO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEb3VibGVWYWx1ZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBnb29nbGUucHJvdG9idWYuRG91YmxlVmFsdWUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkRvdWJsZVZhbHVlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5JRG91YmxlVmFsdWV9IG1lc3NhZ2UgRG91YmxlVmFsdWUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRG91YmxlVmFsdWUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnZhbHVlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ2YWx1ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAxID0qLzkpLmRvdWJsZShtZXNzYWdlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgRG91YmxlVmFsdWUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuRG91YmxlVmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtnb29nbGUucHJvdG9idWYuRG91YmxlVmFsdWV9IERvdWJsZVZhbHVlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIERvdWJsZVZhbHVlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5Eb3VibGVWYWx1ZSgpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmFsdWUgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIERvdWJsZVZhbHVlO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHByb3RvYnVmLkZsb2F0VmFsdWUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEZsb2F0VmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElGbG9hdFZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbdmFsdWVdIEZsb2F0VmFsdWUgdmFsdWVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRmxvYXRWYWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWZcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIEZsb2F0VmFsdWUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJRmxvYXRWYWx1ZVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5JRmxvYXRWYWx1ZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBGbG9hdFZhbHVlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZsb2F0VmFsdWUgdmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHZhbHVlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkZsb2F0VmFsdWVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGbG9hdFZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IDA7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZsb2F0VmFsdWUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZ29vZ2xlLnByb3RvYnVmLkZsb2F0VmFsdWUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkZsb2F0VmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklGbG9hdFZhbHVlfSBtZXNzYWdlIEZsb2F0VmFsdWUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmxvYXRWYWx1ZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInZhbHVlXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDUgPSovMTMpLmZsb2F0KG1lc3NhZ2UudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBGbG9hdFZhbHVlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkZsb2F0VmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtnb29nbGUucHJvdG9idWYuRmxvYXRWYWx1ZX0gRmxvYXRWYWx1ZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBGbG9hdFZhbHVlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5GbG9hdFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci5mbG9hdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBGbG9hdFZhbHVlO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHByb3RvYnVmLkludDY0VmFsdWUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhbiBJbnQ2NFZhbHVlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1ZlxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJSW50NjRWYWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3ZhbHVlXSBJbnQ2NFZhbHVlIHZhbHVlXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEludDY0VmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYW4gSW50NjRWYWx1ZS5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElJbnQ2NFZhbHVlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIEludDY0VmFsdWUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSW50NjRWYWx1ZSB2YWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gdmFsdWVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEludDY0VmFsdWUucHJvdG90eXBlLnZhbHVlID0gXCIwXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEludDY0VmFsdWUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklJbnQ2NFZhbHVlfSBtZXNzYWdlIEludDY0VmFsdWUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgSW50NjRWYWx1ZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInZhbHVlXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50NjQobWVzc2FnZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhbiBJbnQ2NFZhbHVlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtnb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZX0gSW50NjRWYWx1ZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBJbnQ2NFZhbHVlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci5pbnQ2NCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIEludDY0VmFsdWU7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgcHJvdG9idWYuVUludDY0VmFsdWUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFVJbnQ2NFZhbHVlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1ZlxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJVUludDY0VmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt2YWx1ZV0gVUludDY0VmFsdWUgdmFsdWVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVUludDY0VmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBVSW50NjRWYWx1ZS5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElVSW50NjRWYWx1ZVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5JVUludDY0VmFsdWU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gVUludDY0VmFsdWUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVUludDY0VmFsdWUgdmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHZhbHVlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlVJbnQ2NFZhbHVlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVUludDY0VmFsdWUucHJvdG90eXBlLnZhbHVlID0gXCIwXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFVJbnQ2NFZhbHVlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGdvb2dsZS5wcm90b2J1Zi5VSW50NjRWYWx1ZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuVUludDY0VmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklVSW50NjRWYWx1ZX0gbWVzc2FnZSBVSW50NjRWYWx1ZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBVSW50NjRWYWx1ZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInZhbHVlXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkudWludDY0KG1lc3NhZ2UudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBVSW50NjRWYWx1ZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1Zi5VSW50NjRWYWx1ZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge2dvb2dsZS5wcm90b2J1Zi5VSW50NjRWYWx1ZX0gVUludDY0VmFsdWVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVUludDY0VmFsdWUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlVJbnQ2NFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci51aW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBVSW50NjRWYWx1ZTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBwcm90b2J1Zi5JbnQzMlZhbHVlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gSW50MzJWYWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWZcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSUludDMyVmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFt2YWx1ZV0gSW50MzJWYWx1ZSB2YWx1ZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBJbnQzMlZhbHVlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1ZlxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGFuIEludDMyVmFsdWUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJSW50MzJWYWx1ZVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5JSW50MzJWYWx1ZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBJbnQzMlZhbHVlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEludDMyVmFsdWUgdmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHZhbHVlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBJbnQzMlZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IDA7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEludDMyVmFsdWUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklJbnQzMlZhbHVlfSBtZXNzYWdlIEludDMyVmFsdWUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgSW50MzJWYWx1ZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInZhbHVlXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkuaW50MzIobWVzc2FnZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhbiBJbnQzMlZhbHVlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZX0gSW50MzJWYWx1ZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBJbnQzMlZhbHVlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBJbnQzMlZhbHVlO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHByb3RvYnVmLlVJbnQzMlZhbHVlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBVSW50MzJWYWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWZcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVVJbnQzMlZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbdmFsdWVdIFVJbnQzMlZhbHVlIHZhbHVlXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFVJbnQzMlZhbHVlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1ZlxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVUludDMyVmFsdWUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJVUludDMyVmFsdWVcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHtnb29nbGUucHJvdG9idWYuSVVJbnQzMlZhbHVlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIFVJbnQzMlZhbHVlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFVJbnQzMlZhbHVlIHZhbHVlLlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSB2YWx1ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1Zi5VSW50MzJWYWx1ZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFVJbnQzMlZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IDA7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFVJbnQzMlZhbHVlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGdvb2dsZS5wcm90b2J1Zi5VSW50MzJWYWx1ZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuVUludDMyVmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklVSW50MzJWYWx1ZX0gbWVzc2FnZSBVSW50MzJWYWx1ZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBVSW50MzJWYWx1ZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInZhbHVlXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkudWludDMyKG1lc3NhZ2UudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBVSW50MzJWYWx1ZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1Zi5VSW50MzJWYWx1ZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge2dvb2dsZS5wcm90b2J1Zi5VSW50MzJWYWx1ZX0gVUludDMyVmFsdWVcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVUludDMyVmFsdWUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QuZ29vZ2xlLnByb3RvYnVmLlVJbnQzMlZhbHVlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gVUludDMyVmFsdWU7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgcHJvdG9idWYuQm9vbFZhbHVlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBCb29sVmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElCb29sVmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbnxudWxsfSBbdmFsdWVdIEJvb2xWYWx1ZSB2YWx1ZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBCb29sVmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBCb29sVmFsdWUuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJQm9vbFZhbHVlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklCb29sVmFsdWU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gQm9vbFZhbHVlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJvb2xWYWx1ZSB2YWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IHZhbHVlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEJvb2xWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmYWxzZTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQm9vbFZhbHVlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtnb29nbGUucHJvdG9idWYuSUJvb2xWYWx1ZX0gbWVzc2FnZSBCb29sVmFsdWUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQm9vbFZhbHVlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS52YWx1ZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidmFsdWVcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMCA9Ki84KS5ib29sKG1lc3NhZ2UudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBCb29sVmFsdWUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuQm9vbFZhbHVlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7Z29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZX0gQm9vbFZhbHVlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEJvb2xWYWx1ZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIEJvb2xWYWx1ZTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBwcm90b2J1Zi5TdHJpbmdWYWx1ZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgU3RyaW5nVmFsdWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElTdHJpbmdWYWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3ZhbHVlXSBTdHJpbmdWYWx1ZSB2YWx1ZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBTdHJpbmdWYWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWZcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFN0cmluZ1ZhbHVlLlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVN0cmluZ1ZhbHVlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklTdHJpbmdWYWx1ZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBTdHJpbmdWYWx1ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTdHJpbmdWYWx1ZSB2YWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gdmFsdWVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiBnb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdHJpbmdWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTdHJpbmdWYWx1ZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBnb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5JU3RyaW5nVmFsdWV9IG1lc3NhZ2UgU3RyaW5nVmFsdWUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU3RyaW5nVmFsdWUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnZhbHVlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ2YWx1ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFN0cmluZ1ZhbHVlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7Z29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlfSBTdHJpbmdWYWx1ZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdHJpbmdWYWx1ZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZhbHVlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBTdHJpbmdWYWx1ZTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBwcm90b2J1Zi5CeXRlc1ZhbHVlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBCeXRlc1ZhbHVlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1ZlxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJQnl0ZXNWYWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtVaW50OEFycmF5fG51bGx9IFt2YWx1ZV0gQnl0ZXNWYWx1ZSB2YWx1ZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBCeXRlc1ZhbHVlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIGdvb2dsZS5wcm90b2J1ZlxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQnl0ZXNWYWx1ZS5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElCeXRlc1ZhbHVlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklCeXRlc1ZhbHVlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIEJ5dGVzVmFsdWUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQnl0ZXNWYWx1ZSB2YWx1ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge1VpbnQ4QXJyYXl9IHZhbHVlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkJ5dGVzVmFsdWVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBCeXRlc1ZhbHVlLnByb3RvdHlwZS52YWx1ZSA9ICR1dGlsLm5ld0J1ZmZlcihbXSk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEJ5dGVzVmFsdWUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZ29vZ2xlLnByb3RvYnVmLkJ5dGVzVmFsdWUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkJ5dGVzVmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLklCeXRlc1ZhbHVlfSBtZXNzYWdlIEJ5dGVzVmFsdWUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQnl0ZXNWYWx1ZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInZhbHVlXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmJ5dGVzKG1lc3NhZ2UudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBCeXRlc1ZhbHVlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgZ29vZ2xlLnByb3RvYnVmLkJ5dGVzVmFsdWVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtnb29nbGUucHJvdG9idWYuQnl0ZXNWYWx1ZX0gQnl0ZXNWYWx1ZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBCeXRlc1ZhbHVlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290Lmdvb2dsZS5wcm90b2J1Zi5CeXRlc1ZhbHVlKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci5ieXRlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBCeXRlc1ZhbHVlO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHJldHVybiBwcm90b2J1ZjtcbiAgICB9KSgpO1xuXG4gICAgcmV0dXJuIGdvb2dsZTtcbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gJHJvb3Q7XG4iLCJ2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIGtleSkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nO1xufTtcbiIsInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW50ZWdlcicpO1xuXG52YXIgbWluID0gTWF0aC5taW47XG5cbi8vIGBUb0xlbmd0aGAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10b2xlbmd0aFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgcmV0dXJuIGFyZ3VtZW50ID4gMCA/IG1pbih0b0ludGVnZXIoYXJndW1lbnQpLCAweDFGRkZGRkZGRkZGRkZGKSA6IDA7IC8vIDIgKiogNTMgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTFcbn07XG4iLCJ2YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxuLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eVxubW9kdWxlLmV4cG9ydHMgPSAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAxLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gNzsgfSB9KVsxXSAhPSA3O1xufSk7XG4iLCJpbXBvcnQge2ltfSBmcm9tIFwiLi4vbW9kZWwvcHJvdG8tYnVuZGxlXCI7XHJcbmltcG9ydCBDaGF0VHlwZSA9IGltLnR1cm1zLnByb3RvLkNoYXRUeXBlO1xyXG5pbXBvcnQgVXNlclN0YXR1cyA9IGltLnR1cm1zLnByb3RvLlVzZXJTdGF0dXM7XHJcbmltcG9ydCBQcm9maWxlQWNjZXNzU3RyYXRlZ3kgPSBpbS50dXJtcy5wcm90by5Qcm9maWxlQWNjZXNzU3RyYXRlZ3k7XHJcbmltcG9ydCBSZXNwb25zZUFjdGlvbiA9IGltLnR1cm1zLnByb3RvLlJlc3BvbnNlQWN0aW9uO1xyXG5pbXBvcnQgR3JvdXBNZW1iZXJSb2xlID0gaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJSb2xlO1xyXG5pbXBvcnQgTWVzc2FnZURlbGl2ZXJ5U3RhdHVzID0gaW0udHVybXMucHJvdG8uTWVzc2FnZURlbGl2ZXJ5U3RhdHVzO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uc3RhbnRUcmFuc2Zvcm1lciB7XHJcbiAgICBzdGF0aWMgc3RyaW5nMkNoYXRUeXBlKGNoYXRUeXBlOiBzdHJpbmcpOiBDaGF0VHlwZSB7XHJcbiAgICAgICAgY2hhdFR5cGUgPSBjaGF0VHlwZS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIHN3aXRjaCAoY2hhdFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnUFJJVkFURSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ2hhdFR5cGUuUFJJVkFURTtcclxuICAgICAgICAgICAgY2FzZSAnR1JPVVAnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENoYXRUeXBlLkdST1VQO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIHBhcmFtcycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc3RyaW5nMkdyb3VwTWVtYmVyUm9sZShyb2xlOiBzdHJpbmcpOiBHcm91cE1lbWJlclJvbGUge1xyXG4gICAgICAgIHJvbGUgPSByb2xlLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgc3dpdGNoIChyb2xlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ09XTkVSJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBHcm91cE1lbWJlclJvbGUuT1dORVI7XHJcbiAgICAgICAgICAgIGNhc2UgJ01BTkFHRVInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdyb3VwTWVtYmVyUm9sZS5NQU5BR0VSO1xyXG4gICAgICAgICAgICBjYXNlICdNRU1CRVInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdyb3VwTWVtYmVyUm9sZS5NRU1CRVI7XHJcbiAgICAgICAgICAgIGNhc2UgJ0dVRVNUJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBHcm91cE1lbWJlclJvbGUuR1VFU1Q7XHJcbiAgICAgICAgICAgIGNhc2UgJ0FOT05ZTU9VU19HVUVTVCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gR3JvdXBNZW1iZXJSb2xlLkFOT05ZTU9VU19HVUVTVDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBwYXJhbXMnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHN0cmluZzJVc2VyT25saW5lU3RhdHVzKHVzZXJPbmxpbmVTdGF0dXM6IHN0cmluZyk6IFVzZXJTdGF0dXMge1xyXG4gICAgICAgIHVzZXJPbmxpbmVTdGF0dXMgPSB1c2VyT25saW5lU3RhdHVzLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgc3dpdGNoICh1c2VyT25saW5lU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0FWQUlMQUJMRSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlclN0YXR1cy5BVkFJTEFCTEU7XHJcbiAgICAgICAgICAgIGNhc2UgJ0lOVklTSUJMRSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlclN0YXR1cy5JTlZJU0lCTEU7XHJcbiAgICAgICAgICAgIGNhc2UgJ0JVU1knOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJTdGF0dXMuQlVTWTtcclxuICAgICAgICAgICAgY2FzZSAnRE9fTk9UX0RJU1RVUkInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJTdGF0dXMuRE9fTk9UX0RJU1RVUkI7XHJcbiAgICAgICAgICAgIGNhc2UgJ0FXQVknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJTdGF0dXMuQVdBWTtcclxuICAgICAgICAgICAgY2FzZSAnQkVfUklHSFRfQkFDSyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlclN0YXR1cy5CRV9SSUdIVF9CQUNLO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIHBhcmFtcycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc3RyaW5nMlByb2ZpbGVBY2Nlc3NTdHJhdGVneShzdHJhdGVneTogc3RyaW5nKTogUHJvZmlsZUFjY2Vzc1N0cmF0ZWd5IHtcclxuICAgICAgICBzdHJhdGVneSA9IHN0cmF0ZWd5LnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgc3dpdGNoIChzdHJhdGVneSkge1xyXG4gICAgICAgICAgICBjYXNlICdBTEwnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb2ZpbGVBY2Nlc3NTdHJhdGVneS5BTEw7XHJcbiAgICAgICAgICAgIGNhc2UgJ0FMTF9FWENFUFRfQkxBQ0tMSVNURURfVVNFUlMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb2ZpbGVBY2Nlc3NTdHJhdGVneS5BTExfRVhDRVBUX0JMQUNLTElTVEVEX1VTRVJTO1xyXG4gICAgICAgICAgICBjYXNlICdGUklFTkRTJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9maWxlQWNjZXNzU3RyYXRlZ3kuRlJJRU5EUztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBwYXJhbXMnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHN0cmluZzJSZXNwb25zZUFjdGlvbihyZXNwb25zZUFjdGlvbjogc3RyaW5nKTogUmVzcG9uc2VBY3Rpb24ge1xyXG4gICAgICAgIHJlc3BvbnNlQWN0aW9uID0gcmVzcG9uc2VBY3Rpb24udG9VcHBlckNhc2UoKTtcclxuICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlQWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0FDQ0VQVCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVzcG9uc2VBY3Rpb24uQUNDRVBUO1xyXG4gICAgICAgICAgICBjYXNlICdERUNMSU5FJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBSZXNwb25zZUFjdGlvbi5ERUNMSU5FO1xyXG4gICAgICAgICAgICBjYXNlICdJR05PUkUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlc3BvbnNlQWN0aW9uLklHTk9SRTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBwYXJhbXMnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHN0cmluZzJEZWxpdmVyeVN0YXR1cyhkZWxpdmVyeVN0YXR1czogc3RyaW5nKTogTWVzc2FnZURlbGl2ZXJ5U3RhdHVzIHtcclxuICAgICAgICBkZWxpdmVyeVN0YXR1cyA9IGRlbGl2ZXJ5U3RhdHVzLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgc3dpdGNoIChkZWxpdmVyeVN0YXR1cykge1xyXG4gICAgICAgICAgICBjYXNlICdSRUFEWSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZURlbGl2ZXJ5U3RhdHVzLlJFQURZO1xyXG4gICAgICAgICAgICBjYXNlICdTRU5ESU5HJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBNZXNzYWdlRGVsaXZlcnlTdGF0dXMuU0VORElORztcclxuICAgICAgICAgICAgY2FzZSAnUkVDRUlWRUQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VEZWxpdmVyeVN0YXR1cy5SRUNFSVZFRDtcclxuICAgICAgICAgICAgY2FzZSAnUkVDQUxMSU5HJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBNZXNzYWdlRGVsaXZlcnlTdGF0dXMuUkVDQUxMSU5HO1xyXG4gICAgICAgICAgICBjYXNlICdSRUNBTExFRCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZURlbGl2ZXJ5U3RhdHVzLlJFQ0FMTEVEO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIHBhcmFtcycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIElFOF9ET01fREVGSU5FID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2llOC1kb20tZGVmaW5lJyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgdG9QcmltaXRpdmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tcHJpbWl0aXZlJyk7XG5cbnZhciBuYXRpdmVEZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblxuLy8gYE9iamVjdC5kZWZpbmVQcm9wZXJ0eWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QuZGVmaW5lcHJvcGVydHlcbmV4cG9ydHMuZiA9IERFU0NSSVBUT1JTID8gbmF0aXZlRGVmaW5lUHJvcGVydHkgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKSB7XG4gIGFuT2JqZWN0KE8pO1xuICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gIGFuT2JqZWN0KEF0dHJpYnV0ZXMpO1xuICBpZiAoSUU4X0RPTV9ERUZJTkUpIHRyeSB7XG4gICAgcmV0dXJuIG5hdGl2ZURlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gIGlmICgnZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpIHRocm93IFR5cGVFcnJvcignQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgaWYgKCd2YWx1ZScgaW4gQXR0cmlidXRlcykgT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7XG4gIHJldHVybiBPO1xufTtcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKCFpc09iamVjdChpdCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGl0KSArICcgaXMgbm90IGFuIG9iamVjdCcpO1xuICB9IHJldHVybiBpdDtcbn07XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJykuZjtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG52YXIgcmVkZWZpbmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVkZWZpbmUnKTtcbnZhciBzZXRHbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2V0LWdsb2JhbCcpO1xudmFyIGNvcHlDb25zdHJ1Y3RvclByb3BlcnRpZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY29weS1jb25zdHJ1Y3Rvci1wcm9wZXJ0aWVzJyk7XG52YXIgaXNGb3JjZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtZm9yY2VkJyk7XG5cbi8qXG4gIG9wdGlvbnMudGFyZ2V0ICAgICAgLSBuYW1lIG9mIHRoZSB0YXJnZXQgb2JqZWN0XG4gIG9wdGlvbnMuZ2xvYmFsICAgICAgLSB0YXJnZXQgaXMgdGhlIGdsb2JhbCBvYmplY3RcbiAgb3B0aW9ucy5zdGF0ICAgICAgICAtIGV4cG9ydCBhcyBzdGF0aWMgbWV0aG9kcyBvZiB0YXJnZXRcbiAgb3B0aW9ucy5wcm90byAgICAgICAtIGV4cG9ydCBhcyBwcm90b3R5cGUgbWV0aG9kcyBvZiB0YXJnZXRcbiAgb3B0aW9ucy5yZWFsICAgICAgICAtIHJlYWwgcHJvdG90eXBlIG1ldGhvZCBmb3IgdGhlIGBwdXJlYCB2ZXJzaW9uXG4gIG9wdGlvbnMuZm9yY2VkICAgICAgLSBleHBvcnQgZXZlbiBpZiB0aGUgbmF0aXZlIGZlYXR1cmUgaXMgYXZhaWxhYmxlXG4gIG9wdGlvbnMuYmluZCAgICAgICAgLSBiaW5kIG1ldGhvZHMgdG8gdGhlIHRhcmdldCwgcmVxdWlyZWQgZm9yIHRoZSBgcHVyZWAgdmVyc2lvblxuICBvcHRpb25zLndyYXAgICAgICAgIC0gd3JhcCBjb25zdHJ1Y3RvcnMgdG8gcHJldmVudGluZyBnbG9iYWwgcG9sbHV0aW9uLCByZXF1aXJlZCBmb3IgdGhlIGBwdXJlYCB2ZXJzaW9uXG4gIG9wdGlvbnMudW5zYWZlICAgICAgLSB1c2UgdGhlIHNpbXBsZSBhc3NpZ25tZW50IG9mIHByb3BlcnR5IGluc3RlYWQgb2YgZGVsZXRlICsgZGVmaW5lUHJvcGVydHlcbiAgb3B0aW9ucy5zaGFtICAgICAgICAtIGFkZCBhIGZsYWcgdG8gbm90IGNvbXBsZXRlbHkgZnVsbCBwb2x5ZmlsbHNcbiAgb3B0aW9ucy5lbnVtZXJhYmxlICAtIGV4cG9ydCBhcyBlbnVtZXJhYmxlIHByb3BlcnR5XG4gIG9wdGlvbnMubm9UYXJnZXRHZXQgLSBwcmV2ZW50IGNhbGxpbmcgYSBnZXR0ZXIgb24gdGFyZ2V0XG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3B0aW9ucywgc291cmNlKSB7XG4gIHZhciBUQVJHRVQgPSBvcHRpb25zLnRhcmdldDtcbiAgdmFyIEdMT0JBTCA9IG9wdGlvbnMuZ2xvYmFsO1xuICB2YXIgU1RBVElDID0gb3B0aW9ucy5zdGF0O1xuICB2YXIgRk9SQ0VELCB0YXJnZXQsIGtleSwgdGFyZ2V0UHJvcGVydHksIHNvdXJjZVByb3BlcnR5LCBkZXNjcmlwdG9yO1xuICBpZiAoR0xPQkFMKSB7XG4gICAgdGFyZ2V0ID0gZ2xvYmFsO1xuICB9IGVsc2UgaWYgKFNUQVRJQykge1xuICAgIHRhcmdldCA9IGdsb2JhbFtUQVJHRVRdIHx8IHNldEdsb2JhbChUQVJHRVQsIHt9KTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQgPSAoZ2xvYmFsW1RBUkdFVF0gfHwge30pLnByb3RvdHlwZTtcbiAgfVxuICBpZiAodGFyZ2V0KSBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICBzb3VyY2VQcm9wZXJ0eSA9IHNvdXJjZVtrZXldO1xuICAgIGlmIChvcHRpb25zLm5vVGFyZ2V0R2V0KSB7XG4gICAgICBkZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KTtcbiAgICAgIHRhcmdldFByb3BlcnR5ID0gZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLnZhbHVlO1xuICAgIH0gZWxzZSB0YXJnZXRQcm9wZXJ0eSA9IHRhcmdldFtrZXldO1xuICAgIEZPUkNFRCA9IGlzRm9yY2VkKEdMT0JBTCA/IGtleSA6IFRBUkdFVCArIChTVEFUSUMgPyAnLicgOiAnIycpICsga2V5LCBvcHRpb25zLmZvcmNlZCk7XG4gICAgLy8gY29udGFpbmVkIGluIHRhcmdldFxuICAgIGlmICghRk9SQ0VEICYmIHRhcmdldFByb3BlcnR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICh0eXBlb2Ygc291cmNlUHJvcGVydHkgPT09IHR5cGVvZiB0YXJnZXRQcm9wZXJ0eSkgY29udGludWU7XG4gICAgICBjb3B5Q29uc3RydWN0b3JQcm9wZXJ0aWVzKHNvdXJjZVByb3BlcnR5LCB0YXJnZXRQcm9wZXJ0eSk7XG4gICAgfVxuICAgIC8vIGFkZCBhIGZsYWcgdG8gbm90IGNvbXBsZXRlbHkgZnVsbCBwb2x5ZmlsbHNcbiAgICBpZiAob3B0aW9ucy5zaGFtIHx8ICh0YXJnZXRQcm9wZXJ0eSAmJiB0YXJnZXRQcm9wZXJ0eS5zaGFtKSkge1xuICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KHNvdXJjZVByb3BlcnR5LCAnc2hhbScsIHRydWUpO1xuICAgIH1cbiAgICAvLyBleHRlbmQgZ2xvYmFsXG4gICAgcmVkZWZpbmUodGFyZ2V0LCBrZXksIHNvdXJjZVByb3BlcnR5LCBvcHRpb25zKTtcbiAgfVxufTtcbiIsInZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcbnZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLXByb3BlcnR5LWRlc2NyaXB0b3InKTtcblxubW9kdWxlLmV4cG9ydHMgPSBERVNDUklQVE9SUyA/IGZ1bmN0aW9uIChvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgcmV0dXJuIGRlZmluZVByb3BlcnR5TW9kdWxlLmYob2JqZWN0LCBrZXksIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcigxLCB2YWx1ZSkpO1xufSA6IGZ1bmN0aW9uIChvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgcmV0dXJuIG9iamVjdDtcbn07XG4iLCJ2YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZXF1aXJlLW9iamVjdC1jb2VyY2libGUnKTtcblxuLy8gYFRvT2JqZWN0YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvb2JqZWN0XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICByZXR1cm4gT2JqZWN0KHJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpKTtcbn07XG4iLCJ2YXIgYmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQnKTtcbnZhciBJbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luZGV4ZWQtb2JqZWN0Jyk7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tb2JqZWN0Jyk7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tbGVuZ3RoJyk7XG52YXIgYXJyYXlTcGVjaWVzQ3JlYXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY3JlYXRlJyk7XG5cbnZhciBwdXNoID0gW10ucHVzaDtcblxuLy8gYEFycmF5LnByb3RvdHlwZS57IGZvckVhY2gsIG1hcCwgZmlsdGVyLCBzb21lLCBldmVyeSwgZmluZCwgZmluZEluZGV4IH1gIG1ldGhvZHMgaW1wbGVtZW50YXRpb25cbnZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoVFlQRSkge1xuICB2YXIgSVNfTUFQID0gVFlQRSA9PSAxO1xuICB2YXIgSVNfRklMVEVSID0gVFlQRSA9PSAyO1xuICB2YXIgSVNfU09NRSA9IFRZUEUgPT0gMztcbiAgdmFyIElTX0VWRVJZID0gVFlQRSA9PSA0O1xuICB2YXIgSVNfRklORF9JTkRFWCA9IFRZUEUgPT0gNjtcbiAgdmFyIE5PX0hPTEVTID0gVFlQRSA9PSA1IHx8IElTX0ZJTkRfSU5ERVg7XG4gIHJldHVybiBmdW5jdGlvbiAoJHRoaXMsIGNhbGxiYWNrZm4sIHRoYXQsIHNwZWNpZmljQ3JlYXRlKSB7XG4gICAgdmFyIE8gPSB0b09iamVjdCgkdGhpcyk7XG4gICAgdmFyIHNlbGYgPSBJbmRleGVkT2JqZWN0KE8pO1xuICAgIHZhciBib3VuZEZ1bmN0aW9uID0gYmluZChjYWxsYmFja2ZuLCB0aGF0LCAzKTtcbiAgICB2YXIgbGVuZ3RoID0gdG9MZW5ndGgoc2VsZi5sZW5ndGgpO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGNyZWF0ZSA9IHNwZWNpZmljQ3JlYXRlIHx8IGFycmF5U3BlY2llc0NyZWF0ZTtcbiAgICB2YXIgdGFyZ2V0ID0gSVNfTUFQID8gY3JlYXRlKCR0aGlzLCBsZW5ndGgpIDogSVNfRklMVEVSID8gY3JlYXRlKCR0aGlzLCAwKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgdmFsdWUsIHJlc3VsdDtcbiAgICBmb3IgKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKykgaWYgKE5PX0hPTEVTIHx8IGluZGV4IGluIHNlbGYpIHtcbiAgICAgIHZhbHVlID0gc2VsZltpbmRleF07XG4gICAgICByZXN1bHQgPSBib3VuZEZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgTyk7XG4gICAgICBpZiAoVFlQRSkge1xuICAgICAgICBpZiAoSVNfTUFQKSB0YXJnZXRbaW5kZXhdID0gcmVzdWx0OyAvLyBtYXBcbiAgICAgICAgZWxzZSBpZiAocmVzdWx0KSBzd2l0Y2ggKFRZUEUpIHtcbiAgICAgICAgICBjYXNlIDM6IHJldHVybiB0cnVlOyAgICAgICAgICAgICAgLy8gc29tZVxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuIHZhbHVlOyAgICAgICAgICAgICAvLyBmaW5kXG4gICAgICAgICAgY2FzZSA2OiByZXR1cm4gaW5kZXg7ICAgICAgICAgICAgIC8vIGZpbmRJbmRleFxuICAgICAgICAgIGNhc2UgMjogcHVzaC5jYWxsKHRhcmdldCwgdmFsdWUpOyAvLyBmaWx0ZXJcbiAgICAgICAgfSBlbHNlIGlmIChJU19FVkVSWSkgcmV0dXJuIGZhbHNlOyAgLy8gZXZlcnlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIElTX0ZJTkRfSU5ERVggPyAtMSA6IElTX1NPTUUgfHwgSVNfRVZFUlkgPyBJU19FVkVSWSA6IHRhcmdldDtcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBgQXJyYXkucHJvdG90eXBlLmZvckVhY2hgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZm9yZWFjaFxuICBmb3JFYWNoOiBjcmVhdGVNZXRob2QoMCksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUubWFwYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLm1hcFxuICBtYXA6IGNyZWF0ZU1ldGhvZCgxKSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5maWx0ZXJgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZmlsdGVyXG4gIGZpbHRlcjogY3JlYXRlTWV0aG9kKDIpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLnNvbWVgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuc29tZVxuICBzb21lOiBjcmVhdGVNZXRob2QoMyksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuZXZlcnlgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZXZlcnlcbiAgZXZlcnk6IGNyZWF0ZU1ldGhvZCg0KSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5maW5kYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZpbmRcbiAgZmluZDogY3JlYXRlTWV0aG9kKDUpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5maW5kSW5kZXhcbiAgZmluZEluZGV4OiBjcmVhdGVNZXRob2QoNilcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgYWRkVG9VbnNjb3BhYmxlcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hZGQtdG8tdW5zY29wYWJsZXMnKTtcbnZhciBJdGVyYXRvcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXRlcmF0b3JzJyk7XG52YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpO1xudmFyIGRlZmluZUl0ZXJhdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1pdGVyYXRvcicpO1xuXG52YXIgQVJSQVlfSVRFUkFUT1IgPSAnQXJyYXkgSXRlcmF0b3InO1xudmFyIHNldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLnNldDtcbnZhciBnZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5nZXR0ZXJGb3IoQVJSQVlfSVRFUkFUT1IpO1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLmVudHJpZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmVudHJpZXNcbi8vIGBBcnJheS5wcm90b3R5cGUua2V5c2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUua2V5c1xuLy8gYEFycmF5LnByb3RvdHlwZS52YWx1ZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLnZhbHVlc1xuLy8gYEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUtQEBpdGVyYXRvclxuLy8gYENyZWF0ZUFycmF5SXRlcmF0b3JgIGludGVybmFsIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtY3JlYXRlYXJyYXlpdGVyYXRvclxubW9kdWxlLmV4cG9ydHMgPSBkZWZpbmVJdGVyYXRvcihBcnJheSwgJ0FycmF5JywgZnVuY3Rpb24gKGl0ZXJhdGVkLCBraW5kKSB7XG4gIHNldEludGVybmFsU3RhdGUodGhpcywge1xuICAgIHR5cGU6IEFSUkFZX0lURVJBVE9SLFxuICAgIHRhcmdldDogdG9JbmRleGVkT2JqZWN0KGl0ZXJhdGVkKSwgLy8gdGFyZ2V0XG4gICAgaW5kZXg6IDAsICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4XG4gICAga2luZDoga2luZCAgICAgICAgICAgICAgICAgICAgICAgICAvLyBraW5kXG4gIH0pO1xuLy8gYCVBcnJheUl0ZXJhdG9yUHJvdG90eXBlJS5uZXh0YCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSVhcnJheWl0ZXJhdG9ycHJvdG90eXBlJS5uZXh0XG59LCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IGdldEludGVybmFsU3RhdGUodGhpcyk7XG4gIHZhciB0YXJnZXQgPSBzdGF0ZS50YXJnZXQ7XG4gIHZhciBraW5kID0gc3RhdGUua2luZDtcbiAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXgrKztcbiAgaWYgKCF0YXJnZXQgfHwgaW5kZXggPj0gdGFyZ2V0Lmxlbmd0aCkge1xuICAgIHN0YXRlLnRhcmdldCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cbiAgaWYgKGtpbmQgPT0gJ2tleXMnKSByZXR1cm4geyB2YWx1ZTogaW5kZXgsIGRvbmU6IGZhbHNlIH07XG4gIGlmIChraW5kID09ICd2YWx1ZXMnKSByZXR1cm4geyB2YWx1ZTogdGFyZ2V0W2luZGV4XSwgZG9uZTogZmFsc2UgfTtcbiAgcmV0dXJuIHsgdmFsdWU6IFtpbmRleCwgdGFyZ2V0W2luZGV4XV0sIGRvbmU6IGZhbHNlIH07XG59LCAndmFsdWVzJyk7XG5cbi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJVxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtY3JlYXRldW5tYXBwZWRhcmd1bWVudHNvYmplY3Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWNyZWF0ZW1hcHBlZGFyZ3VtZW50c29iamVjdFxuSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTtcblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLUBAdW5zY29wYWJsZXNcbmFkZFRvVW5zY29wYWJsZXMoJ2tleXMnKTtcbmFkZFRvVW5zY29wYWJsZXMoJ3ZhbHVlcycpO1xuYWRkVG9VbnNjb3BhYmxlcygnZW50cmllcycpO1xuIiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG52YXIgaGFzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcycpO1xudmFyIHNldEdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtZ2xvYmFsJyk7XG52YXIgaW5zcGVjdFNvdXJjZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnNwZWN0LXNvdXJjZScpO1xudmFyIEludGVybmFsU3RhdGVNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW50ZXJuYWwtc3RhdGUnKTtcblxudmFyIGdldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldDtcbnZhciBlbmZvcmNlSW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuZW5mb3JjZTtcbnZhciBURU1QTEFURSA9IFN0cmluZyhTdHJpbmcpLnNwbGl0KCdTdHJpbmcnKTtcblxuKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKE8sIGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgdmFyIHVuc2FmZSA9IG9wdGlvbnMgPyAhIW9wdGlvbnMudW5zYWZlIDogZmFsc2U7XG4gIHZhciBzaW1wbGUgPSBvcHRpb25zID8gISFvcHRpb25zLmVudW1lcmFibGUgOiBmYWxzZTtcbiAgdmFyIG5vVGFyZ2V0R2V0ID0gb3B0aW9ucyA/ICEhb3B0aW9ucy5ub1RhcmdldEdldCA6IGZhbHNlO1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAodHlwZW9mIGtleSA9PSAnc3RyaW5nJyAmJiAhaGFzKHZhbHVlLCAnbmFtZScpKSBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkodmFsdWUsICduYW1lJywga2V5KTtcbiAgICBlbmZvcmNlSW50ZXJuYWxTdGF0ZSh2YWx1ZSkuc291cmNlID0gVEVNUExBVEUuam9pbih0eXBlb2Yga2V5ID09ICdzdHJpbmcnID8ga2V5IDogJycpO1xuICB9XG4gIGlmIChPID09PSBnbG9iYWwpIHtcbiAgICBpZiAoc2ltcGxlKSBPW2tleV0gPSB2YWx1ZTtcbiAgICBlbHNlIHNldEdsb2JhbChrZXksIHZhbHVlKTtcbiAgICByZXR1cm47XG4gIH0gZWxzZSBpZiAoIXVuc2FmZSkge1xuICAgIGRlbGV0ZSBPW2tleV07XG4gIH0gZWxzZSBpZiAoIW5vVGFyZ2V0R2V0ICYmIE9ba2V5XSkge1xuICAgIHNpbXBsZSA9IHRydWU7XG4gIH1cbiAgaWYgKHNpbXBsZSkgT1trZXldID0gdmFsdWU7XG4gIGVsc2UgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KE8sIGtleSwgdmFsdWUpO1xuLy8gYWRkIGZha2UgRnVuY3Rpb24jdG9TdHJpbmcgZm9yIGNvcnJlY3Qgd29yayB3cmFwcGVkIG1ldGhvZHMgLyBjb25zdHJ1Y3RvcnMgd2l0aCBtZXRob2RzIGxpa2UgTG9EYXNoIGlzTmF0aXZlXG59KShGdW5jdGlvbi5wcm90b3R5cGUsICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gdHlwZW9mIHRoaXMgPT0gJ2Z1bmN0aW9uJyAmJiBnZXRJbnRlcm5hbFN0YXRlKHRoaXMpLnNvdXJjZSB8fCBpbnNwZWN0U291cmNlKHRoaXMpO1xufSk7XG4iLCIvLyB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5nc1xudmFyIEluZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW5kZXhlZC1vYmplY3QnKTtcbnZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlcXVpcmUtb2JqZWN0LWNvZXJjaWJsZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gSW5kZXhlZE9iamVjdChyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGl0KSk7XG59O1xuIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7XG59O1xuIiwidmFyIGNlaWwgPSBNYXRoLmNlaWw7XG52YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xuXG4vLyBgVG9JbnRlZ2VyYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvaW50ZWdlclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgcmV0dXJuIGlzTmFOKGFyZ3VtZW50ID0gK2FyZ3VtZW50KSA/IDAgOiAoYXJndW1lbnQgPiAwID8gZmxvb3IgOiBjZWlsKShhcmd1bWVudCk7XG59O1xuIiwidmFyIE5BVElWRV9XRUFLX01BUCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9uYXRpdmUtd2Vhay1tYXAnKTtcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtb2JqZWN0Jyk7XG52YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1ub24tZW51bWVyYWJsZS1wcm9wZXJ0eScpO1xudmFyIG9iamVjdEhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciBzaGFyZWRLZXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkLWtleScpO1xudmFyIGhpZGRlbktleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGlkZGVuLWtleXMnKTtcblxudmFyIFdlYWtNYXAgPSBnbG9iYWwuV2Vha01hcDtcbnZhciBzZXQsIGdldCwgaGFzO1xuXG52YXIgZW5mb3JjZSA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaGFzKGl0KSA/IGdldChpdCkgOiBzZXQoaXQsIHt9KTtcbn07XG5cbnZhciBnZXR0ZXJGb3IgPSBmdW5jdGlvbiAoVFlQRSkge1xuICByZXR1cm4gZnVuY3Rpb24gKGl0KSB7XG4gICAgdmFyIHN0YXRlO1xuICAgIGlmICghaXNPYmplY3QoaXQpIHx8IChzdGF0ZSA9IGdldChpdCkpLnR5cGUgIT09IFRZUEUpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignSW5jb21wYXRpYmxlIHJlY2VpdmVyLCAnICsgVFlQRSArICcgcmVxdWlyZWQnKTtcbiAgICB9IHJldHVybiBzdGF0ZTtcbiAgfTtcbn07XG5cbmlmIChOQVRJVkVfV0VBS19NQVApIHtcbiAgdmFyIHN0b3JlID0gbmV3IFdlYWtNYXAoKTtcbiAgdmFyIHdtZ2V0ID0gc3RvcmUuZ2V0O1xuICB2YXIgd21oYXMgPSBzdG9yZS5oYXM7XG4gIHZhciB3bXNldCA9IHN0b3JlLnNldDtcbiAgc2V0ID0gZnVuY3Rpb24gKGl0LCBtZXRhZGF0YSkge1xuICAgIHdtc2V0LmNhbGwoc3RvcmUsIGl0LCBtZXRhZGF0YSk7XG4gICAgcmV0dXJuIG1ldGFkYXRhO1xuICB9O1xuICBnZXQgPSBmdW5jdGlvbiAoaXQpIHtcbiAgICByZXR1cm4gd21nZXQuY2FsbChzdG9yZSwgaXQpIHx8IHt9O1xuICB9O1xuICBoYXMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgICByZXR1cm4gd21oYXMuY2FsbChzdG9yZSwgaXQpO1xuICB9O1xufSBlbHNlIHtcbiAgdmFyIFNUQVRFID0gc2hhcmVkS2V5KCdzdGF0ZScpO1xuICBoaWRkZW5LZXlzW1NUQVRFXSA9IHRydWU7XG4gIHNldCA9IGZ1bmN0aW9uIChpdCwgbWV0YWRhdGEpIHtcbiAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkoaXQsIFNUQVRFLCBtZXRhZGF0YSk7XG4gICAgcmV0dXJuIG1ldGFkYXRhO1xuICB9O1xuICBnZXQgPSBmdW5jdGlvbiAoaXQpIHtcbiAgICByZXR1cm4gb2JqZWN0SGFzKGl0LCBTVEFURSkgPyBpdFtTVEFURV0gOiB7fTtcbiAgfTtcbiAgaGFzID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIG9iamVjdEhhcyhpdCwgU1RBVEUpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0OiBzZXQsXG4gIGdldDogZ2V0LFxuICBoYXM6IGhhcyxcbiAgZW5mb3JjZTogZW5mb3JjZSxcbiAgZ2V0dGVyRm9yOiBnZXR0ZXJGb3Jcbn07XG4iLCJ2YXIgVE9fU1RSSU5HX1RBR19TVVBQT1JUID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZy10YWctc3VwcG9ydCcpO1xudmFyIHJlZGVmaW5lID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZGVmaW5lJyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LXRvLXN0cmluZycpO1xuXG4vLyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nXG5pZiAoIVRPX1NUUklOR19UQUdfU1VQUE9SVCkge1xuICByZWRlZmluZShPYmplY3QucHJvdG90eXBlLCAndG9TdHJpbmcnLCB0b1N0cmluZywgeyB1bnNhZmU6IHRydWUgfSk7XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIHV0aWwgPSBleHBvcnRzO1xyXG5cclxuLy8gdXNlZCB0byByZXR1cm4gYSBQcm9taXNlIHdoZXJlIGNhbGxiYWNrIGlzIG9taXR0ZWRcclxudXRpbC5hc1Byb21pc2UgPSByZXF1aXJlKFwiQHByb3RvYnVmanMvYXNwcm9taXNlXCIpO1xyXG5cclxuLy8gY29udmVydHMgdG8gLyBmcm9tIGJhc2U2NCBlbmNvZGVkIHN0cmluZ3NcclxudXRpbC5iYXNlNjQgPSByZXF1aXJlKFwiQHByb3RvYnVmanMvYmFzZTY0XCIpO1xyXG5cclxuLy8gYmFzZSBjbGFzcyBvZiBycGMuU2VydmljZVxyXG51dGlsLkV2ZW50RW1pdHRlciA9IHJlcXVpcmUoXCJAcHJvdG9idWZqcy9ldmVudGVtaXR0ZXJcIik7XHJcblxyXG4vLyBmbG9hdCBoYW5kbGluZyBhY2Nyb3NzIGJyb3dzZXJzXHJcbnV0aWwuZmxvYXQgPSByZXF1aXJlKFwiQHByb3RvYnVmanMvZmxvYXRcIik7XHJcblxyXG4vLyByZXF1aXJlcyBtb2R1bGVzIG9wdGlvbmFsbHkgYW5kIGhpZGVzIHRoZSBjYWxsIGZyb20gYnVuZGxlcnNcclxudXRpbC5pbnF1aXJlID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL2lucXVpcmVcIik7XHJcblxyXG4vLyBjb252ZXJ0cyB0byAvIGZyb20gdXRmOCBlbmNvZGVkIHN0cmluZ3NcclxudXRpbC51dGY4ID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL3V0ZjhcIik7XHJcblxyXG4vLyBwcm92aWRlcyBhIG5vZGUtbGlrZSBidWZmZXIgcG9vbCBpbiB0aGUgYnJvd3NlclxyXG51dGlsLnBvb2wgPSByZXF1aXJlKFwiQHByb3RvYnVmanMvcG9vbFwiKTtcclxuXHJcbi8vIHV0aWxpdHkgdG8gd29yayB3aXRoIHRoZSBsb3cgYW5kIGhpZ2ggYml0cyBvZiBhIDY0IGJpdCB2YWx1ZVxyXG51dGlsLkxvbmdCaXRzID0gcmVxdWlyZShcIi4vbG9uZ2JpdHNcIik7XHJcblxyXG4vLyBnbG9iYWwgb2JqZWN0IHJlZmVyZW5jZVxyXG51dGlsLmdsb2JhbCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93XHJcbiAgICAgICAgICAgfHwgdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWxcclxuICAgICAgICAgICB8fCB0eXBlb2Ygc2VsZiAgICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGZcclxuICAgICAgICAgICB8fCB0aGlzOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWludmFsaWQtdGhpc1xyXG5cclxuLyoqXHJcbiAqIEFuIGltbXVhYmxlIGVtcHR5IGFycmF5LlxyXG4gKiBAbWVtYmVyb2YgdXRpbFxyXG4gKiBAdHlwZSB7QXJyYXkuPCo+fVxyXG4gKiBAY29uc3RcclxuICovXHJcbnV0aWwuZW1wdHlBcnJheSA9IE9iamVjdC5mcmVlemUgPyBPYmplY3QuZnJlZXplKFtdKSA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIFtdOyAvLyB1c2VkIG9uIHByb3RvdHlwZXNcclxuXHJcbi8qKlxyXG4gKiBBbiBpbW11dGFibGUgZW1wdHkgb2JqZWN0LlxyXG4gKiBAdHlwZSB7T2JqZWN0fVxyXG4gKiBAY29uc3RcclxuICovXHJcbnV0aWwuZW1wdHlPYmplY3QgPSBPYmplY3QuZnJlZXplID8gT2JqZWN0LmZyZWV6ZSh7fSkgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB7fTsgLy8gdXNlZCBvbiBwcm90b3R5cGVzXHJcblxyXG4vKipcclxuICogV2hldGhlciBydW5uaW5nIHdpdGhpbiBub2RlIG9yIG5vdC5cclxuICogQG1lbWJlcm9mIHV0aWxcclxuICogQHR5cGUge2Jvb2xlYW59XHJcbiAqIEBjb25zdFxyXG4gKi9cclxudXRpbC5pc05vZGUgPSBCb29sZWFuKHV0aWwuZ2xvYmFsLnByb2Nlc3MgJiYgdXRpbC5nbG9iYWwucHJvY2Vzcy52ZXJzaW9ucyAmJiB1dGlsLmdsb2JhbC5wcm9jZXNzLnZlcnNpb25zLm5vZGUpO1xyXG5cclxuLyoqXHJcbiAqIFRlc3RzIGlmIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgYW4gaW50ZWdlci5cclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gdGVzdFxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2YWx1ZSBpcyBhbiBpbnRlZ2VyXHJcbiAqL1xyXG51dGlsLmlzSW50ZWdlciA9IE51bWJlci5pc0ludGVnZXIgfHwgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiICYmIGlzRmluaXRlKHZhbHVlKSAmJiBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWU7XHJcbn07XHJcblxyXG4vKipcclxuICogVGVzdHMgaWYgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyBhIHN0cmluZy5cclxuICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byB0ZXN0XHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGlzIGEgc3RyaW5nXHJcbiAqL1xyXG51dGlsLmlzU3RyaW5nID0gZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmc7XHJcbn07XHJcblxyXG4vKipcclxuICogVGVzdHMgaWYgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyBhIG5vbi1udWxsIG9iamVjdC5cclxuICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byB0ZXN0XHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGlzIGEgbm9uLW51bGwgb2JqZWN0XHJcbiAqL1xyXG51dGlsLmlzT2JqZWN0ID0gZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcclxuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCI7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIGEgcHJvcGVydHkgb24gYSBtZXNzYWdlIGlzIGNvbnNpZGVyZWQgdG8gYmUgcHJlc2VudC5cclxuICogVGhpcyBpcyBhbiBhbGlhcyBvZiB7QGxpbmsgdXRpbC5pc1NldH0uXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFBsYWluIG9iamVjdCBvciBtZXNzYWdlIGluc3RhbmNlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIFByb3BlcnR5IG5hbWVcclxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiBjb25zaWRlcmVkIHRvIGJlIHByZXNlbnQsIG90aGVyd2lzZSBgZmFsc2VgXHJcbiAqL1xyXG51dGlsLmlzc2V0ID1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYSBwcm9wZXJ0eSBvbiBhIG1lc3NhZ2UgaXMgY29uc2lkZXJlZCB0byBiZSBwcmVzZW50LlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFBsYWluIG9iamVjdCBvciBtZXNzYWdlIGluc3RhbmNlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIFByb3BlcnR5IG5hbWVcclxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiBjb25zaWRlcmVkIHRvIGJlIHByZXNlbnQsIG90aGVyd2lzZSBgZmFsc2VgXHJcbiAqL1xyXG51dGlsLmlzU2V0ID0gZnVuY3Rpb24gaXNTZXQob2JqLCBwcm9wKSB7XHJcbiAgICB2YXIgdmFsdWUgPSBvYmpbcHJvcF07XHJcbiAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiBvYmouaGFzT3duUHJvcGVydHkocHJvcCkpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxLCBuby1wcm90b3R5cGUtYnVpbHRpbnNcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiIHx8IChBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmxlbmd0aCA6IE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGgpID4gMDtcclxuICAgIHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBbnkgY29tcGF0aWJsZSBCdWZmZXIgaW5zdGFuY2UuXHJcbiAqIFRoaXMgaXMgYSBtaW5pbWFsIHN0YW5kLWFsb25lIGRlZmluaXRpb24gb2YgYSBCdWZmZXIgaW5zdGFuY2UuIFRoZSBhY3R1YWwgdHlwZSBpcyB0aGF0IGV4cG9ydGVkIGJ5IG5vZGUncyB0eXBpbmdzLlxyXG4gKiBAaW50ZXJmYWNlIEJ1ZmZlclxyXG4gKiBAZXh0ZW5kcyBVaW50OEFycmF5XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIE5vZGUncyBCdWZmZXIgY2xhc3MgaWYgYXZhaWxhYmxlLlxyXG4gKiBAdHlwZSB7Q29uc3RydWN0b3I8QnVmZmVyPn1cclxuICovXHJcbnV0aWwuQnVmZmVyID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB2YXIgQnVmZmVyID0gdXRpbC5pbnF1aXJlKFwiYnVmZmVyXCIpLkJ1ZmZlcjtcclxuICAgICAgICAvLyByZWZ1c2UgdG8gdXNlIG5vbi1ub2RlIGJ1ZmZlcnMgaWYgbm90IGV4cGxpY2l0bHkgYXNzaWduZWQgKHBlcmYgcmVhc29ucyk6XHJcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5wcm90b3R5cGUudXRmOFdyaXRlID8gQnVmZmVyIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gbnVsbDtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59KSgpO1xyXG5cclxuLy8gSW50ZXJuYWwgYWxpYXMgb2Ygb3IgcG9seWZ1bGwgZm9yIEJ1ZmZlci5mcm9tLlxyXG51dGlsLl9CdWZmZXJfZnJvbSA9IG51bGw7XHJcblxyXG4vLyBJbnRlcm5hbCBhbGlhcyBvZiBvciBwb2x5ZmlsbCBmb3IgQnVmZmVyLmFsbG9jVW5zYWZlLlxyXG51dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmUgPSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgYnVmZmVyIG9mIHdoYXRldmVyIHR5cGUgc3VwcG9ydGVkIGJ5IHRoZSBlbnZpcm9ubWVudC5cclxuICogQHBhcmFtIHtudW1iZXJ8bnVtYmVyW119IFtzaXplT3JBcnJheT0wXSBCdWZmZXIgc2l6ZSBvciBudW1iZXIgYXJyYXlcclxuICogQHJldHVybnMge1VpbnQ4QXJyYXl8QnVmZmVyfSBCdWZmZXJcclxuICovXHJcbnV0aWwubmV3QnVmZmVyID0gZnVuY3Rpb24gbmV3QnVmZmVyKHNpemVPckFycmF5KSB7XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzaXplT3JBcnJheSA9PT0gXCJudW1iZXJcIlxyXG4gICAgICAgID8gdXRpbC5CdWZmZXJcclxuICAgICAgICAgICAgPyB1dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmUoc2l6ZU9yQXJyYXkpXHJcbiAgICAgICAgICAgIDogbmV3IHV0aWwuQXJyYXkoc2l6ZU9yQXJyYXkpXHJcbiAgICAgICAgOiB1dGlsLkJ1ZmZlclxyXG4gICAgICAgICAgICA/IHV0aWwuX0J1ZmZlcl9mcm9tKHNpemVPckFycmF5KVxyXG4gICAgICAgICAgICA6IHR5cGVvZiBVaW50OEFycmF5ID09PSBcInVuZGVmaW5lZFwiXHJcbiAgICAgICAgICAgICAgICA/IHNpemVPckFycmF5XHJcbiAgICAgICAgICAgICAgICA6IG5ldyBVaW50OEFycmF5KHNpemVPckFycmF5KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBcnJheSBpbXBsZW1lbnRhdGlvbiB1c2VkIGluIHRoZSBicm93c2VyLiBgVWludDhBcnJheWAgaWYgc3VwcG9ydGVkLCBvdGhlcndpc2UgYEFycmF5YC5cclxuICogQHR5cGUge0NvbnN0cnVjdG9yPFVpbnQ4QXJyYXk+fVxyXG4gKi9cclxudXRpbC5BcnJheSA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSBcInVuZGVmaW5lZFwiID8gVWludDhBcnJheSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyA6IEFycmF5O1xyXG5cclxuLyoqXHJcbiAqIEFueSBjb21wYXRpYmxlIExvbmcgaW5zdGFuY2UuXHJcbiAqIFRoaXMgaXMgYSBtaW5pbWFsIHN0YW5kLWFsb25lIGRlZmluaXRpb24gb2YgYSBMb25nIGluc3RhbmNlLiBUaGUgYWN0dWFsIHR5cGUgaXMgdGhhdCBleHBvcnRlZCBieSBsb25nLmpzLlxyXG4gKiBAaW50ZXJmYWNlIExvbmdcclxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxvdyBMb3cgYml0c1xyXG4gKiBAcHJvcGVydHkge251bWJlcn0gaGlnaCBIaWdoIGJpdHNcclxuICogQHByb3BlcnR5IHtib29sZWFufSB1bnNpZ25lZCBXaGV0aGVyIHVuc2lnbmVkIG9yIG5vdFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBMb25nLmpzJ3MgTG9uZyBjbGFzcyBpZiBhdmFpbGFibGUuXHJcbiAqIEB0eXBlIHtDb25zdHJ1Y3RvcjxMb25nPn1cclxuICovXHJcbnV0aWwuTG9uZyA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHV0aWwuZ2xvYmFsLmRjb2RlSU8gJiYgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gdXRpbC5nbG9iYWwuZGNvZGVJTy5Mb25nXHJcbiAgICAgICAgIHx8IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHV0aWwuZ2xvYmFsLkxvbmdcclxuICAgICAgICAgfHwgdXRpbC5pbnF1aXJlKFwibG9uZ1wiKTtcclxuXHJcbi8qKlxyXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byB2ZXJpZnkgMiBiaXQgKGBib29sYCkgbWFwIGtleXMuXHJcbiAqIEB0eXBlIHtSZWdFeHB9XHJcbiAqIEBjb25zdFxyXG4gKi9cclxudXRpbC5rZXkyUmUgPSAvXnRydWV8ZmFsc2V8MHwxJC87XHJcblxyXG4vKipcclxuICogUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gdmVyaWZ5IDMyIGJpdCAoYGludDMyYCBldGMuKSBtYXAga2V5cy5cclxuICogQHR5cGUge1JlZ0V4cH1cclxuICogQGNvbnN0XHJcbiAqL1xyXG51dGlsLmtleTMyUmUgPSAvXi0/KD86MHxbMS05XVswLTldKikkLztcclxuXHJcbi8qKlxyXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byB2ZXJpZnkgNjQgYml0IChgaW50NjRgIGV0Yy4pIG1hcCBrZXlzLlxyXG4gKiBAdHlwZSB7UmVnRXhwfVxyXG4gKiBAY29uc3RcclxuICovXHJcbnV0aWwua2V5NjRSZSA9IC9eKD86W1xcXFx4MDAtXFxcXHhmZl17OH18LT8oPzowfFsxLTldWzAtOV0qKSkkLztcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhIG51bWJlciBvciBsb25nIHRvIGFuIDggY2hhcmFjdGVycyBsb25nIGhhc2ggc3RyaW5nLlxyXG4gKiBAcGFyYW0ge0xvbmd8bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byBjb252ZXJ0XHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEhhc2hcclxuICovXHJcbnV0aWwubG9uZ1RvSGFzaCA9IGZ1bmN0aW9uIGxvbmdUb0hhc2godmFsdWUpIHtcclxuICAgIHJldHVybiB2YWx1ZVxyXG4gICAgICAgID8gdXRpbC5Mb25nQml0cy5mcm9tKHZhbHVlKS50b0hhc2goKVxyXG4gICAgICAgIDogdXRpbC5Mb25nQml0cy56ZXJvSGFzaDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhbiA4IGNoYXJhY3RlcnMgbG9uZyBoYXNoIHN0cmluZyB0byBhIGxvbmcgb3IgbnVtYmVyLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBIYXNoXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Vuc2lnbmVkPWZhbHNlXSBXaGV0aGVyIHVuc2lnbmVkIG9yIG5vdFxyXG4gKiBAcmV0dXJucyB7TG9uZ3xudW1iZXJ9IE9yaWdpbmFsIHZhbHVlXHJcbiAqL1xyXG51dGlsLmxvbmdGcm9tSGFzaCA9IGZ1bmN0aW9uIGxvbmdGcm9tSGFzaChoYXNoLCB1bnNpZ25lZCkge1xyXG4gICAgdmFyIGJpdHMgPSB1dGlsLkxvbmdCaXRzLmZyb21IYXNoKGhhc2gpO1xyXG4gICAgaWYgKHV0aWwuTG9uZylcclxuICAgICAgICByZXR1cm4gdXRpbC5Mb25nLmZyb21CaXRzKGJpdHMubG8sIGJpdHMuaGksIHVuc2lnbmVkKTtcclxuICAgIHJldHVybiBiaXRzLnRvTnVtYmVyKEJvb2xlYW4odW5zaWduZWQpKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgdGhlIHNvdXJjZSBvYmplY3QgaW50byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxyXG4gKiBAbWVtYmVyb2YgdXRpbFxyXG4gKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBkc3QgRGVzdGluYXRpb24gb2JqZWN0XHJcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IHNyYyBTb3VyY2Ugb2JqZWN0XHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lmTm90U2V0PWZhbHNlXSBNZXJnZXMgb25seSBpZiB0aGUga2V5IGlzIG5vdCBhbHJlYWR5IHNldFxyXG4gKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IERlc3RpbmF0aW9uIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gbWVyZ2UoZHN0LCBzcmMsIGlmTm90U2V0KSB7IC8vIHVzZWQgYnkgY29udmVydGVyc1xyXG4gICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNyYyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcclxuICAgICAgICBpZiAoZHN0W2tleXNbaV1dID09PSB1bmRlZmluZWQgfHwgIWlmTm90U2V0KVxyXG4gICAgICAgICAgICBkc3Rba2V5c1tpXV0gPSBzcmNba2V5c1tpXV07XHJcbiAgICByZXR1cm4gZHN0O1xyXG59XHJcblxyXG51dGlsLm1lcmdlID0gbWVyZ2U7XHJcblxyXG4vKipcclxuICogQ29udmVydHMgdGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHN0cmluZyB0byBsb3dlciBjYXNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIFN0cmluZyB0byBjb252ZXJ0XHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IENvbnZlcnRlZCBzdHJpbmdcclxuICovXHJcbnV0aWwubGNGaXJzdCA9IGZ1bmN0aW9uIGxjRmlyc3Qoc3RyKSB7XHJcbiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc3RyLnN1YnN0cmluZygxKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgY3VzdG9tIGVycm9yIGNvbnN0cnVjdG9yLlxyXG4gKiBAbWVtYmVyb2YgdXRpbFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFcnJvciBuYW1lXHJcbiAqIEByZXR1cm5zIHtDb25zdHJ1Y3RvcjxFcnJvcj59IEN1c3RvbSBlcnJvciBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZnVuY3Rpb24gbmV3RXJyb3IobmFtZSkge1xyXG5cclxuICAgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UsIHByb3BlcnRpZXMpIHtcclxuXHJcbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSlcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FcnJvcihtZXNzYWdlLCBwcm9wZXJ0aWVzKTtcclxuXHJcbiAgICAgICAgLy8gRXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcclxuICAgICAgICAvLyBeIGp1c3QgcmV0dXJucyBhIG5ldyBlcnJvciBpbnN0YW5jZSBiZWNhdXNlIHRoZSBjdG9yIGNhbiBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvblxyXG5cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXNzYWdlXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1lc3NhZ2U7IH0gfSk7XHJcblxyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSAvLyBub2RlXHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEN1c3RvbUVycm9yKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YWNrXCIsIHsgdmFsdWU6IChuZXcgRXJyb3IoKSkuc3RhY2sgfHwgXCJcIiB9KTtcclxuXHJcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgIG1lcmdlKHRoaXMsIHByb3BlcnRpZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIChDdXN0b21FcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yID0gQ3VzdG9tRXJyb3I7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEN1c3RvbUVycm9yLnByb3RvdHlwZSwgXCJuYW1lXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG5hbWU7IH0gfSk7XHJcblxyXG4gICAgQ3VzdG9tRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSArIFwiOiBcIiArIHRoaXMubWVzc2FnZTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIEN1c3RvbUVycm9yO1xyXG59XHJcblxyXG51dGlsLm5ld0Vycm9yID0gbmV3RXJyb3I7XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBhIG5ldyBwcm90b2NvbCBlcnJvci5cclxuICogQGNsYXNzZGVzYyBFcnJvciBzdWJjbGFzcyBpbmRpY2F0aW5nIGEgcHJvdG9jb2wgc3BlY2lmYyBlcnJvci5cclxuICogQG1lbWJlcm9mIHV0aWxcclxuICogQGV4dGVuZHMgRXJyb3JcclxuICogQHRlbXBsYXRlIFQgZXh0ZW5kcyBNZXNzYWdlPFQ+XHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBFcnJvciBtZXNzYWdlXHJcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IFtwcm9wZXJ0aWVzXSBBZGRpdGlvbmFsIHByb3BlcnRpZXNcclxuICogQGV4YW1wbGVcclxuICogdHJ5IHtcclxuICogICAgIE15TWVzc2FnZS5kZWNvZGUoc29tZUJ1ZmZlcik7IC8vIHRocm93cyBpZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcclxuICogfSBjYXRjaCAoZSkge1xyXG4gKiAgICAgaWYgKGUgaW5zdGFuY2VvZiBQcm90b2NvbEVycm9yICYmIGUuaW5zdGFuY2UpXHJcbiAqICAgICAgICAgY29uc29sZS5sb2coXCJkZWNvZGVkIHNvIGZhcjogXCIgKyBKU09OLnN0cmluZ2lmeShlLmluc3RhbmNlKSk7XHJcbiAqIH1cclxuICovXHJcbnV0aWwuUHJvdG9jb2xFcnJvciA9IG5ld0Vycm9yKFwiUHJvdG9jb2xFcnJvclwiKTtcclxuXHJcbi8qKlxyXG4gKiBTbyBmYXIgZGVjb2RlZCBtZXNzYWdlIGluc3RhbmNlLlxyXG4gKiBAbmFtZSB1dGlsLlByb3RvY29sRXJyb3IjaW5zdGFuY2VcclxuICogQHR5cGUge01lc3NhZ2U8VD59XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEEgT25lT2YgZ2V0dGVyIGFzIHJldHVybmVkIGJ5IHtAbGluayB1dGlsLm9uZU9mR2V0dGVyfS5cclxuICogQHR5cGVkZWYgT25lT2ZHZXR0ZXJcclxuICogQHR5cGUge2Z1bmN0aW9ufVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gU2V0IGZpZWxkIG5hbWUsIGlmIGFueVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBCdWlsZHMgYSBnZXR0ZXIgZm9yIGEgb25lb2YncyBwcmVzZW50IGZpZWxkIG5hbWUuXHJcbiAqIEBwYXJhbSB7c3RyaW5nW119IGZpZWxkTmFtZXMgRmllbGQgbmFtZXNcclxuICogQHJldHVybnMge09uZU9mR2V0dGVyfSBVbmJvdW5kIGdldHRlclxyXG4gKi9cclxudXRpbC5vbmVPZkdldHRlciA9IGZ1bmN0aW9uIGdldE9uZU9mKGZpZWxkTmFtZXMpIHtcclxuICAgIHZhciBmaWVsZE1hcCA9IHt9O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZE5hbWVzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgIGZpZWxkTWFwW2ZpZWxkTmFtZXNbaV1dID0gMTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBTZXQgZmllbGQgbmFtZSwgaWYgYW55XHJcbiAgICAgKiBAdGhpcyBPYmplY3RcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXHJcbiAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMpLCBpID0ga2V5cy5sZW5ndGggLSAxOyBpID4gLTE7IC0taSlcclxuICAgICAgICAgICAgaWYgKGZpZWxkTWFwW2tleXNbaV1dID09PSAxICYmIHRoaXNba2V5c1tpXV0gIT09IHVuZGVmaW5lZCAmJiB0aGlzW2tleXNbaV1dICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleXNbaV07XHJcbiAgICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEEgT25lT2Ygc2V0dGVyIGFzIHJldHVybmVkIGJ5IHtAbGluayB1dGlsLm9uZU9mU2V0dGVyfS5cclxuICogQHR5cGVkZWYgT25lT2ZTZXR0ZXJcclxuICogQHR5cGUge2Z1bmN0aW9ufVxyXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IHZhbHVlIEZpZWxkIG5hbWVcclxuICogQHJldHVybnMge3VuZGVmaW5lZH1cclxuICovXHJcblxyXG4vKipcclxuICogQnVpbGRzIGEgc2V0dGVyIGZvciBhIG9uZW9mJ3MgcHJlc2VudCBmaWVsZCBuYW1lLlxyXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBmaWVsZE5hbWVzIEZpZWxkIG5hbWVzXHJcbiAqIEByZXR1cm5zIHtPbmVPZlNldHRlcn0gVW5ib3VuZCBzZXR0ZXJcclxuICovXHJcbnV0aWwub25lT2ZTZXR0ZXIgPSBmdW5jdGlvbiBzZXRPbmVPZihmaWVsZE5hbWVzKSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBGaWVsZCBuYW1lXHJcbiAgICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gICAgICogQHRoaXMgT2JqZWN0XHJcbiAgICAgKiBAaWdub3JlXHJcbiAgICAgKi9cclxuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZE5hbWVzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICBpZiAoZmllbGROYW1lc1tpXSAhPT0gbmFtZSlcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzW2ZpZWxkTmFtZXNbaV1dO1xyXG4gICAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZWZhdWx0IGNvbnZlcnNpb24gb3B0aW9ucyB1c2VkIGZvciB7QGxpbmsgTWVzc2FnZSN0b0pTT059IGltcGxlbWVudGF0aW9ucy5cclxuICpcclxuICogVGhlc2Ugb3B0aW9ucyBhcmUgY2xvc2UgdG8gcHJvdG8zJ3MgSlNPTiBtYXBwaW5nIHdpdGggdGhlIGV4Y2VwdGlvbiB0aGF0IGludGVybmFsIHR5cGVzIGxpa2UgQW55IGFyZSBoYW5kbGVkIGp1c3QgbGlrZSBtZXNzYWdlcy4gTW9yZSBwcmVjaXNlbHk6XHJcbiAqXHJcbiAqIC0gTG9uZ3MgYmVjb21lIHN0cmluZ3NcclxuICogLSBFbnVtcyBiZWNvbWUgc3RyaW5nIGtleXNcclxuICogLSBCeXRlcyBiZWNvbWUgYmFzZTY0IGVuY29kZWQgc3RyaW5nc1xyXG4gKiAtIChTdWItKU1lc3NhZ2VzIGJlY29tZSBwbGFpbiBvYmplY3RzXHJcbiAqIC0gTWFwcyBiZWNvbWUgcGxhaW4gb2JqZWN0cyB3aXRoIGFsbCBzdHJpbmcga2V5c1xyXG4gKiAtIFJlcGVhdGVkIGZpZWxkcyBiZWNvbWUgYXJyYXlzXHJcbiAqIC0gTmFOIGFuZCBJbmZpbml0eSBmb3IgZmxvYXQgYW5kIGRvdWJsZSBmaWVsZHMgYmVjb21lIHN0cmluZ3NcclxuICpcclxuICogQHR5cGUge0lDb252ZXJzaW9uT3B0aW9uc31cclxuICogQHNlZSBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zP2hsPWVuI2pzb25cclxuICovXHJcbnV0aWwudG9KU09OT3B0aW9ucyA9IHtcclxuICAgIGxvbmdzOiBTdHJpbmcsXHJcbiAgICBlbnVtczogU3RyaW5nLFxyXG4gICAgYnl0ZXM6IFN0cmluZyxcclxuICAgIGpzb246IHRydWVcclxufTtcclxuXHJcbi8vIFNldHMgdXAgYnVmZmVyIHV0aWxpdHkgYWNjb3JkaW5nIHRvIHRoZSBlbnZpcm9ubWVudCAoY2FsbGVkIGluIGluZGV4LW1pbmltYWwpXHJcbnV0aWwuX2NvbmZpZ3VyZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIEJ1ZmZlciA9IHV0aWwuQnVmZmVyO1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICBpZiAoIUJ1ZmZlcikge1xyXG4gICAgICAgIHV0aWwuX0J1ZmZlcl9mcm9tID0gdXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlID0gbnVsbDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBiZWNhdXNlIG5vZGUgNC54IGJ1ZmZlcnMgYXJlIGluY29tcGF0aWJsZSAmIGltbXV0YWJsZVxyXG4gICAgLy8gc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGNvZGVJTy9wcm90b2J1Zi5qcy9wdWxsLzY2NVxyXG4gICAgdXRpbC5fQnVmZmVyX2Zyb20gPSBCdWZmZXIuZnJvbSAhPT0gVWludDhBcnJheS5mcm9tICYmIEJ1ZmZlci5mcm9tIHx8XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBmdW5jdGlvbiBCdWZmZXJfZnJvbSh2YWx1ZSwgZW5jb2RpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXIodmFsdWUsIGVuY29kaW5nKTtcclxuICAgICAgICB9O1xyXG4gICAgdXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlID0gQnVmZmVyLmFsbG9jVW5zYWZlIHx8XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBmdW5jdGlvbiBCdWZmZXJfYWxsb2NVbnNhZmUoc2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlcihzaXplKTtcclxuICAgICAgICB9O1xyXG59O1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZhbHNlO1xuIiwidmFyIHBhdGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcGF0aCcpO1xudmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcblxudmFyIGFGdW5jdGlvbiA9IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xuICByZXR1cm4gdHlwZW9mIHZhcmlhYmxlID09ICdmdW5jdGlvbicgPyB2YXJpYWJsZSA6IHVuZGVmaW5lZDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5hbWVzcGFjZSwgbWV0aG9kKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGFGdW5jdGlvbihwYXRoW25hbWVzcGFjZV0pIHx8IGFGdW5jdGlvbihnbG9iYWxbbmFtZXNwYWNlXSlcbiAgICA6IHBhdGhbbmFtZXNwYWNlXSAmJiBwYXRoW25hbWVzcGFjZV1bbWV0aG9kXSB8fCBnbG9iYWxbbmFtZXNwYWNlXSAmJiBnbG9iYWxbbmFtZXNwYWNlXVttZXRob2RdO1xufTtcbiIsInZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1wcm9wZXJ0eS1pcy1lbnVtZXJhYmxlJyk7XG52YXIgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7XG52YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgdG9QcmltaXRpdmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tcHJpbWl0aXZlJyk7XG52YXIgaGFzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcycpO1xudmFyIElFOF9ET01fREVGSU5FID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2llOC1kb20tZGVmaW5lJyk7XG5cbnZhciBuYXRpdmVHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXG4vLyBgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcmAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QuZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9yXG5leHBvcnRzLmYgPSBERVNDUklQVE9SUyA/IG5hdGl2ZUdldE93blByb3BlcnR5RGVzY3JpcHRvciA6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKSB7XG4gIE8gPSB0b0luZGV4ZWRPYmplY3QoTyk7XG4gIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTtcbiAgaWYgKElFOF9ET01fREVGSU5FKSB0cnkge1xuICAgIHJldHVybiBuYXRpdmVHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cbiAgaWYgKGhhcyhPLCBQKSkgcmV0dXJuIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcighcHJvcGVydHlJc0VudW1lcmFibGVNb2R1bGUuZi5jYWxsKE8sIFApLCBPW1BdKTtcbn07XG4iLCIvLyBgUmVxdWlyZU9iamVjdENvZXJjaWJsZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1yZXF1aXJlb2JqZWN0Y29lcmNpYmxlXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAoaXQgPT0gdW5kZWZpbmVkKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiBcIiArIGl0KTtcbiAgcmV0dXJuIGl0O1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGJpdG1hcCwgdmFsdWUpIHtcbiAgcmV0dXJuIHtcbiAgICBlbnVtZXJhYmxlOiAhKGJpdG1hcCAmIDEpLFxuICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSxcbiAgICB3cml0YWJsZTogIShiaXRtYXAgJiA0KSxcbiAgICB2YWx1ZTogdmFsdWVcbiAgfTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHt9O1xuIiwidmFyIGludGVybmFsT2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qta2V5cy1pbnRlcm5hbCcpO1xudmFyIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VudW0tYnVnLWtleXMnKTtcblxudmFyIGhpZGRlbktleXMgPSBlbnVtQnVnS2V5cy5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTtcblxuLy8gYE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5nZXRvd25wcm9wZXJ0eW5hbWVzXG5leHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pIHtcbiAgcmV0dXJuIGludGVybmFsT2JqZWN0S2V5cyhPLCBoaWRkZW5LZXlzKTtcbn07XG4iLCJ2YXIgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpLmY7XG52YXIgaGFzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcycpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgVE9fU1RSSU5HX1RBRyA9IHdlbGxLbm93blN5bWJvbCgndG9TdHJpbmdUYWcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIFRBRywgU1RBVElDKSB7XG4gIGlmIChpdCAmJiAhaGFzKGl0ID0gU1RBVElDID8gaXQgOiBpdC5wcm90b3R5cGUsIFRPX1NUUklOR19UQUcpKSB7XG4gICAgZGVmaW5lUHJvcGVydHkoaXQsIFRPX1NUUklOR19UQUcsIHsgY29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogVEFHIH0pO1xuICB9XG59O1xuIiwidmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGFQb3NzaWJsZVByb3RvdHlwZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLXBvc3NpYmxlLXByb3RvdHlwZScpO1xuXG4vLyBgT2JqZWN0LnNldFByb3RvdHlwZU9mYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5zZXRwcm90b3R5cGVvZlxuLy8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xubW9kdWxlLmV4cG9ydHMgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgKCdfX3Byb3RvX18nIGluIHt9ID8gZnVuY3Rpb24gKCkge1xuICB2YXIgQ09SUkVDVF9TRVRURVIgPSBmYWxzZTtcbiAgdmFyIHRlc3QgPSB7fTtcbiAgdmFyIHNldHRlcjtcbiAgdHJ5IHtcbiAgICBzZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5wcm90b3R5cGUsICdfX3Byb3RvX18nKS5zZXQ7XG4gICAgc2V0dGVyLmNhbGwodGVzdCwgW10pO1xuICAgIENPUlJFQ1RfU0VUVEVSID0gdGVzdCBpbnN0YW5jZW9mIEFycmF5O1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90bykge1xuICAgIGFuT2JqZWN0KE8pO1xuICAgIGFQb3NzaWJsZVByb3RvdHlwZShwcm90byk7XG4gICAgaWYgKENPUlJFQ1RfU0VUVEVSKSBzZXR0ZXIuY2FsbChPLCBwcm90byk7XG4gICAgZWxzZSBPLl9fcHJvdG9fXyA9IHByb3RvO1xuICAgIHJldHVybiBPO1xuICB9O1xufSgpIDogdW5kZWZpbmVkKTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpO1xudmFyIElTX1BVUkUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtcHVyZScpO1xudmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xudmFyIE5hdGl2ZVByb21pc2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbmF0aXZlLXByb21pc2UtY29uc3RydWN0b3InKTtcbnZhciByZWRlZmluZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWRlZmluZScpO1xudmFyIHJlZGVmaW5lQWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZGVmaW5lLWFsbCcpO1xudmFyIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NldC10by1zdHJpbmctdGFnJyk7XG52YXIgc2V0U3BlY2llcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtc3BlY2llcycpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWZ1bmN0aW9uJyk7XG52YXIgYW5JbnN0YW5jZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1pbnN0YW5jZScpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcbnZhciBpbnNwZWN0U291cmNlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luc3BlY3Qtc291cmNlJyk7XG52YXIgaXRlcmF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pdGVyYXRlJyk7XG52YXIgY2hlY2tDb3JyZWN0bmVzc09mSXRlcmF0aW9uID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NoZWNrLWNvcnJlY3RuZXNzLW9mLWl0ZXJhdGlvbicpO1xudmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zcGVjaWVzLWNvbnN0cnVjdG9yJyk7XG52YXIgdGFzayA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90YXNrJykuc2V0O1xudmFyIG1pY3JvdGFzayA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9taWNyb3Rhc2snKTtcbnZhciBwcm9taXNlUmVzb2x2ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9wcm9taXNlLXJlc29sdmUnKTtcbnZhciBob3N0UmVwb3J0RXJyb3JzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hvc3QtcmVwb3J0LWVycm9ycycpO1xudmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL25ldy1wcm9taXNlLWNhcGFiaWxpdHknKTtcbnZhciBwZXJmb3JtID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3BlcmZvcm0nKTtcbnZhciBJbnRlcm5hbFN0YXRlTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ludGVybmFsLXN0YXRlJyk7XG52YXIgaXNGb3JjZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtZm9yY2VkJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgVjhfVkVSU0lPTiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbmdpbmUtdjgtdmVyc2lvbicpO1xuXG52YXIgU1BFQ0lFUyA9IHdlbGxLbm93blN5bWJvbCgnc3BlY2llcycpO1xudmFyIFBST01JU0UgPSAnUHJvbWlzZSc7XG52YXIgZ2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuZ2V0O1xudmFyIHNldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLnNldDtcbnZhciBnZXRJbnRlcm5hbFByb21pc2VTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuZ2V0dGVyRm9yKFBST01JU0UpO1xudmFyIFByb21pc2VDb25zdHJ1Y3RvciA9IE5hdGl2ZVByb21pc2U7XG52YXIgVHlwZUVycm9yID0gZ2xvYmFsLlR5cGVFcnJvcjtcbnZhciBkb2N1bWVudCA9IGdsb2JhbC5kb2N1bWVudDtcbnZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7XG52YXIgJGZldGNoID0gZ2V0QnVpbHRJbignZmV0Y2gnKTtcbnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlLmY7XG52YXIgbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHk7XG52YXIgSVNfTk9ERSA9IGNsYXNzb2YocHJvY2VzcykgPT0gJ3Byb2Nlc3MnO1xudmFyIERJU1BBVENIX0VWRU5UID0gISEoZG9jdW1lbnQgJiYgZG9jdW1lbnQuY3JlYXRlRXZlbnQgJiYgZ2xvYmFsLmRpc3BhdGNoRXZlbnQpO1xudmFyIFVOSEFORExFRF9SRUpFQ1RJT04gPSAndW5oYW5kbGVkcmVqZWN0aW9uJztcbnZhciBSRUpFQ1RJT05fSEFORExFRCA9ICdyZWplY3Rpb25oYW5kbGVkJztcbnZhciBQRU5ESU5HID0gMDtcbnZhciBGVUxGSUxMRUQgPSAxO1xudmFyIFJFSkVDVEVEID0gMjtcbnZhciBIQU5ETEVEID0gMTtcbnZhciBVTkhBTkRMRUQgPSAyO1xudmFyIEludGVybmFsLCBPd25Qcm9taXNlQ2FwYWJpbGl0eSwgUHJvbWlzZVdyYXBwZXIsIG5hdGl2ZVRoZW47XG5cbnZhciBGT1JDRUQgPSBpc0ZvcmNlZChQUk9NSVNFLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBHTE9CQUxfQ09SRV9KU19QUk9NSVNFID0gaW5zcGVjdFNvdXJjZShQcm9taXNlQ29uc3RydWN0b3IpICE9PSBTdHJpbmcoUHJvbWlzZUNvbnN0cnVjdG9yKTtcbiAgaWYgKCFHTE9CQUxfQ09SRV9KU19QUk9NSVNFKSB7XG4gICAgLy8gVjggNi42IChOb2RlIDEwIGFuZCBDaHJvbWUgNjYpIGhhdmUgYSBidWcgd2l0aCByZXNvbHZpbmcgY3VzdG9tIHRoZW5hYmxlc1xuICAgIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTgzMDU2NVxuICAgIC8vIFdlIGNhbid0IGRldGVjdCBpdCBzeW5jaHJvbm91c2x5LCBzbyBqdXN0IGNoZWNrIHZlcnNpb25zXG4gICAgaWYgKFY4X1ZFUlNJT04gPT09IDY2KSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBVbmhhbmRsZWQgcmVqZWN0aW9ucyB0cmFja2luZyBzdXBwb3J0LCBOb2RlSlMgUHJvbWlzZSB3aXRob3V0IGl0IGZhaWxzIEBAc3BlY2llcyB0ZXN0XG4gICAgaWYgKCFJU19OT0RFICYmIHR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQgIT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gV2UgbmVlZCBQcm9taXNlI2ZpbmFsbHkgaW4gdGhlIHB1cmUgdmVyc2lvbiBmb3IgcHJldmVudGluZyBwcm90b3R5cGUgcG9sbHV0aW9uXG4gIGlmIChJU19QVVJFICYmICFQcm9taXNlQ29uc3RydWN0b3IucHJvdG90eXBlWydmaW5hbGx5J10pIHJldHVybiB0cnVlO1xuICAvLyBXZSBjYW4ndCB1c2UgQEBzcGVjaWVzIGZlYXR1cmUgZGV0ZWN0aW9uIGluIFY4IHNpbmNlIGl0IGNhdXNlc1xuICAvLyBkZW9wdGltaXphdGlvbiBhbmQgcGVyZm9ybWFuY2UgZGVncmFkYXRpb25cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzY3OVxuICBpZiAoVjhfVkVSU0lPTiA+PSA1MSAmJiAvbmF0aXZlIGNvZGUvLnRlc3QoUHJvbWlzZUNvbnN0cnVjdG9yKSkgcmV0dXJuIGZhbHNlO1xuICAvLyBEZXRlY3QgY29ycmVjdG5lc3Mgb2Ygc3ViY2xhc3Npbmcgd2l0aCBAQHNwZWNpZXMgc3VwcG9ydFxuICB2YXIgcHJvbWlzZSA9IFByb21pc2VDb25zdHJ1Y3Rvci5yZXNvbHZlKDEpO1xuICB2YXIgRmFrZVByb21pc2UgPSBmdW5jdGlvbiAoZXhlYykge1xuICAgIGV4ZWMoZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9LCBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0pO1xuICB9O1xuICB2YXIgY29uc3RydWN0b3IgPSBwcm9taXNlLmNvbnN0cnVjdG9yID0ge307XG4gIGNvbnN0cnVjdG9yW1NQRUNJRVNdID0gRmFrZVByb21pc2U7XG4gIHJldHVybiAhKHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0pIGluc3RhbmNlb2YgRmFrZVByb21pc2UpO1xufSk7XG5cbnZhciBJTkNPUlJFQ1RfSVRFUkFUSU9OID0gRk9SQ0VEIHx8ICFjaGVja0NvcnJlY3RuZXNzT2ZJdGVyYXRpb24oZnVuY3Rpb24gKGl0ZXJhYmxlKSB7XG4gIFByb21pc2VDb25zdHJ1Y3Rvci5hbGwoaXRlcmFibGUpWydjYXRjaCddKGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSk7XG59KTtcblxuLy8gaGVscGVyc1xudmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbiAoaXQpIHtcbiAgdmFyIHRoZW47XG4gIHJldHVybiBpc09iamVjdChpdCkgJiYgdHlwZW9mICh0aGVuID0gaXQudGhlbikgPT0gJ2Z1bmN0aW9uJyA/IHRoZW4gOiBmYWxzZTtcbn07XG5cbnZhciBub3RpZnkgPSBmdW5jdGlvbiAocHJvbWlzZSwgc3RhdGUsIGlzUmVqZWN0KSB7XG4gIGlmIChzdGF0ZS5ub3RpZmllZCkgcmV0dXJuO1xuICBzdGF0ZS5ub3RpZmllZCA9IHRydWU7XG4gIHZhciBjaGFpbiA9IHN0YXRlLnJlYWN0aW9ucztcbiAgbWljcm90YXNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdmFsdWUgPSBzdGF0ZS52YWx1ZTtcbiAgICB2YXIgb2sgPSBzdGF0ZS5zdGF0ZSA9PSBGVUxGSUxMRUQ7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICAvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaFxuICAgIHdoaWxlIChjaGFpbi5sZW5ndGggPiBpbmRleCkge1xuICAgICAgdmFyIHJlYWN0aW9uID0gY2hhaW5baW5kZXgrK107XG4gICAgICB2YXIgaGFuZGxlciA9IG9rID8gcmVhY3Rpb24ub2sgOiByZWFjdGlvbi5mYWlsO1xuICAgICAgdmFyIHJlc29sdmUgPSByZWFjdGlvbi5yZXNvbHZlO1xuICAgICAgdmFyIHJlamVjdCA9IHJlYWN0aW9uLnJlamVjdDtcbiAgICAgIHZhciBkb21haW4gPSByZWFjdGlvbi5kb21haW47XG4gICAgICB2YXIgcmVzdWx0LCB0aGVuLCBleGl0ZWQ7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgIGlmICghb2spIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5yZWplY3Rpb24gPT09IFVOSEFORExFRCkgb25IYW5kbGVVbmhhbmRsZWQocHJvbWlzZSwgc3RhdGUpO1xuICAgICAgICAgICAgc3RhdGUucmVqZWN0aW9uID0gSEFORExFRDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGhhbmRsZXIgPT09IHRydWUpIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGRvbWFpbikgZG9tYWluLmVudGVyKCk7XG4gICAgICAgICAgICByZXN1bHQgPSBoYW5kbGVyKHZhbHVlKTsgLy8gY2FuIHRocm93XG4gICAgICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgICAgIGRvbWFpbi5leGl0KCk7XG4gICAgICAgICAgICAgIGV4aXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZXN1bHQgPT09IHJlYWN0aW9uLnByb21pc2UpIHtcbiAgICAgICAgICAgIHJlamVjdChUeXBlRXJyb3IoJ1Byb21pc2UtY2hhaW4gY3ljbGUnKSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGVuID0gaXNUaGVuYWJsZShyZXN1bHQpKSB7XG4gICAgICAgICAgICB0aGVuLmNhbGwocmVzdWx0LCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0gZWxzZSByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSByZWplY3QodmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGRvbWFpbiAmJiAhZXhpdGVkKSBkb21haW4uZXhpdCgpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZS5yZWFjdGlvbnMgPSBbXTtcbiAgICBzdGF0ZS5ub3RpZmllZCA9IGZhbHNlO1xuICAgIGlmIChpc1JlamVjdCAmJiAhc3RhdGUucmVqZWN0aW9uKSBvblVuaGFuZGxlZChwcm9taXNlLCBzdGF0ZSk7XG4gIH0pO1xufTtcblxudmFyIGRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiAobmFtZSwgcHJvbWlzZSwgcmVhc29uKSB7XG4gIHZhciBldmVudCwgaGFuZGxlcjtcbiAgaWYgKERJU1BBVENIX0VWRU5UKSB7XG4gICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICBldmVudC5wcm9taXNlID0gcHJvbWlzZTtcbiAgICBldmVudC5yZWFzb24gPSByZWFzb247XG4gICAgZXZlbnQuaW5pdEV2ZW50KG5hbWUsIGZhbHNlLCB0cnVlKTtcbiAgICBnbG9iYWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH0gZWxzZSBldmVudCA9IHsgcHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiByZWFzb24gfTtcbiAgaWYgKGhhbmRsZXIgPSBnbG9iYWxbJ29uJyArIG5hbWVdKSBoYW5kbGVyKGV2ZW50KTtcbiAgZWxzZSBpZiAobmFtZSA9PT0gVU5IQU5ETEVEX1JFSkVDVElPTikgaG9zdFJlcG9ydEVycm9ycygnVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywgcmVhc29uKTtcbn07XG5cbnZhciBvblVuaGFuZGxlZCA9IGZ1bmN0aW9uIChwcm9taXNlLCBzdGF0ZSkge1xuICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZhbHVlID0gc3RhdGUudmFsdWU7XG4gICAgdmFyIElTX1VOSEFORExFRCA9IGlzVW5oYW5kbGVkKHN0YXRlKTtcbiAgICB2YXIgcmVzdWx0O1xuICAgIGlmIChJU19VTkhBTkRMRUQpIHtcbiAgICAgIHJlc3VsdCA9IHBlcmZvcm0oZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoSVNfTk9ERSkge1xuICAgICAgICAgIHByb2Nlc3MuZW1pdCgndW5oYW5kbGVkUmVqZWN0aW9uJywgdmFsdWUsIHByb21pc2UpO1xuICAgICAgICB9IGVsc2UgZGlzcGF0Y2hFdmVudChVTkhBTkRMRURfUkVKRUNUSU9OLCBwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIC8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkXG4gICAgICBzdGF0ZS5yZWplY3Rpb24gPSBJU19OT0RFIHx8IGlzVW5oYW5kbGVkKHN0YXRlKSA/IFVOSEFORExFRCA6IEhBTkRMRUQ7XG4gICAgICBpZiAocmVzdWx0LmVycm9yKSB0aHJvdyByZXN1bHQudmFsdWU7XG4gICAgfVxuICB9KTtcbn07XG5cbnZhciBpc1VuaGFuZGxlZCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICByZXR1cm4gc3RhdGUucmVqZWN0aW9uICE9PSBIQU5ETEVEICYmICFzdGF0ZS5wYXJlbnQ7XG59O1xuXG52YXIgb25IYW5kbGVVbmhhbmRsZWQgPSBmdW5jdGlvbiAocHJvbWlzZSwgc3RhdGUpIHtcbiAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24gKCkge1xuICAgIGlmIChJU19OT0RFKSB7XG4gICAgICBwcm9jZXNzLmVtaXQoJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlKTtcbiAgICB9IGVsc2UgZGlzcGF0Y2hFdmVudChSRUpFQ1RJT05fSEFORExFRCwgcHJvbWlzZSwgc3RhdGUudmFsdWUpO1xuICB9KTtcbn07XG5cbnZhciBiaW5kID0gZnVuY3Rpb24gKGZuLCBwcm9taXNlLCBzdGF0ZSwgdW53cmFwKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBmbihwcm9taXNlLCBzdGF0ZSwgdmFsdWUsIHVud3JhcCk7XG4gIH07XG59O1xuXG52YXIgaW50ZXJuYWxSZWplY3QgPSBmdW5jdGlvbiAocHJvbWlzZSwgc3RhdGUsIHZhbHVlLCB1bndyYXApIHtcbiAgaWYgKHN0YXRlLmRvbmUpIHJldHVybjtcbiAgc3RhdGUuZG9uZSA9IHRydWU7XG4gIGlmICh1bndyYXApIHN0YXRlID0gdW53cmFwO1xuICBzdGF0ZS52YWx1ZSA9IHZhbHVlO1xuICBzdGF0ZS5zdGF0ZSA9IFJFSkVDVEVEO1xuICBub3RpZnkocHJvbWlzZSwgc3RhdGUsIHRydWUpO1xufTtcblxudmFyIGludGVybmFsUmVzb2x2ZSA9IGZ1bmN0aW9uIChwcm9taXNlLCBzdGF0ZSwgdmFsdWUsIHVud3JhcCkge1xuICBpZiAoc3RhdGUuZG9uZSkgcmV0dXJuO1xuICBzdGF0ZS5kb25lID0gdHJ1ZTtcbiAgaWYgKHVud3JhcCkgc3RhdGUgPSB1bndyYXA7XG4gIHRyeSB7XG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB0aHJvdyBUeXBlRXJyb3IoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTtcbiAgICB2YXIgdGhlbiA9IGlzVGhlbmFibGUodmFsdWUpO1xuICAgIGlmICh0aGVuKSB7XG4gICAgICBtaWNyb3Rhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd3JhcHBlciA9IHsgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsXG4gICAgICAgICAgICBiaW5kKGludGVybmFsUmVzb2x2ZSwgcHJvbWlzZSwgd3JhcHBlciwgc3RhdGUpLFxuICAgICAgICAgICAgYmluZChpbnRlcm5hbFJlamVjdCwgcHJvbWlzZSwgd3JhcHBlciwgc3RhdGUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBpbnRlcm5hbFJlamVjdChwcm9taXNlLCB3cmFwcGVyLCBlcnJvciwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHN0YXRlLnN0YXRlID0gRlVMRklMTEVEO1xuICAgICAgbm90aWZ5KHByb21pc2UsIHN0YXRlLCBmYWxzZSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGludGVybmFsUmVqZWN0KHByb21pc2UsIHsgZG9uZTogZmFsc2UgfSwgZXJyb3IsIHN0YXRlKTtcbiAgfVxufTtcblxuLy8gY29uc3RydWN0b3IgcG9seWZpbGxcbmlmIChGT1JDRUQpIHtcbiAgLy8gMjUuNC4zLjEgUHJvbWlzZShleGVjdXRvcilcbiAgUHJvbWlzZUNvbnN0cnVjdG9yID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcikge1xuICAgIGFuSW5zdGFuY2UodGhpcywgUHJvbWlzZUNvbnN0cnVjdG9yLCBQUk9NSVNFKTtcbiAgICBhRnVuY3Rpb24oZXhlY3V0b3IpO1xuICAgIEludGVybmFsLmNhbGwodGhpcyk7XG4gICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZSh0aGlzKTtcbiAgICB0cnkge1xuICAgICAgZXhlY3V0b3IoYmluZChpbnRlcm5hbFJlc29sdmUsIHRoaXMsIHN0YXRlKSwgYmluZChpbnRlcm5hbFJlamVjdCwgdGhpcywgc3RhdGUpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaW50ZXJuYWxSZWplY3QodGhpcywgc3RhdGUsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBJbnRlcm5hbCA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHtcbiAgICBzZXRJbnRlcm5hbFN0YXRlKHRoaXMsIHtcbiAgICAgIHR5cGU6IFBST01JU0UsXG4gICAgICBkb25lOiBmYWxzZSxcbiAgICAgIG5vdGlmaWVkOiBmYWxzZSxcbiAgICAgIHBhcmVudDogZmFsc2UsXG4gICAgICByZWFjdGlvbnM6IFtdLFxuICAgICAgcmVqZWN0aW9uOiBmYWxzZSxcbiAgICAgIHN0YXRlOiBQRU5ESU5HLFxuICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgIH0pO1xuICB9O1xuICBJbnRlcm5hbC5wcm90b3R5cGUgPSByZWRlZmluZUFsbChQcm9taXNlQ29uc3RydWN0b3IucHJvdG90eXBlLCB7XG4gICAgLy8gYFByb21pc2UucHJvdG90eXBlLnRoZW5gIG1ldGhvZFxuICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXByb21pc2UucHJvdG90eXBlLnRoZW5cbiAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gICAgICB2YXIgc3RhdGUgPSBnZXRJbnRlcm5hbFByb21pc2VTdGF0ZSh0aGlzKTtcbiAgICAgIHZhciByZWFjdGlvbiA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCBQcm9taXNlQ29uc3RydWN0b3IpKTtcbiAgICAgIHJlYWN0aW9uLm9rID0gdHlwZW9mIG9uRnVsZmlsbGVkID09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IHRydWU7XG4gICAgICByZWFjdGlvbi5mYWlsID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT0gJ2Z1bmN0aW9uJyAmJiBvblJlamVjdGVkO1xuICAgICAgcmVhY3Rpb24uZG9tYWluID0gSVNfTk9ERSA/IHByb2Nlc3MuZG9tYWluIDogdW5kZWZpbmVkO1xuICAgICAgc3RhdGUucGFyZW50ID0gdHJ1ZTtcbiAgICAgIHN0YXRlLnJlYWN0aW9ucy5wdXNoKHJlYWN0aW9uKTtcbiAgICAgIGlmIChzdGF0ZS5zdGF0ZSAhPSBQRU5ESU5HKSBub3RpZnkodGhpcywgc3RhdGUsIGZhbHNlKTtcbiAgICAgIHJldHVybiByZWFjdGlvbi5wcm9taXNlO1xuICAgIH0sXG4gICAgLy8gYFByb21pc2UucHJvdG90eXBlLmNhdGNoYCBtZXRob2RcbiAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1wcm9taXNlLnByb3RvdHlwZS5jYXRjaFxuICAgICdjYXRjaCc6IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7XG4gICAgfVxuICB9KTtcbiAgT3duUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgSW50ZXJuYWwoKTtcbiAgICB2YXIgc3RhdGUgPSBnZXRJbnRlcm5hbFN0YXRlKHByb21pc2UpO1xuICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG4gICAgdGhpcy5yZXNvbHZlID0gYmluZChpbnRlcm5hbFJlc29sdmUsIHByb21pc2UsIHN0YXRlKTtcbiAgICB0aGlzLnJlamVjdCA9IGJpbmQoaW50ZXJuYWxSZWplY3QsIHByb21pc2UsIHN0YXRlKTtcbiAgfTtcbiAgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUuZiA9IG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24gKEMpIHtcbiAgICByZXR1cm4gQyA9PT0gUHJvbWlzZUNvbnN0cnVjdG9yIHx8IEMgPT09IFByb21pc2VXcmFwcGVyXG4gICAgICA/IG5ldyBPd25Qcm9taXNlQ2FwYWJpbGl0eShDKVxuICAgICAgOiBuZXdHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkoQyk7XG4gIH07XG5cbiAgaWYgKCFJU19QVVJFICYmIHR5cGVvZiBOYXRpdmVQcm9taXNlID09ICdmdW5jdGlvbicpIHtcbiAgICBuYXRpdmVUaGVuID0gTmF0aXZlUHJvbWlzZS5wcm90b3R5cGUudGhlbjtcblxuICAgIC8vIHdyYXAgbmF0aXZlIFByb21pc2UjdGhlbiBmb3IgbmF0aXZlIGFzeW5jIGZ1bmN0aW9uc1xuICAgIHJlZGVmaW5lKE5hdGl2ZVByb21pc2UucHJvdG90eXBlLCAndGhlbicsIGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZUNvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgbmF0aXZlVGhlbi5jYWxsKHRoYXQsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9KS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvNjQwXG4gICAgfSwgeyB1bnNhZmU6IHRydWUgfSk7XG5cbiAgICAvLyB3cmFwIGZldGNoIHJlc3VsdFxuICAgIGlmICh0eXBlb2YgJGZldGNoID09ICdmdW5jdGlvbicpICQoeyBnbG9iYWw6IHRydWUsIGVudW1lcmFibGU6IHRydWUsIGZvcmNlZDogdHJ1ZSB9LCB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAgIGZldGNoOiBmdW5jdGlvbiBmZXRjaChpbnB1dCAvKiAsIGluaXQgKi8pIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlKFByb21pc2VDb25zdHJ1Y3RvciwgJGZldGNoLmFwcGx5KGdsb2JhbCwgYXJndW1lbnRzKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuJCh7IGdsb2JhbDogdHJ1ZSwgd3JhcDogdHJ1ZSwgZm9yY2VkOiBGT1JDRUQgfSwge1xuICBQcm9taXNlOiBQcm9taXNlQ29uc3RydWN0b3Jcbn0pO1xuXG5zZXRUb1N0cmluZ1RhZyhQcm9taXNlQ29uc3RydWN0b3IsIFBST01JU0UsIGZhbHNlLCB0cnVlKTtcbnNldFNwZWNpZXMoUFJPTUlTRSk7XG5cblByb21pc2VXcmFwcGVyID0gZ2V0QnVpbHRJbihQUk9NSVNFKTtcblxuLy8gc3RhdGljc1xuJCh7IHRhcmdldDogUFJPTUlTRSwgc3RhdDogdHJ1ZSwgZm9yY2VkOiBGT1JDRUQgfSwge1xuICAvLyBgUHJvbWlzZS5yZWplY3RgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1wcm9taXNlLnJlamVjdFxuICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyKSB7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKTtcbiAgICBjYXBhYmlsaXR5LnJlamVjdC5jYWxsKHVuZGVmaW5lZCwgcik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7XG5cbiQoeyB0YXJnZXQ6IFBST01JU0UsIHN0YXQ6IHRydWUsIGZvcmNlZDogSVNfUFVSRSB8fCBGT1JDRUQgfSwge1xuICAvLyBgUHJvbWlzZS5yZXNvbHZlYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtcHJvbWlzZS5yZXNvbHZlXG4gIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUoeCkge1xuICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZShJU19QVVJFICYmIHRoaXMgPT09IFByb21pc2VXcmFwcGVyID8gUHJvbWlzZUNvbnN0cnVjdG9yIDogdGhpcywgeCk7XG4gIH1cbn0pO1xuXG4kKHsgdGFyZ2V0OiBQUk9NSVNFLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IElOQ09SUkVDVF9JVEVSQVRJT04gfSwge1xuICAvLyBgUHJvbWlzZS5hbGxgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1wcm9taXNlLmFsbFxuICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSkge1xuICAgIHZhciBDID0gdGhpcztcbiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpO1xuICAgIHZhciByZXNvbHZlID0gY2FwYWJpbGl0eS5yZXNvbHZlO1xuICAgIHZhciByZWplY3QgPSBjYXBhYmlsaXR5LnJlamVjdDtcbiAgICB2YXIgcmVzdWx0ID0gcGVyZm9ybShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHByb21pc2VSZXNvbHZlID0gYUZ1bmN0aW9uKEMucmVzb2x2ZSk7XG4gICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICB2YXIgcmVtYWluaW5nID0gMTtcbiAgICAgIGl0ZXJhdGUoaXRlcmFibGUsIGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGNvdW50ZXIrKztcbiAgICAgICAgdmFyIGFscmVhZHlDYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFsdWVzLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgcmVtYWluaW5nKys7XG4gICAgICAgICRwcm9taXNlUmVzb2x2ZS5jYWxsKEMsIHByb21pc2UpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKGFscmVhZHlDYWxsZWQpIHJldHVybjtcbiAgICAgICAgICBhbHJlYWR5Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7XG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdC5lcnJvcikgcmVqZWN0KHJlc3VsdC52YWx1ZSk7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfSxcbiAgLy8gYFByb21pc2UucmFjZWAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXByb21pc2UucmFjZVxuICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKSB7XG4gICAgdmFyIEMgPSB0aGlzO1xuICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQyk7XG4gICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkcHJvbWlzZVJlc29sdmUgPSBhRnVuY3Rpb24oQy5yZXNvbHZlKTtcbiAgICAgIGl0ZXJhdGUoaXRlcmFibGUsIGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgICRwcm9taXNlUmVzb2x2ZS5jYWxsKEMsIHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdC5lcnJvcikgcmVqZWN0KHJlc3VsdC52YWx1ZSk7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGl0KSArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgfSByZXR1cm4gaXQ7XG59O1xuIiwidmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWZ1bmN0aW9uJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBTUEVDSUVTID0gd2VsbEtub3duU3ltYm9sKCdzcGVjaWVzJyk7XG5cbi8vIGBTcGVjaWVzQ29uc3RydWN0b3JgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtc3BlY2llc2NvbnN0cnVjdG9yXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChPLCBkZWZhdWx0Q29uc3RydWN0b3IpIHtcbiAgdmFyIEMgPSBhbk9iamVjdChPKS5jb25zdHJ1Y3RvcjtcbiAgdmFyIFM7XG4gIHJldHVybiBDID09PSB1bmRlZmluZWQgfHwgKFMgPSBhbk9iamVjdChDKVtTUEVDSUVTXSkgPT0gdW5kZWZpbmVkID8gZGVmYXVsdENvbnN0cnVjdG9yIDogYUZ1bmN0aW9uKFMpO1xufTtcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsInZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcblxudmFyIHNwbGl0ID0gJycuc3BsaXQ7XG5cbi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXG5tb2R1bGUuZXhwb3J0cyA9IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gdGhyb3dzIGFuIGVycm9yIGluIHJoaW5vLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvcmhpbm8vaXNzdWVzLzM0NlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gIHJldHVybiAhT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCk7XG59KSA/IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gY2xhc3NvZihpdCkgPT0gJ1N0cmluZycgPyBzcGxpdC5jYWxsKGl0LCAnJykgOiBPYmplY3QoaXQpO1xufSA6IE9iamVjdDtcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcblxuLy8gYFRvUHJpbWl0aXZlYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvcHJpbWl0aXZlXG4vLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZVxuLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmdcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGlucHV0LCBQUkVGRVJSRURfU1RSSU5HKSB7XG4gIGlmICghaXNPYmplY3QoaW5wdXQpKSByZXR1cm4gaW5wdXQ7XG4gIHZhciBmbiwgdmFsO1xuICBpZiAoUFJFRkVSUkVEX1NUUklORyAmJiB0eXBlb2YgKGZuID0gaW5wdXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaW5wdXQpKSkgcmV0dXJuIHZhbDtcbiAgaWYgKHR5cGVvZiAoZm4gPSBpbnB1dC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGlucHV0KSkpIHJldHVybiB2YWw7XG4gIGlmICghUFJFRkVSUkVEX1NUUklORyAmJiB0eXBlb2YgKGZuID0gaW5wdXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaW5wdXQpKSkgcmV0dXJuIHZhbDtcbiAgdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpO1xufTtcbiIsInZhciBpZCA9IDA7XG52YXIgcG9zdGZpeCA9IE1hdGgucmFuZG9tKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSkge1xuICByZXR1cm4gJ1N5bWJvbCgnICsgU3RyaW5nKGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXkpICsgJylfJyArICgrK2lkICsgcG9zdGZpeCkudG9TdHJpbmcoMzYpO1xufTtcbiIsInZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBkZWZpbmVQcm9wZXJ0aWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydGllcycpO1xudmFyIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VudW0tYnVnLWtleXMnKTtcbnZhciBoaWRkZW5LZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hpZGRlbi1rZXlzJyk7XG52YXIgaHRtbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9odG1sJyk7XG52YXIgZG9jdW1lbnRDcmVhdGVFbGVtZW50ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RvY3VtZW50LWNyZWF0ZS1lbGVtZW50Jyk7XG52YXIgc2hhcmVkS2V5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZC1rZXknKTtcblxudmFyIEdUID0gJz4nO1xudmFyIExUID0gJzwnO1xudmFyIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnO1xudmFyIFNDUklQVCA9ICdzY3JpcHQnO1xudmFyIElFX1BST1RPID0gc2hhcmVkS2V5KCdJRV9QUk9UTycpO1xuXG52YXIgRW1wdHlDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfTtcblxudmFyIHNjcmlwdFRhZyA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gIHJldHVybiBMVCArIFNDUklQVCArIEdUICsgY29udGVudCArIExUICsgJy8nICsgU0NSSVBUICsgR1Q7XG59O1xuXG4vLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgQWN0aXZlWCBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZVxudmFyIE51bGxQcm90b09iamVjdFZpYUFjdGl2ZVggPSBmdW5jdGlvbiAoYWN0aXZlWERvY3VtZW50KSB7XG4gIGFjdGl2ZVhEb2N1bWVudC53cml0ZShzY3JpcHRUYWcoJycpKTtcbiAgYWN0aXZlWERvY3VtZW50LmNsb3NlKCk7XG4gIHZhciB0ZW1wID0gYWN0aXZlWERvY3VtZW50LnBhcmVudFdpbmRvdy5PYmplY3Q7XG4gIGFjdGl2ZVhEb2N1bWVudCA9IG51bGw7IC8vIGF2b2lkIG1lbW9yeSBsZWFrXG4gIHJldHVybiB0ZW1wO1xufTtcblxuLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZVxudmFyIE51bGxQcm90b09iamVjdFZpYUlGcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gVGhyYXNoLCB3YXN0ZSBhbmQgc29kb215OiBJRSBHQyBidWdcbiAgdmFyIGlmcmFtZSA9IGRvY3VtZW50Q3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gIHZhciBKUyA9ICdqYXZhJyArIFNDUklQVCArICc6JztcbiAgdmFyIGlmcmFtZURvY3VtZW50O1xuICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgaHRtbC5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvNDc1XG4gIGlmcmFtZS5zcmMgPSBTdHJpbmcoSlMpO1xuICBpZnJhbWVEb2N1bWVudCA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50O1xuICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7XG4gIGlmcmFtZURvY3VtZW50LndyaXRlKHNjcmlwdFRhZygnZG9jdW1lbnQuRj1PYmplY3QnKSk7XG4gIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7XG4gIHJldHVybiBpZnJhbWVEb2N1bWVudC5GO1xufTtcblxuLy8gQ2hlY2sgZm9yIGRvY3VtZW50LmRvbWFpbiBhbmQgYWN0aXZlIHggc3VwcG9ydFxuLy8gTm8gbmVlZCB0byB1c2UgYWN0aXZlIHggYXBwcm9hY2ggd2hlbiBkb2N1bWVudC5kb21haW4gaXMgbm90IHNldFxuLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbS9pc3N1ZXMvMTUwXG4vLyB2YXJpYXRpb24gb2YgaHR0cHM6Ly9naXRodWIuY29tL2tpdGNhbWJyaWRnZS9lczUtc2hpbS9jb21taXQvNGY3MzhhYzA2NjM0NlxuLy8gYXZvaWQgSUUgR0MgYnVnXG52YXIgYWN0aXZlWERvY3VtZW50O1xudmFyIE51bGxQcm90b09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICAvKiBnbG9iYWwgQWN0aXZlWE9iamVjdCAqL1xuICAgIGFjdGl2ZVhEb2N1bWVudCA9IGRvY3VtZW50LmRvbWFpbiAmJiBuZXcgQWN0aXZlWE9iamVjdCgnaHRtbGZpbGUnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogaWdub3JlICovIH1cbiAgTnVsbFByb3RvT2JqZWN0ID0gYWN0aXZlWERvY3VtZW50ID8gTnVsbFByb3RvT2JqZWN0VmlhQWN0aXZlWChhY3RpdmVYRG9jdW1lbnQpIDogTnVsbFByb3RvT2JqZWN0VmlhSUZyYW1lKCk7XG4gIHZhciBsZW5ndGggPSBlbnVtQnVnS2V5cy5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkgZGVsZXRlIE51bGxQcm90b09iamVjdFtQUk9UT1RZUEVdW2VudW1CdWdLZXlzW2xlbmd0aF1dO1xuICByZXR1cm4gTnVsbFByb3RvT2JqZWN0KCk7XG59O1xuXG5oaWRkZW5LZXlzW0lFX1BST1RPXSA9IHRydWU7XG5cbi8vIGBPYmplY3QuY3JlYXRlYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5jcmVhdGVcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBjcmVhdGUoTywgUHJvcGVydGllcykge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoTyAhPT0gbnVsbCkge1xuICAgIEVtcHR5Q29uc3RydWN0b3JbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pO1xuICAgIHJlc3VsdCA9IG5ldyBFbXB0eUNvbnN0cnVjdG9yKCk7XG4gICAgRW1wdHlDb25zdHJ1Y3RvcltQUk9UT1RZUEVdID0gbnVsbDtcbiAgICAvLyBhZGQgXCJfX3Byb3RvX19cIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsXG4gICAgcmVzdWx0W0lFX1BST1RPXSA9IE87XG4gIH0gZWxzZSByZXN1bHQgPSBOdWxsUHJvdG9PYmplY3QoKTtcbiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRlZmluZVByb3BlcnRpZXMocmVzdWx0LCBQcm9wZXJ0aWVzKTtcbn07XG4iLCJ2YXIgaW50ZXJuYWxPYmplY3RLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1rZXlzLWludGVybmFsJyk7XG52YXIgZW51bUJ1Z0tleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW51bS1idWcta2V5cycpO1xuXG4vLyBgT2JqZWN0LmtleXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LmtleXNcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKSB7XG4gIHJldHVybiBpbnRlcm5hbE9iamVjdEtleXMoTywgZW51bUJ1Z0tleXMpO1xufTtcbiIsInZhciB0b0luZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW5kZXhlZC1vYmplY3QnKTtcbnZhciB0b0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1sZW5ndGgnKTtcbnZhciB0b0Fic29sdXRlSW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tYWJzb2x1dGUtaW5kZXgnKTtcblxuLy8gYEFycmF5LnByb3RvdHlwZS57IGluZGV4T2YsIGluY2x1ZGVzIH1gIG1ldGhvZHMgaW1wbGVtZW50YXRpb25cbnZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoSVNfSU5DTFVERVMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgkdGhpcywgZWwsIGZyb21JbmRleCkge1xuICAgIHZhciBPID0gdG9JbmRleGVkT2JqZWN0KCR0aGlzKTtcbiAgICB2YXIgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpO1xuICAgIHZhciBpbmRleCA9IHRvQWJzb2x1dGVJbmRleChmcm9tSW5kZXgsIGxlbmd0aCk7XG4gICAgdmFyIHZhbHVlO1xuICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgaWYgKElTX0lOQ0xVREVTICYmIGVsICE9IGVsKSB3aGlsZSAobGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgIHZhbHVlID0gT1tpbmRleCsrXTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICAgIGlmICh2YWx1ZSAhPSB2YWx1ZSkgcmV0dXJuIHRydWU7XG4gICAgLy8gQXJyYXkjaW5kZXhPZiBpZ25vcmVzIGhvbGVzLCBBcnJheSNpbmNsdWRlcyAtIG5vdFxuICAgIH0gZWxzZSBmb3IgKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKykge1xuICAgICAgaWYgKChJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKSAmJiBPW2luZGV4XSA9PT0gZWwpIHJldHVybiBJU19JTkNMVURFUyB8fCBpbmRleCB8fCAwO1xuICAgIH0gcmV0dXJuICFJU19JTkNMVURFUyAmJiAtMTtcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBgQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmluY2x1ZGVzXG4gIGluY2x1ZGVzOiBjcmVhdGVNZXRob2QodHJ1ZSksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuaW5kZXhPZmAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5pbmRleG9mXG4gIGluZGV4T2Y6IGNyZWF0ZU1ldGhvZChmYWxzZSlcbn07XG4iLCJ2YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWludGVnZXInKTtcblxudmFyIG1heCA9IE1hdGgubWF4O1xudmFyIG1pbiA9IE1hdGgubWluO1xuXG4vLyBIZWxwZXIgZm9yIGEgcG9wdWxhciByZXBlYXRpbmcgY2FzZSBvZiB0aGUgc3BlYzpcbi8vIExldCBpbnRlZ2VyIGJlID8gVG9JbnRlZ2VyKGluZGV4KS5cbi8vIElmIGludGVnZXIgPCAwLCBsZXQgcmVzdWx0IGJlIG1heCgobGVuZ3RoICsgaW50ZWdlciksIDApOyBlbHNlIGxldCByZXN1bHQgYmUgbWluKGludGVnZXIsIGxlbmd0aCkuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpbmRleCwgbGVuZ3RoKSB7XG4gIHZhciBpbnRlZ2VyID0gdG9JbnRlZ2VyKGluZGV4KTtcbiAgcmV0dXJuIGludGVnZXIgPCAwID8gbWF4KGludGVnZXIgKyBsZW5ndGgsIDApIDogbWluKGludGVnZXIsIGxlbmd0aCk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7fTtcbiIsInZhciBzaGFyZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkJyk7XG52YXIgdWlkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3VpZCcpO1xuXG52YXIga2V5cyA9IHNoYXJlZCgna2V5cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgcmV0dXJuIGtleXNba2V5XSB8fCAoa2V5c1trZXldID0gdWlkKGtleSkpO1xufTtcbiIsInZhciBoYXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzJyk7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tb2JqZWN0Jyk7XG52YXIgc2hhcmVkS2V5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZC1rZXknKTtcbnZhciBDT1JSRUNUX1BST1RPVFlQRV9HRVRURVIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY29ycmVjdC1wcm90b3R5cGUtZ2V0dGVyJyk7XG5cbnZhciBJRV9QUk9UTyA9IHNoYXJlZEtleSgnSUVfUFJPVE8nKTtcbnZhciBPYmplY3RQcm90b3R5cGUgPSBPYmplY3QucHJvdG90eXBlO1xuXG4vLyBgT2JqZWN0LmdldFByb3RvdHlwZU9mYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5nZXRwcm90b3R5cGVvZlxubW9kdWxlLmV4cG9ydHMgPSBDT1JSRUNUX1BST1RPVFlQRV9HRVRURVIgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiAoTykge1xuICBPID0gdG9PYmplY3QoTyk7XG4gIGlmIChoYXMoTywgSUVfUFJPVE8pKSByZXR1cm4gT1tJRV9QUk9UT107XG4gIGlmICh0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIE8uY29uc3RydWN0b3IucHJvdG90eXBlO1xuICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG90eXBlIDogbnVsbDtcbn07XG4iLCJ2YXIgVE9fU1RSSU5HX1RBR19TVVBQT1JUID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZy10YWctc3VwcG9ydCcpO1xudmFyIGNsYXNzb2ZSYXcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIFRPX1NUUklOR19UQUcgPSB3ZWxsS25vd25TeW1ib2woJ3RvU3RyaW5nVGFnJyk7XG4vLyBFUzMgd3JvbmcgaGVyZVxudmFyIENPUlJFQ1RfQVJHVU1FTlRTID0gY2xhc3NvZlJhdyhmdW5jdGlvbiAoKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSkgPT0gJ0FyZ3VtZW50cyc7XG5cbi8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yXG52YXIgdHJ5R2V0ID0gZnVuY3Rpb24gKGl0LCBrZXkpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaXRba2V5XTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxufTtcblxuLy8gZ2V0dGluZyB0YWcgZnJvbSBFUzYrIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYFxubW9kdWxlLmV4cG9ydHMgPSBUT19TVFJJTkdfVEFHX1NVUFBPUlQgPyBjbGFzc29mUmF3IDogZnVuY3Rpb24gKGl0KSB7XG4gIHZhciBPLCB0YWcsIHJlc3VsdDtcbiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnXG4gICAgLy8gQEB0b1N0cmluZ1RhZyBjYXNlXG4gICAgOiB0eXBlb2YgKHRhZyA9IHRyeUdldChPID0gT2JqZWN0KGl0KSwgVE9fU1RSSU5HX1RBRykpID09ICdzdHJpbmcnID8gdGFnXG4gICAgLy8gYnVpbHRpblRhZyBjYXNlXG4gICAgOiBDT1JSRUNUX0FSR1VNRU5UUyA/IGNsYXNzb2ZSYXcoTylcbiAgICAvLyBFUzMgYXJndW1lbnRzIGZhbGxiYWNrXG4gICAgOiAocmVzdWx0ID0gY2xhc3NvZlJhdyhPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IHJlc3VsdDtcbn07XG4iLCJ2YXIgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2EtZnVuY3Rpb24nKTtcblxuLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmbiwgdGhhdCwgbGVuZ3RoKSB7XG4gIGFGdW5jdGlvbihmbik7XG4gIGlmICh0aGF0ID09PSB1bmRlZmluZWQpIHJldHVybiBmbjtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIDA6IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0KTtcbiAgICB9O1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTtcbiAgICB9O1xuICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoLyogLi4uYXJncyAqLykge1xuICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICB9O1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgRE9NSXRlcmFibGVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RvbS1pdGVyYWJsZXMnKTtcbnZhciBBcnJheUl0ZXJhdG9yTWV0aG9kcyA9IHJlcXVpcmUoJy4uL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3InKTtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBJVEVSQVRPUiA9IHdlbGxLbm93blN5bWJvbCgnaXRlcmF0b3InKTtcbnZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sKCd0b1N0cmluZ1RhZycpO1xudmFyIEFycmF5VmFsdWVzID0gQXJyYXlJdGVyYXRvck1ldGhvZHMudmFsdWVzO1xuXG5mb3IgKHZhciBDT0xMRUNUSU9OX05BTUUgaW4gRE9NSXRlcmFibGVzKSB7XG4gIHZhciBDb2xsZWN0aW9uID0gZ2xvYmFsW0NPTExFQ1RJT05fTkFNRV07XG4gIHZhciBDb2xsZWN0aW9uUHJvdG90eXBlID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTtcbiAgaWYgKENvbGxlY3Rpb25Qcm90b3R5cGUpIHtcbiAgICAvLyBzb21lIENocm9tZSB2ZXJzaW9ucyBoYXZlIG5vbi1jb25maWd1cmFibGUgbWV0aG9kcyBvbiBET01Ub2tlbkxpc3RcbiAgICBpZiAoQ29sbGVjdGlvblByb3RvdHlwZVtJVEVSQVRPUl0gIT09IEFycmF5VmFsdWVzKSB0cnkge1xuICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KENvbGxlY3Rpb25Qcm90b3R5cGUsIElURVJBVE9SLCBBcnJheVZhbHVlcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIENvbGxlY3Rpb25Qcm90b3R5cGVbSVRFUkFUT1JdID0gQXJyYXlWYWx1ZXM7XG4gICAgfVxuICAgIGlmICghQ29sbGVjdGlvblByb3RvdHlwZVtUT19TVFJJTkdfVEFHXSkge1xuICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KENvbGxlY3Rpb25Qcm90b3R5cGUsIFRPX1NUUklOR19UQUcsIENPTExFQ1RJT05fTkFNRSk7XG4gICAgfVxuICAgIGlmIChET01JdGVyYWJsZXNbQ09MTEVDVElPTl9OQU1FXSkgZm9yICh2YXIgTUVUSE9EX05BTUUgaW4gQXJyYXlJdGVyYXRvck1ldGhvZHMpIHtcbiAgICAgIC8vIHNvbWUgQ2hyb21lIHZlcnNpb25zIGhhdmUgbm9uLWNvbmZpZ3VyYWJsZSBtZXRob2RzIG9uIERPTVRva2VuTGlzdFxuICAgICAgaWYgKENvbGxlY3Rpb25Qcm90b3R5cGVbTUVUSE9EX05BTUVdICE9PSBBcnJheUl0ZXJhdG9yTWV0aG9kc1tNRVRIT0RfTkFNRV0pIHRyeSB7XG4gICAgICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eShDb2xsZWN0aW9uUHJvdG90eXBlLCBNRVRIT0RfTkFNRSwgQXJyYXlJdGVyYXRvck1ldGhvZHNbTUVUSE9EX05BTUVdKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIENvbGxlY3Rpb25Qcm90b3R5cGVbTUVUSE9EX05BTUVdID0gQXJyYXlJdGVyYXRvck1ldGhvZHNbTUVUSE9EX05BTUVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwidmFyIElTX1BVUkUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtcHVyZScpO1xudmFyIHN0b3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZC1zdG9yZScpO1xuXG4obW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IHt9KTtcbn0pKCd2ZXJzaW9ucycsIFtdKS5wdXNoKHtcbiAgdmVyc2lvbjogJzMuNi40JyxcbiAgbW9kZTogSVNfUFVSRSA/ICdwdXJlJyA6ICdnbG9iYWwnLFxuICBjb3B5cmlnaHQ6ICfCqSAyMDIwIERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpJ1xufSk7XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtbm9uLWVudW1lcmFibGUtcHJvcGVydHknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICB0cnkge1xuICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eShnbG9iYWwsIGtleSwgdmFsdWUpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGdsb2JhbFtrZXldID0gdmFsdWU7XG4gIH0gcmV0dXJuIHZhbHVlO1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtb2JqZWN0Jyk7XG5cbnZhciBkb2N1bWVudCA9IGdsb2JhbC5kb2N1bWVudDtcbi8vIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnIGluIG9sZCBJRVxudmFyIEVYSVNUUyA9IGlzT2JqZWN0KGRvY3VtZW50KSAmJiBpc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIEVYSVNUUyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXQpIDoge307XG59O1xuIiwidmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gISFPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICYmICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIC8vIENocm9tZSAzOCBTeW1ib2wgaGFzIGluY29ycmVjdCB0b1N0cmluZyBjb252ZXJzaW9uXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICByZXR1cm4gIVN0cmluZyhTeW1ib2woKSk7XG59KTtcbiIsIi8vIElFOC0gZG9uJ3QgZW51bSBidWcga2V5c1xubW9kdWxlLmV4cG9ydHMgPSBbXG4gICdjb25zdHJ1Y3RvcicsXG4gICdoYXNPd25Qcm9wZXJ0eScsXG4gICdpc1Byb3RvdHlwZU9mJyxcbiAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcbiAgJ3RvTG9jYWxlU3RyaW5nJyxcbiAgJ3RvU3RyaW5nJyxcbiAgJ3ZhbHVlT2YnXG5dO1xuIiwidmFyIHN0b3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZC1zdG9yZScpO1xuXG52YXIgZnVuY3Rpb25Ub1N0cmluZyA9IEZ1bmN0aW9uLnRvU3RyaW5nO1xuXG4vLyB0aGlzIGhlbHBlciBicm9rZW4gaW4gYDMuNC4xLTMuNC40YCwgc28gd2UgY2FuJ3QgdXNlIGBzaGFyZWRgIGhlbHBlclxuaWYgKHR5cGVvZiBzdG9yZS5pbnNwZWN0U291cmNlICE9ICdmdW5jdGlvbicpIHtcbiAgc3RvcmUuaW5zcGVjdFNvdXJjZSA9IGZ1bmN0aW9uIChpdCkge1xuICAgIHJldHVybiBmdW5jdGlvblRvU3RyaW5nLmNhbGwoaXQpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0b3JlLmluc3BlY3RTb3VyY2U7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgbmF0aXZlUHJvcGVydHlJc0VudW1lcmFibGUgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXG4vLyBOYXNob3JuIH4gSkRLOCBidWdcbnZhciBOQVNIT1JOX0JVRyA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvciAmJiAhbmF0aXZlUHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh7IDE6IDIgfSwgMSk7XG5cbi8vIGBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlYCBtZXRob2QgaW1wbGVtZW50YXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5wcm90b3R5cGUucHJvcGVydHlpc2VudW1lcmFibGVcbmV4cG9ydHMuZiA9IE5BU0hPUk5fQlVHID8gZnVuY3Rpb24gcHJvcGVydHlJc0VudW1lcmFibGUoVikge1xuICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0aGlzLCBWKTtcbiAgcmV0dXJuICEhZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLmVudW1lcmFibGU7XG59IDogbmF0aXZlUHJvcGVydHlJc0VudW1lcmFibGU7XG4iLCJleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuIiwidmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgVE9fU1RSSU5HX1RBRyA9IHdlbGxLbm93blN5bWJvbCgndG9TdHJpbmdUYWcnKTtcbnZhciB0ZXN0ID0ge307XG5cbnRlc3RbVE9fU1RSSU5HX1RBR10gPSAneic7XG5cbm1vZHVsZS5leHBvcnRzID0gU3RyaW5nKHRlc3QpID09PSAnW29iamVjdCB6XSc7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgQ29uc3RydWN0b3IsIG5hbWUpIHtcbiAgaWYgKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ0luY29ycmVjdCAnICsgKG5hbWUgPyBuYW1lICsgJyAnIDogJycpICsgJ2ludm9jYXRpb24nKTtcbiAgfSByZXR1cm4gaXQ7XG59O1xuIiwidmFyIGNyZWF0ZVR5cGVkQXJyYXlDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90eXBlZC1hcnJheS1jb25zdHJ1Y3RvcicpO1xuXG4vLyBgVWludDhBcnJheWAgY29uc3RydWN0b3Jcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXR5cGVkYXJyYXktb2JqZWN0c1xuY3JlYXRlVHlwZWRBcnJheUNvbnN0cnVjdG9yKCdVaW50OCcsIGZ1bmN0aW9uIChpbml0KSB7XG4gIHJldHVybiBmdW5jdGlvbiBVaW50OEFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG4gIH07XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBBcnJheUJ1ZmZlclZpZXdDb3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKTtcbnZhciAkY29weVdpdGhpbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1jb3B5LXdpdGhpbicpO1xuXG52YXIgYVR5cGVkQXJyYXkgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmFUeXBlZEFycmF5O1xudmFyIGV4cG9ydFR5cGVkQXJyYXlNZXRob2QgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmV4cG9ydFR5cGVkQXJyYXlNZXRob2Q7XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLmNvcHlXaXRoaW5gIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJXR5cGVkYXJyYXklLnByb3RvdHlwZS5jb3B5d2l0aGluXG5leHBvcnRUeXBlZEFycmF5TWV0aG9kKCdjb3B5V2l0aGluJywgZnVuY3Rpb24gY29weVdpdGhpbih0YXJnZXQsIHN0YXJ0IC8qICwgZW5kICovKSB7XG4gIHJldHVybiAkY29weVdpdGhpbi5jYWxsKGFUeXBlZEFycmF5KHRoaXMpLCB0YXJnZXQsIHN0YXJ0LCBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZCk7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBBcnJheUJ1ZmZlclZpZXdDb3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKTtcbnZhciAkZXZlcnkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uJykuZXZlcnk7XG5cbnZhciBhVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXk7XG52YXIgZXhwb3J0VHlwZWRBcnJheU1ldGhvZCA9IEFycmF5QnVmZmVyVmlld0NvcmUuZXhwb3J0VHlwZWRBcnJheU1ldGhvZDtcblxuLy8gYCVUeXBlZEFycmF5JS5wcm90b3R5cGUuZXZlcnlgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJXR5cGVkYXJyYXklLnByb3RvdHlwZS5ldmVyeVxuZXhwb3J0VHlwZWRBcnJheU1ldGhvZCgnZXZlcnknLCBmdW5jdGlvbiBldmVyeShjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLykge1xuICByZXR1cm4gJGV2ZXJ5KGFUeXBlZEFycmF5KHRoaXMpLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBBcnJheUJ1ZmZlclZpZXdDb3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKTtcbnZhciAkZmlsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1maWxsJyk7XG5cbnZhciBhVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXk7XG52YXIgZXhwb3J0VHlwZWRBcnJheU1ldGhvZCA9IEFycmF5QnVmZmVyVmlld0NvcmUuZXhwb3J0VHlwZWRBcnJheU1ldGhvZDtcblxuLy8gYCVUeXBlZEFycmF5JS5wcm90b3R5cGUuZmlsbGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0ldHlwZWRhcnJheSUucHJvdG90eXBlLmZpbGxcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuZXhwb3J0VHlwZWRBcnJheU1ldGhvZCgnZmlsbCcsIGZ1bmN0aW9uIGZpbGwodmFsdWUgLyogLCBzdGFydCwgZW5kICovKSB7XG4gIHJldHVybiAkZmlsbC5hcHBseShhVHlwZWRBcnJheSh0aGlzKSwgYXJndW1lbnRzKTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIEFycmF5QnVmZmVyVmlld0NvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktYnVmZmVyLXZpZXctY29yZScpO1xudmFyICRmaWx0ZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uJykuZmlsdGVyO1xudmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zcGVjaWVzLWNvbnN0cnVjdG9yJyk7XG5cbnZhciBhVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXk7XG52YXIgYVR5cGVkQXJyYXlDb25zdHJ1Y3RvciA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcjtcbnZhciBleHBvcnRUeXBlZEFycmF5TWV0aG9kID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5leHBvcnRUeXBlZEFycmF5TWV0aG9kO1xuXG4vLyBgJVR5cGVkQXJyYXklLnByb3RvdHlwZS5maWx0ZXJgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJXR5cGVkYXJyYXklLnByb3RvdHlwZS5maWx0ZXJcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ2ZpbHRlcicsIGZ1bmN0aW9uIGZpbHRlcihjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLykge1xuICB2YXIgbGlzdCA9ICRmaWx0ZXIoYVR5cGVkQXJyYXkodGhpcyksIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbiAgdmFyIEMgPSBzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgdmFyIHJlc3VsdCA9IG5ldyAoYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcihDKSkobGVuZ3RoKTtcbiAgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSByZXN1bHRbaW5kZXhdID0gbGlzdFtpbmRleCsrXTtcbiAgcmV0dXJuIHJlc3VsdDtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIEFycmF5QnVmZmVyVmlld0NvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktYnVmZmVyLXZpZXctY29yZScpO1xudmFyICRmaW5kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWl0ZXJhdGlvbicpLmZpbmQ7XG5cbnZhciBhVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXk7XG52YXIgZXhwb3J0VHlwZWRBcnJheU1ldGhvZCA9IEFycmF5QnVmZmVyVmlld0NvcmUuZXhwb3J0VHlwZWRBcnJheU1ldGhvZDtcblxuLy8gYCVUeXBlZEFycmF5JS5wcm90b3R5cGUuZmluZGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0ldHlwZWRhcnJheSUucHJvdG90eXBlLmZpbmRcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ2ZpbmQnLCBmdW5jdGlvbiBmaW5kKHByZWRpY2F0ZSAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgcmV0dXJuICRmaW5kKGFUeXBlZEFycmF5KHRoaXMpLCBwcmVkaWNhdGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIEFycmF5QnVmZmVyVmlld0NvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktYnVmZmVyLXZpZXctY29yZScpO1xudmFyICRmaW5kSW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uJykuZmluZEluZGV4O1xuXG52YXIgYVR5cGVkQXJyYXkgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmFUeXBlZEFycmF5O1xudmFyIGV4cG9ydFR5cGVkQXJyYXlNZXRob2QgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmV4cG9ydFR5cGVkQXJyYXlNZXRob2Q7XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLmZpbmRJbmRleGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0ldHlwZWRhcnJheSUucHJvdG90eXBlLmZpbmRpbmRleFxuZXhwb3J0VHlwZWRBcnJheU1ldGhvZCgnZmluZEluZGV4JywgZnVuY3Rpb24gZmluZEluZGV4KHByZWRpY2F0ZSAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgcmV0dXJuICRmaW5kSW5kZXgoYVR5cGVkQXJyYXkodGhpcyksIHByZWRpY2F0ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgQXJyYXlCdWZmZXJWaWV3Q29yZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1idWZmZXItdmlldy1jb3JlJyk7XG52YXIgJGZvckVhY2ggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uJykuZm9yRWFjaDtcblxudmFyIGFUeXBlZEFycmF5ID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5hVHlwZWRBcnJheTtcbnZhciBleHBvcnRUeXBlZEFycmF5TWV0aG9kID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5leHBvcnRUeXBlZEFycmF5TWV0aG9kO1xuXG4vLyBgJVR5cGVkQXJyYXklLnByb3RvdHlwZS5mb3JFYWNoYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSV0eXBlZGFycmF5JS5wcm90b3R5cGUuZm9yZWFjaFxuZXhwb3J0VHlwZWRBcnJheU1ldGhvZCgnZm9yRWFjaCcsIGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgJGZvckVhY2goYVR5cGVkQXJyYXkodGhpcyksIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIEFycmF5QnVmZmVyVmlld0NvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktYnVmZmVyLXZpZXctY29yZScpO1xudmFyICRpbmNsdWRlcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1pbmNsdWRlcycpLmluY2x1ZGVzO1xuXG52YXIgYVR5cGVkQXJyYXkgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmFUeXBlZEFycmF5O1xudmFyIGV4cG9ydFR5cGVkQXJyYXlNZXRob2QgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmV4cG9ydFR5cGVkQXJyYXlNZXRob2Q7XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLmluY2x1ZGVzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSV0eXBlZGFycmF5JS5wcm90b3R5cGUuaW5jbHVkZXNcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ2luY2x1ZGVzJywgZnVuY3Rpb24gaW5jbHVkZXMoc2VhcmNoRWxlbWVudCAvKiAsIGZyb21JbmRleCAqLykge1xuICByZXR1cm4gJGluY2x1ZGVzKGFUeXBlZEFycmF5KHRoaXMpLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBBcnJheUJ1ZmZlclZpZXdDb3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKTtcbnZhciAkaW5kZXhPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1pbmNsdWRlcycpLmluZGV4T2Y7XG5cbnZhciBhVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXk7XG52YXIgZXhwb3J0VHlwZWRBcnJheU1ldGhvZCA9IEFycmF5QnVmZmVyVmlld0NvcmUuZXhwb3J0VHlwZWRBcnJheU1ldGhvZDtcblxuLy8gYCVUeXBlZEFycmF5JS5wcm90b3R5cGUuaW5kZXhPZmAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0ldHlwZWRhcnJheSUucHJvdG90eXBlLmluZGV4b2ZcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ2luZGV4T2YnLCBmdW5jdGlvbiBpbmRleE9mKHNlYXJjaEVsZW1lbnQgLyogLCBmcm9tSW5kZXggKi8pIHtcbiAgcmV0dXJuICRpbmRleE9mKGFUeXBlZEFycmF5KHRoaXMpLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgQXJyYXlCdWZmZXJWaWV3Q29yZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1idWZmZXItdmlldy1jb3JlJyk7XG52YXIgQXJyYXlJdGVyYXRvcnMgPSByZXF1aXJlKCcuLi9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBJVEVSQVRPUiA9IHdlbGxLbm93blN5bWJvbCgnaXRlcmF0b3InKTtcbnZhciBVaW50OEFycmF5ID0gZ2xvYmFsLlVpbnQ4QXJyYXk7XG52YXIgYXJyYXlWYWx1ZXMgPSBBcnJheUl0ZXJhdG9ycy52YWx1ZXM7XG52YXIgYXJyYXlLZXlzID0gQXJyYXlJdGVyYXRvcnMua2V5cztcbnZhciBhcnJheUVudHJpZXMgPSBBcnJheUl0ZXJhdG9ycy5lbnRyaWVzO1xudmFyIGFUeXBlZEFycmF5ID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5hVHlwZWRBcnJheTtcbnZhciBleHBvcnRUeXBlZEFycmF5TWV0aG9kID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5leHBvcnRUeXBlZEFycmF5TWV0aG9kO1xudmFyIG5hdGl2ZVR5cGVkQXJyYXlJdGVyYXRvciA9IFVpbnQ4QXJyYXkgJiYgVWludDhBcnJheS5wcm90b3R5cGVbSVRFUkFUT1JdO1xuXG52YXIgQ09SUkVDVF9JVEVSX05BTUUgPSAhIW5hdGl2ZVR5cGVkQXJyYXlJdGVyYXRvclxuICAmJiAobmF0aXZlVHlwZWRBcnJheUl0ZXJhdG9yLm5hbWUgPT0gJ3ZhbHVlcycgfHwgbmF0aXZlVHlwZWRBcnJheUl0ZXJhdG9yLm5hbWUgPT0gdW5kZWZpbmVkKTtcblxudmFyIHR5cGVkQXJyYXlWYWx1ZXMgPSBmdW5jdGlvbiB2YWx1ZXMoKSB7XG4gIHJldHVybiBhcnJheVZhbHVlcy5jYWxsKGFUeXBlZEFycmF5KHRoaXMpKTtcbn07XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLmVudHJpZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJXR5cGVkYXJyYXklLnByb3RvdHlwZS5lbnRyaWVzXG5leHBvcnRUeXBlZEFycmF5TWV0aG9kKCdlbnRyaWVzJywgZnVuY3Rpb24gZW50cmllcygpIHtcbiAgcmV0dXJuIGFycmF5RW50cmllcy5jYWxsKGFUeXBlZEFycmF5KHRoaXMpKTtcbn0pO1xuLy8gYCVUeXBlZEFycmF5JS5wcm90b3R5cGUua2V5c2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0ldHlwZWRhcnJheSUucHJvdG90eXBlLmtleXNcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ2tleXMnLCBmdW5jdGlvbiBrZXlzKCkge1xuICByZXR1cm4gYXJyYXlLZXlzLmNhbGwoYVR5cGVkQXJyYXkodGhpcykpO1xufSk7XG4vLyBgJVR5cGVkQXJyYXklLnByb3RvdHlwZS52YWx1ZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJXR5cGVkYXJyYXklLnByb3RvdHlwZS52YWx1ZXNcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ3ZhbHVlcycsIHR5cGVkQXJyYXlWYWx1ZXMsICFDT1JSRUNUX0lURVJfTkFNRSk7XG4vLyBgJVR5cGVkQXJyYXklLnByb3RvdHlwZVtAQGl0ZXJhdG9yXWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0ldHlwZWRhcnJheSUucHJvdG90eXBlLUBAaXRlcmF0b3JcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoSVRFUkFUT1IsIHR5cGVkQXJyYXlWYWx1ZXMsICFDT1JSRUNUX0lURVJfTkFNRSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgQXJyYXlCdWZmZXJWaWV3Q29yZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1idWZmZXItdmlldy1jb3JlJyk7XG5cbnZhciBhVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXk7XG52YXIgZXhwb3J0VHlwZWRBcnJheU1ldGhvZCA9IEFycmF5QnVmZmVyVmlld0NvcmUuZXhwb3J0VHlwZWRBcnJheU1ldGhvZDtcbnZhciAkam9pbiA9IFtdLmpvaW47XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLmpvaW5gIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJXR5cGVkYXJyYXklLnByb3RvdHlwZS5qb2luXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ2pvaW4nLCBmdW5jdGlvbiBqb2luKHNlcGFyYXRvcikge1xuICByZXR1cm4gJGpvaW4uYXBwbHkoYVR5cGVkQXJyYXkodGhpcyksIGFyZ3VtZW50cyk7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBBcnJheUJ1ZmZlclZpZXdDb3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKTtcbnZhciAkbGFzdEluZGV4T2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktbGFzdC1pbmRleC1vZicpO1xuXG52YXIgYVR5cGVkQXJyYXkgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmFUeXBlZEFycmF5O1xudmFyIGV4cG9ydFR5cGVkQXJyYXlNZXRob2QgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmV4cG9ydFR5cGVkQXJyYXlNZXRob2Q7XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLmxhc3RJbmRleE9mYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSV0eXBlZGFycmF5JS5wcm90b3R5cGUubGFzdGluZGV4b2Zcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuZXhwb3J0VHlwZWRBcnJheU1ldGhvZCgnbGFzdEluZGV4T2YnLCBmdW5jdGlvbiBsYXN0SW5kZXhPZihzZWFyY2hFbGVtZW50IC8qICwgZnJvbUluZGV4ICovKSB7XG4gIHJldHVybiAkbGFzdEluZGV4T2YuYXBwbHkoYVR5cGVkQXJyYXkodGhpcyksIGFyZ3VtZW50cyk7XG59KTtcbiIsInZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgaGFzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcycpO1xuXG52YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgY2FjaGUgPSB7fTtcblxudmFyIHRocm93ZXIgPSBmdW5jdGlvbiAoaXQpIHsgdGhyb3cgaXQ7IH07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKE1FVEhPRF9OQU1FLCBvcHRpb25zKSB7XG4gIGlmIChoYXMoY2FjaGUsIE1FVEhPRF9OQU1FKSkgcmV0dXJuIGNhY2hlW01FVEhPRF9OQU1FXTtcbiAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gIHZhciBtZXRob2QgPSBbXVtNRVRIT0RfTkFNRV07XG4gIHZhciBBQ0NFU1NPUlMgPSBoYXMob3B0aW9ucywgJ0FDQ0VTU09SUycpID8gb3B0aW9ucy5BQ0NFU1NPUlMgOiBmYWxzZTtcbiAgdmFyIGFyZ3VtZW50MCA9IGhhcyhvcHRpb25zLCAwKSA/IG9wdGlvbnNbMF0gOiB0aHJvd2VyO1xuICB2YXIgYXJndW1lbnQxID0gaGFzKG9wdGlvbnMsIDEpID8gb3B0aW9uc1sxXSA6IHVuZGVmaW5lZDtcblxuICByZXR1cm4gY2FjaGVbTUVUSE9EX05BTUVdID0gISFtZXRob2QgJiYgIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoQUNDRVNTT1JTICYmICFERVNDUklQVE9SUykgcmV0dXJuIHRydWU7XG4gICAgdmFyIE8gPSB7IGxlbmd0aDogLTEgfTtcblxuICAgIGlmIChBQ0NFU1NPUlMpIGRlZmluZVByb3BlcnR5KE8sIDEsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiB0aHJvd2VyIH0pO1xuICAgIGVsc2UgT1sxXSA9IDE7XG5cbiAgICBtZXRob2QuY2FsbChPLCBhcmd1bWVudDAsIGFyZ3VtZW50MSk7XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBBcnJheUJ1ZmZlclZpZXdDb3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKTtcbnZhciAkbWFwID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWl0ZXJhdGlvbicpLm1hcDtcbnZhciBzcGVjaWVzQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3BlY2llcy1jb25zdHJ1Y3RvcicpO1xuXG52YXIgYVR5cGVkQXJyYXkgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmFUeXBlZEFycmF5O1xudmFyIGFUeXBlZEFycmF5Q29uc3RydWN0b3IgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmFUeXBlZEFycmF5Q29uc3RydWN0b3I7XG52YXIgZXhwb3J0VHlwZWRBcnJheU1ldGhvZCA9IEFycmF5QnVmZmVyVmlld0NvcmUuZXhwb3J0VHlwZWRBcnJheU1ldGhvZDtcblxuLy8gYCVUeXBlZEFycmF5JS5wcm90b3R5cGUubWFwYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSV0eXBlZGFycmF5JS5wcm90b3R5cGUubWFwXG5leHBvcnRUeXBlZEFycmF5TWV0aG9kKCdtYXAnLCBmdW5jdGlvbiBtYXAobWFwZm4gLyogLCB0aGlzQXJnICovKSB7XG4gIHJldHVybiAkbWFwKGFUeXBlZEFycmF5KHRoaXMpLCBtYXBmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIGZ1bmN0aW9uIChPLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gbmV3IChhVHlwZWRBcnJheUNvbnN0cnVjdG9yKHNwZWNpZXNDb25zdHJ1Y3RvcihPLCBPLmNvbnN0cnVjdG9yKSkpKGxlbmd0aCk7XG4gIH0pO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgQXJyYXlCdWZmZXJWaWV3Q29yZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1idWZmZXItdmlldy1jb3JlJyk7XG52YXIgJHJlZHVjZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1yZWR1Y2UnKS5sZWZ0O1xuXG52YXIgYVR5cGVkQXJyYXkgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmFUeXBlZEFycmF5O1xudmFyIGV4cG9ydFR5cGVkQXJyYXlNZXRob2QgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmV4cG9ydFR5cGVkQXJyYXlNZXRob2Q7XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLnJlZHVjZWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0ldHlwZWRhcnJheSUucHJvdG90eXBlLnJlZHVjZVxuZXhwb3J0VHlwZWRBcnJheU1ldGhvZCgncmVkdWNlJywgZnVuY3Rpb24gcmVkdWNlKGNhbGxiYWNrZm4gLyogLCBpbml0aWFsVmFsdWUgKi8pIHtcbiAgcmV0dXJuICRyZWR1Y2UoYVR5cGVkQXJyYXkodGhpcyksIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIEFycmF5QnVmZmVyVmlld0NvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktYnVmZmVyLXZpZXctY29yZScpO1xudmFyICRyZWR1Y2VSaWdodCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1yZWR1Y2UnKS5yaWdodDtcblxudmFyIGFUeXBlZEFycmF5ID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5hVHlwZWRBcnJheTtcbnZhciBleHBvcnRUeXBlZEFycmF5TWV0aG9kID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5leHBvcnRUeXBlZEFycmF5TWV0aG9kO1xuXG4vLyBgJVR5cGVkQXJyYXklLnByb3RvdHlwZS5yZWR1Y2VSaWNodGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0ldHlwZWRhcnJheSUucHJvdG90eXBlLnJlZHVjZXJpZ2h0XG5leHBvcnRUeXBlZEFycmF5TWV0aG9kKCdyZWR1Y2VSaWdodCcsIGZ1bmN0aW9uIHJlZHVjZVJpZ2h0KGNhbGxiYWNrZm4gLyogLCBpbml0aWFsVmFsdWUgKi8pIHtcbiAgcmV0dXJuICRyZWR1Y2VSaWdodChhVHlwZWRBcnJheSh0aGlzKSwgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgQXJyYXlCdWZmZXJWaWV3Q29yZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1idWZmZXItdmlldy1jb3JlJyk7XG5cbnZhciBhVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXk7XG52YXIgZXhwb3J0VHlwZWRBcnJheU1ldGhvZCA9IEFycmF5QnVmZmVyVmlld0NvcmUuZXhwb3J0VHlwZWRBcnJheU1ldGhvZDtcbnZhciBmbG9vciA9IE1hdGguZmxvb3I7XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLnJldmVyc2VgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJXR5cGVkYXJyYXklLnByb3RvdHlwZS5yZXZlcnNlXG5leHBvcnRUeXBlZEFycmF5TWV0aG9kKCdyZXZlcnNlJywgZnVuY3Rpb24gcmV2ZXJzZSgpIHtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB2YXIgbGVuZ3RoID0gYVR5cGVkQXJyYXkodGhhdCkubGVuZ3RoO1xuICB2YXIgbWlkZGxlID0gZmxvb3IobGVuZ3RoIC8gMik7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciB2YWx1ZTtcbiAgd2hpbGUgKGluZGV4IDwgbWlkZGxlKSB7XG4gICAgdmFsdWUgPSB0aGF0W2luZGV4XTtcbiAgICB0aGF0W2luZGV4KytdID0gdGhhdFstLWxlbmd0aF07XG4gICAgdGhhdFtsZW5ndGhdID0gdmFsdWU7XG4gIH0gcmV0dXJuIHRoYXQ7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBBcnJheUJ1ZmZlclZpZXdDb3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKTtcbnZhciB0b0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1sZW5ndGgnKTtcbnZhciB0b09mZnNldCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1vZmZzZXQnKTtcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1vYmplY3QnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG52YXIgYVR5cGVkQXJyYXkgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmFUeXBlZEFycmF5O1xudmFyIGV4cG9ydFR5cGVkQXJyYXlNZXRob2QgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmV4cG9ydFR5cGVkQXJyYXlNZXRob2Q7XG5cbnZhciBGT1JDRUQgPSBmYWlscyhmdW5jdGlvbiAoKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICBuZXcgSW50OEFycmF5KDEpLnNldCh7fSk7XG59KTtcblxuLy8gYCVUeXBlZEFycmF5JS5wcm90b3R5cGUuc2V0YCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSV0eXBlZGFycmF5JS5wcm90b3R5cGUuc2V0XG5leHBvcnRUeXBlZEFycmF5TWV0aG9kKCdzZXQnLCBmdW5jdGlvbiBzZXQoYXJyYXlMaWtlIC8qICwgb2Zmc2V0ICovKSB7XG4gIGFUeXBlZEFycmF5KHRoaXMpO1xuICB2YXIgb2Zmc2V0ID0gdG9PZmZzZXQoYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIDEpO1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gIHZhciBzcmMgPSB0b09iamVjdChhcnJheUxpa2UpO1xuICB2YXIgbGVuID0gdG9MZW5ndGgoc3JjLmxlbmd0aCk7XG4gIHZhciBpbmRleCA9IDA7XG4gIGlmIChsZW4gKyBvZmZzZXQgPiBsZW5ndGgpIHRocm93IFJhbmdlRXJyb3IoJ1dyb25nIGxlbmd0aCcpO1xuICB3aGlsZSAoaW5kZXggPCBsZW4pIHRoaXNbb2Zmc2V0ICsgaW5kZXhdID0gc3JjW2luZGV4KytdO1xufSwgRk9SQ0VEKTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBBcnJheUJ1ZmZlclZpZXdDb3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKTtcbnZhciBzcGVjaWVzQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3BlY2llcy1jb25zdHJ1Y3RvcicpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG5cbnZhciBhVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXk7XG52YXIgYVR5cGVkQXJyYXlDb25zdHJ1Y3RvciA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcjtcbnZhciBleHBvcnRUeXBlZEFycmF5TWV0aG9kID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5leHBvcnRUeXBlZEFycmF5TWV0aG9kO1xudmFyICRzbGljZSA9IFtdLnNsaWNlO1xuXG52YXIgRk9SQ0VEID0gZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgbmV3IEludDhBcnJheSgxKS5zbGljZSgpO1xufSk7XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLnNsaWNlYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSV0eXBlZGFycmF5JS5wcm90b3R5cGUuc2xpY2VcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ3NsaWNlJywgZnVuY3Rpb24gc2xpY2Uoc3RhcnQsIGVuZCkge1xuICB2YXIgbGlzdCA9ICRzbGljZS5jYWxsKGFUeXBlZEFycmF5KHRoaXMpLCBzdGFydCwgZW5kKTtcbiAgdmFyIEMgPSBzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgdmFyIHJlc3VsdCA9IG5ldyAoYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcihDKSkobGVuZ3RoKTtcbiAgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSByZXN1bHRbaW5kZXhdID0gbGlzdFtpbmRleCsrXTtcbiAgcmV0dXJuIHJlc3VsdDtcbn0sIEZPUkNFRCk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgQXJyYXlCdWZmZXJWaWV3Q29yZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1idWZmZXItdmlldy1jb3JlJyk7XG52YXIgJHNvbWUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uJykuc29tZTtcblxudmFyIGFUeXBlZEFycmF5ID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5hVHlwZWRBcnJheTtcbnZhciBleHBvcnRUeXBlZEFycmF5TWV0aG9kID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5leHBvcnRUeXBlZEFycmF5TWV0aG9kO1xuXG4vLyBgJVR5cGVkQXJyYXklLnByb3RvdHlwZS5zb21lYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSV0eXBlZGFycmF5JS5wcm90b3R5cGUuc29tZVxuZXhwb3J0VHlwZWRBcnJheU1ldGhvZCgnc29tZScsIGZ1bmN0aW9uIHNvbWUoY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgcmV0dXJuICRzb21lKGFUeXBlZEFycmF5KHRoaXMpLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBBcnJheUJ1ZmZlclZpZXdDb3JlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKTtcblxudmFyIGFUeXBlZEFycmF5ID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5hVHlwZWRBcnJheTtcbnZhciBleHBvcnRUeXBlZEFycmF5TWV0aG9kID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5leHBvcnRUeXBlZEFycmF5TWV0aG9kO1xudmFyICRzb3J0ID0gW10uc29ydDtcblxuLy8gYCVUeXBlZEFycmF5JS5wcm90b3R5cGUuc29ydGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0ldHlwZWRhcnJheSUucHJvdG90eXBlLnNvcnRcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ3NvcnQnLCBmdW5jdGlvbiBzb3J0KGNvbXBhcmVmbikge1xuICByZXR1cm4gJHNvcnQuY2FsbChhVHlwZWRBcnJheSh0aGlzKSwgY29tcGFyZWZuKTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIEFycmF5QnVmZmVyVmlld0NvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktYnVmZmVyLXZpZXctY29yZScpO1xudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWxlbmd0aCcpO1xudmFyIHRvQWJzb2x1dGVJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1hYnNvbHV0ZS1pbmRleCcpO1xudmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zcGVjaWVzLWNvbnN0cnVjdG9yJyk7XG5cbnZhciBhVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuYVR5cGVkQXJyYXk7XG52YXIgZXhwb3J0VHlwZWRBcnJheU1ldGhvZCA9IEFycmF5QnVmZmVyVmlld0NvcmUuZXhwb3J0VHlwZWRBcnJheU1ldGhvZDtcblxuLy8gYCVUeXBlZEFycmF5JS5wcm90b3R5cGUuc3ViYXJyYXlgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJXR5cGVkYXJyYXklLnByb3RvdHlwZS5zdWJhcnJheVxuZXhwb3J0VHlwZWRBcnJheU1ldGhvZCgnc3ViYXJyYXknLCBmdW5jdGlvbiBzdWJhcnJheShiZWdpbiwgZW5kKSB7XG4gIHZhciBPID0gYVR5cGVkQXJyYXkodGhpcyk7XG4gIHZhciBsZW5ndGggPSBPLmxlbmd0aDtcbiAgdmFyIGJlZ2luSW5kZXggPSB0b0Fic29sdXRlSW5kZXgoYmVnaW4sIGxlbmd0aCk7XG4gIHJldHVybiBuZXcgKHNwZWNpZXNDb25zdHJ1Y3RvcihPLCBPLmNvbnN0cnVjdG9yKSkoXG4gICAgTy5idWZmZXIsXG4gICAgTy5ieXRlT2Zmc2V0ICsgYmVnaW5JbmRleCAqIE8uQllURVNfUEVSX0VMRU1FTlQsXG4gICAgdG9MZW5ndGgoKGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuZ3RoIDogdG9BYnNvbHV0ZUluZGV4KGVuZCwgbGVuZ3RoKSkgLSBiZWdpbkluZGV4KVxuICApO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIEFycmF5QnVmZmVyVmlld0NvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktYnVmZmVyLXZpZXctY29yZScpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG5cbnZhciBJbnQ4QXJyYXkgPSBnbG9iYWwuSW50OEFycmF5O1xudmFyIGFUeXBlZEFycmF5ID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5hVHlwZWRBcnJheTtcbnZhciBleHBvcnRUeXBlZEFycmF5TWV0aG9kID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5leHBvcnRUeXBlZEFycmF5TWV0aG9kO1xudmFyICR0b0xvY2FsZVN0cmluZyA9IFtdLnRvTG9jYWxlU3RyaW5nO1xudmFyICRzbGljZSA9IFtdLnNsaWNlO1xuXG4vLyBpT1MgU2FmYXJpIDYueCBmYWlscyBoZXJlXG52YXIgVE9fTE9DQUxFX1NUUklOR19CVUcgPSAhIUludDhBcnJheSAmJiBmYWlscyhmdW5jdGlvbiAoKSB7XG4gICR0b0xvY2FsZVN0cmluZy5jYWxsKG5ldyBJbnQ4QXJyYXkoMSkpO1xufSk7XG5cbnZhciBGT1JDRUQgPSBmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBbMSwgMl0udG9Mb2NhbGVTdHJpbmcoKSAhPSBuZXcgSW50OEFycmF5KFsxLCAyXSkudG9Mb2NhbGVTdHJpbmcoKTtcbn0pIHx8ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIEludDhBcnJheS5wcm90b3R5cGUudG9Mb2NhbGVTdHJpbmcuY2FsbChbMSwgMl0pO1xufSk7XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLnRvTG9jYWxlU3RyaW5nYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSV0eXBlZGFycmF5JS5wcm90b3R5cGUudG9sb2NhbGVzdHJpbmdcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ3RvTG9jYWxlU3RyaW5nJywgZnVuY3Rpb24gdG9Mb2NhbGVTdHJpbmcoKSB7XG4gIHJldHVybiAkdG9Mb2NhbGVTdHJpbmcuYXBwbHkoVE9fTE9DQUxFX1NUUklOR19CVUcgPyAkc2xpY2UuY2FsbChhVHlwZWRBcnJheSh0aGlzKSkgOiBhVHlwZWRBcnJheSh0aGlzKSwgYXJndW1lbnRzKTtcbn0sIEZPUkNFRCk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZXhwb3J0VHlwZWRBcnJheU1ldGhvZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1idWZmZXItdmlldy1jb3JlJykuZXhwb3J0VHlwZWRBcnJheU1ldGhvZDtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcblxudmFyIFVpbnQ4QXJyYXkgPSBnbG9iYWwuVWludDhBcnJheTtcbnZhciBVaW50OEFycmF5UHJvdG90eXBlID0gVWludDhBcnJheSAmJiBVaW50OEFycmF5LnByb3RvdHlwZSB8fCB7fTtcbnZhciBhcnJheVRvU3RyaW5nID0gW10udG9TdHJpbmc7XG52YXIgYXJyYXlKb2luID0gW10uam9pbjtcblxuaWYgKGZhaWxzKGZ1bmN0aW9uICgpIHsgYXJyYXlUb1N0cmluZy5jYWxsKHt9KTsgfSkpIHtcbiAgYXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBhcnJheUpvaW4uY2FsbCh0aGlzKTtcbiAgfTtcbn1cblxudmFyIElTX05PVF9BUlJBWV9NRVRIT0QgPSBVaW50OEFycmF5UHJvdG90eXBlLnRvU3RyaW5nICE9IGFycmF5VG9TdHJpbmc7XG5cbi8vIGAlVHlwZWRBcnJheSUucHJvdG90eXBlLnRvU3RyaW5nYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLSV0eXBlZGFycmF5JS5wcm90b3R5cGUudG9zdHJpbmdcbmV4cG9ydFR5cGVkQXJyYXlNZXRob2QoJ3RvU3RyaW5nJywgYXJyYXlUb1N0cmluZywgSVNfTk9UX0FSUkFZX01FVEhPRCk7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVxdWlyZVByb21pc2UoKSB7XG5cdGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ2BQcm9taXNlLnByb3RvdHlwZS5maW5hbGx5YCByZXF1aXJlcyBhIGdsb2JhbCBgUHJvbWlzZWAgYmUgYXZhaWxhYmxlLicpO1xuXHR9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmRlY29kZSA9IGV4cG9ydHMucGFyc2UgPSByZXF1aXJlKCcuL2RlY29kZScpO1xuZXhwb3J0cy5lbmNvZGUgPSBleHBvcnRzLnN0cmluZ2lmeSA9IHJlcXVpcmUoJy4vZW5jb2RlJyk7XG4iLCJ2YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgY3JlYXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1jcmVhdGUnKTtcbnZhciBkZWZpbmVQcm9wZXJ0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG5cbnZhciBVTlNDT1BBQkxFUyA9IHdlbGxLbm93blN5bWJvbCgndW5zY29wYWJsZXMnKTtcbnZhciBBcnJheVByb3RvdHlwZSA9IEFycmF5LnByb3RvdHlwZTtcblxuLy8gQXJyYXkucHJvdG90eXBlW0BAdW5zY29wYWJsZXNdXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUtQEB1bnNjb3BhYmxlc1xuaWYgKEFycmF5UHJvdG90eXBlW1VOU0NPUEFCTEVTXSA9PSB1bmRlZmluZWQpIHtcbiAgZGVmaW5lUHJvcGVydHlNb2R1bGUuZihBcnJheVByb3RvdHlwZSwgVU5TQ09QQUJMRVMsIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgdmFsdWU6IGNyZWF0ZShudWxsKVxuICB9KTtcbn1cblxuLy8gYWRkIGEga2V5IHRvIEFycmF5LnByb3RvdHlwZVtAQHVuc2NvcGFibGVzXVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIEFycmF5UHJvdG90eXBlW1VOU0NPUEFCTEVTXVtrZXldID0gdHJ1ZTtcbn07XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIHNldEdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtZ2xvYmFsJyk7XG5cbnZhciBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJztcbnZhciBzdG9yZSA9IGdsb2JhbFtTSEFSRURdIHx8IHNldEdsb2JhbChTSEFSRUQsIHt9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBzdG9yZTtcbiIsInZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgY3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kb2N1bWVudC1jcmVhdGUtZWxlbWVudCcpO1xuXG4vLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5XG5tb2R1bGUuZXhwb3J0cyA9ICFERVNDUklQVE9SUyAmJiAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGNyZWF0ZUVsZW1lbnQoJ2RpdicpLCAnYScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDc7IH1cbiAgfSkuYSAhPSA3O1xufSk7XG4iLCJ2YXIgTkFUSVZFX1NZTUJPTCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9uYXRpdmUtc3ltYm9sJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gTkFUSVZFX1NZTUJPTFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgJiYgIVN5bWJvbC5zaGFtXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09ICdzeW1ib2wnO1xuIiwidmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciB0b0luZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW5kZXhlZC1vYmplY3QnKTtcbnZhciBpbmRleE9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWluY2x1ZGVzJykuaW5kZXhPZjtcbnZhciBoaWRkZW5LZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hpZGRlbi1rZXlzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZXMpIHtcbiAgdmFyIE8gPSB0b0luZGV4ZWRPYmplY3Qob2JqZWN0KTtcbiAgdmFyIGkgPSAwO1xuICB2YXIgcmVzdWx0ID0gW107XG4gIHZhciBrZXk7XG4gIGZvciAoa2V5IGluIE8pICFoYXMoaGlkZGVuS2V5cywga2V5KSAmJiBoYXMoTywga2V5KSAmJiByZXN1bHQucHVzaChrZXkpO1xuICAvLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzXG4gIHdoaWxlIChuYW1lcy5sZW5ndGggPiBpKSBpZiAoaGFzKE8sIGtleSA9IG5hbWVzW2krK10pKSB7XG4gICAgfmluZGV4T2YocmVzdWx0LCBrZXkpIHx8IHJlc3VsdC5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCJ2YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRCdWlsdEluKCdkb2N1bWVudCcsICdkb2N1bWVudEVsZW1lbnQnKTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgY3JlYXRlSXRlcmF0b3JDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtaXRlcmF0b3ItY29uc3RydWN0b3InKTtcbnZhciBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LXByb3RvdHlwZS1vZicpO1xudmFyIHNldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1zZXQtcHJvdG90eXBlLW9mJyk7XG52YXIgc2V0VG9TdHJpbmdUYWcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2V0LXRvLXN0cmluZy10YWcnKTtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG52YXIgcmVkZWZpbmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVkZWZpbmUnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBJU19QVVJFID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLXB1cmUnKTtcbnZhciBJdGVyYXRvcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXRlcmF0b3JzJyk7XG52YXIgSXRlcmF0b3JzQ29yZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pdGVyYXRvcnMtY29yZScpO1xuXG52YXIgSXRlcmF0b3JQcm90b3R5cGUgPSBJdGVyYXRvcnNDb3JlLkl0ZXJhdG9yUHJvdG90eXBlO1xudmFyIEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgPSBJdGVyYXRvcnNDb3JlLkJVR0dZX1NBRkFSSV9JVEVSQVRPUlM7XG52YXIgSVRFUkFUT1IgPSB3ZWxsS25vd25TeW1ib2woJ2l0ZXJhdG9yJyk7XG52YXIgS0VZUyA9ICdrZXlzJztcbnZhciBWQUxVRVMgPSAndmFsdWVzJztcbnZhciBFTlRSSUVTID0gJ2VudHJpZXMnO1xuXG52YXIgcmV0dXJuVGhpcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEl0ZXJhYmxlLCBOQU1FLCBJdGVyYXRvckNvbnN0cnVjdG9yLCBuZXh0LCBERUZBVUxULCBJU19TRVQsIEZPUkNFRCkge1xuICBjcmVhdGVJdGVyYXRvckNvbnN0cnVjdG9yKEl0ZXJhdG9yQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpO1xuXG4gIHZhciBnZXRJdGVyYXRpb25NZXRob2QgPSBmdW5jdGlvbiAoS0lORCkge1xuICAgIGlmIChLSU5EID09PSBERUZBVUxUICYmIGRlZmF1bHRJdGVyYXRvcikgcmV0dXJuIGRlZmF1bHRJdGVyYXRvcjtcbiAgICBpZiAoIUJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgJiYgS0lORCBpbiBJdGVyYWJsZVByb3RvdHlwZSkgcmV0dXJuIEl0ZXJhYmxlUHJvdG90eXBlW0tJTkRdO1xuICAgIHN3aXRjaCAoS0lORCkge1xuICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpIHsgcmV0dXJuIG5ldyBJdGVyYXRvckNvbnN0cnVjdG9yKHRoaXMsIEtJTkQpOyB9O1xuICAgICAgY2FzZSBWQUxVRVM6IHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKSB7IHJldHVybiBuZXcgSXRlcmF0b3JDb25zdHJ1Y3Rvcih0aGlzLCBLSU5EKTsgfTtcbiAgICAgIGNhc2UgRU5UUklFUzogcmV0dXJuIGZ1bmN0aW9uIGVudHJpZXMoKSB7IHJldHVybiBuZXcgSXRlcmF0b3JDb25zdHJ1Y3Rvcih0aGlzLCBLSU5EKTsgfTtcbiAgICB9IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgSXRlcmF0b3JDb25zdHJ1Y3Rvcih0aGlzKTsgfTtcbiAgfTtcblxuICB2YXIgVE9fU1RSSU5HX1RBRyA9IE5BTUUgKyAnIEl0ZXJhdG9yJztcbiAgdmFyIElOQ09SUkVDVF9WQUxVRVNfTkFNRSA9IGZhbHNlO1xuICB2YXIgSXRlcmFibGVQcm90b3R5cGUgPSBJdGVyYWJsZS5wcm90b3R5cGU7XG4gIHZhciBuYXRpdmVJdGVyYXRvciA9IEl0ZXJhYmxlUHJvdG90eXBlW0lURVJBVE9SXVxuICAgIHx8IEl0ZXJhYmxlUHJvdG90eXBlWydAQGl0ZXJhdG9yJ11cbiAgICB8fCBERUZBVUxUICYmIEl0ZXJhYmxlUHJvdG90eXBlW0RFRkFVTFRdO1xuICB2YXIgZGVmYXVsdEl0ZXJhdG9yID0gIUJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgJiYgbmF0aXZlSXRlcmF0b3IgfHwgZ2V0SXRlcmF0aW9uTWV0aG9kKERFRkFVTFQpO1xuICB2YXIgYW55TmF0aXZlSXRlcmF0b3IgPSBOQU1FID09ICdBcnJheScgPyBJdGVyYWJsZVByb3RvdHlwZS5lbnRyaWVzIHx8IG5hdGl2ZUl0ZXJhdG9yIDogbmF0aXZlSXRlcmF0b3I7XG4gIHZhciBDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUsIG1ldGhvZHMsIEtFWTtcblxuICAvLyBmaXggbmF0aXZlXG4gIGlmIChhbnlOYXRpdmVJdGVyYXRvcikge1xuICAgIEN1cnJlbnRJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKGFueU5hdGl2ZUl0ZXJhdG9yLmNhbGwobmV3IEl0ZXJhYmxlKCkpKTtcbiAgICBpZiAoSXRlcmF0b3JQcm90b3R5cGUgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlLm5leHQpIHtcbiAgICAgIGlmICghSVNfUFVSRSAmJiBnZXRQcm90b3R5cGVPZihDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUpICE9PSBJdGVyYXRvclByb3RvdHlwZSkge1xuICAgICAgICBpZiAoc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgICBzZXRQcm90b3R5cGVPZihDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUsIEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlW0lURVJBVE9SXSAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KEN1cnJlbnRJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzXG4gICAgICBzZXRUb1N0cmluZ1RhZyhDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUsIFRPX1NUUklOR19UQUcsIHRydWUsIHRydWUpO1xuICAgICAgaWYgKElTX1BVUkUpIEl0ZXJhdG9yc1tUT19TVFJJTkdfVEFHXSA9IHJldHVyblRoaXM7XG4gICAgfVxuICB9XG5cbiAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRlxuICBpZiAoREVGQVVMVCA9PSBWQUxVRVMgJiYgbmF0aXZlSXRlcmF0b3IgJiYgbmF0aXZlSXRlcmF0b3IubmFtZSAhPT0gVkFMVUVTKSB7XG4gICAgSU5DT1JSRUNUX1ZBTFVFU19OQU1FID0gdHJ1ZTtcbiAgICBkZWZhdWx0SXRlcmF0b3IgPSBmdW5jdGlvbiB2YWx1ZXMoKSB7IHJldHVybiBuYXRpdmVJdGVyYXRvci5jYWxsKHRoaXMpOyB9O1xuICB9XG5cbiAgLy8gZGVmaW5lIGl0ZXJhdG9yXG4gIGlmICgoIUlTX1BVUkUgfHwgRk9SQ0VEKSAmJiBJdGVyYWJsZVByb3RvdHlwZVtJVEVSQVRPUl0gIT09IGRlZmF1bHRJdGVyYXRvcikge1xuICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eShJdGVyYWJsZVByb3RvdHlwZSwgSVRFUkFUT1IsIGRlZmF1bHRJdGVyYXRvcik7XG4gIH1cbiAgSXRlcmF0b3JzW05BTUVdID0gZGVmYXVsdEl0ZXJhdG9yO1xuXG4gIC8vIGV4cG9ydCBhZGRpdGlvbmFsIG1ldGhvZHNcbiAgaWYgKERFRkFVTFQpIHtcbiAgICBtZXRob2RzID0ge1xuICAgICAgdmFsdWVzOiBnZXRJdGVyYXRpb25NZXRob2QoVkFMVUVTKSxcbiAgICAgIGtleXM6IElTX1NFVCA/IGRlZmF1bHRJdGVyYXRvciA6IGdldEl0ZXJhdGlvbk1ldGhvZChLRVlTKSxcbiAgICAgIGVudHJpZXM6IGdldEl0ZXJhdGlvbk1ldGhvZChFTlRSSUVTKVxuICAgIH07XG4gICAgaWYgKEZPUkNFRCkgZm9yIChLRVkgaW4gbWV0aG9kcykge1xuICAgICAgaWYgKEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgfHwgSU5DT1JSRUNUX1ZBTFVFU19OQU1FIHx8ICEoS0VZIGluIEl0ZXJhYmxlUHJvdG90eXBlKSkge1xuICAgICAgICByZWRlZmluZShJdGVyYWJsZVByb3RvdHlwZSwgS0VZLCBtZXRob2RzW0tFWV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSAkKHsgdGFyZ2V0OiBOQU1FLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiBCVUdHWV9TQUZBUklfSVRFUkFUT1JTIHx8IElOQ09SUkVDVF9WQUxVRVNfTkFNRSB9LCBtZXRob2RzKTtcbiAgfVxuXG4gIHJldHVybiBtZXRob2RzO1xufTtcbiIsInZhciBoYXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzJyk7XG52YXIgb3duS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vd24ta2V5cycpO1xudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvck1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuICB2YXIga2V5cyA9IG93bktleXMoc291cmNlKTtcbiAgdmFyIGRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHlNb2R1bGUuZjtcbiAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvck1vZHVsZS5mO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICBpZiAoIWhhcyh0YXJnZXQsIGtleSkpIGRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTtcbiAgfVxufTtcbiIsInZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG52YXIgcmVwbGFjZW1lbnQgPSAvI3xcXC5wcm90b3R5cGVcXC4vO1xuXG52YXIgaXNGb3JjZWQgPSBmdW5jdGlvbiAoZmVhdHVyZSwgZGV0ZWN0aW9uKSB7XG4gIHZhciB2YWx1ZSA9IGRhdGFbbm9ybWFsaXplKGZlYXR1cmUpXTtcbiAgcmV0dXJuIHZhbHVlID09IFBPTFlGSUxMID8gdHJ1ZVxuICAgIDogdmFsdWUgPT0gTkFUSVZFID8gZmFsc2VcbiAgICA6IHR5cGVvZiBkZXRlY3Rpb24gPT0gJ2Z1bmN0aW9uJyA/IGZhaWxzKGRldGVjdGlvbilcbiAgICA6ICEhZGV0ZWN0aW9uO1xufTtcblxudmFyIG5vcm1hbGl6ZSA9IGlzRm9yY2VkLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgcmV0dXJuIFN0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVwbGFjZW1lbnQsICcuJykudG9Mb3dlckNhc2UoKTtcbn07XG5cbnZhciBkYXRhID0gaXNGb3JjZWQuZGF0YSA9IHt9O1xudmFyIE5BVElWRSA9IGlzRm9yY2VkLk5BVElWRSA9ICdOJztcbnZhciBQT0xZRklMTCA9IGlzRm9yY2VkLlBPTFlGSUxMID0gJ1AnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRm9yY2VkO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGdldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtcHJvdG90eXBlLW9mJyk7XG52YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1ub24tZW51bWVyYWJsZS1wcm9wZXJ0eScpO1xudmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBJU19QVVJFID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLXB1cmUnKTtcblxudmFyIElURVJBVE9SID0gd2VsbEtub3duU3ltYm9sKCdpdGVyYXRvcicpO1xudmFyIEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgPSBmYWxzZTtcblxudmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuXG4vLyBgJUl0ZXJhdG9yUHJvdG90eXBlJWAgb2JqZWN0XG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy0laXRlcmF0b3Jwcm90b3R5cGUlLW9iamVjdFxudmFyIEl0ZXJhdG9yUHJvdG90eXBlLCBQcm90b3R5cGVPZkFycmF5SXRlcmF0b3JQcm90b3R5cGUsIGFycmF5SXRlcmF0b3I7XG5cbmlmIChbXS5rZXlzKSB7XG4gIGFycmF5SXRlcmF0b3IgPSBbXS5rZXlzKCk7XG4gIC8vIFNhZmFyaSA4IGhhcyBidWdneSBpdGVyYXRvcnMgdy9vIGBuZXh0YFxuICBpZiAoISgnbmV4dCcgaW4gYXJyYXlJdGVyYXRvcikpIEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgPSB0cnVlO1xuICBlbHNlIHtcbiAgICBQcm90b3R5cGVPZkFycmF5SXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90b3R5cGVPZihnZXRQcm90b3R5cGVPZihhcnJheUl0ZXJhdG9yKSk7XG4gICAgaWYgKFByb3RvdHlwZU9mQXJyYXlJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSkgSXRlcmF0b3JQcm90b3R5cGUgPSBQcm90b3R5cGVPZkFycmF5SXRlcmF0b3JQcm90b3R5cGU7XG4gIH1cbn1cblxuaWYgKEl0ZXJhdG9yUHJvdG90eXBlID09IHVuZGVmaW5lZCkgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcblxuLy8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKClcbmlmICghSVNfUFVSRSAmJiAhaGFzKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUikpIHtcbiAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUiwgcmV0dXJuVGhpcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBJdGVyYXRvclByb3RvdHlwZTogSXRlcmF0b3JQcm90b3R5cGUsXG4gIEJVR0dZX1NBRkFSSV9JVEVSQVRPUlM6IEJVR0dZX1NBRkFSSV9JVEVSQVRPUlNcbn07XG4iLCJ2YXIgcmVkZWZpbmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVkZWZpbmUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0LCBzcmMsIG9wdGlvbnMpIHtcbiAgZm9yICh2YXIga2V5IGluIHNyYykgcmVkZWZpbmUodGFyZ2V0LCBrZXksIHNyY1trZXldLCBvcHRpb25zKTtcbiAgcmV0dXJuIHRhcmdldDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcbnZhciBkZWZpbmVQcm9wZXJ0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcblxudmFyIFNQRUNJRVMgPSB3ZWxsS25vd25TeW1ib2woJ3NwZWNpZXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ09OU1RSVUNUT1JfTkFNRSkge1xuICB2YXIgQ29uc3RydWN0b3IgPSBnZXRCdWlsdEluKENPTlNUUlVDVE9SX05BTUUpO1xuICB2YXIgZGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mO1xuXG4gIGlmIChERVNDUklQVE9SUyAmJiBDb25zdHJ1Y3RvciAmJiAhQ29uc3RydWN0b3JbU1BFQ0lFU10pIHtcbiAgICBkZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgU1BFQ0lFUywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgfSk7XG4gIH1cbn07XG4iLCJ2YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgSXRlcmF0b3JzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2l0ZXJhdG9ycycpO1xuXG52YXIgSVRFUkFUT1IgPSB3ZWxsS25vd25TeW1ib2woJ2l0ZXJhdG9yJyk7XG52YXIgQXJyYXlQcm90b3R5cGUgPSBBcnJheS5wcm90b3R5cGU7XG5cbi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3Jcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpdCAhPT0gdW5kZWZpbmVkICYmIChJdGVyYXRvcnMuQXJyYXkgPT09IGl0IHx8IEFycmF5UHJvdG90eXBlW0lURVJBVE9SXSA9PT0gaXQpO1xufTtcbiIsInZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YnKTtcbnZhciBJdGVyYXRvcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXRlcmF0b3JzJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBJVEVSQVRPUiA9IHdlbGxLbm93blN5bWJvbCgnaXRlcmF0b3InKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKGl0ICE9IHVuZGVmaW5lZCkgcmV0dXJuIGl0W0lURVJBVE9SXVxuICAgIHx8IGl0WydAQGl0ZXJhdG9yJ11cbiAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldO1xufTtcbiIsInZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIElURVJBVE9SID0gd2VsbEtub3duU3ltYm9sKCdpdGVyYXRvcicpO1xudmFyIFNBRkVfQ0xPU0lORyA9IGZhbHNlO1xuXG50cnkge1xuICB2YXIgY2FsbGVkID0gMDtcbiAgdmFyIGl0ZXJhdG9yV2l0aFJldHVybiA9IHtcbiAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4geyBkb25lOiAhIWNhbGxlZCsrIH07XG4gICAgfSxcbiAgICAncmV0dXJuJzogZnVuY3Rpb24gKCkge1xuICAgICAgU0FGRV9DTE9TSU5HID0gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIGl0ZXJhdG9yV2l0aFJldHVybltJVEVSQVRPUl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsXG4gIEFycmF5LmZyb20oaXRlcmF0b3JXaXRoUmV0dXJuLCBmdW5jdGlvbiAoKSB7IHRocm93IDI7IH0pO1xufSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChleGVjLCBTS0lQX0NMT1NJTkcpIHtcbiAgaWYgKCFTS0lQX0NMT1NJTkcgJiYgIVNBRkVfQ0xPU0lORykgcmV0dXJuIGZhbHNlO1xuICB2YXIgSVRFUkFUSU9OX1NVUFBPUlQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgb2JqZWN0W0lURVJBVE9SXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4geyBkb25lOiBJVEVSQVRJT05fU1VQUE9SVCA9IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIGV4ZWMob2JqZWN0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxuICByZXR1cm4gSVRFUkFUSU9OX1NVUFBPUlQ7XG59O1xuIiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWJpbmQtY29udGV4dCcpO1xudmFyIGh0bWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaHRtbCcpO1xudmFyIGNyZWF0ZUVsZW1lbnQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZG9jdW1lbnQtY3JlYXRlLWVsZW1lbnQnKTtcbnZhciBJU19JT1MgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW5naW5lLWlzLWlvcycpO1xuXG52YXIgbG9jYXRpb24gPSBnbG9iYWwubG9jYXRpb247XG52YXIgc2V0ID0gZ2xvYmFsLnNldEltbWVkaWF0ZTtcbnZhciBjbGVhciA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZTtcbnZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7XG52YXIgTWVzc2FnZUNoYW5uZWwgPSBnbG9iYWwuTWVzc2FnZUNoYW5uZWw7XG52YXIgRGlzcGF0Y2ggPSBnbG9iYWwuRGlzcGF0Y2g7XG52YXIgY291bnRlciA9IDA7XG52YXIgcXVldWUgPSB7fTtcbnZhciBPTlJFQURZU1RBVEVDSEFOR0UgPSAnb25yZWFkeXN0YXRlY2hhbmdlJztcbnZhciBkZWZlciwgY2hhbm5lbCwgcG9ydDtcblxudmFyIHJ1biA9IGZ1bmN0aW9uIChpZCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gIGlmIChxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICB2YXIgZm4gPSBxdWV1ZVtpZF07XG4gICAgZGVsZXRlIHF1ZXVlW2lkXTtcbiAgICBmbigpO1xuICB9XG59O1xuXG52YXIgcnVubmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcnVuKGlkKTtcbiAgfTtcbn07XG5cbnZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCkge1xuICBydW4oZXZlbnQuZGF0YSk7XG59O1xuXG52YXIgcG9zdCA9IGZ1bmN0aW9uIChpZCkge1xuICAvLyBvbGQgZW5naW5lcyBoYXZlIG5vdCBsb2NhdGlvbi5vcmlnaW5cbiAgZ2xvYmFsLnBvc3RNZXNzYWdlKGlkICsgJycsIGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QpO1xufTtcblxuLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOlxuaWYgKCFzZXQgfHwgIWNsZWFyKSB7XG4gIHNldCA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShmbikge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgdmFyIGkgPSAxO1xuICAgIHdoaWxlIChhcmd1bWVudHMubGVuZ3RoID4gaSkgYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTtcbiAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jXG4gICAgICAodHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKSkuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9O1xuICAgIGRlZmVyKGNvdW50ZXIpO1xuICAgIHJldHVybiBjb3VudGVyO1xuICB9O1xuICBjbGVhciA9IGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGlkKSB7XG4gICAgZGVsZXRlIHF1ZXVlW2lkXTtcbiAgfTtcbiAgLy8gTm9kZS5qcyAwLjgtXG4gIGlmIChjbGFzc29mKHByb2Nlc3MpID09ICdwcm9jZXNzJykge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKHJ1bm5lcihpZCkpO1xuICAgIH07XG4gIC8vIFNwaGVyZSAoSlMgZ2FtZSBlbmdpbmUpIERpc3BhdGNoIEFQSVxuICB9IGVsc2UgaWYgKERpc3BhdGNoICYmIERpc3BhdGNoLm5vdykge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBEaXNwYXRjaC5ub3cocnVubmVyKGlkKSk7XG4gICAgfTtcbiAgLy8gQnJvd3NlcnMgd2l0aCBNZXNzYWdlQ2hhbm5lbCwgaW5jbHVkZXMgV2ViV29ya2Vyc1xuICAvLyBleGNlcHQgaU9TIC0gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzYyNFxuICB9IGVsc2UgaWYgKE1lc3NhZ2VDaGFubmVsICYmICFJU19JT1MpIHtcbiAgICBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgcG9ydCA9IGNoYW5uZWwucG9ydDI7XG4gICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaXN0ZW5lcjtcbiAgICBkZWZlciA9IGJpbmQocG9ydC5wb3N0TWVzc2FnZSwgcG9ydCwgMSk7XG4gIC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2Vyc1xuICAvLyBJRTggaGFzIHBvc3RNZXNzYWdlLCBidXQgaXQncyBzeW5jICYgdHlwZW9mIGl0cyBwb3N0TWVzc2FnZSBpcyAnb2JqZWN0J1xuICB9IGVsc2UgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICYmIHR5cGVvZiBwb3N0TWVzc2FnZSA9PSAnZnVuY3Rpb24nICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cyAmJiAhZmFpbHMocG9zdCkpIHtcbiAgICBkZWZlciA9IHBvc3Q7XG4gICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAvLyBJRTgtXG4gIH0gZWxzZSBpZiAoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpKSB7XG4gICAgZGVmZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpW09OUkVBRFlTVEFURUNIQU5HRV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICAgIHJ1bihpZCk7XG4gICAgICB9O1xuICAgIH07XG4gIC8vIFJlc3Qgb2xkIGJyb3dzZXJzXG4gIH0gZWxzZSB7XG4gICAgZGVmZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIHNldFRpbWVvdXQocnVubmVyKGlkKSwgMCk7XG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0OiBzZXQsXG4gIGNsZWFyOiBjbGVhclxufTtcbiIsInZhciB1c2VyQWdlbnQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW5naW5lLXVzZXItYWdlbnQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAvKGlwaG9uZXxpcG9kfGlwYWQpLiphcHBsZXdlYmtpdC9pLnRlc3QodXNlckFnZW50KTtcbiIsInZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEJ1aWx0SW4oJ25hdmlnYXRvcicsICd1c2VyQWdlbnQnKSB8fCAnJztcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBhRnVuY3Rpb24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYS1mdW5jdGlvbicpO1xuXG52YXIgUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbiAoQykge1xuICB2YXIgcmVzb2x2ZSwgcmVqZWN0O1xuICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbiAoJCRyZXNvbHZlLCAkJHJlamVjdCkge1xuICAgIGlmIChyZXNvbHZlICE9PSB1bmRlZmluZWQgfHwgcmVqZWN0ICE9PSB1bmRlZmluZWQpIHRocm93IFR5cGVFcnJvcignQmFkIFByb21pc2UgY29uc3RydWN0b3InKTtcbiAgICByZXNvbHZlID0gJCRyZXNvbHZlO1xuICAgIHJlamVjdCA9ICQkcmVqZWN0O1xuICB9KTtcbiAgdGhpcy5yZXNvbHZlID0gYUZ1bmN0aW9uKHJlc29sdmUpO1xuICB0aGlzLnJlamVjdCA9IGFGdW5jdGlvbihyZWplY3QpO1xufTtcblxuLy8gMjUuNC4xLjUgTmV3UHJvbWlzZUNhcGFiaWxpdHkoQylcbm1vZHVsZS5leHBvcnRzLmYgPSBmdW5jdGlvbiAoQykge1xuICByZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpO1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgdXNlckFnZW50ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VuZ2luZS11c2VyLWFnZW50Jyk7XG5cbnZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7XG52YXIgdmVyc2lvbnMgPSBwcm9jZXNzICYmIHByb2Nlc3MudmVyc2lvbnM7XG52YXIgdjggPSB2ZXJzaW9ucyAmJiB2ZXJzaW9ucy52ODtcbnZhciBtYXRjaCwgdmVyc2lvbjtcblxuaWYgKHY4KSB7XG4gIG1hdGNoID0gdjguc3BsaXQoJy4nKTtcbiAgdmVyc2lvbiA9IG1hdGNoWzBdICsgbWF0Y2hbMV07XG59IGVsc2UgaWYgKHVzZXJBZ2VudCkge1xuICBtYXRjaCA9IHVzZXJBZ2VudC5tYXRjaCgvRWRnZVxcLyhcXGQrKS8pO1xuICBpZiAoIW1hdGNoIHx8IG1hdGNoWzFdID49IDc0KSB7XG4gICAgbWF0Y2ggPSB1c2VyQWdlbnQubWF0Y2goL0Nocm9tZVxcLyhcXGQrKS8pO1xuICAgIGlmIChtYXRjaCkgdmVyc2lvbiA9IG1hdGNoWzFdO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdmVyc2lvbiAmJiArdmVyc2lvbjtcbiIsIm1vZHVsZS5leHBvcnRzID0gdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgRGF0YVZpZXcgIT09ICd1bmRlZmluZWQnO1xuIiwidmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbnRlZ2VyJyk7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tbGVuZ3RoJyk7XG5cbi8vIGBUb0luZGV4YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvaW5kZXhcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmIChpdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gMDtcbiAgdmFyIG51bWJlciA9IHRvSW50ZWdlcihpdCk7XG4gIHZhciBsZW5ndGggPSB0b0xlbmd0aChudW1iZXIpO1xuICBpZiAobnVtYmVyICE9PSBsZW5ndGgpIHRocm93IFJhbmdlRXJyb3IoJ1dyb25nIGxlbmd0aCBvciBpbmRleCcpO1xuICByZXR1cm4gbGVuZ3RoO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1vYmplY3QnKTtcbnZhciB0b0Fic29sdXRlSW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tYWJzb2x1dGUtaW5kZXgnKTtcbnZhciB0b0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1sZW5ndGgnKTtcblxuLy8gYEFycmF5LnByb3RvdHlwZS5maWxsYCBtZXRob2QgaW1wbGVtZW50YXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5maWxsXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZpbGwodmFsdWUgLyogLCBzdGFydCA9IDAsIGVuZCA9IEBsZW5ndGggKi8pIHtcbiAgdmFyIE8gPSB0b09iamVjdCh0aGlzKTtcbiAgdmFyIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKTtcbiAgdmFyIGFyZ3VtZW50c0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIHZhciBpbmRleCA9IHRvQWJzb2x1dGVJbmRleChhcmd1bWVudHNMZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkLCBsZW5ndGgpO1xuICB2YXIgZW5kID0gYXJndW1lbnRzTGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZDtcbiAgdmFyIGVuZFBvcyA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuZ3RoIDogdG9BYnNvbHV0ZUluZGV4KGVuZCwgbGVuZ3RoKTtcbiAgd2hpbGUgKGVuZFBvcyA+IGluZGV4KSBPW2luZGV4KytdID0gdmFsdWU7XG4gIHJldHVybiBPO1xufTtcbiIsInZhciB0b1Bvc2l0aXZlSW50ZWdlciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1wb3NpdGl2ZS1pbnRlZ2VyJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0LCBCWVRFUykge1xuICB2YXIgb2Zmc2V0ID0gdG9Qb3NpdGl2ZUludGVnZXIoaXQpO1xuICBpZiAob2Zmc2V0ICUgQllURVMpIHRocm93IFJhbmdlRXJyb3IoJ1dyb25nIG9mZnNldCcpO1xuICByZXR1cm4gb2Zmc2V0O1xufTtcbiIsInZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG5cbi8vIGBJc0FycmF5YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWlzYXJyYXlcbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZykge1xuICByZXR1cm4gY2xhc3NvZihhcmcpID09ICdBcnJheSc7XG59O1xuIiwidmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWZ1bmN0aW9uJyk7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tb2JqZWN0Jyk7XG52YXIgSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbmRleGVkLW9iamVjdCcpO1xudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWxlbmd0aCcpO1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLnsgcmVkdWNlLCByZWR1Y2VSaWdodCB9YCBtZXRob2RzIGltcGxlbWVudGF0aW9uXG52YXIgY3JlYXRlTWV0aG9kID0gZnVuY3Rpb24gKElTX1JJR0hUKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodGhhdCwgY2FsbGJhY2tmbiwgYXJndW1lbnRzTGVuZ3RoLCBtZW1vKSB7XG4gICAgYUZ1bmN0aW9uKGNhbGxiYWNrZm4pO1xuICAgIHZhciBPID0gdG9PYmplY3QodGhhdCk7XG4gICAgdmFyIHNlbGYgPSBJbmRleGVkT2JqZWN0KE8pO1xuICAgIHZhciBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7XG4gICAgdmFyIGluZGV4ID0gSVNfUklHSFQgPyBsZW5ndGggLSAxIDogMDtcbiAgICB2YXIgaSA9IElTX1JJR0hUID8gLTEgOiAxO1xuICAgIGlmIChhcmd1bWVudHNMZW5ndGggPCAyKSB3aGlsZSAodHJ1ZSkge1xuICAgICAgaWYgKGluZGV4IGluIHNlbGYpIHtcbiAgICAgICAgbWVtbyA9IHNlbGZbaW5kZXhdO1xuICAgICAgICBpbmRleCArPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGluZGV4ICs9IGk7XG4gICAgICBpZiAoSVNfUklHSFQgPyBpbmRleCA8IDAgOiBsZW5ndGggPD0gaW5kZXgpIHtcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdSZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoO0lTX1JJR0hUID8gaW5kZXggPj0gMCA6IGxlbmd0aCA+IGluZGV4OyBpbmRleCArPSBpKSBpZiAoaW5kZXggaW4gc2VsZikge1xuICAgICAgbWVtbyA9IGNhbGxiYWNrZm4obWVtbywgc2VsZltpbmRleF0sIGluZGV4LCBPKTtcbiAgICB9XG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5yZWR1Y2VgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUucmVkdWNlXG4gIGxlZnQ6IGNyZWF0ZU1ldGhvZChmYWxzZSksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUucmVkdWNlUmlnaHRgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUucmVkdWNlcmlnaHRcbiAgcmlnaHQ6IGNyZWF0ZU1ldGhvZCh0cnVlKVxufTtcbiIsIi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTtcbmNvbnN0IHtpc1Byb21pc2UsIGNyZWF0ZUVycm9yVHlwZSwgdHJ5Q2FsbH0gPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5cbi8qKlxuICogQHR5cGljYWxuYW1lIHBjXG4gKi9cbmNsYXNzIFByb21pc2VDb250cm9sbGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgcHJvbWlzZSBjb250cm9sbGVyLiBVbmxpa2Ugb3JpZ2luYWwgUHJvbWlzZSwgaXQgZG9lcyBub3QgaW1tZWRpYXRlbHkgY2FsbCBhbnkgZnVuY3Rpb24uXG4gICAqIEluc3RlYWQgaXQgaGFzIFsuY2FsbCgpXSgjUHJvbWlzZUNvbnRyb2xsZXIrY2FsbCkgbWV0aG9kIHRoYXQgY2FsbHMgcHJvdmlkZWQgZnVuY3Rpb25cbiAgICogYW5kIHN0b3JlcyBgcmVzb2x2ZSAvIHJlamVjdGAgbWV0aG9kcyBmb3IgZnV0dXJlIGFjY2Vzcy5cbiAgICpcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc11cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgIHRoaXMuX3Jlc29sdmUgPSBudWxsO1xuICAgIHRoaXMuX3JlamVjdCA9IG51bGw7XG4gICAgdGhpcy5faXNQZW5kaW5nID0gZmFsc2U7XG4gICAgdGhpcy5faXNGdWxmaWxsZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1JlamVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgcHJvbWlzZSBpdHNlbGYuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgZ2V0IHByb21pc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB2YWx1ZSB3aXRoIHRoYXQgcHJvbWlzZSB3YXMgc2V0dGxlZCAoZnVsZmlsbGVkIG9yIHJlamVjdGVkKS5cbiAgICpcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBwcm9taXNlIGlzIHBlbmRpbmcuXG4gICAqXG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgKi9cbiAgZ2V0IGlzUGVuZGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5faXNQZW5kaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBwcm9taXNlIGlzIGZ1bGZpbGxlZC5cbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNGdWxmaWxsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzRnVsZmlsbGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBwcm9taXNlIHJlamVjdGVkLlxuICAgKlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICovXG4gIGdldCBpc1JlamVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1JlamVjdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBwcm9taXNlIGlzIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNTZXR0bGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc0Z1bGZpbGxlZCB8fCB0aGlzLl9pc1JlamVjdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxzIGBmbmAgYW5kIHJldHVybnMgcHJvbWlzZSBPUiBqdXN0IHJldHVybnMgZXhpc3RpbmcgcHJvbWlzZSBmcm9tIHByZXZpb3VzIGBjYWxsKClgIGlmIGl0IGlzIHN0aWxsIHBlbmRpbmcuXG4gICAqIFRvIGZ1bGZpbGwgcmV0dXJuZWQgcHJvbWlzZSB5b3Ugc2hvdWxkIHVzZVxuICAgKiB7QGxpbmsgUHJvbWlzZUNvbnRyb2xsZXIjcmVzb2x2ZX0gLyB7QGxpbmsgUHJvbWlzZUNvbnRyb2xsZXIjcmVqZWN0fSBtZXRob2RzLlxuICAgKiBJZiBgZm5gIGl0c2VsZiByZXR1cm5zIHByb21pc2UsIHRoZW4gZXh0ZXJuYWwgcHJvbWlzZSBpcyBhdHRhY2hlZCB0byBpdCBhbmQgZnVsZmlsbHMgdG9nZXRoZXIuXG4gICAqIElmIG5vIGBmbmAgcGFzc2VkIC0gcHJvbWlzZUNvbnRyb2xsZXIgaXMgaW5pdGlhbGl6ZWQgYXMgd2VsbC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXSBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgY2FsbChmbikge1xuICAgIGlmICghdGhpcy5faXNQZW5kaW5nKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICB0aGlzLl9jcmVhdGVQcm9taXNlKCk7XG4gICAgICB0aGlzLl9jcmVhdGVUaW1lcigpO1xuICAgICAgdGhpcy5fY2FsbEZuKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogUmVzb2x2ZXMgcGVuZGluZyBwcm9taXNlIHdpdGggc3BlY2lmaWVkIGB2YWx1ZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gW3ZhbHVlXVxuICAgKi9cbiAgcmVzb2x2ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLl9pc1BlbmRpbmcpIHtcbiAgICAgIGlmIChpc1Byb21pc2UodmFsdWUpKSB7XG4gICAgICAgIHRoaXMuX3RyeUF0dGFjaFRvUHJvbWlzZSh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zZXR0bGUodmFsdWUpO1xuICAgICAgICB0aGlzLl9pc0Z1bGZpbGxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWplY3RzIHBlbmRpbmcgcHJvbWlzZSB3aXRoIHNwZWNpZmllZCBgdmFsdWVgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IFt2YWx1ZV1cbiAgICovXG4gIHJlamVjdCh2YWx1ZSkge1xuICAgIGlmICh0aGlzLl9pc1BlbmRpbmcpIHtcbiAgICAgIHRoaXMuX3NldHRsZSh2YWx1ZSk7XG4gICAgICB0aGlzLl9pc1JlamVjdGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3JlamVjdCh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0byBpbml0aWFsIHN0YXRlLlxuICAgKiBJZiBwcm9taXNlIGlzIHBlbmRpbmcgaXQgd2lsbCBiZSByZWplY3RlZCB3aXRoIHtAbGluayBQcm9taXNlQ29udHJvbGxlci5SZXNldEVycm9yfS5cbiAgICovXG4gIHJlc2V0KCkge1xuICAgIGlmICh0aGlzLl9pc1BlbmRpbmcpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0cnlDYWxsKHRoaXMuX29wdGlvbnMucmVzZXRSZWFzb24pO1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgUHJvbWlzZUNvbnRyb2xsZXIuUmVzZXRFcnJvcihtZXNzYWdlKTtcbiAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcbiAgICB9XG4gICAgdGhpcy5fcHJvbWlzZSA9IG51bGw7XG4gICAgdGhpcy5faXNQZW5kaW5nID0gZmFsc2U7XG4gICAgdGhpcy5faXNGdWxmaWxsZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1JlamVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fY2xlYXJUaW1lcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlLWFzc2lnbiBvbmUgb3IgbW9yZSBvcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnNcbiAgICovXG4gIGNvbmZpZ3VyZShvcHRpb25zKSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLl9vcHRpb25zLCBvcHRpb25zKTtcbiAgfVxuXG4gIF9jcmVhdGVQcm9taXNlKCkge1xuICAgIHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl9pc1BlbmRpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5fcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLl9yZWplY3QgPSByZWplY3Q7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlVGltZW91dCgpIHtcbiAgICBjb25zdCBtZXNzYWdlVHBsID0gdHJ5Q2FsbCh0aGlzLl9vcHRpb25zLnRpbWVvdXRSZWFzb24pO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0eXBlb2YgbWVzc2FnZVRwbCA9PT0gJ3N0cmluZycgPyBtZXNzYWdlVHBsLnJlcGxhY2UoJ3t0aW1lb3V0fScsIHRoaXMuX29wdGlvbnMudGltZW91dCkgOiAnJztcbiAgICBjb25zdCBlcnJvciA9IG5ldyBQcm9taXNlQ29udHJvbGxlci5UaW1lb3V0RXJyb3IobWVzc2FnZSk7XG4gICAgdGhpcy5yZWplY3QoZXJyb3IpO1xuICB9XG5cbiAgX2NyZWF0ZVRpbWVyKCkge1xuICAgIGlmICh0aGlzLl9vcHRpb25zLnRpbWVvdXQpIHtcbiAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLl9oYW5kbGVUaW1lb3V0KCksIHRoaXMuX29wdGlvbnMudGltZW91dCk7XG4gICAgfVxuICB9XG5cbiAgX2NsZWFyVGltZXIoKSB7XG4gICAgaWYgKHRoaXMuX3RpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICAgICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIF9zZXR0bGUodmFsdWUpIHtcbiAgICB0aGlzLl9pc1BlbmRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuX2NsZWFyVGltZXIoKTtcbiAgfVxuXG4gIF9jYWxsRm4oZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBmbigpO1xuICAgICAgICB0aGlzLl90cnlBdHRhY2hUb1Byb21pc2UocmVzdWx0KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhpcy5yZWplY3QoZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX3RyeUF0dGFjaFRvUHJvbWlzZShwKSB7XG4gICAgaWYgKGlzUHJvbWlzZShwKSkge1xuICAgICAgcC50aGVuKHZhbHVlID0+IHRoaXMucmVzb2x2ZSh2YWx1ZSksIGUgPT4gdGhpcy5yZWplY3QoZSkpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVycm9yIGZvciByZWplY3Rpb24gaW4gY2FzZSBvZiB0aW1lb3V0LlxuICogQHR5cGUge1Byb21pc2VDb250cm9sbGVyLlRpbWVvdXRFcnJvcn1cbiAqL1xuUHJvbWlzZUNvbnRyb2xsZXIuVGltZW91dEVycm9yID0gY3JlYXRlRXJyb3JUeXBlKCdUaW1lb3V0RXJyb3InKTtcblxuLyoqXG4gKiBFcnJvciBmb3IgcmVqZWN0aW9uIGluIGNhc2Ugb2YgY2FsbCBgLnJlc2V0KClgIHdoaWxlIHByb21pc2UgaXMgcGVuZGluZy5cbiAqIEB0eXBlIHtQcm9taXNlQ29udHJvbGxlci5SZXNldEVycm9yfVxuICovXG5Qcm9taXNlQ29udHJvbGxlci5SZXNldEVycm9yID0gY3JlYXRlRXJyb3JUeXBlKCdSZXNldEVycm9yJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZUNvbnRyb2xsZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUoJy4vaW1wbGVtZW50YXRpb24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCB8fCBpbXBsZW1lbnRhdGlvbjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGtleXMgPSByZXF1aXJlKCdvYmplY3Qta2V5cycpO1xudmFyIGhhc1N5bWJvbHMgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2woJ2ZvbycpID09PSAnc3ltYm9sJztcblxudmFyIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciBjb25jYXQgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0O1xudmFyIG9yaWdEZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblxudmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiAoZm4pIHtcblx0cmV0dXJuIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0b1N0ci5jYWxsKGZuKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn07XG5cbnZhciBhcmVQcm9wZXJ0eURlc2NyaXB0b3JzU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgb2JqID0ge307XG5cdHRyeSB7XG5cdFx0b3JpZ0RlZmluZVByb3BlcnR5KG9iaiwgJ3gnLCB7IGVudW1lcmFibGU6IGZhbHNlLCB2YWx1ZTogb2JqIH0pO1xuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycywgbm8tcmVzdHJpY3RlZC1zeW50YXhcblx0XHRmb3IgKHZhciBfIGluIG9iaikgeyAvLyBqc2NzOmlnbm9yZSBkaXNhbGxvd1VudXNlZFZhcmlhYmxlc1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gb2JqLnggPT09IG9iajtcblx0fSBjYXRjaCAoZSkgeyAvKiB0aGlzIGlzIElFIDguICovXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59O1xudmFyIHN1cHBvcnRzRGVzY3JpcHRvcnMgPSBvcmlnRGVmaW5lUHJvcGVydHkgJiYgYXJlUHJvcGVydHlEZXNjcmlwdG9yc1N1cHBvcnRlZCgpO1xuXG52YXIgZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lLCB2YWx1ZSwgcHJlZGljYXRlKSB7XG5cdGlmIChuYW1lIGluIG9iamVjdCAmJiAoIWlzRnVuY3Rpb24ocHJlZGljYXRlKSB8fCAhcHJlZGljYXRlKCkpKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGlmIChzdXBwb3J0c0Rlc2NyaXB0b3JzKSB7XG5cdFx0b3JpZ0RlZmluZVByb3BlcnR5KG9iamVjdCwgbmFtZSwge1xuXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0ZW51bWVyYWJsZTogZmFsc2UsXG5cdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHR3cml0YWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdG9iamVjdFtuYW1lXSA9IHZhbHVlO1xuXHR9XG59O1xuXG52YXIgZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmplY3QsIG1hcCkge1xuXHR2YXIgcHJlZGljYXRlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDoge307XG5cdHZhciBwcm9wcyA9IGtleXMobWFwKTtcblx0aWYgKGhhc1N5bWJvbHMpIHtcblx0XHRwcm9wcyA9IGNvbmNhdC5jYWxsKHByb3BzLCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG1hcCkpO1xuXHR9XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpICs9IDEpIHtcblx0XHRkZWZpbmVQcm9wZXJ0eShvYmplY3QsIHByb3BzW2ldLCBtYXBbcHJvcHNbaV1dLCBwcmVkaWNhdGVzW3Byb3BzW2ldXSk7XG5cdH1cbn07XG5cbmRlZmluZVByb3BlcnRpZXMuc3VwcG9ydHNEZXNjcmlwdG9ycyA9ICEhc3VwcG9ydHNEZXNjcmlwdG9ycztcblxubW9kdWxlLmV4cG9ydHMgPSBkZWZpbmVQcm9wZXJ0aWVzO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG5cdHZhciBzdHIgPSB0b1N0ci5jYWxsKHZhbHVlKTtcblx0dmFyIGlzQXJncyA9IHN0ciA9PT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG5cdGlmICghaXNBcmdzKSB7XG5cdFx0aXNBcmdzID0gc3RyICE9PSAnW29iamVjdCBBcnJheV0nICYmXG5cdFx0XHR2YWx1ZSAhPT0gbnVsbCAmJlxuXHRcdFx0dHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuXHRcdFx0dHlwZW9mIHZhbHVlLmxlbmd0aCA9PT0gJ251bWJlcicgJiZcblx0XHRcdHZhbHVlLmxlbmd0aCA+PSAwICYmXG5cdFx0XHR0b1N0ci5jYWxsKHZhbHVlLmNhbGxlZSkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG5cdH1cblx0cmV0dXJuIGlzQXJncztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciByZXF1aXJlUHJvbWlzZSA9IHJlcXVpcmUoJy4vcmVxdWlyZVByb21pc2UnKTtcblxucmVxdWlyZVByb21pc2UoKTtcblxudmFyIElzQ2FsbGFibGUgPSByZXF1aXJlKCdlcy1hYnN0cmFjdC8yMDE4L0lzQ2FsbGFibGUnKTtcbnZhciBTcGVjaWVzQ29uc3RydWN0b3IgPSByZXF1aXJlKCdlcy1hYnN0cmFjdC8yMDE4L1NwZWNpZXNDb25zdHJ1Y3RvcicpO1xudmFyIFR5cGUgPSByZXF1aXJlKCdlcy1hYnN0cmFjdC8yMDE4L1R5cGUnKTtcblxudmFyIHByb21pc2VSZXNvbHZlID0gZnVuY3Rpb24gUHJvbWlzZVJlc29sdmUoQywgdmFsdWUpIHtcblx0cmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdFx0cmVzb2x2ZSh2YWx1ZSk7XG5cdH0pO1xufTtcblxudmFyIE9yaWdpbmFsUHJvbWlzZSA9IFByb21pc2U7XG5cbnZhciBjcmVhdGVUaGVuRmluYWxseSA9IGZ1bmN0aW9uIENyZWF0ZVRoZW5GaW5hbGx5KEMsIG9uRmluYWxseSkge1xuXHRyZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0dmFyIHJlc3VsdCA9IG9uRmluYWxseSgpO1xuXHRcdHZhciBwcm9taXNlID0gcHJvbWlzZVJlc29sdmUoQywgcmVzdWx0KTtcblx0XHR2YXIgdmFsdWVUaHVuayA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9O1xuXHRcdHJldHVybiBwcm9taXNlLnRoZW4odmFsdWVUaHVuayk7XG5cdH07XG59O1xuXG52YXIgY3JlYXRlQ2F0Y2hGaW5hbGx5ID0gZnVuY3Rpb24gQ3JlYXRlQ2F0Y2hGaW5hbGx5KEMsIG9uRmluYWxseSkge1xuXHRyZXR1cm4gZnVuY3Rpb24gKHJlYXNvbikge1xuXHRcdHZhciByZXN1bHQgPSBvbkZpbmFsbHkoKTtcblx0XHR2YXIgcHJvbWlzZSA9IHByb21pc2VSZXNvbHZlKEMsIHJlc3VsdCk7XG5cdFx0dmFyIHRocm93ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aHJvdyByZWFzb247XG5cdFx0fTtcblx0XHRyZXR1cm4gcHJvbWlzZS50aGVuKHRocm93ZXIpO1xuXHR9O1xufTtcblxudmFyIHByb21pc2VGaW5hbGx5ID0gZnVuY3Rpb24gZmluYWxseV8ob25GaW5hbGx5KSB7XG5cdC8qIGVzbGludCBuby1pbnZhbGlkLXRoaXM6IDAgKi9cblxuXHR2YXIgcHJvbWlzZSA9IHRoaXM7XG5cblx0aWYgKFR5cGUocHJvbWlzZSkgIT09ICdPYmplY3QnKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcigncmVjZWl2ZXIgaXMgbm90IGFuIE9iamVjdCcpO1xuXHR9XG5cblx0dmFyIEMgPSBTcGVjaWVzQ29uc3RydWN0b3IocHJvbWlzZSwgT3JpZ2luYWxQcm9taXNlKTsgLy8gbWF5IHRocm93XG5cblx0dmFyIHRoZW5GaW5hbGx5ID0gb25GaW5hbGx5O1xuXHR2YXIgY2F0Y2hGaW5hbGx5ID0gb25GaW5hbGx5O1xuXHRpZiAoSXNDYWxsYWJsZShvbkZpbmFsbHkpKSB7XG5cdFx0dGhlbkZpbmFsbHkgPSBjcmVhdGVUaGVuRmluYWxseShDLCBvbkZpbmFsbHkpO1xuXHRcdGNhdGNoRmluYWxseSA9IGNyZWF0ZUNhdGNoRmluYWxseShDLCBvbkZpbmFsbHkpO1xuXHR9XG5cblx0cmV0dXJuIHByb21pc2UudGhlbih0aGVuRmluYWxseSwgY2F0Y2hGaW5hbGx5KTtcbn07XG5cbmlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKSB7XG5cdHZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm9taXNlRmluYWxseSwgJ25hbWUnKTtcblx0aWYgKGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci5jb25maWd1cmFibGUpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvbWlzZUZpbmFsbHksICduYW1lJywgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiAnZmluYWxseScgfSk7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwcm9taXNlRmluYWxseTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIEVTNVR5cGUgPSByZXF1aXJlKCcuLi81L1R5cGUnKTtcblxuLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b3N0cmluZ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIFR5cGUoeCkge1xuXHRpZiAodHlwZW9mIHggPT09ICdzeW1ib2wnKSB7XG5cdFx0cmV0dXJuICdTeW1ib2wnO1xuXHR9XG5cdHJldHVybiBFUzVUeXBlKHgpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHJlcXVpcmVQcm9taXNlID0gcmVxdWlyZSgnLi9yZXF1aXJlUHJvbWlzZScpO1xuXG52YXIgaW1wbGVtZW50YXRpb24gPSByZXF1aXJlKCcuL2ltcGxlbWVudGF0aW9uJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0UG9seWZpbGwoKSB7XG5cdHJlcXVpcmVQcm9taXNlKCk7XG5cdHJldHVybiB0eXBlb2YgUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSA9PT0gJ2Z1bmN0aW9uJyA/IFByb21pc2UucHJvdG90eXBlWydmaW5hbGx5J10gOiBpbXBsZW1lbnRhdGlvbjtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcclxubW9kdWxlLmV4cG9ydHMgPSBXcml0ZXI7XHJcblxyXG52YXIgdXRpbCAgICAgID0gcmVxdWlyZShcIi4vdXRpbC9taW5pbWFsXCIpO1xyXG5cclxudmFyIEJ1ZmZlcldyaXRlcjsgLy8gY3ljbGljXHJcblxyXG52YXIgTG9uZ0JpdHMgID0gdXRpbC5Mb25nQml0cyxcclxuICAgIGJhc2U2NCAgICA9IHV0aWwuYmFzZTY0LFxyXG4gICAgdXRmOCAgICAgID0gdXRpbC51dGY4O1xyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdHMgYSBuZXcgd3JpdGVyIG9wZXJhdGlvbiBpbnN0YW5jZS5cclxuICogQGNsYXNzZGVzYyBTY2hlZHVsZWQgd3JpdGVyIG9wZXJhdGlvbi5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKiwgVWludDhBcnJheSwgbnVtYmVyKX0gZm4gRnVuY3Rpb24gdG8gY2FsbFxyXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuIFZhbHVlIGJ5dGUgbGVuZ3RoXHJcbiAqIEBwYXJhbSB7Kn0gdmFsIFZhbHVlIHRvIHdyaXRlXHJcbiAqIEBpZ25vcmVcclxuICovXHJcbmZ1bmN0aW9uIE9wKGZuLCBsZW4sIHZhbCkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRnVuY3Rpb24gdG8gY2FsbC5cclxuICAgICAqIEB0eXBlIHtmdW5jdGlvbihVaW50OEFycmF5LCBudW1iZXIsICopfVxyXG4gICAgICovXHJcbiAgICB0aGlzLmZuID0gZm47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWx1ZSBieXRlIGxlbmd0aC5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMubGVuID0gbGVuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTmV4dCBvcGVyYXRpb24uXHJcbiAgICAgKiBAdHlwZSB7V3JpdGVyLk9wfHVuZGVmaW5lZH1cclxuICAgICAqL1xyXG4gICAgdGhpcy5uZXh0ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsdWUgdG8gd3JpdGUuXHJcbiAgICAgKiBAdHlwZSB7Kn1cclxuICAgICAqL1xyXG4gICAgdGhpcy52YWwgPSB2YWw7IC8vIHR5cGUgdmFyaWVzXHJcbn1cclxuXHJcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbmZ1bmN0aW9uIG5vb3AoKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5LWZ1bmN0aW9uXHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBhIG5ldyB3cml0ZXIgc3RhdGUgaW5zdGFuY2UuXHJcbiAqIEBjbGFzc2Rlc2MgQ29waWVkIHdyaXRlciBzdGF0ZS5cclxuICogQG1lbWJlcm9mIFdyaXRlclxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtXcml0ZXJ9IHdyaXRlciBXcml0ZXIgdG8gY29weSBzdGF0ZSBmcm9tXHJcbiAqIEBpZ25vcmVcclxuICovXHJcbmZ1bmN0aW9uIFN0YXRlKHdyaXRlcikge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3VycmVudCBoZWFkLlxyXG4gICAgICogQHR5cGUge1dyaXRlci5PcH1cclxuICAgICAqL1xyXG4gICAgdGhpcy5oZWFkID0gd3JpdGVyLmhlYWQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDdXJyZW50IHRhaWwuXHJcbiAgICAgKiBAdHlwZSB7V3JpdGVyLk9wfVxyXG4gICAgICovXHJcbiAgICB0aGlzLnRhaWwgPSB3cml0ZXIudGFpbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEN1cnJlbnQgYnVmZmVyIGxlbmd0aC5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMubGVuID0gd3JpdGVyLmxlbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE5leHQgc3RhdGUuXHJcbiAgICAgKiBAdHlwZSB7U3RhdGV8bnVsbH1cclxuICAgICAqL1xyXG4gICAgdGhpcy5uZXh0ID0gd3JpdGVyLnN0YXRlcztcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdHMgYSBuZXcgd3JpdGVyIGluc3RhbmNlLlxyXG4gKiBAY2xhc3NkZXNjIFdpcmUgZm9ybWF0IHdyaXRlciB1c2luZyBgVWludDhBcnJheWAgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgYEFycmF5YC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBXcml0ZXIoKSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDdXJyZW50IGxlbmd0aC5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMubGVuID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wZXJhdGlvbnMgaGVhZC5cclxuICAgICAqIEB0eXBlIHtPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHRoaXMuaGVhZCA9IG5ldyBPcChub29wLCAwLCAwKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wZXJhdGlvbnMgdGFpbFxyXG4gICAgICogQHR5cGUge09iamVjdH1cclxuICAgICAqL1xyXG4gICAgdGhpcy50YWlsID0gdGhpcy5oZWFkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGlua2VkIGZvcmtlZCBzdGF0ZXMuXHJcbiAgICAgKiBAdHlwZSB7T2JqZWN0fG51bGx9XHJcbiAgICAgKi9cclxuICAgIHRoaXMuc3RhdGVzID0gbnVsbDtcclxuXHJcbiAgICAvLyBXaGVuIGEgdmFsdWUgaXMgd3JpdHRlbiwgdGhlIHdyaXRlciBjYWxjdWxhdGVzIGl0cyBieXRlIGxlbmd0aCBhbmQgcHV0cyBpdCBpbnRvIGEgbGlua2VkXHJcbiAgICAvLyBsaXN0IG9mIG9wZXJhdGlvbnMgdG8gcGVyZm9ybSB3aGVuIGZpbmlzaCgpIGlzIGNhbGxlZC4gVGhpcyBib3RoIGFsbG93cyB1cyB0byBhbGxvY2F0ZVxyXG4gICAgLy8gYnVmZmVycyBvZiB0aGUgZXhhY3QgcmVxdWlyZWQgc2l6ZSBhbmQgcmVkdWNlcyB0aGUgYW1vdW50IG9mIHdvcmsgd2UgaGF2ZSB0byBkbyBjb21wYXJlZFxyXG4gICAgLy8gdG8gZmlyc3QgY2FsY3VsYXRpbmcgb3ZlciBvYmplY3RzIGFuZCB0aGVuIGVuY29kaW5nIG92ZXIgb2JqZWN0cy4gSW4gb3VyIGNhc2UsIHRoZSBlbmNvZGluZ1xyXG4gICAgLy8gcGFydCBpcyBqdXN0IGEgbGlua2VkIGxpc3Qgd2FsayBjYWxsaW5nIG9wZXJhdGlvbnMgd2l0aCBhbHJlYWR5IHByZXBhcmVkIHZhbHVlcy5cclxufVxyXG5cclxudmFyIGNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcclxuICAgIHJldHVybiB1dGlsLkJ1ZmZlclxyXG4gICAgICAgID8gZnVuY3Rpb24gY3JlYXRlX2J1ZmZlcl9zZXR1cCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChXcml0ZXIuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlX2J1ZmZlcigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyV3JpdGVyKCk7XHJcbiAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgOiBmdW5jdGlvbiBjcmVhdGVfYXJyYXkoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgV3JpdGVyKCk7XHJcbiAgICAgICAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IHdyaXRlci5cclxuICogQGZ1bmN0aW9uXHJcbiAqIEByZXR1cm5zIHtCdWZmZXJXcml0ZXJ8V3JpdGVyfSBBIHtAbGluayBCdWZmZXJXcml0ZXJ9IHdoZW4gQnVmZmVycyBhcmUgc3VwcG9ydGVkLCBvdGhlcndpc2UgYSB7QGxpbmsgV3JpdGVyfVxyXG4gKi9cclxuV3JpdGVyLmNyZWF0ZSA9IGNyZWF0ZSgpO1xyXG5cclxuLyoqXHJcbiAqIEFsbG9jYXRlcyBhIGJ1ZmZlciBvZiB0aGUgc3BlY2lmaWVkIHNpemUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIEJ1ZmZlciBzaXplXHJcbiAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBCdWZmZXJcclxuICovXHJcbldyaXRlci5hbGxvYyA9IGZ1bmN0aW9uIGFsbG9jKHNpemUpIHtcclxuICAgIHJldHVybiBuZXcgdXRpbC5BcnJheShzaXplKTtcclxufTtcclxuXHJcbi8vIFVzZSBVaW50OEFycmF5IGJ1ZmZlciBwb29sIGluIHRoZSBicm93c2VyLCBqdXN0IGxpa2Ugbm9kZSBkb2VzIHdpdGggYnVmZmVyc1xyXG4vKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG5pZiAodXRpbC5BcnJheSAhPT0gQXJyYXkpXHJcbiAgICBXcml0ZXIuYWxsb2MgPSB1dGlsLnBvb2woV3JpdGVyLmFsbG9jLCB1dGlsLkFycmF5LnByb3RvdHlwZS5zdWJhcnJheSk7XHJcblxyXG4vKipcclxuICogUHVzaGVzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVWludDhBcnJheSwgbnVtYmVyLCAqKX0gZm4gRnVuY3Rpb24gdG8gY2FsbFxyXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuIFZhbHVlIGJ5dGUgbGVuZ3RoXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWwgVmFsdWUgdG8gd3JpdGVcclxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5Xcml0ZXIucHJvdG90eXBlLl9wdXNoID0gZnVuY3Rpb24gcHVzaChmbiwgbGVuLCB2YWwpIHtcclxuICAgIHRoaXMudGFpbCA9IHRoaXMudGFpbC5uZXh0ID0gbmV3IE9wKGZuLCBsZW4sIHZhbCk7XHJcbiAgICB0aGlzLmxlbiArPSBsZW47XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbmZ1bmN0aW9uIHdyaXRlQnl0ZSh2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICBidWZbcG9zXSA9IHZhbCAmIDI1NTtcclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVWYXJpbnQzMih2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICB3aGlsZSAodmFsID4gMTI3KSB7XHJcbiAgICAgICAgYnVmW3BvcysrXSA9IHZhbCAmIDEyNyB8IDEyODtcclxuICAgICAgICB2YWwgPj4+PSA3O1xyXG4gICAgfVxyXG4gICAgYnVmW3Bvc10gPSB2YWw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHZhcmludCB3cml0ZXIgb3BlcmF0aW9uIGluc3RhbmNlLlxyXG4gKiBAY2xhc3NkZXNjIFNjaGVkdWxlZCB2YXJpbnQgd3JpdGVyIG9wZXJhdGlvbi5cclxuICogQGV4dGVuZHMgT3BcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gVmFsdWUgYnl0ZSBsZW5ndGhcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbCBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAaWdub3JlXHJcbiAqL1xyXG5mdW5jdGlvbiBWYXJpbnRPcChsZW4sIHZhbCkge1xyXG4gICAgdGhpcy5sZW4gPSBsZW47XHJcbiAgICB0aGlzLm5leHQgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnZhbCA9IHZhbDtcclxufVxyXG5cclxuVmFyaW50T3AucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPcC5wcm90b3R5cGUpO1xyXG5WYXJpbnRPcC5wcm90b3R5cGUuZm4gPSB3cml0ZVZhcmludDMyO1xyXG5cclxuLyoqXHJcbiAqIFdyaXRlcyBhbiB1bnNpZ25lZCAzMiBiaXQgdmFsdWUgYXMgYSB2YXJpbnQuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICovXHJcbldyaXRlci5wcm90b3R5cGUudWludDMyID0gZnVuY3Rpb24gd3JpdGVfdWludDMyKHZhbHVlKSB7XHJcbiAgICAvLyBoZXJlLCB0aGUgY2FsbCB0byB0aGlzLnB1c2ggaGFzIGJlZW4gaW5saW5lZCBhbmQgYSB2YXJpbnQgc3BlY2lmaWMgT3Agc3ViY2xhc3MgaXMgdXNlZC5cclxuICAgIC8vIHVpbnQzMiBpcyBieSBmYXIgdGhlIG1vc3QgZnJlcXVlbnRseSB1c2VkIG9wZXJhdGlvbiBhbmQgYmVuZWZpdHMgc2lnbmlmaWNhbnRseSBmcm9tIHRoaXMuXHJcbiAgICB0aGlzLmxlbiArPSAodGhpcy50YWlsID0gdGhpcy50YWlsLm5leHQgPSBuZXcgVmFyaW50T3AoXHJcbiAgICAgICAgKHZhbHVlID0gdmFsdWUgPj4+IDApXHJcbiAgICAgICAgICAgICAgICA8IDEyOCAgICAgICA/IDFcclxuICAgICAgICA6IHZhbHVlIDwgMTYzODQgICAgID8gMlxyXG4gICAgICAgIDogdmFsdWUgPCAyMDk3MTUyICAgPyAzXHJcbiAgICAgICAgOiB2YWx1ZSA8IDI2ODQzNTQ1NiA/IDRcclxuICAgICAgICA6ICAgICAgICAgICAgICAgICAgICAgNSxcclxuICAgIHZhbHVlKSkubGVuO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgc2lnbmVkIDMyIGJpdCB2YWx1ZSBhcyBhIHZhcmludC5cclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICovXHJcbldyaXRlci5wcm90b3R5cGUuaW50MzIgPSBmdW5jdGlvbiB3cml0ZV9pbnQzMih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlIDwgMFxyXG4gICAgICAgID8gdGhpcy5fcHVzaCh3cml0ZVZhcmludDY0LCAxMCwgTG9uZ0JpdHMuZnJvbU51bWJlcih2YWx1ZSkpIC8vIDEwIGJ5dGVzIHBlciBzcGVjXHJcbiAgICAgICAgOiB0aGlzLnVpbnQzMih2YWx1ZSk7XHJcbn07XHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgMzIgYml0IHZhbHVlIGFzIGEgdmFyaW50LCB6aWctemFnIGVuY29kZWQuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICovXHJcbldyaXRlci5wcm90b3R5cGUuc2ludDMyID0gZnVuY3Rpb24gd3JpdGVfc2ludDMyKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdGhpcy51aW50MzIoKHZhbHVlIDw8IDEgXiB2YWx1ZSA+PiAzMSkgPj4+IDApO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gd3JpdGVWYXJpbnQ2NCh2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICB3aGlsZSAodmFsLmhpKSB7XHJcbiAgICAgICAgYnVmW3BvcysrXSA9IHZhbC5sbyAmIDEyNyB8IDEyODtcclxuICAgICAgICB2YWwubG8gPSAodmFsLmxvID4+PiA3IHwgdmFsLmhpIDw8IDI1KSA+Pj4gMDtcclxuICAgICAgICB2YWwuaGkgPj4+PSA3O1xyXG4gICAgfVxyXG4gICAgd2hpbGUgKHZhbC5sbyA+IDEyNykge1xyXG4gICAgICAgIGJ1Zltwb3MrK10gPSB2YWwubG8gJiAxMjcgfCAxMjg7XHJcbiAgICAgICAgdmFsLmxvID0gdmFsLmxvID4+PiA3O1xyXG4gICAgfVxyXG4gICAgYnVmW3BvcysrXSA9IHZhbC5sbztcclxufVxyXG5cclxuLyoqXHJcbiAqIFdyaXRlcyBhbiB1bnNpZ25lZCA2NCBiaXQgdmFsdWUgYXMgYSB2YXJpbnQuXHJcbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiBgdmFsdWVgIGlzIGEgc3RyaW5nIGFuZCBubyBsb25nIGxpYnJhcnkgaXMgcHJlc2VudC5cclxuICovXHJcbldyaXRlci5wcm90b3R5cGUudWludDY0ID0gZnVuY3Rpb24gd3JpdGVfdWludDY0KHZhbHVlKSB7XHJcbiAgICB2YXIgYml0cyA9IExvbmdCaXRzLmZyb20odmFsdWUpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVWYXJpbnQ2NCwgYml0cy5sZW5ndGgoKSwgYml0cyk7XHJcbn07XHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZSBhcyBhIHZhcmludC5cclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiBgdmFsdWVgIGlzIGEgc3RyaW5nIGFuZCBubyBsb25nIGxpYnJhcnkgaXMgcHJlc2VudC5cclxuICovXHJcbldyaXRlci5wcm90b3R5cGUuaW50NjQgPSBXcml0ZXIucHJvdG90eXBlLnVpbnQ2NDtcclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSBzaWduZWQgNjQgYml0IHZhbHVlIGFzIGEgdmFyaW50LCB6aWctemFnIGVuY29kZWQuXHJcbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiBgdmFsdWVgIGlzIGEgc3RyaW5nIGFuZCBubyBsb25nIGxpYnJhcnkgaXMgcHJlc2VudC5cclxuICovXHJcbldyaXRlci5wcm90b3R5cGUuc2ludDY0ID0gZnVuY3Rpb24gd3JpdGVfc2ludDY0KHZhbHVlKSB7XHJcbiAgICB2YXIgYml0cyA9IExvbmdCaXRzLmZyb20odmFsdWUpLnp6RW5jb2RlKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fcHVzaCh3cml0ZVZhcmludDY0LCBiaXRzLmxlbmd0aCgpLCBiaXRzKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSBib29saXNoIHZhbHVlIGFzIGEgdmFyaW50LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlIFZhbHVlIHRvIHdyaXRlXHJcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxyXG4gKi9cclxuV3JpdGVyLnByb3RvdHlwZS5ib29sID0gZnVuY3Rpb24gd3JpdGVfYm9vbCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVCeXRlLCAxLCB2YWx1ZSA/IDEgOiAwKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIHdyaXRlRml4ZWQzMih2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICBidWZbcG9zICAgIF0gPSAgdmFsICAgICAgICAgJiAyNTU7XHJcbiAgICBidWZbcG9zICsgMV0gPSAgdmFsID4+PiA4ICAgJiAyNTU7XHJcbiAgICBidWZbcG9zICsgMl0gPSAgdmFsID4+PiAxNiAgJiAyNTU7XHJcbiAgICBidWZbcG9zICsgM10gPSAgdmFsID4+PiAyNDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFdyaXRlcyBhbiB1bnNpZ25lZCAzMiBiaXQgdmFsdWUgYXMgZml4ZWQgMzIgYml0cy5cclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXHJcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxyXG4gKi9cclxuV3JpdGVyLnByb3RvdHlwZS5maXhlZDMyID0gZnVuY3Rpb24gd3JpdGVfZml4ZWQzMih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVGaXhlZDMyLCA0LCB2YWx1ZSA+Pj4gMCk7XHJcbn07XHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgc2lnbmVkIDMyIGJpdCB2YWx1ZSBhcyBmaXhlZCAzMiBiaXRzLlxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXHJcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxyXG4gKi9cclxuV3JpdGVyLnByb3RvdHlwZS5zZml4ZWQzMiA9IFdyaXRlci5wcm90b3R5cGUuZml4ZWQzMjtcclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYW4gdW5zaWduZWQgNjQgYml0IHZhbHVlIGFzIGZpeGVkIDY0IGJpdHMuXHJcbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiBgdmFsdWVgIGlzIGEgc3RyaW5nIGFuZCBubyBsb25nIGxpYnJhcnkgaXMgcHJlc2VudC5cclxuICovXHJcbldyaXRlci5wcm90b3R5cGUuZml4ZWQ2NCA9IGZ1bmN0aW9uIHdyaXRlX2ZpeGVkNjQodmFsdWUpIHtcclxuICAgIHZhciBiaXRzID0gTG9uZ0JpdHMuZnJvbSh2YWx1ZSk7XHJcbiAgICByZXR1cm4gdGhpcy5fcHVzaCh3cml0ZUZpeGVkMzIsIDQsIGJpdHMubG8pLl9wdXNoKHdyaXRlRml4ZWQzMiwgNCwgYml0cy5oaSk7XHJcbn07XHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZSBhcyBmaXhlZCA2NCBiaXRzLlxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtMb25nfG51bWJlcnxzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXHJcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxyXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGB2YWx1ZWAgaXMgYSBzdHJpbmcgYW5kIG5vIGxvbmcgbGlicmFyeSBpcyBwcmVzZW50LlxyXG4gKi9cclxuV3JpdGVyLnByb3RvdHlwZS5zZml4ZWQ2NCA9IFdyaXRlci5wcm90b3R5cGUuZml4ZWQ2NDtcclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSBmbG9hdCAoMzIgYml0KS5cclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICovXHJcbldyaXRlci5wcm90b3R5cGUuZmxvYXQgPSBmdW5jdGlvbiB3cml0ZV9mbG9hdCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3B1c2godXRpbC5mbG9hdC53cml0ZUZsb2F0TEUsIDQsIHZhbHVlKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSBkb3VibGUgKDY0IGJpdCBmbG9hdCkuXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcclxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXHJcbiAqL1xyXG5Xcml0ZXIucHJvdG90eXBlLmRvdWJsZSA9IGZ1bmN0aW9uIHdyaXRlX2RvdWJsZSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3B1c2godXRpbC5mbG9hdC53cml0ZURvdWJsZUxFLCA4LCB2YWx1ZSk7XHJcbn07XHJcblxyXG52YXIgd3JpdGVCeXRlcyA9IHV0aWwuQXJyYXkucHJvdG90eXBlLnNldFxyXG4gICAgPyBmdW5jdGlvbiB3cml0ZUJ5dGVzX3NldCh2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgYnVmLnNldCh2YWwsIHBvcyk7IC8vIGFsc28gd29ya3MgZm9yIHBsYWluIGFycmF5IHZhbHVlc1xyXG4gICAgfVxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgIDogZnVuY3Rpb24gd3JpdGVCeXRlc19mb3IodmFsLCBidWYsIHBvcykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICBidWZbcG9zICsgaV0gPSB2YWxbaV07XHJcbiAgICB9O1xyXG5cclxuLyoqXHJcbiAqIFdyaXRlcyBhIHNlcXVlbmNlIG9mIGJ5dGVzLlxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl8c3RyaW5nfSB2YWx1ZSBCdWZmZXIgb3IgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIHdyaXRlXHJcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxyXG4gKi9cclxuV3JpdGVyLnByb3RvdHlwZS5ieXRlcyA9IGZ1bmN0aW9uIHdyaXRlX2J5dGVzKHZhbHVlKSB7XHJcbiAgICB2YXIgbGVuID0gdmFsdWUubGVuZ3RoID4+PiAwO1xyXG4gICAgaWYgKCFsZW4pXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVCeXRlLCAxLCAwKTtcclxuICAgIGlmICh1dGlsLmlzU3RyaW5nKHZhbHVlKSkge1xyXG4gICAgICAgIHZhciBidWYgPSBXcml0ZXIuYWxsb2MobGVuID0gYmFzZTY0Lmxlbmd0aCh2YWx1ZSkpO1xyXG4gICAgICAgIGJhc2U2NC5kZWNvZGUodmFsdWUsIGJ1ZiwgMCk7XHJcbiAgICAgICAgdmFsdWUgPSBidWY7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy51aW50MzIobGVuKS5fcHVzaCh3cml0ZUJ5dGVzLCBsZW4sIHZhbHVlKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICovXHJcbldyaXRlci5wcm90b3R5cGUuc3RyaW5nID0gZnVuY3Rpb24gd3JpdGVfc3RyaW5nKHZhbHVlKSB7XHJcbiAgICB2YXIgbGVuID0gdXRmOC5sZW5ndGgodmFsdWUpO1xyXG4gICAgcmV0dXJuIGxlblxyXG4gICAgICAgID8gdGhpcy51aW50MzIobGVuKS5fcHVzaCh1dGY4LndyaXRlLCBsZW4sIHZhbHVlKVxyXG4gICAgICAgIDogdGhpcy5fcHVzaCh3cml0ZUJ5dGUsIDEsIDApO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZvcmtzIHRoaXMgd3JpdGVyJ3Mgc3RhdGUgYnkgcHVzaGluZyBpdCB0byBhIHN0YWNrLlxyXG4gKiBDYWxsaW5nIHtAbGluayBXcml0ZXIjcmVzZXR8cmVzZXR9IG9yIHtAbGluayBXcml0ZXIjbGRlbGltfGxkZWxpbX0gcmVzZXRzIHRoZSB3cml0ZXIgdG8gdGhlIHByZXZpb3VzIHN0YXRlLlxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICovXHJcbldyaXRlci5wcm90b3R5cGUuZm9yayA9IGZ1bmN0aW9uIGZvcmsoKSB7XHJcbiAgICB0aGlzLnN0YXRlcyA9IG5ldyBTdGF0ZSh0aGlzKTtcclxuICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG5ldyBPcChub29wLCAwLCAwKTtcclxuICAgIHRoaXMubGVuID0gMDtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlc2V0cyB0aGlzIGluc3RhbmNlIHRvIHRoZSBsYXN0IHN0YXRlLlxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICovXHJcbldyaXRlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcclxuICAgIGlmICh0aGlzLnN0YXRlcykge1xyXG4gICAgICAgIHRoaXMuaGVhZCAgID0gdGhpcy5zdGF0ZXMuaGVhZDtcclxuICAgICAgICB0aGlzLnRhaWwgICA9IHRoaXMuc3RhdGVzLnRhaWw7XHJcbiAgICAgICAgdGhpcy5sZW4gICAgPSB0aGlzLnN0YXRlcy5sZW47XHJcbiAgICAgICAgdGhpcy5zdGF0ZXMgPSB0aGlzLnN0YXRlcy5uZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBuZXcgT3Aobm9vcCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5sZW4gID0gMDtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlc2V0cyB0byB0aGUgbGFzdCBzdGF0ZSBhbmQgYXBwZW5kcyB0aGUgZm9yayBzdGF0ZSdzIGN1cnJlbnQgd3JpdGUgbGVuZ3RoIGFzIGEgdmFyaW50IGZvbGxvd2VkIGJ5IGl0cyBvcGVyYXRpb25zLlxyXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcclxuICovXHJcbldyaXRlci5wcm90b3R5cGUubGRlbGltID0gZnVuY3Rpb24gbGRlbGltKCkge1xyXG4gICAgdmFyIGhlYWQgPSB0aGlzLmhlYWQsXHJcbiAgICAgICAgdGFpbCA9IHRoaXMudGFpbCxcclxuICAgICAgICBsZW4gID0gdGhpcy5sZW47XHJcbiAgICB0aGlzLnJlc2V0KCkudWludDMyKGxlbik7XHJcbiAgICBpZiAobGVuKSB7XHJcbiAgICAgICAgdGhpcy50YWlsLm5leHQgPSBoZWFkLm5leHQ7IC8vIHNraXAgbm9vcFxyXG4gICAgICAgIHRoaXMudGFpbCA9IHRhaWw7XHJcbiAgICAgICAgdGhpcy5sZW4gKz0gbGVuO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogRmluaXNoZXMgdGhlIHdyaXRlIG9wZXJhdGlvbi5cclxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IEZpbmlzaGVkIGJ1ZmZlclxyXG4gKi9cclxuV3JpdGVyLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiBmaW5pc2goKSB7XHJcbiAgICB2YXIgaGVhZCA9IHRoaXMuaGVhZC5uZXh0LCAvLyBza2lwIG5vb3BcclxuICAgICAgICBidWYgID0gdGhpcy5jb25zdHJ1Y3Rvci5hbGxvYyh0aGlzLmxlbiksXHJcbiAgICAgICAgcG9zICA9IDA7XHJcbiAgICB3aGlsZSAoaGVhZCkge1xyXG4gICAgICAgIGhlYWQuZm4oaGVhZC52YWwsIGJ1ZiwgcG9zKTtcclxuICAgICAgICBwb3MgKz0gaGVhZC5sZW47XHJcbiAgICAgICAgaGVhZCA9IGhlYWQubmV4dDtcclxuICAgIH1cclxuICAgIC8vIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7XHJcbiAgICByZXR1cm4gYnVmO1xyXG59O1xyXG5cclxuV3JpdGVyLl9jb25maWd1cmUgPSBmdW5jdGlvbihCdWZmZXJXcml0ZXJfKSB7XHJcbiAgICBCdWZmZXJXcml0ZXIgPSBCdWZmZXJXcml0ZXJfO1xyXG4gICAgV3JpdGVyLmNyZWF0ZSA9IGNyZWF0ZSgpO1xyXG4gICAgQnVmZmVyV3JpdGVyLl9jb25maWd1cmUoKTtcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbm1vZHVsZS5leHBvcnRzID0gUmVhZGVyO1xyXG5cclxudmFyIHV0aWwgICAgICA9IHJlcXVpcmUoXCIuL3V0aWwvbWluaW1hbFwiKTtcclxuXHJcbnZhciBCdWZmZXJSZWFkZXI7IC8vIGN5Y2xpY1xyXG5cclxudmFyIExvbmdCaXRzICA9IHV0aWwuTG9uZ0JpdHMsXHJcbiAgICB1dGY4ICAgICAgPSB1dGlsLnV0Zjg7XHJcblxyXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG5mdW5jdGlvbiBpbmRleE91dE9mUmFuZ2UocmVhZGVyLCB3cml0ZUxlbmd0aCkge1xyXG4gICAgcmV0dXJuIFJhbmdlRXJyb3IoXCJpbmRleCBvdXQgb2YgcmFuZ2U6IFwiICsgcmVhZGVyLnBvcyArIFwiICsgXCIgKyAod3JpdGVMZW5ndGggfHwgMSkgKyBcIiA+IFwiICsgcmVhZGVyLmxlbik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHJlYWRlciBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIGJ1ZmZlci5cclxuICogQGNsYXNzZGVzYyBXaXJlIGZvcm1hdCByZWFkZXIgdXNpbmcgYFVpbnQ4QXJyYXlgIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGBBcnJheWAuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBCdWZmZXIgdG8gcmVhZCBmcm9tXHJcbiAqL1xyXG5mdW5jdGlvbiBSZWFkZXIoYnVmZmVyKSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkIGJ1ZmZlci5cclxuICAgICAqIEB0eXBlIHtVaW50OEFycmF5fVxyXG4gICAgICovXHJcbiAgICB0aGlzLmJ1ZiA9IGJ1ZmZlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgYnVmZmVyIHBvc2l0aW9uLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgdGhpcy5wb3MgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVhZCBidWZmZXIgbGVuZ3RoLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgdGhpcy5sZW4gPSBidWZmZXIubGVuZ3RoO1xyXG59XHJcblxyXG52YXIgY3JlYXRlX2FycmF5ID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09IFwidW5kZWZpbmVkXCJcclxuICAgID8gZnVuY3Rpb24gY3JlYXRlX3R5cGVkX2FycmF5KGJ1ZmZlcikge1xyXG4gICAgICAgIGlmIChidWZmZXIgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IEFycmF5LmlzQXJyYXkoYnVmZmVyKSlcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkZXIoYnVmZmVyKTtcclxuICAgICAgICB0aHJvdyBFcnJvcihcImlsbGVnYWwgYnVmZmVyXCIpO1xyXG4gICAgfVxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgIDogZnVuY3Rpb24gY3JlYXRlX2FycmF5KGJ1ZmZlcikge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJ1ZmZlcikpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVhZGVyKGJ1ZmZlcik7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGJ1ZmZlclwiKTtcclxuICAgIH07XHJcblxyXG52YXIgY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKCkge1xyXG4gICAgcmV0dXJuIHV0aWwuQnVmZmVyXHJcbiAgICAgICAgPyBmdW5jdGlvbiBjcmVhdGVfYnVmZmVyX3NldHVwKGJ1ZmZlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gKFJlYWRlci5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGVfYnVmZmVyKGJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0aWwuQnVmZmVyLmlzQnVmZmVyKGJ1ZmZlcilcclxuICAgICAgICAgICAgICAgICAgICA/IG5ldyBCdWZmZXJSZWFkZXIoYnVmZmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgICAgICAgICAgICAgOiBjcmVhdGVfYXJyYXkoYnVmZmVyKTtcclxuICAgICAgICAgICAgfSkoYnVmZmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICA6IGNyZWF0ZV9hcnJheTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IHJlYWRlciB1c2luZyB0aGUgc3BlY2lmaWVkIGJ1ZmZlci5cclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheXxCdWZmZXJ9IGJ1ZmZlciBCdWZmZXIgdG8gcmVhZCBmcm9tXHJcbiAqIEByZXR1cm5zIHtSZWFkZXJ8QnVmZmVyUmVhZGVyfSBBIHtAbGluayBCdWZmZXJSZWFkZXJ9IGlmIGBidWZmZXJgIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgYSB7QGxpbmsgUmVhZGVyfVxyXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgYGJ1ZmZlcmAgaXMgbm90IGEgdmFsaWQgYnVmZmVyXHJcbiAqL1xyXG5SZWFkZXIuY3JlYXRlID0gY3JlYXRlKCk7XHJcblxyXG5SZWFkZXIucHJvdG90eXBlLl9zbGljZSA9IHV0aWwuQXJyYXkucHJvdG90eXBlLnN1YmFycmF5IHx8IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHV0aWwuQXJyYXkucHJvdG90eXBlLnNsaWNlO1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgdmFyaW50IGFzIGFuIHVuc2lnbmVkIDMyIGJpdCB2YWx1ZS5cclxuICogQGZ1bmN0aW9uXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcclxuICovXHJcblJlYWRlci5wcm90b3R5cGUudWludDMyID0gKGZ1bmN0aW9uIHJlYWRfdWludDMyX3NldHVwKCkge1xyXG4gICAgdmFyIHZhbHVlID0gNDI5NDk2NzI5NTsgLy8gb3B0aW1pemVyIHR5cGUtaGludCwgdGVuZHMgdG8gZGVvcHQgb3RoZXJ3aXNlICg/ISlcclxuICAgIHJldHVybiBmdW5jdGlvbiByZWFkX3VpbnQzMigpIHtcclxuICAgICAgICB2YWx1ZSA9ICggICAgICAgICB0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcgICAgICAgKSA+Pj4gMDsgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KSByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgdmFsdWUgPSAodmFsdWUgfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA8PCAgNykgPj4+IDA7IGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOCkgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIHZhbHVlID0gKHZhbHVlIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgMTQpID4+PiAwOyBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IDIxKSA+Pj4gMDsgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KSByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgdmFsdWUgPSAodmFsdWUgfCAodGhpcy5idWZbdGhpcy5wb3NdICYgIDE1KSA8PCAyOCkgPj4+IDA7IGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOCkgcmV0dXJuIHZhbHVlO1xyXG5cclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoKHRoaXMucG9zICs9IDUpID4gdGhpcy5sZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLmxlbjtcclxuICAgICAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDEwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxufSkoKTtcclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBhIHZhcmludCBhcyBhIHNpZ25lZCAzMiBiaXQgdmFsdWUuXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcclxuICovXHJcblJlYWRlci5wcm90b3R5cGUuaW50MzIgPSBmdW5jdGlvbiByZWFkX2ludDMyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudWludDMyKCkgfCAwO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgemlnLXphZyBlbmNvZGVkIHZhcmludCBhcyBhIHNpZ25lZCAzMiBiaXQgdmFsdWUuXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcclxuICovXHJcblJlYWRlci5wcm90b3R5cGUuc2ludDMyID0gZnVuY3Rpb24gcmVhZF9zaW50MzIoKSB7XHJcbiAgICB2YXIgdmFsdWUgPSB0aGlzLnVpbnQzMigpO1xyXG4gICAgcmV0dXJuIHZhbHVlID4+PiAxIF4gLSh2YWx1ZSAmIDEpIHwgMDtcclxufTtcclxuXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLWludmFsaWQtdGhpcyAqL1xyXG5cclxuZnVuY3Rpb24gcmVhZExvbmdWYXJpbnQoKSB7XHJcbiAgICAvLyB0ZW5kcyB0byBkZW9wdCB3aXRoIGxvY2FsIHZhcnMgZm9yIG9jdGV0IGV0Yy5cclxuICAgIHZhciBiaXRzID0gbmV3IExvbmdCaXRzKDAsIDApO1xyXG4gICAgdmFyIGkgPSAwO1xyXG4gICAgaWYgKHRoaXMubGVuIC0gdGhpcy5wb3MgPiA0KSB7IC8vIGZhc3Qgcm91dGUgKGxvKVxyXG4gICAgICAgIGZvciAoOyBpIDwgNDsgKytpKSB7XHJcbiAgICAgICAgICAgIC8vIDFzdC4uNHRoXHJcbiAgICAgICAgICAgIGJpdHMubG8gPSAoYml0cy5sbyB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IGkgKiA3KSA+Pj4gMDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIDV0aFxyXG4gICAgICAgIGJpdHMubG8gPSAoYml0cy5sbyB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IDI4KSA+Pj4gMDtcclxuICAgICAgICBiaXRzLmhpID0gKGJpdHMuaGkgfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA+PiAgNCkgPj4+IDA7XHJcbiAgICAgICAgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KVxyXG4gICAgICAgICAgICByZXR1cm4gYml0cztcclxuICAgICAgICBpID0gMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yICg7IGkgPCAzOyArK2kpIHtcclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmxlbilcclxuICAgICAgICAgICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzKTtcclxuICAgICAgICAgICAgLy8gMXN0Li4zdGhcclxuICAgICAgICAgICAgYml0cy5sbyA9IChiaXRzLmxvIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgaSAqIDcpID4+PiAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYml0cztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gNHRoXHJcbiAgICAgICAgYml0cy5sbyA9IChiaXRzLmxvIHwgKHRoaXMuYnVmW3RoaXMucG9zKytdICYgMTI3KSA8PCBpICogNykgPj4+IDA7XHJcbiAgICAgICAgcmV0dXJuIGJpdHM7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5sZW4gLSB0aGlzLnBvcyA+IDQpIHsgLy8gZmFzdCByb3V0ZSAoaGkpXHJcbiAgICAgICAgZm9yICg7IGkgPCA1OyArK2kpIHtcclxuICAgICAgICAgICAgLy8gNnRoLi4xMHRoXHJcbiAgICAgICAgICAgIGJpdHMuaGkgPSAoYml0cy5oaSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IGkgKiA3ICsgMykgPj4+IDA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOClcclxuICAgICAgICAgICAgICAgIHJldHVybiBiaXRzO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yICg7IGkgPCA1OyArK2kpIHtcclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmxlbilcclxuICAgICAgICAgICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzKTtcclxuICAgICAgICAgICAgLy8gNnRoLi4xMHRoXHJcbiAgICAgICAgICAgIGJpdHMuaGkgPSAoYml0cy5oaSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IGkgKiA3ICsgMykgPj4+IDA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOClcclxuICAgICAgICAgICAgICAgIHJldHVybiBiaXRzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICB0aHJvdyBFcnJvcihcImludmFsaWQgdmFyaW50IGVuY29kaW5nXCIpO1xyXG59XHJcblxyXG4vKiBlc2xpbnQtZW5hYmxlIG5vLWludmFsaWQtdGhpcyAqL1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgdmFyaW50IGFzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZS5cclxuICogQG5hbWUgUmVhZGVyI2ludDY0XHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcmV0dXJucyB7TG9uZ30gVmFsdWUgcmVhZFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBhIHZhcmludCBhcyBhbiB1bnNpZ25lZCA2NCBiaXQgdmFsdWUuXHJcbiAqIEBuYW1lIFJlYWRlciN1aW50NjRcclxuICogQGZ1bmN0aW9uXHJcbiAqIEByZXR1cm5zIHtMb25nfSBWYWx1ZSByZWFkXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgemlnLXphZyBlbmNvZGVkIHZhcmludCBhcyBhIHNpZ25lZCA2NCBiaXQgdmFsdWUuXHJcbiAqIEBuYW1lIFJlYWRlciNzaW50NjRcclxuICogQGZ1bmN0aW9uXHJcbiAqIEByZXR1cm5zIHtMb25nfSBWYWx1ZSByZWFkXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgdmFyaW50IGFzIGEgYm9vbGVhbi5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFZhbHVlIHJlYWRcclxuICovXHJcblJlYWRlci5wcm90b3R5cGUuYm9vbCA9IGZ1bmN0aW9uIHJlYWRfYm9vbCgpIHtcclxuICAgIHJldHVybiB0aGlzLnVpbnQzMigpICE9PSAwO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gcmVhZEZpeGVkMzJfZW5kKGJ1ZiwgZW5kKSB7IC8vIG5vdGUgdGhhdCB0aGlzIHVzZXMgYGVuZGAsIG5vdCBgcG9zYFxyXG4gICAgcmV0dXJuIChidWZbZW5kIC0gNF1cclxuICAgICAgICAgIHwgYnVmW2VuZCAtIDNdIDw8IDhcclxuICAgICAgICAgIHwgYnVmW2VuZCAtIDJdIDw8IDE2XHJcbiAgICAgICAgICB8IGJ1ZltlbmQgLSAxXSA8PCAyNCkgPj4+IDA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBmaXhlZCAzMiBiaXRzIGFzIGFuIHVuc2lnbmVkIDMyIGJpdCBpbnRlZ2VyLlxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXHJcbiAqL1xyXG5SZWFkZXIucHJvdG90eXBlLmZpeGVkMzIgPSBmdW5jdGlvbiByZWFkX2ZpeGVkMzIoKSB7XHJcblxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICBpZiAodGhpcy5wb3MgKyA0ID4gdGhpcy5sZW4pXHJcbiAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDQpO1xyXG5cclxuICAgIHJldHVybiByZWFkRml4ZWQzMl9lbmQodGhpcy5idWYsIHRoaXMucG9zICs9IDQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGZpeGVkIDMyIGJpdHMgYXMgYSBzaWduZWQgMzIgYml0IGludGVnZXIuXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcclxuICovXHJcblJlYWRlci5wcm90b3R5cGUuc2ZpeGVkMzIgPSBmdW5jdGlvbiByZWFkX3NmaXhlZDMyKCkge1xyXG5cclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKHRoaXMucG9zICsgNCA+IHRoaXMubGVuKVxyXG4gICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCA0KTtcclxuXHJcbiAgICByZXR1cm4gcmVhZEZpeGVkMzJfZW5kKHRoaXMuYnVmLCB0aGlzLnBvcyArPSA0KSB8IDA7XHJcbn07XHJcblxyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1pbnZhbGlkLXRoaXMgKi9cclxuXHJcbmZ1bmN0aW9uIHJlYWRGaXhlZDY0KC8qIHRoaXM6IFJlYWRlciAqLykge1xyXG5cclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKHRoaXMucG9zICsgOCA+IHRoaXMubGVuKVxyXG4gICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCA4KTtcclxuXHJcbiAgICByZXR1cm4gbmV3IExvbmdCaXRzKHJlYWRGaXhlZDMyX2VuZCh0aGlzLmJ1ZiwgdGhpcy5wb3MgKz0gNCksIHJlYWRGaXhlZDMyX2VuZCh0aGlzLmJ1ZiwgdGhpcy5wb3MgKz0gNCkpO1xyXG59XHJcblxyXG4vKiBlc2xpbnQtZW5hYmxlIG5vLWludmFsaWQtdGhpcyAqL1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGZpeGVkIDY0IGJpdHMuXHJcbiAqIEBuYW1lIFJlYWRlciNmaXhlZDY0XHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcmV0dXJucyB7TG9uZ30gVmFsdWUgcmVhZFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZWFkcyB6aWctemFnIGVuY29kZWQgZml4ZWQgNjQgYml0cy5cclxuICogQG5hbWUgUmVhZGVyI3NmaXhlZDY0XHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcmV0dXJucyB7TG9uZ30gVmFsdWUgcmVhZFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBhIGZsb2F0ICgzMiBiaXQpIGFzIGEgbnVtYmVyLlxyXG4gKiBAZnVuY3Rpb25cclxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxyXG4gKi9cclxuUmVhZGVyLnByb3RvdHlwZS5mbG9hdCA9IGZ1bmN0aW9uIHJlYWRfZmxvYXQoKSB7XHJcblxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICBpZiAodGhpcy5wb3MgKyA0ID4gdGhpcy5sZW4pXHJcbiAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDQpO1xyXG5cclxuICAgIHZhciB2YWx1ZSA9IHV0aWwuZmxvYXQucmVhZEZsb2F0TEUodGhpcy5idWYsIHRoaXMucG9zKTtcclxuICAgIHRoaXMucG9zICs9IDQ7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn07XHJcblxyXG4vKipcclxuICogUmVhZHMgYSBkb3VibGUgKDY0IGJpdCBmbG9hdCkgYXMgYSBudW1iZXIuXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXHJcbiAqL1xyXG5SZWFkZXIucHJvdG90eXBlLmRvdWJsZSA9IGZ1bmN0aW9uIHJlYWRfZG91YmxlKCkge1xyXG5cclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKHRoaXMucG9zICsgOCA+IHRoaXMubGVuKVxyXG4gICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCA0KTtcclxuXHJcbiAgICB2YXIgdmFsdWUgPSB1dGlsLmZsb2F0LnJlYWREb3VibGVMRSh0aGlzLmJ1ZiwgdGhpcy5wb3MpO1xyXG4gICAgdGhpcy5wb3MgKz0gODtcclxuICAgIHJldHVybiB2YWx1ZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBhIHNlcXVlbmNlIG9mIGJ5dGVzIHByZWNlZWRlZCBieSBpdHMgbGVuZ3RoIGFzIGEgdmFyaW50LlxyXG4gKiBAcmV0dXJucyB7VWludDhBcnJheX0gVmFsdWUgcmVhZFxyXG4gKi9cclxuUmVhZGVyLnByb3RvdHlwZS5ieXRlcyA9IGZ1bmN0aW9uIHJlYWRfYnl0ZXMoKSB7XHJcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy51aW50MzIoKSxcclxuICAgICAgICBzdGFydCAgPSB0aGlzLnBvcyxcclxuICAgICAgICBlbmQgICAgPSB0aGlzLnBvcyArIGxlbmd0aDtcclxuXHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmIChlbmQgPiB0aGlzLmxlbilcclxuICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgbGVuZ3RoKTtcclxuXHJcbiAgICB0aGlzLnBvcyArPSBsZW5ndGg7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmJ1ZikpIC8vIHBsYWluIGFycmF5XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmLnNsaWNlKHN0YXJ0LCBlbmQpO1xyXG4gICAgcmV0dXJuIHN0YXJ0ID09PSBlbmQgLy8gZml4IGZvciBJRSAxMC9XaW44IGFuZCBvdGhlcnMnIHN1YmFycmF5IHJldHVybmluZyBhcnJheSBvZiBzaXplIDFcclxuICAgICAgICA/IG5ldyB0aGlzLmJ1Zi5jb25zdHJ1Y3RvcigwKVxyXG4gICAgICAgIDogdGhpcy5fc2xpY2UuY2FsbCh0aGlzLmJ1Ziwgc3RhcnQsIGVuZCk7XHJcbn07XHJcblxyXG4vKipcclxuICogUmVhZHMgYSBzdHJpbmcgcHJlY2VlZGVkIGJ5IGl0cyBieXRlIGxlbmd0aCBhcyBhIHZhcmludC5cclxuICogQHJldHVybnMge3N0cmluZ30gVmFsdWUgcmVhZFxyXG4gKi9cclxuUmVhZGVyLnByb3RvdHlwZS5zdHJpbmcgPSBmdW5jdGlvbiByZWFkX3N0cmluZygpIHtcclxuICAgIHZhciBieXRlcyA9IHRoaXMuYnl0ZXMoKTtcclxuICAgIHJldHVybiB1dGY4LnJlYWQoYnl0ZXMsIDAsIGJ5dGVzLmxlbmd0aCk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2tpcHMgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgYnl0ZXMgaWYgc3BlY2lmaWVkLCBvdGhlcndpc2Ugc2tpcHMgYSB2YXJpbnQuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBMZW5ndGggaWYga25vd24sIG90aGVyd2lzZSBhIHZhcmludCBpcyBhc3N1bWVkXHJcbiAqIEByZXR1cm5zIHtSZWFkZXJ9IGB0aGlzYFxyXG4gKi9cclxuUmVhZGVyLnByb3RvdHlwZS5za2lwID0gZnVuY3Rpb24gc2tpcChsZW5ndGgpIHtcclxuICAgIGlmICh0eXBlb2YgbGVuZ3RoID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgaWYgKHRoaXMucG9zICsgbGVuZ3RoID4gdGhpcy5sZW4pXHJcbiAgICAgICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCBsZW5ndGgpO1xyXG4gICAgICAgIHRoaXMucG9zICs9IGxlbmd0aDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMubGVuKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMpO1xyXG4gICAgICAgIH0gd2hpbGUgKHRoaXMuYnVmW3RoaXMucG9zKytdICYgMTI4KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNraXBzIHRoZSBuZXh0IGVsZW1lbnQgb2YgdGhlIHNwZWNpZmllZCB3aXJlIHR5cGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aXJlVHlwZSBXaXJlIHR5cGUgcmVjZWl2ZWRcclxuICogQHJldHVybnMge1JlYWRlcn0gYHRoaXNgXHJcbiAqL1xyXG5SZWFkZXIucHJvdG90eXBlLnNraXBUeXBlID0gZnVuY3Rpb24od2lyZVR5cGUpIHtcclxuICAgIHN3aXRjaCAod2lyZVR5cGUpIHtcclxuICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgIHRoaXMuc2tpcCgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgIHRoaXMuc2tpcCg4KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICB0aGlzLnNraXAodGhpcy51aW50MzIoKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgd2hpbGUgKCh3aXJlVHlwZSA9IHRoaXMudWludDMyKCkgJiA3KSAhPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5za2lwVHlwZSh3aXJlVHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICB0aGlzLnNraXAoNCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiaW52YWxpZCB3aXJlIHR5cGUgXCIgKyB3aXJlVHlwZSArIFwiIGF0IG9mZnNldCBcIiArIHRoaXMucG9zKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuUmVhZGVyLl9jb25maWd1cmUgPSBmdW5jdGlvbihCdWZmZXJSZWFkZXJfKSB7XHJcbiAgICBCdWZmZXJSZWFkZXIgPSBCdWZmZXJSZWFkZXJfO1xyXG4gICAgUmVhZGVyLmNyZWF0ZSA9IGNyZWF0ZSgpO1xyXG4gICAgQnVmZmVyUmVhZGVyLl9jb25maWd1cmUoKTtcclxuXHJcbiAgICB2YXIgZm4gPSB1dGlsLkxvbmcgPyBcInRvTG9uZ1wiIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gXCJ0b051bWJlclwiO1xyXG4gICAgdXRpbC5tZXJnZShSZWFkZXIucHJvdG90eXBlLCB7XHJcblxyXG4gICAgICAgIGludDY0OiBmdW5jdGlvbiByZWFkX2ludDY0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVhZExvbmdWYXJpbnQuY2FsbCh0aGlzKVtmbl0oZmFsc2UpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHVpbnQ2NDogZnVuY3Rpb24gcmVhZF91aW50NjQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWFkTG9uZ1ZhcmludC5jYWxsKHRoaXMpW2ZuXSh0cnVlKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzaW50NjQ6IGZ1bmN0aW9uIHJlYWRfc2ludDY0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVhZExvbmdWYXJpbnQuY2FsbCh0aGlzKS56ekRlY29kZSgpW2ZuXShmYWxzZSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZml4ZWQ2NDogZnVuY3Rpb24gcmVhZF9maXhlZDY0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVhZEZpeGVkNjQuY2FsbCh0aGlzKVtmbl0odHJ1ZSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgc2ZpeGVkNjQ6IGZ1bmN0aW9uIHJlYWRfc2ZpeGVkNjQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWFkRml4ZWQ2NC5jYWxsKHRoaXMpW2ZuXShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG59O1xyXG4iLCIndXNlIHN0cmljdCc7XG52YXIgcmVkZWZpbmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVkZWZpbmUnKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGZsYWdzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC1mbGFncycpO1xuXG52YXIgVE9fU1RSSU5HID0gJ3RvU3RyaW5nJztcbnZhciBSZWdFeHBQcm90b3R5cGUgPSBSZWdFeHAucHJvdG90eXBlO1xudmFyIG5hdGl2ZVRvU3RyaW5nID0gUmVnRXhwUHJvdG90eXBlW1RPX1NUUklOR107XG5cbnZhciBOT1RfR0VORVJJQyA9IGZhaWxzKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5hdGl2ZVRvU3RyaW5nLmNhbGwoeyBzb3VyY2U6ICdhJywgZmxhZ3M6ICdiJyB9KSAhPSAnL2EvYic7IH0pO1xuLy8gRkY0NC0gUmVnRXhwI3RvU3RyaW5nIGhhcyBhIHdyb25nIG5hbWVcbnZhciBJTkNPUlJFQ1RfTkFNRSA9IG5hdGl2ZVRvU3RyaW5nLm5hbWUgIT0gVE9fU1RSSU5HO1xuXG4vLyBgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZ2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1yZWdleHAucHJvdG90eXBlLnRvc3RyaW5nXG5pZiAoTk9UX0dFTkVSSUMgfHwgSU5DT1JSRUNUX05BTUUpIHtcbiAgcmVkZWZpbmUoUmVnRXhwLnByb3RvdHlwZSwgVE9fU1RSSU5HLCBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICB2YXIgUiA9IGFuT2JqZWN0KHRoaXMpO1xuICAgIHZhciBwID0gU3RyaW5nKFIuc291cmNlKTtcbiAgICB2YXIgcmYgPSBSLmZsYWdzO1xuICAgIHZhciBmID0gU3RyaW5nKHJmID09PSB1bmRlZmluZWQgJiYgUiBpbnN0YW5jZW9mIFJlZ0V4cCAmJiAhKCdmbGFncycgaW4gUmVnRXhwUHJvdG90eXBlKSA/IGZsYWdzLmNhbGwoUikgOiByZik7XG4gICAgcmV0dXJuICcvJyArIHAgKyAnLycgKyBmO1xuICB9LCB7IHVuc2FmZTogdHJ1ZSB9KTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcblxuLy8gYFJlZ0V4cC5wcm90b3R5cGUuZmxhZ3NgIGdldHRlciBpbXBsZW1lbnRhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtZ2V0LXJlZ2V4cC5wcm90b3R5cGUuZmxhZ3Ncbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdGhhdCA9IGFuT2JqZWN0KHRoaXMpO1xuICB2YXIgcmVzdWx0ID0gJyc7XG4gIGlmICh0aGF0Lmdsb2JhbCkgcmVzdWx0ICs9ICdnJztcbiAgaWYgKHRoYXQuaWdub3JlQ2FzZSkgcmVzdWx0ICs9ICdpJztcbiAgaWYgKHRoYXQubXVsdGlsaW5lKSByZXN1bHQgKz0gJ20nO1xuICBpZiAodGhhdC5kb3RBbGwpIHJlc3VsdCArPSAncyc7XG4gIGlmICh0aGF0LnVuaWNvZGUpIHJlc3VsdCArPSAndSc7XG4gIGlmICh0aGF0LnN0aWNreSkgcmVzdWx0ICs9ICd5JztcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCJ2YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbmV4cG9ydHMuZiA9IHdlbGxLbm93blN5bWJvbDtcbiIsInZhciBwYXRoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3BhdGgnKTtcbnZhciBoYXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzJyk7XG52YXIgd3JhcHBlZFdlbGxLbm93blN5bWJvbE1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbC13cmFwcGVkJyk7XG52YXIgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpLmY7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKE5BTUUpIHtcbiAgdmFyIFN5bWJvbCA9IHBhdGguU3ltYm9sIHx8IChwYXRoLlN5bWJvbCA9IHt9KTtcbiAgaWYgKCFoYXMoU3ltYm9sLCBOQU1FKSkgZGVmaW5lUHJvcGVydHkoU3ltYm9sLCBOQU1FLCB7XG4gICAgdmFsdWU6IHdyYXBwZWRXZWxsS25vd25TeW1ib2xNb2R1bGUuZihOQU1FKVxuICB9KTtcbn07XG4iLCJ2YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1vYmplY3QnKTtcbnZhciBuYXRpdmVLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1rZXlzJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxudmFyIEZBSUxTX09OX1BSSU1JVElWRVMgPSBmYWlscyhmdW5jdGlvbiAoKSB7IG5hdGl2ZUtleXMoMSk7IH0pO1xuXG4vLyBgT2JqZWN0LmtleXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LmtleXNcbiQoeyB0YXJnZXQ6ICdPYmplY3QnLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IEZBSUxTX09OX1BSSU1JVElWRVMgfSwge1xuICBrZXlzOiBmdW5jdGlvbiBrZXlzKGl0KSB7XG4gICAgcmV0dXJuIG5hdGl2ZUtleXModG9PYmplY3QoaXQpKTtcbiAgfVxufSk7XG4iLCJ2YXIgaXNSZWdFeHAgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtcmVnZXhwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmIChpc1JlZ0V4cChpdCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoXCJUaGUgbWV0aG9kIGRvZXNuJ3QgYWNjZXB0IHJlZ3VsYXIgZXhwcmVzc2lvbnNcIik7XG4gIH0gcmV0dXJuIGl0O1xufTtcbiIsInZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIE1BVENIID0gd2VsbEtub3duU3ltYm9sKCdtYXRjaCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChNRVRIT0RfTkFNRSkge1xuICB2YXIgcmVnZXhwID0gLy4vO1xuICB0cnkge1xuICAgICcvLi8nW01FVEhPRF9OQU1FXShyZWdleHApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlZ2V4cFtNQVRDSF0gPSBmYWxzZTtcbiAgICAgIHJldHVybiAnLy4vJ1tNRVRIT0RfTkFNRV0ocmVnZXhwKTtcbiAgICB9IGNhdGNoIChmKSB7IC8qIGVtcHR5ICovIH1cbiAgfSByZXR1cm4gZmFsc2U7XG59O1xuIiwiLyoqXG4gKiBXZWJTb2NrZXQgd2l0aCBwcm9taXNlIGFwaVxuICovXG5cbi8qKlxuICogQGV4dGVybmFsIENoYW5uZWxcbiAqL1xuXG5jb25zdCBDaGFubmVsID0gcmVxdWlyZSgnY2hubCcpO1xuY29uc3QgUHJvbWlzZUNvbnRyb2xsZXIgPSByZXF1aXJlKCdwcm9taXNlLWNvbnRyb2xsZXInKTtcbmNvbnN0IFJlcXVlc3RzID0gcmVxdWlyZSgnLi9yZXF1ZXN0cycpO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSByZXF1aXJlKCcuL29wdGlvbnMnKTtcbmNvbnN0IHt0aHJvd0lmfSA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxuLy8gc2VlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViU29ja2V0I1JlYWR5X3N0YXRlX2NvbnN0YW50c1xuY29uc3QgU1RBVEUgPSB7XG4gIENPTk5FQ1RJTkc6IDAsXG4gIE9QRU46IDEsXG4gIENMT1NJTkc6IDIsXG4gIENMT1NFRDogMyxcbn07XG5cbi8qKlxuICogQHR5cGljYWxuYW1lIHdzcFxuICovXG5jbGFzcyBXZWJTb2NrZXRBc1Byb21pc2VkIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yLiBVbmxpa2Ugb3JpZ2luYWwgV2ViU29ja2V0IGl0IGRvZXMgbm90IGltbWVkaWF0ZWx5IG9wZW4gY29ubmVjdGlvbi5cbiAgICogUGxlYXNlIGNhbGwgYG9wZW4oKWAgbWV0aG9kIHRvIGNvbm5lY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgV2ViU29ja2V0IFVSTFxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXVxuICAgKi9cbiAgY29uc3RydWN0b3IodXJsLCBvcHRpb25zKSB7XG4gICAgdGhpcy5fYXNzZXJ0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLl91cmwgPSB1cmw7XG4gICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICB0aGlzLl9yZXF1ZXN0cyA9IG5ldyBSZXF1ZXN0cygpO1xuICAgIHRoaXMuX3dzID0gbnVsbDtcbiAgICB0aGlzLl93c1N1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgdGhpcy5fY3JlYXRlT3BlbmluZ0NvbnRyb2xsZXIoKTtcbiAgICB0aGlzLl9jcmVhdGVDbG9zaW5nQ29udHJvbGxlcigpO1xuICAgIHRoaXMuX2NyZWF0ZUNoYW5uZWxzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBvcmlnaW5hbCBXZWJTb2NrZXQgaW5zdGFuY2UgY3JlYXRlZCBieSBgb3B0aW9ucy5jcmVhdGVXZWJTb2NrZXRgLlxuICAgKlxuICAgKiBAcmV0dXJucyB7V2ViU29ja2V0fVxuICAgKi9cbiAgZ2V0IHdzKCkge1xuICAgIHJldHVybiB0aGlzLl93cztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIFdlYlNvY2tldCB1cmwuXG4gICAqXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLl91cmw7XG4gIH1cblxuICAvKipcbiAgICogSXMgV2ViU29ja2V0IGNvbm5lY3Rpb24gaW4gb3BlbmluZyBzdGF0ZS5cbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNPcGVuaW5nKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMuX3dzICYmIHRoaXMuX3dzLnJlYWR5U3RhdGUgPT09IFNUQVRFLkNPTk5FQ1RJTkcpO1xuICB9XG5cbiAgLyoqXG4gICAqIElzIFdlYlNvY2tldCBjb25uZWN0aW9uIG9wZW5lZC5cbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNPcGVuZWQoKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5fd3MgJiYgdGhpcy5fd3MucmVhZHlTdGF0ZSA9PT0gU1RBVEUuT1BFTik7XG4gIH1cblxuICAvKipcbiAgICogSXMgV2ViU29ja2V0IGNvbm5lY3Rpb24gaW4gY2xvc2luZyBzdGF0ZS5cbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNDbG9zaW5nKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMuX3dzICYmIHRoaXMuX3dzLnJlYWR5U3RhdGUgPT09IFNUQVRFLkNMT1NJTkcpO1xuICB9XG5cbiAgLyoqXG4gICAqIElzIFdlYlNvY2tldCBjb25uZWN0aW9uIGNsb3NlZC5cbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNDbG9zZWQoKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4oIXRoaXMuX3dzIHx8IHRoaXMuX3dzLnJlYWR5U3RhdGUgPT09IFNUQVRFLkNMT1NFRCk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgY2hhbm5lbCB0cmlnZ2VyZWQgd2hlbiBjb25uZWN0aW9uIGlzIG9wZW5lZC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL3ZpdGFsZXRzLmdpdGh1Yi5pby9jaG5sLyNjaGFubmVsXG4gICAqIEBleGFtcGxlXG4gICAqIHdzcC5vbk9wZW4uYWRkTGlzdGVuZXIoKCkgPT4gY29uc29sZS5sb2coJ0Nvbm5lY3Rpb24gb3BlbmVkJykpO1xuICAgKlxuICAgKiBAcmV0dXJucyB7Q2hhbm5lbH1cbiAgICovXG4gIGdldCBvbk9wZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uT3BlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBjaGFubmVsIHRyaWdnZXJlZCBldmVyeSB0aW1lIHdoZW4gbWVzc2FnZSBpcyBzZW50IHRvIHNlcnZlci5cbiAgICpcbiAgICogQHNlZSBodHRwczovL3ZpdGFsZXRzLmdpdGh1Yi5pby9jaG5sLyNjaGFubmVsXG4gICAqIEBleGFtcGxlXG4gICAqIHdzcC5vblNlbmQuYWRkTGlzdGVuZXIoZGF0YSA9PiBjb25zb2xlLmxvZygnTWVzc2FnZSBzZW50JywgZGF0YSkpO1xuICAgKlxuICAgKiBAcmV0dXJucyB7Q2hhbm5lbH1cbiAgICovXG4gIGdldCBvblNlbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uU2VuZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBjaGFubmVsIHRyaWdnZXJlZCBldmVyeSB0aW1lIHdoZW4gbWVzc2FnZSByZWNlaXZlZCBmcm9tIHNlcnZlci5cbiAgICpcbiAgICogQHNlZSBodHRwczovL3ZpdGFsZXRzLmdpdGh1Yi5pby9jaG5sLyNjaGFubmVsXG4gICAqIEBleGFtcGxlXG4gICAqIHdzcC5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIobWVzc2FnZSA9PiBjb25zb2xlLmxvZyhtZXNzYWdlKSk7XG4gICAqXG4gICAqIEByZXR1cm5zIHtDaGFubmVsfVxuICAgKi9cbiAgZ2V0IG9uTWVzc2FnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fb25NZXNzYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGNoYW5uZWwgdHJpZ2dlcmVkIGV2ZXJ5IHRpbWUgd2hlbiByZWNlaXZlZCBtZXNzYWdlIGlzIHN1Y2Nlc3NmdWxseSB1bnBhY2tlZC5cbiAgICogRm9yIGV4YW1wbGUsIGlmIHlvdSBhcmUgdXNpbmcgSlNPTiB0cmFuc3BvcnQsIHRoZSBsaXN0ZW5lciB3aWxsIHJlY2VpdmUgYWxyZWFkeSBKU09OIHBhcnNlZCBkYXRhLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vdml0YWxldHMuZ2l0aHViLmlvL2NobmwvI2NoYW5uZWxcbiAgICogQGV4YW1wbGVcbiAgICogd3NwLm9uVW5wYWNrZWRNZXNzYWdlLmFkZExpc3RlbmVyKGRhdGEgPT4gY29uc29sZS5sb2coZGF0YS5mb28pKTtcbiAgICpcbiAgICogQHJldHVybnMge0NoYW5uZWx9XG4gICAqL1xuICBnZXQgb25VbnBhY2tlZE1lc3NhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uVW5wYWNrZWRNZXNzYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGNoYW5uZWwgdHJpZ2dlcmVkIGV2ZXJ5IHRpbWUgd2hlbiByZXNwb25zZSB0byBzb21lIHJlcXVlc3QgY29tZXMuXG4gICAqIFJlY2VpdmVkIG1lc3NhZ2UgY29uc2lkZXJlZCBhIHJlc3BvbnNlIGlmIHJlcXVlc3RJZCBpcyBmb3VuZCBpbiBpdC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL3ZpdGFsZXRzLmdpdGh1Yi5pby9jaG5sLyNjaGFubmVsXG4gICAqIEBleGFtcGxlXG4gICAqIHdzcC5vblJlc3BvbnNlLmFkZExpc3RlbmVyKGRhdGEgPT4gY29uc29sZS5sb2coZGF0YSkpO1xuICAgKlxuICAgKiBAcmV0dXJucyB7Q2hhbm5lbH1cbiAgICovXG4gIGdldCBvblJlc3BvbnNlKCkge1xuICAgIHJldHVybiB0aGlzLl9vblJlc3BvbnNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGNoYW5uZWwgdHJpZ2dlcmVkIHdoZW4gY29ubmVjdGlvbiBjbG9zZWQuXG4gICAqIExpc3RlbmVyIGFjY2VwdHMgc2luZ2xlIGFyZ3VtZW50IGB7Y29kZSwgcmVhc29ufWAuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly92aXRhbGV0cy5naXRodWIuaW8vY2hubC8jY2hhbm5lbFxuICAgKiBAZXhhbXBsZVxuICAgKiB3c3Aub25DbG9zZS5hZGRMaXN0ZW5lcihldmVudCA9PiBjb25zb2xlLmxvZyhgQ29ubmVjdGlvbnMgY2xvc2VkOiAke2V2ZW50LnJlYXNvbn1gKSk7XG4gICAqXG4gICAqIEByZXR1cm5zIHtDaGFubmVsfVxuICAgKi9cbiAgZ2V0IG9uQ2xvc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uQ2xvc2U7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgY2hhbm5lbCB0cmlnZ2VyZWQgd2hlbiBieSBXZWJzb2NrZXQgJ2Vycm9yJyBldmVudC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL3ZpdGFsZXRzLmdpdGh1Yi5pby9jaG5sLyNjaGFubmVsXG4gICAqIEBleGFtcGxlXG4gICAqIHdzcC5vbkVycm9yLmFkZExpc3RlbmVyKGV2ZW50ID0+IGNvbnNvbGUuZXJyb3IoZXZlbnQpKTtcbiAgICpcbiAgICogQHJldHVybnMge0NoYW5uZWx9XG4gICAqL1xuICBnZXQgb25FcnJvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fb25FcnJvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyBXZWJTb2NrZXQgY29ubmVjdGlvbi4gSWYgY29ubmVjdGlvbiBhbHJlYWR5IG9wZW5lZCwgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGggXCJvcGVuIGV2ZW50XCIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEV2ZW50Pn1cbiAgICovXG4gIG9wZW4oKSB7XG4gICAgaWYgKHRoaXMuaXNDbG9zaW5nKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBDYW4ndCBvcGVuIFdlYlNvY2tldCB3aGlsZSBjbG9zaW5nLmApKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNPcGVuZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9vcGVuaW5nLnByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9vcGVuaW5nLmNhbGwoKCkgPT4ge1xuICAgICAgdGhpcy5fb3BlbmluZy5wcm9taXNlLmNhdGNoKGUgPT4gdGhpcy5fY2xlYW51cChlKSk7XG4gICAgICB0aGlzLl9jcmVhdGVXUygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIHJlcXVlc3QgYW5kIHdhaXRzIGZvciByZXNwb25zZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBbb3B0aW9ucy5yZXF1ZXN0SWQ9PGF1dG8tZ2VuZXJhdGVkPl1cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLnRpbWVvdXQ9MF1cbiAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAqL1xuICBzZW5kUmVxdWVzdChkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0SWQgPSBvcHRpb25zLnJlcXVlc3RJZCB8fCBgJHtNYXRoLnJhbmRvbSgpfWA7XG4gICAgY29uc3QgdGltZW91dCA9IG9wdGlvbnMudGltZW91dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aW1lb3V0IDogdGhpcy5fb3B0aW9ucy50aW1lb3V0O1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0cy5jcmVhdGUocmVxdWVzdElkLCAoKSA9PiB7XG4gICAgICB0aGlzLl9hc3NlcnRSZXF1ZXN0SWRIYW5kbGVycygpO1xuICAgICAgY29uc3QgZmluYWxEYXRhID0gdGhpcy5fb3B0aW9ucy5hdHRhY2hSZXF1ZXN0SWQoZGF0YSwgcmVxdWVzdElkKTtcbiAgICAgIHRoaXMuc2VuZFBhY2tlZChmaW5hbERhdGEpO1xuICAgIH0sIHRpbWVvdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhY2tzIGRhdGEgd2l0aCBgb3B0aW9ucy5wYWNrTWVzc2FnZWAgYW5kIHNlbmRzIHRvIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKi9cbiAgc2VuZFBhY2tlZChkYXRhKSB7XG4gICAgdGhpcy5fYXNzZXJ0UGFja2luZ0hhbmRsZXJzKCk7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuX29wdGlvbnMucGFja01lc3NhZ2UoZGF0YSk7XG4gICAgdGhpcy5zZW5kKG1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGRhdGEgd2l0aG91dCBwYWNraW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xCbG9ifEFycmF5QnVmZmVyfSBkYXRhXG4gICAqL1xuICBzZW5kKGRhdGEpIHtcbiAgICB0aHJvd0lmKCF0aGlzLmlzT3BlbmVkLCBgQ2FuJ3Qgc2VuZCBkYXRhIGJlY2F1c2UgV2ViU29ja2V0IGlzIG5vdCBvcGVuZWQuYCk7XG4gICAgdGhpcy5fd3Muc2VuZChkYXRhKTtcbiAgICB0aGlzLl9vblNlbmQuZGlzcGF0Y2hBc3luYyhkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgV2ViU29ja2V0IGNvbm5lY3Rpb24uIElmIGNvbm5lY3Rpb24gYWxyZWFkeSBjbG9zZWQsIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoIFwiY2xvc2UgZXZlbnRcIi5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8RXZlbnQ+fVxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDbG9zZWRcbiAgICAgID8gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2Nsb3NpbmcudmFsdWUpXG4gICAgICA6IHRoaXMuX2Nsb3NpbmcuY2FsbCgoKSA9PiB0aGlzLl93cy5jbG9zZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMgZnJvbSBXU1AgaW5zdGFuY2UuIFVzZWZ1bCBmb3IgY2xlYW51cC5cbiAgICovXG4gIHJlbW92ZUFsbExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9vbk9wZW4ucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fb25NZXNzYWdlLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIHRoaXMuX29uVW5wYWNrZWRNZXNzYWdlLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIHRoaXMuX29uUmVzcG9uc2UucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fb25TZW5kLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIHRoaXMuX29uQ2xvc2UucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fb25FcnJvci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9jcmVhdGVPcGVuaW5nQ29udHJvbGxlcigpIHtcbiAgICBjb25zdCBjb25uZWN0aW9uVGltZW91dCA9IHRoaXMuX29wdGlvbnMuY29ubmVjdGlvblRpbWVvdXQgfHwgdGhpcy5fb3B0aW9ucy50aW1lb3V0O1xuICAgIHRoaXMuX29wZW5pbmcgPSBuZXcgUHJvbWlzZUNvbnRyb2xsZXIoe1xuICAgICAgdGltZW91dDogY29ubmVjdGlvblRpbWVvdXQsXG4gICAgICB0aW1lb3V0UmVhc29uOiBgQ2FuJ3Qgb3BlbiBXZWJTb2NrZXQgd2l0aGluIGFsbG93ZWQgdGltZW91dDogJHtjb25uZWN0aW9uVGltZW91dH0gbXMuYFxuICAgIH0pO1xuICB9XG5cbiAgX2NyZWF0ZUNsb3NpbmdDb250cm9sbGVyKCkge1xuICAgIGNvbnN0IGNsb3NpbmdUaW1lb3V0ID0gdGhpcy5fb3B0aW9ucy50aW1lb3V0O1xuICAgIHRoaXMuX2Nsb3NpbmcgPSBuZXcgUHJvbWlzZUNvbnRyb2xsZXIoe1xuICAgICAgdGltZW91dDogY2xvc2luZ1RpbWVvdXQsXG4gICAgICB0aW1lb3V0UmVhc29uOiBgQ2FuJ3QgY2xvc2UgV2ViU29ja2V0IHdpdGhpbiBhbGxvd2VkIHRpbWVvdXQ6ICR7Y2xvc2luZ1RpbWVvdXR9IG1zLmBcbiAgICB9KTtcbiAgfVxuXG4gIF9jcmVhdGVDaGFubmVscygpIHtcbiAgICB0aGlzLl9vbk9wZW4gPSBuZXcgQ2hhbm5lbCgpO1xuICAgIHRoaXMuX29uTWVzc2FnZSA9IG5ldyBDaGFubmVsKCk7XG4gICAgdGhpcy5fb25VbnBhY2tlZE1lc3NhZ2UgPSBuZXcgQ2hhbm5lbCgpO1xuICAgIHRoaXMuX29uUmVzcG9uc2UgPSBuZXcgQ2hhbm5lbCgpO1xuICAgIHRoaXMuX29uU2VuZCA9IG5ldyBDaGFubmVsKCk7XG4gICAgdGhpcy5fb25DbG9zZSA9IG5ldyBDaGFubmVsKCk7XG4gICAgdGhpcy5fb25FcnJvciA9IG5ldyBDaGFubmVsKCk7XG4gIH1cblxuICBfY3JlYXRlV1MoKSB7XG4gICAgdGhpcy5fd3MgPSB0aGlzLl9vcHRpb25zLmNyZWF0ZVdlYlNvY2tldCh0aGlzLl91cmwpO1xuICAgIHRoaXMuX3dzU3Vic2NyaXB0aW9uID0gbmV3IENoYW5uZWwuU3Vic2NyaXB0aW9uKFtcbiAgICAgIHtjaGFubmVsOiB0aGlzLl93cywgZXZlbnQ6ICdvcGVuJywgbGlzdGVuZXI6IGUgPT4gdGhpcy5faGFuZGxlT3BlbihlKX0sXG4gICAgICB7Y2hhbm5lbDogdGhpcy5fd3MsIGV2ZW50OiAnbWVzc2FnZScsIGxpc3RlbmVyOiBlID0+IHRoaXMuX2hhbmRsZU1lc3NhZ2UoZSl9LFxuICAgICAge2NoYW5uZWw6IHRoaXMuX3dzLCBldmVudDogJ2Vycm9yJywgbGlzdGVuZXI6IGUgPT4gdGhpcy5faGFuZGxlRXJyb3IoZSl9LFxuICAgICAge2NoYW5uZWw6IHRoaXMuX3dzLCBldmVudDogJ2Nsb3NlJywgbGlzdGVuZXI6IGUgPT4gdGhpcy5faGFuZGxlQ2xvc2UoZSl9LFxuICAgIF0pLm9uKCk7XG4gIH1cblxuICBfaGFuZGxlT3BlbihldmVudCkge1xuICAgIHRoaXMuX29uT3Blbi5kaXNwYXRjaEFzeW5jKGV2ZW50KTtcbiAgICB0aGlzLl9vcGVuaW5nLnJlc29sdmUoZXZlbnQpO1xuICB9XG5cbiAgX2hhbmRsZU1lc3NhZ2UoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5fb3B0aW9ucy5leHRyYWN0TWVzc2FnZURhdGEoZXZlbnQpO1xuICAgIHRoaXMuX29uTWVzc2FnZS5kaXNwYXRjaEFzeW5jKGRhdGEpO1xuICAgIHRoaXMuX3RyeVVucGFjayhkYXRhKTtcbiAgfVxuXG4gIF90cnlVbnBhY2soZGF0YSkge1xuICAgIGlmICh0aGlzLl9vcHRpb25zLnVucGFja01lc3NhZ2UpIHtcbiAgICAgIGRhdGEgPSB0aGlzLl9vcHRpb25zLnVucGFja01lc3NhZ2UoZGF0YSk7XG4gICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX29uVW5wYWNrZWRNZXNzYWdlLmRpc3BhdGNoQXN5bmMoZGF0YSk7XG4gICAgICAgIHRoaXMuX3RyeUhhbmRsZVJlc3BvbnNlKGRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF90cnlIYW5kbGVSZXNwb25zZShkYXRhKSB7XG4gICAgaWYgKHRoaXMuX29wdGlvbnMuZXh0cmFjdFJlcXVlc3RJZCkge1xuICAgICAgY29uc3QgcmVxdWVzdElkID0gdGhpcy5fb3B0aW9ucy5leHRyYWN0UmVxdWVzdElkKGRhdGEpO1xuICAgICAgaWYgKHJlcXVlc3RJZCkge1xuICAgICAgICB0aGlzLl9vblJlc3BvbnNlLmRpc3BhdGNoQXN5bmMoZGF0YSwgcmVxdWVzdElkKTtcbiAgICAgICAgdGhpcy5fcmVxdWVzdHMucmVzb2x2ZShyZXF1ZXN0SWQsIGRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVFcnJvcihldmVudCkge1xuICAgIHRoaXMuX29uRXJyb3IuZGlzcGF0Y2hBc3luYyhldmVudCk7XG4gIH1cblxuICBfaGFuZGxlQ2xvc2UoZXZlbnQpIHtcbiAgICB0aGlzLl9vbkNsb3NlLmRpc3BhdGNoQXN5bmMoZXZlbnQpO1xuICAgIHRoaXMuX2Nsb3NpbmcucmVzb2x2ZShldmVudCk7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYFdlYlNvY2tldCBjbG9zZWQgd2l0aCByZWFzb246ICR7ZXZlbnQucmVhc29ufSAoJHtldmVudC5jb2RlfSkuYCk7XG4gICAgaWYgKHRoaXMuX29wZW5pbmcuaXNQZW5kaW5nKSB7XG4gICAgICB0aGlzLl9vcGVuaW5nLnJlamVjdChlcnJvcik7XG4gICAgfVxuICAgIHRoaXMuX2NsZWFudXAoZXJyb3IpO1xuICB9XG5cbiAgX2NsZWFudXBXUygpIHtcbiAgICBpZiAodGhpcy5fd3NTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuX3dzU3Vic2NyaXB0aW9uLm9mZigpO1xuICAgICAgdGhpcy5fd3NTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLl93cyA9IG51bGw7XG4gIH1cblxuICBfY2xlYW51cChlcnJvcikge1xuICAgIHRoaXMuX2NsZWFudXBXUygpO1xuICAgIHRoaXMuX3JlcXVlc3RzLnJlamVjdEFsbChlcnJvcik7XG4gIH1cblxuICBfYXNzZXJ0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgT2JqZWN0LmtleXMob3B0aW9ucyB8fCB7fSkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaWYgKCFkZWZhdWx0T3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvcHRpb246ICR7a2V5fWApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX2Fzc2VydFBhY2tpbmdIYW5kbGVycygpIHtcbiAgICBjb25zdCB7cGFja01lc3NhZ2UsIHVucGFja01lc3NhZ2V9ID0gdGhpcy5fb3B0aW9ucztcbiAgICB0aHJvd0lmKCFwYWNrTWVzc2FnZSB8fCAhdW5wYWNrTWVzc2FnZSxcbiAgICAgIGBQbGVhc2UgZGVmaW5lICdvcHRpb25zLnBhY2tNZXNzYWdlIC8gb3B0aW9ucy51bnBhY2tNZXNzYWdlJyBmb3Igc2VuZGluZyBwYWNrZWQgbWVzc2FnZXMuYFxuICAgICk7XG4gIH1cblxuICBfYXNzZXJ0UmVxdWVzdElkSGFuZGxlcnMoKSB7XG4gICAgY29uc3Qge2F0dGFjaFJlcXVlc3RJZCwgZXh0cmFjdFJlcXVlc3RJZH0gPSB0aGlzLl9vcHRpb25zO1xuICAgIHRocm93SWYoIWF0dGFjaFJlcXVlc3RJZCB8fCAhZXh0cmFjdFJlcXVlc3RJZCxcbiAgICAgIGBQbGVhc2UgZGVmaW5lICdvcHRpb25zLmF0dGFjaFJlcXVlc3RJZCAvIG9wdGlvbnMuZXh0cmFjdFJlcXVlc3RJZCcgZm9yIHNlbmRpbmcgcmVxdWVzdHMuYFxuICAgICk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXRBc1Byb21pc2VkO1xuIiwiaW1wb3J0IFR1cm1zQ2xpZW50IGZyb20gXCIuLi90dXJtcy1jbGllbnRcIjtcclxuaW1wb3J0IENvbnN0YW50VHJhbnNmb3JtZXIgZnJvbSBcIi4uL3V0aWwvY29uc3RhbnQtdHJhbnNmb3JtZXJcIjtcclxuaW1wb3J0IHtpbX0gZnJvbSBcIi4uL21vZGVsL3Byb3RvLWJ1bmRsZVwiO1xyXG5pbXBvcnQgUmVxdWVzdFV0aWwgZnJvbSBcIi4uL3V0aWwvcmVxdWVzdC11dGlsXCI7XHJcbmltcG9ydCB7UGFyc2VkTW9kZWx9IGZyb20gXCIuLi9tb2RlbC9wYXJzZWQtbW9kZWxcIjtcclxuaW1wb3J0IE5vdGlmaWNhdGlvblV0aWwgZnJvbSBcIi4uL3V0aWwvbm90aWZpY2F0aW9uLXV0aWxcIjtcclxuaW1wb3J0IFVzZXJTdGF0dXMgPSBpbS50dXJtcy5wcm90by5Vc2VyU3RhdHVzO1xyXG5pbXBvcnQgUHJvZmlsZUFjY2Vzc1N0cmF0ZWd5ID0gaW0udHVybXMucHJvdG8uUHJvZmlsZUFjY2Vzc1N0cmF0ZWd5O1xyXG5pbXBvcnQgUmVzcG9uc2VBY3Rpb24gPSBpbS50dXJtcy5wcm90by5SZXNwb25zZUFjdGlvbjtcclxuaW1wb3J0IERldmljZVR5cGUgPSBpbS50dXJtcy5wcm90by5EZXZpY2VUeXBlO1xyXG5cclxuZXhwb3J0IGNvbnN0IENPT0tJRV9SRVFVRVNUX0lEID0gJ3JpZCc7XHJcbmV4cG9ydCBjb25zdCBDT09LSUVfVVNFUl9JRCA9ICd1aWQnO1xyXG5leHBvcnQgY29uc3QgQ09PS0lFX1BBU1NXT1JEID0gJ3B3ZCc7XHJcbmV4cG9ydCBjb25zdCBDT09LSUVfVVNFUl9PTkxJTkVfU1RBVFVTID0gJ3VzJztcclxuZXhwb3J0IGNvbnN0IENPT0tJRV9ERVZJQ0VfVFlQRSA9ICdkdCc7XHJcbmV4cG9ydCBjb25zdCBDT09LSUVfTE9DQVRJT04gPSAnbG9jJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgX3R1cm1zQ2xpZW50OiBUdXJtc0NsaWVudDtcclxuICAgIHByaXZhdGUgX3VzZXJJZD86IHN0cmluZztcclxuICAgIHByaXZhdGUgX3Bhc3N3b3JkPzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfbG9jYXRpb246IHN0cmluZztcclxuICAgIHByaXZhdGUgX3VzZXJPbmxpbmVTdGF0dXM6IGltLnR1cm1zLnByb3RvLlVzZXJTdGF0dXM7XHJcbiAgICBwcml2YXRlIF9kZXZpY2VUeXBlOiBpbS50dXJtcy5wcm90by5EZXZpY2VUeXBlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHR1cm1zQ2xpZW50OiBUdXJtc0NsaWVudCkge1xyXG4gICAgICAgIHRoaXMuX3R1cm1zQ2xpZW50ID0gdHVybXNDbGllbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBhc3N3b3JkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bhc3N3b3JkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB1c2VySWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTm90ZTogQmVjYXVzZSBvZiB1c2VyIHByaXZhY3ksIG1vc3Qgb2YgbW9kZXJuIGJyb3dzZXJzIHJlcXVlc3QgR2VvbG9jYXRpb24gQVBJcyB0byBydW4gaW4gSFRUUFMsXHJcbiAgICAgKiBnZXRVc2VyTG9jYXRpb24oKSBjYW5ub3QgZ2V0IHRoZSBsb2NhdGlvbiBvZiB1c2VyIGluIGluc2VjdXJlIHNpdGVzLlxyXG4gICAgICogRllJOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNzgzNTgwNS9odHRwLXNpdGVzLWRvZXMtbm90LWRldGVjdC10aGUtbG9jYXRpb24taW4tY2hyb21lLWlzc3VlXHJcbiAgICAgKiBodHRwczovL2Nhbml1c2UuY29tLyNzZWFyY2g9R2VvbG9jYXRpb25cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFVzZXJMb2NhdGlvbkZyb21Ccm93c2VyKCk6IFByb21pc2U8UG9zaXRpb24+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHBvc2l0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9LCBwb3NpdGlvbkVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChwb3NpdGlvbkVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOb3RlOiBNYWtlIHN1cmUgdG8gcnVuIHR1cm1zLWNsaWVudCBpbiB0aGUgaHR0cChzKSBwcm90b2NvbCByYXRoZXIgdGhhbiB0aGUgZmlsZSBwcm90b2NvbCxcclxuICAgICAqIG9yIHRoZSBicm93c2VycyB1c3VhbGx5IGNhbm5vdCBwYXNzIHRoZSBjb29raWVzIHdoaWNoIGNhcnJ5IHRoZSB1c2VySWQgYW5kIHBhc3N3b3JkIHRvIHNlcnZlcnMuXHJcbiAgICAgKiBAZGV2aWNlVHlwZTogV2hlbiBEZXZpY2VUeXBlLlVOS05PV04sIHRoZSB0dXJtcyBzZXJ2ZXIgd2lsbCB0cnkgdG8gZGV0ZWN0IHRoZSB1c2VyJ3MgZGV2aWNlIGF1dG9tYXRpY2FsbHlcclxuICAgICAqL1xyXG4gICAgbG9naW4oXHJcbiAgICAgICAgdXNlcklkOiBzdHJpbmcsXHJcbiAgICAgICAgcGFzc3dvcmQ6IHN0cmluZyxcclxuICAgICAgICBsb2NhdGlvbj86IHN0cmluZyB8IFBvc2l0aW9uLFxyXG4gICAgICAgIHVzZXJPbmxpbmVTdGF0dXMgPSBVc2VyU3RhdHVzLkFWQUlMQUJMRSxcclxuICAgICAgICBkZXZpY2VUeXBlID0gRGV2aWNlVHlwZS5VTktOT1dOKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KHVzZXJJZCwgcGFzc3dvcmQpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB0aGlzLl9wYXNzd29yZCA9IHBhc3N3b3JkO1xyXG4gICAgICAgIHRoaXMuX3VzZXJPbmxpbmVTdGF0dXMgPSB1c2VyT25saW5lU3RhdHVzO1xyXG4gICAgICAgIHRoaXMuX2RldmljZVR5cGUgPSBkZXZpY2VUeXBlO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogOTAwNzE5OTI1NDc0MDk5MSk7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYCR7Q09PS0lFX1VTRVJfSUR9PSR7dXNlcklkfTsgcGF0aD0vYDtcclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgJHtDT09LSUVfUEFTU1dPUkR9PSR7ZXNjYXBlKHBhc3N3b3JkKX07IHBhdGg9L2A7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYCR7Q09PS0lFX1VTRVJfT05MSU5FX1NUQVRVU309JHt1c2VyT25saW5lU3RhdHVzLnRvU3RyaW5nKCl9OyBwYXRoPS9gO1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke0NPT0tJRV9ERVZJQ0VfVFlQRX09JHtkZXZpY2VUeXBlLnRvU3RyaW5nKCl9OyBwYXRoPS9gO1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke0NPT0tJRV9SRVFVRVNUX0lEfT0ke3JlcXVlc3RJZH07IHBhdGg9L2A7XHJcbiAgICAgICAgaWYgKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2NhdGlvbiA9IGxvY2F0aW9uO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbG9jYXRpb24gPSBgJHtsb2NhdGlvbi5jb29yZHMubGF0aXR1ZGV9OiR7bG9jYXRpb24uY29vcmRzLmxvbmdpdHVkZX1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke0NPT0tJRV9MT0NBVElPTn09JHt0aGlzLl9sb2NhdGlvbn07IHBhdGg9L2A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuY29ubmVjdCh1c2VySWQsIHBhc3N3b3JkLCByZXF1ZXN0SWQpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLl9jbGVhckNvb2tpZXMoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgVXNlclNlcnZpY2UuX2NsZWFyQ29va2llcygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVsb2dpbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIXRoaXMuX3VzZXJJZCB8fCAhdGhpcy5fcGFzc3dvcmQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9naW4odGhpcy5fdXNlcklkLCB0aGlzLl9wYXNzd29yZCwgdGhpcy5fbG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICB0aGlzLl91c2VyT25saW5lU3RhdHVzLCB0aGlzLl9kZXZpY2VUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9nb3V0KCk6IFByb21pc2U8Q2xvc2VFdmVudD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuZGlzY29ubmVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVVzZXJPbmxpbmVTdGF0dXMob25saW5lU3RhdHVzOiBzdHJpbmcgfCBVc2VyU3RhdHVzKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KG9ubGluZVN0YXR1cyk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBvbmxpbmVTdGF0dXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIG9ubGluZVN0YXR1cyA9IENvbnN0YW50VHJhbnNmb3JtZXIuc3RyaW5nMlVzZXJPbmxpbmVTdGF0dXMob25saW5lU3RhdHVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ubGluZVN0YXR1cyA9PT0gVXNlclN0YXR1cy5PRkZMSU5FKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBwYXJhbXMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgdXBkYXRlVXNlck9ubGluZVN0YXR1c1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIHVzZXJTdGF0dXM6IG9ubGluZVN0YXR1c1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kocGFzc3dvcmQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIHVwZGF0ZVVzZXJSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKHBhc3N3b3JkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVByb2ZpbGUoXHJcbiAgICAgICAgbmFtZT86IHN0cmluZyxcclxuICAgICAgICBpbnRybz86IHN0cmluZyxcclxuICAgICAgICBwcm9maWxlUGljdHVyZVVybD86IHN0cmluZyxcclxuICAgICAgICBwcm9maWxlQWNjZXNzU3RyYXRlZ3k/OiBzdHJpbmcgfCBQcm9maWxlQWNjZXNzU3RyYXRlZ3kpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoUmVxdWVzdFV0aWwuYXJlQWxsRmFsc3kobmFtZSwgaW50cm8sIHByb2ZpbGVQaWN0dXJlVXJsLCBwcm9maWxlQWNjZXNzU3RyYXRlZ3kpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9maWxlQWNjZXNzU3RyYXRlZ3kgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHByb2ZpbGVBY2Nlc3NTdHJhdGVneSA9IENvbnN0YW50VHJhbnNmb3JtZXIuc3RyaW5nMlByb2ZpbGVBY2Nlc3NTdHJhdGVneShwcm9maWxlQWNjZXNzU3RyYXRlZ3kpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICB1cGRhdGVVc2VyUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKG5hbWUpLFxyXG4gICAgICAgICAgICAgICAgaW50cm86IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChpbnRybyksXHJcbiAgICAgICAgICAgICAgICBwcm9maWxlUGljdHVyZVVybDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKHByb2ZpbGVQaWN0dXJlVXJsKSxcclxuICAgICAgICAgICAgICAgIHByb2ZpbGVBY2Nlc3NTdHJhdGVneTogcHJvZmlsZUFjY2Vzc1N0cmF0ZWd5XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9ucyhsYXN0VXBkYXRlZERhdGU/OiBEYXRlKTogUHJvbWlzZTxQYXJzZWRNb2RlbC5Hcm91cEludml0YXRpb25zV2l0aFZlcnNpb24+IHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgcXVlcnlVc2VyR3JvdXBJbnZpdGF0aW9uc1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVkRGF0ZTogUmVxdWVzdFV0aWwud3JhcFRpbWVJZk5vdE51bGwobGFzdFVwZGF0ZWREYXRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gTm90aWZpY2F0aW9uVXRpbC50cmFuc2Zvcm0obm90aWZpY2F0aW9uLmRhdGEuZ3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcXVlcnlVc2VyUHJvZmlsZSh1c2VySWQ6IHN0cmluZywgbGFzdFVwZGF0ZWREYXRlPzogRGF0ZSk6IFByb21pc2U8UGFyc2VkTW9kZWwuVXNlckluZm9XaXRoVmVyc2lvbj4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeSh1c2VySWQpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeVVzZXJQcm9maWxlUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICBsYXN0VXBkYXRlZERhdGU6IFJlcXVlc3RVdGlsLndyYXBUaW1lSWZOb3ROdWxsKGxhc3RVcGRhdGVkRGF0ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvOiBOb3RpZmljYXRpb25VdGlsLnRyYW5zZm9ybShub3RpZmljYXRpb24uZGF0YS51c2Vyc0luZm9zV2l0aFZlcnNpb24udXNlckluZm9zWzBdKSxcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVkRGF0ZTogTm90aWZpY2F0aW9uVXRpbC50cmFuc2Zvcm1EYXRlKG5vdGlmaWNhdGlvbi5kYXRhLnVzZXJzSW5mb3NXaXRoVmVyc2lvbi5sYXN0VXBkYXRlZERhdGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeVVzZXJzSWRzTmVhcmJ5KGxhdGl0dWRlOiBudW1iZXIsIGxvbmdpdHVkZTogbnVtYmVyLCBkaXN0YW5jZT86IG51bWJlciwgbWF4TnVtYmVyPzogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShsYXRpdHVkZSwgbG9uZ2l0dWRlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeVVzZXJzSWRzTmVhcmJ5UmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IGxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBsb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGRpc3RhbmNlKSxcclxuICAgICAgICAgICAgICAgIG1heE51bWJlcjogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKG1heE51bWJlcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IG5vdGlmaWNhdGlvbi5kYXRhLmlkcy52YWx1ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5VXNlcnNJbmZvc05lYXJieShsYXRpdHVkZTogbnVtYmVyLCBsb25naXR1ZGU6IG51bWJlciwgZGlzdGFuY2U/OiBudW1iZXIsIG1heE51bWJlcj86IG51bWJlcik6IFByb21pc2U8UGFyc2VkTW9kZWwuVXNlckluZm9bXT4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShsYXRpdHVkZSwgbG9uZ2l0dWRlKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgcXVlcnlVc2Vyc0luZm9zTmVhcmJ5UmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IGxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBsb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGRpc3RhbmNlKSxcclxuICAgICAgICAgICAgICAgIG1heE51bWJlcjogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKG1heE51bWJlcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IE5vdGlmaWNhdGlvblV0aWwuZ2V0Rmlyc3RBcnJheUFuZFRyYW5zZm9ybShub3RpZmljYXRpb24uZGF0YS51c2Vyc0luZm9zV2l0aFZlcnNpb24udXNlckluZm9zKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcXVlcnlVc2Vyc09ubGluZVN0YXR1c1JlcXVlc3QodXNlcnNJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTxQYXJzZWRNb2RlbC5Vc2VyU3RhdHVzRGV0YWlsW10+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kodXNlcnNJZHMpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeVVzZXJzT25saW5lU3RhdHVzUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgdXNlcnNJZHNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IE5vdGlmaWNhdGlvblV0aWwuZ2V0Rmlyc3RBcnJheUFuZFRyYW5zZm9ybShub3RpZmljYXRpb24uZGF0YS51c2Vyc09ubGluZVN0YXR1c2VzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVsYXRpb25zaGlwXHJcblxyXG4gICAgcXVlcnlSZWxhdGlvbnNoaXBzKFxyXG4gICAgICAgIHJlbGF0ZWRVc2Vyc0lkcz86IHN0cmluZ1tdLFxyXG4gICAgICAgIGlzQmxvY2tlZD86IGJvb2xlYW4sXHJcbiAgICAgICAgZ3JvdXBJbmRleD86IG51bWJlcixcclxuICAgICAgICBsYXN0VXBkYXRlZERhdGU/OiBEYXRlKTogUHJvbWlzZTxQYXJzZWRNb2RlbC5Vc2VyUmVsYXRpb25zaGlwc1dpdGhWZXJzaW9uPiB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIHF1ZXJ5UmVsYXRpb25zaGlwc1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIHJlbGF0ZWRVc2Vyc0lkcyxcclxuICAgICAgICAgICAgICAgIGlzQmxvY2tlZDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGlzQmxvY2tlZCksXHJcbiAgICAgICAgICAgICAgICBncm91cEluZGV4OiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoZ3JvdXBJbmRleCksXHJcbiAgICAgICAgICAgICAgICBsYXN0VXBkYXRlZERhdGU6IFJlcXVlc3RVdGlsLndyYXBUaW1lSWZOb3ROdWxsKGxhc3RVcGRhdGVkRGF0ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IE5vdGlmaWNhdGlvblV0aWwudHJhbnNmb3JtKG5vdGlmaWNhdGlvbi5kYXRhLnVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeVJlbGF0ZWRVc2Vyc0lkcyhcclxuICAgICAgICBpc0Jsb2NrZWQ/OiBib29sZWFuLFxyXG4gICAgICAgIGdyb3VwSW5kZXg/OiBudW1iZXIsXHJcbiAgICAgICAgbGFzdFVwZGF0ZWREYXRlPzogRGF0ZSk6IFByb21pc2U8UGFyc2VkTW9kZWwuSWRzV2l0aFZlcnNpb24+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeVJlbGF0ZWRVc2Vyc0lkc1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIGlzQmxvY2tlZDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGlzQmxvY2tlZCksXHJcbiAgICAgICAgICAgICAgICBncm91cEluZGV4OiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoZ3JvdXBJbmRleCksXHJcbiAgICAgICAgICAgICAgICBsYXN0VXBkYXRlZERhdGU6IFJlcXVlc3RVdGlsLndyYXBUaW1lSWZOb3ROdWxsKGxhc3RVcGRhdGVkRGF0ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IE5vdGlmaWNhdGlvblV0aWwuZ2V0SWRzV2l0aFZlcnNpb24obm90aWZpY2F0aW9uKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcXVlcnlGcmllbmRzKGdyb3VwSW5kZXg/OiBudW1iZXIsIGxhc3RVcGRhdGVkRGF0ZT86IERhdGUpOiBQcm9taXNlPFBhcnNlZE1vZGVsLlVzZXJSZWxhdGlvbnNoaXBzV2l0aFZlcnNpb24+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVJlbGF0aW9uc2hpcHModW5kZWZpbmVkLCBmYWxzZSwgZ3JvdXBJbmRleCwgbGFzdFVwZGF0ZWREYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeUJsYWNrbGlzdGVkVXNlcnMoZ3JvdXBJbmRleD86IG51bWJlciwgbGFzdFVwZGF0ZWREYXRlPzogRGF0ZSk6IFByb21pc2U8UGFyc2VkTW9kZWwuVXNlclJlbGF0aW9uc2hpcHNXaXRoVmVyc2lvbj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5UmVsYXRpb25zaGlwcyh1bmRlZmluZWQsIHRydWUsIGdyb3VwSW5kZXgsIGxhc3RVcGRhdGVkRGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUmVsYXRpb25zaGlwKHVzZXJJZDogc3RyaW5nLCBpc0Jsb2NrZWQ6IGJvb2xlYW4sIGdyb3VwSW5kZXg/OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kodXNlcklkLCBpc0Jsb2NrZWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGNyZWF0ZVJlbGF0aW9uc2hpcFJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIHVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGlzQmxvY2tlZDogaXNCbG9ja2VkLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBJbmRleDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGdyb3VwSW5kZXgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRnJpZW5kUmVsYXRpb25zaGlwKHVzZXJJZDogc3RyaW5nLCBncm91cEluZGV4PzogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVsYXRpb25zaGlwKHVzZXJJZCwgZmFsc2UsIGdyb3VwSW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUJsYWNrbGlzdGVkVXNlclJlbGF0aW9uc2hpcCh1c2VySWQ6IHN0cmluZywgZ3JvdXBJbmRleD86IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlbGF0aW9uc2hpcCh1c2VySWQsIHRydWUsIGdyb3VwSW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVJlbGF0aW9uc2hpcChyZWxhdGVkVXNlcklkOiBzdHJpbmcsIGRlbGV0ZUdyb3VwSW5kZXg/OiBzdHJpbmcsIHRhcmdldEdyb3VwSW5kZXg/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kocmVsYXRlZFVzZXJJZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgZGVsZXRlUmVsYXRpb25zaGlwUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgcmVsYXRlZFVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGdyb3VwSW5kZXg6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChkZWxldGVHcm91cEluZGV4KSxcclxuICAgICAgICAgICAgICAgIHRhcmdldEdyb3VwSW5kZXg6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbCh0YXJnZXRHcm91cEluZGV4KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVJlbGF0aW9uc2hpcChyZWxhdGVkVXNlcklkOiBzdHJpbmcsIGlzQmxvY2tlZD86IGJvb2xlYW4sIGdyb3VwSW5kZXg/OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kocmVsYXRlZFVzZXJJZCk7XHJcbiAgICAgICAgaWYgKFJlcXVlc3RVdGlsLmFyZUFsbEZhbHN5KGlzQmxvY2tlZCwgZ3JvdXBJbmRleCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICB1cGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICByZWxhdGVkVXNlcklkLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tlZDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGlzQmxvY2tlZCksXHJcbiAgICAgICAgICAgICAgICBuZXdHcm91cEluZGV4OiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoZ3JvdXBJbmRleClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBzZW5kRnJpZW5kUmVxdWVzdChyZWNpcGllbnRJZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShyZWNpcGllbnRJZCwgY29udGVudCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgY3JlYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIHJlY2lwaWVudElkLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gbm90aWZpY2F0aW9uLmRhdGEuaWRzLnZhbHVlc1swXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVwbHlGcmllbmRSZXF1ZXN0KHJlcXVlc3RJZDogc3RyaW5nLCByZXNwb25zZUFjdGlvbjogc3RyaW5nIHwgUmVzcG9uc2VBY3Rpb24sIHJlYXNvbj86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShyZXF1ZXN0SWQsIHJlc3BvbnNlQWN0aW9uKTtcclxuICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlQWN0aW9uID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXNwb25zZUFjdGlvbiA9IENvbnN0YW50VHJhbnNmb3JtZXIuc3RyaW5nMlJlc3BvbnNlQWN0aW9uKHJlc3BvbnNlQWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgdXBkYXRlRnJpZW5kUmVxdWVzdFJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdElkLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VBY3Rpb246IHJlc3BvbnNlQWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwocmVhc29uKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5RnJpZW5kUmVxdWVzdHMobGFzdFVwZGF0ZWREYXRlPzogRGF0ZSk6IFByb21pc2U8UGFyc2VkTW9kZWwuVXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb24+IHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgcXVlcnlGcmllbmRSZXF1ZXN0c1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVkRGF0ZTogUmVxdWVzdFV0aWwud3JhcFRpbWVJZk5vdE51bGwobGFzdFVwZGF0ZWREYXRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gTm90aWZpY2F0aW9uVXRpbC50cmFuc2Zvcm0obm90aWZpY2F0aW9uLmRhdGEudXNlckZyaWVuZFJlcXVlc3RzV2l0aFZlcnNpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVSZWxhdGlvbnNoaXBHcm91cChuYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShuYW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBjcmVhdGVSZWxhdGlvbnNoaXBHcm91cFJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIG5hbWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IG5vdGlmaWNhdGlvbi5kYXRhLmlkcy52YWx1ZXNbMF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVJlbGF0aW9uc2hpcEdyb3Vwcyhncm91cEluZGV4OiBudW1iZXIsIHRhcmdldEdyb3VwSW5kZXg/OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZ3JvdXBJbmRleCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgZGVsZXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cEluZGV4LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0R3JvdXBJbmRleDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKHRhcmdldEdyb3VwSW5kZXgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlUmVsYXRpb25zaGlwR3JvdXAoZ3JvdXBJbmRleDogbnVtYmVyLCBuZXdOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZ3JvdXBJbmRleCwgbmV3TmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgdXBkYXRlUmVsYXRpb25zaGlwR3JvdXBSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cEluZGV4LFxyXG4gICAgICAgICAgICAgICAgbmV3TmFtZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5UmVsYXRpb25zaGlwR3JvdXBzKGxhc3RVcGRhdGVkRGF0ZT86IERhdGUpOiBQcm9taXNlPFBhcnNlZE1vZGVsLlVzZXJSZWxhdGlvbnNoaXBHcm91cHNXaXRoVmVyc2lvbj4ge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeVJlbGF0aW9uc2hpcEdyb3Vwc1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVkRGF0ZTogUmVxdWVzdFV0aWwud3JhcFRpbWVJZk5vdE51bGwobGFzdFVwZGF0ZWREYXRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gTm90aWZpY2F0aW9uVXRpbC50cmFuc2Zvcm0obm90aWZpY2F0aW9uLmRhdGEudXNlclJlbGF0aW9uc2hpcEdyb3Vwc1dpdGhWZXJzaW9uKSk7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVJlbGF0ZWRVc2VyVG9Hcm91cChyZWxhdGVkVXNlcklkOiBzdHJpbmcsIGdyb3VwSW5kZXg6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShyZWxhdGVkVXNlcklkLCBncm91cEluZGV4KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICB1cGRhdGVSZWxhdGlvbnNoaXBSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICByZWxhdGVkVXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmV3R3JvdXBJbmRleDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGdyb3VwSW5kZXgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB1cGRhdGVMb2NhdGlvbigpIGluIFVzZXJTZXJ2aWNlIGlzIGRpZmZlcmVudCBmcm9tIHNlbmRNZXNzYWdlKCkgd2l0aCByZWNvcmRzIG9mIGxvY2F0aW9uIGluIE1lc3NhZ2VTZXJ2aWNlXHJcbiAgICAgKiB1cGRhdGVMb2NhdGlvbigpIGluIFVzZXJTZXJ2aWNlIHNlbmRzIHRoZSBsb2NhdGlvbiBvZiB1c2VyIHRvIHRoZSBzZXJ2ZXIgb25seS5cclxuICAgICAqIHNlbmRNZXNzYWdlKCkgd2l0aCByZWNvcmRzIG9mIGxvY2F0aW9uIHNlbmRzIHVzZXIncyBsb2NhdGlvbiB0byBib3RoIHNlcnZlciBhbmQgaXRzIHJlY2lwaWVudHMuXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUxvY2F0aW9uKGxhdGl0dWRlOiBudW1iZXIsIGxvbmdpdHVkZTogbnVtYmVyLCBuYW1lPzogc3RyaW5nLCBhZGRyZXNzPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGxhdGl0dWRlLCBsb25naXR1ZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIHVwZGF0ZVVzZXJMb2NhdGlvblJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIGxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKG5hbWUpLFxyXG4gICAgICAgICAgICAgICAgYWRkcmVzczogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGFkZHJlc3MpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2NsZWFyQ29va2llcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYCR7Q09PS0lFX1VTRVJfSUR9PTtleHBpcmVzPSR7bm93fWA7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYCR7Q09PS0lFX1BBU1NXT1JEfT07ZXhwaXJlcz0ke25vd31gO1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke0NPT0tJRV9VU0VSX09OTElORV9TVEFUVVN9PTtleHBpcmVzPSR7bm93fWA7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYCR7Q09PS0lFX0RFVklDRV9UWVBFfT07ZXhwaXJlcz0ke25vd31gO1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke0NPT0tJRV9SRVFVRVNUX0lEfT07ZXhwaXJlcz0ke25vd31gO1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke0NPT0tJRV9MT0NBVElPTn09O2V4cGlyZXM9JHtub3d9YDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVHVybXNDbGllbnQgZnJvbSBcIi4uL3R1cm1zLWNsaWVudFwiO1xyXG5pbXBvcnQgQ29uc3RhbnRUcmFuc2Zvcm1lciBmcm9tIFwiLi4vdXRpbC9jb25zdGFudC10cmFuc2Zvcm1lclwiO1xyXG5pbXBvcnQge2ltfSBmcm9tIFwiLi4vbW9kZWwvcHJvdG8tYnVuZGxlXCI7XHJcbmltcG9ydCBSZXF1ZXN0VXRpbCBmcm9tIFwiLi4vdXRpbC9yZXF1ZXN0LXV0aWxcIjtcclxuaW1wb3J0IHtQYXJzZWRNb2RlbH0gZnJvbSBcIi4uL21vZGVsL3BhcnNlZC1tb2RlbFwiO1xyXG5pbXBvcnQgTm90aWZpY2F0aW9uVXRpbCBmcm9tIFwiLi4vdXRpbC9ub3RpZmljYXRpb24tdXRpbFwiO1xyXG5pbXBvcnQgR3JvdXBNZW1iZXJSb2xlID0gaW0udHVybXMucHJvdG8uR3JvdXBNZW1iZXJSb2xlO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JvdXBTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgX3R1cm1zQ2xpZW50OiBUdXJtc0NsaWVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0dXJtc0NsaWVudDogVHVybXNDbGllbnQpIHtcclxuICAgICAgICB0aGlzLl90dXJtc0NsaWVudCA9IHR1cm1zQ2xpZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUdyb3VwKFxyXG4gICAgICAgIG5hbWU6IHN0cmluZyxcclxuICAgICAgICBpbnRybz86IHN0cmluZyxcclxuICAgICAgICBhbm5vdW5jZW1lbnQ/OiBzdHJpbmcsXHJcbiAgICAgICAgcHJvZmlsZVBpY3R1cmVVcmw/OiBzdHJpbmcsXHJcbiAgICAgICAgbWluaW11bVNjb3JlPzogbnVtYmVyLFxyXG4gICAgICAgIG11dGVFbmREYXRlPzogRGF0ZSxcclxuICAgICAgICBncm91cFR5cGVJZD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KG5hbWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGNyZWF0ZUdyb3VwUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgIGludHJvOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoaW50cm8pLFxyXG4gICAgICAgICAgICAgICAgYW5ub3VuY2VtZW50OiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoYW5ub3VuY2VtZW50KSxcclxuICAgICAgICAgICAgICAgIHByb2ZpbGVQaWN0dXJlVXJsOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwocHJvZmlsZVBpY3R1cmVVcmwpLFxyXG4gICAgICAgICAgICAgICAgbWluaW11bVNjb3JlOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwobWluaW11bVNjb3JlKSxcclxuICAgICAgICAgICAgICAgIG11dGVFbmREYXRlOiBSZXF1ZXN0VXRpbC53cmFwVGltZUlmTm90TnVsbChtdXRlRW5kRGF0ZSksXHJcbiAgICAgICAgICAgICAgICBncm91cFR5cGVJZDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGdyb3VwVHlwZUlkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gbm90aWZpY2F0aW9uLmRhdGEuaWRzLnZhbHVlc1swXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlR3JvdXAoZ3JvdXBJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGRlbGV0ZUdyb3VwUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUdyb3VwKFxyXG4gICAgICAgIGdyb3VwSWQ6IHN0cmluZyxcclxuICAgICAgICBncm91cE5hbWU/OiBzdHJpbmcsXHJcbiAgICAgICAgaW50cm8/OiBzdHJpbmcsXHJcbiAgICAgICAgYW5ub3VuY2VtZW50Pzogc3RyaW5nLFxyXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlVXJsPzogc3RyaW5nLFxyXG4gICAgICAgIG1pbmltdW1TY29yZT86IG51bWJlcixcclxuICAgICAgICBncm91cFR5cGVJZD86IHN0cmluZyxcclxuICAgICAgICBtdXRlRW5kRGF0ZT86IERhdGUsXHJcbiAgICAgICAgc3VjY2Vzc29ySWQ/OiBzdHJpbmcsXHJcbiAgICAgICAgcXVpdEFmdGVyVHJhbnNmZXI/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQpO1xyXG4gICAgICAgIGlmIChSZXF1ZXN0VXRpbC5hcmVBbGxGYWxzeShncm91cE5hbWUsIGludHJvLCBhbm5vdW5jZW1lbnQsIHByb2ZpbGVQaWN0dXJlVXJsLCBtaW5pbXVtU2NvcmUsIGdyb3VwVHlwZUlkLFxyXG4gICAgICAgICAgICBtdXRlRW5kRGF0ZSwgc3VjY2Vzc29ySWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgdXBkYXRlR3JvdXBSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBOYW1lOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoZ3JvdXBOYW1lKSxcclxuICAgICAgICAgICAgICAgIGludHJvOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoaW50cm8pLFxyXG4gICAgICAgICAgICAgICAgYW5ub3VuY2VtZW50OiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoYW5ub3VuY2VtZW50KSxcclxuICAgICAgICAgICAgICAgIHByb2ZpbGVQaWN0dXJlVXJsOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwocHJvZmlsZVBpY3R1cmVVcmwpLFxyXG4gICAgICAgICAgICAgICAgbXV0ZUVuZERhdGU6IFJlcXVlc3RVdGlsLndyYXBUaW1lSWZOb3ROdWxsKG11dGVFbmREYXRlKSxcclxuICAgICAgICAgICAgICAgIG1pbmltdW1TY29yZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKG1pbmltdW1TY29yZSksXHJcbiAgICAgICAgICAgICAgICBncm91cFR5cGVJZDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGdyb3VwVHlwZUlkKSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NvcklkOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoc3VjY2Vzc29ySWQpLFxyXG4gICAgICAgICAgICAgICAgcXVpdEFmdGVyVHJhbnNmZXI6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChxdWl0QWZ0ZXJUcmFuc2ZlcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2Zlck93bmVyc2hpcChncm91cElkOiBzdHJpbmcsIHN1Y2Nlc3NvcklkOiBzdHJpbmcsIHF1aXRBZnRlclRyYW5zZmVyID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZ3JvdXBJZCwgc3VjY2Vzc29ySWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUdyb3VwKGdyb3VwSWQsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIHN1Y2Nlc3NvcklkLCBxdWl0QWZ0ZXJUcmFuc2Zlcik7XHJcbiAgICB9XHJcblxyXG4gICAgbXV0ZUdyb3VwKGdyb3VwSWQ6IHN0cmluZywgbXV0ZUVuZERhdGU6IERhdGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZ3JvdXBJZCwgbXV0ZUVuZERhdGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUdyb3VwKGdyb3VwSWQsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG11dGVFbmREYXRlLCBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICB1bm11dGVHcm91cChncm91cElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdXRlR3JvdXAoZ3JvdXBJZCwgbmV3IERhdGUoMCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5R3JvdXAoZ3JvdXBJZDogc3RyaW5nLCBsYXN0VXBkYXRlZERhdGU/OiBEYXRlKTogUHJvbWlzZTxQYXJzZWRNb2RlbC5Hcm91cFdpdGhWZXJzaW9uPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeUdyb3VwUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVkRGF0ZTogUmVxdWVzdFV0aWwud3JhcFRpbWVJZk5vdE51bGwobGFzdFVwZGF0ZWREYXRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXA6IE5vdGlmaWNhdGlvblV0aWwudHJhbnNmb3JtKG5vdGlmaWNhdGlvbi5kYXRhLmdyb3Vwc1dpdGhWZXJzaW9uLmdyb3Vwc1swXSksXHJcbiAgICAgICAgICAgICAgICBsYXN0VXBkYXRlZERhdGU6IE5vdGlmaWNhdGlvblV0aWwudHJhbnNmb3JtRGF0ZShub3RpZmljYXRpb24uZGF0YS5ncm91cHNXaXRoVmVyc2lvbi5sYXN0VXBkYXRlZERhdGUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcXVlcnlKb2luZWRHcm91cHNJZHMobGFzdFVwZGF0ZWREYXRlPzogRGF0ZSk6IFByb21pc2U8UGFyc2VkTW9kZWwuSWRzV2l0aFZlcnNpb24+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeUpvaW5lZEdyb3Vwc0lkc1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVkRGF0ZTogUmVxdWVzdFV0aWwud3JhcFRpbWVJZk5vdE51bGwobGFzdFVwZGF0ZWREYXRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gTm90aWZpY2F0aW9uVXRpbC5nZXRJZHNXaXRoVmVyc2lvbihub3RpZmljYXRpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeUpvaW5lZEdyb3Vwc0luZm9zKGxhc3RVcGRhdGVkRGF0ZT86IERhdGUpOiBQcm9taXNlPFBhcnNlZE1vZGVsLkdyb3Vwc1dpdGhWZXJzaW9uPiB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIHF1ZXJ5Sm9pbmVkR3JvdXBzSW5mb3NSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBsYXN0VXBkYXRlZERhdGU6IFJlcXVlc3RVdGlsLndyYXBUaW1lSWZOb3ROdWxsKGxhc3RVcGRhdGVkRGF0ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IE5vdGlmaWNhdGlvblV0aWwudHJhbnNmb3JtKG5vdGlmaWNhdGlvbi5kYXRhLmdyb3Vwc1dpdGhWZXJzaW9uKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkR3JvdXBKb2luUXVlc3Rpb24oZ3JvdXBJZDogc3RyaW5nLCBxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXJzOiBzdHJpbmdbXSwgc2NvcmU6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQsIHF1ZXN0aW9uLCBhbnN3ZXJzLCBzY29yZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgY3JlYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgcXVlc3Rpb24sXHJcbiAgICAgICAgICAgICAgICBhbnN3ZXJzLFxyXG4gICAgICAgICAgICAgICAgc2NvcmVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IG5vdGlmaWNhdGlvbi5kYXRhLmlkcy52YWx1ZXNbMF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUdyb3VwSm9pblF1ZXN0aW9uKHF1ZXN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShxdWVzdGlvbklkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBkZWxldGVHcm91cEpvaW5RdWVzdGlvblJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIHF1ZXN0aW9uSWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVHcm91cEpvaW5RdWVzdGlvbihxdWVzdGlvbklkOiBzdHJpbmcsIHF1ZXN0aW9uPzogc3RyaW5nLCBhbnN3ZXJzPzogc3RyaW5nW10sIHNjb3JlPzogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KHF1ZXN0aW9uSWQpO1xyXG4gICAgICAgIGlmIChSZXF1ZXN0VXRpbC5hcmVBbGxGYWxzeShxdWVzdGlvbiwgYW5zd2Vycywgc2NvcmUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgdXBkYXRlR3JvdXBKb2luUXVlc3Rpb25SZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBxdWVzdGlvbklkOiBxdWVzdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgcXVlc3Rpb246IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChxdWVzdGlvbiksXHJcbiAgICAgICAgICAgICAgICBhbnN3ZXJzOiBhbnN3ZXJzLFxyXG4gICAgICAgICAgICAgICAgc2NvcmU6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChzY29yZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHcm91cCBCbGFja2xpc3RcclxuICAgIGJsYWNrbGlzdFVzZXIoZ3JvdXBJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShncm91cElkLCB1c2VySWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGNyZWF0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgYmxhY2tsaXN0ZWRVc2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGdyb3VwSWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICB1bmJsYWNrbGlzdFVzZXIoZ3JvdXBJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShncm91cElkLCB1c2VySWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGRlbGV0ZUdyb3VwQmxhY2tsaXN0ZWRVc2VyUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIHVuYmxhY2tsaXN0ZWRVc2VySWQ6IHVzZXJJZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5QmxhY2tsaXN0ZWRVc2Vyc0lkcyhcclxuICAgICAgICBncm91cElkOiBzdHJpbmcsXHJcbiAgICAgICAgbGFzdFVwZGF0ZWREYXRlPzogRGF0ZSk6IFByb21pc2U8UGFyc2VkTW9kZWwuSWRzV2l0aFZlcnNpb24+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZ3JvdXBJZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgcXVlcnlHcm91cEJsYWNrbGlzdGVkVXNlcnNJZHNSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgbGFzdFVwZGF0ZWREYXRlOiBSZXF1ZXN0VXRpbC53cmFwVGltZUlmTm90TnVsbChsYXN0VXBkYXRlZERhdGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKG5vdGlmaWNhdGlvbiA9PiBOb3RpZmljYXRpb25VdGlsLmdldElkc1dpdGhWZXJzaW9uKG5vdGlmaWNhdGlvbikpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5QmxhY2tsaXN0ZWRVc2Vyc0luZm9zKFxyXG4gICAgICAgIGdyb3VwSWQ6IHN0cmluZyxcclxuICAgICAgICBsYXN0VXBkYXRlZERhdGU/OiBEYXRlKTogUHJvbWlzZTxQYXJzZWRNb2RlbC5Vc2Vyc0luZm9zV2l0aFZlcnNpb24+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZ3JvdXBJZCk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIHF1ZXJ5R3JvdXBCbGFja2xpc3RlZFVzZXJzSW5mb3NSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgbGFzdFVwZGF0ZWREYXRlOiBSZXF1ZXN0VXRpbC53cmFwVGltZUlmTm90TnVsbChsYXN0VXBkYXRlZERhdGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKG5vdGlmaWNhdGlvbiA9PiBOb3RpZmljYXRpb25VdGlsLnRyYW5zZm9ybShub3RpZmljYXRpb24uZGF0YS51c2Vyc0luZm9zV2l0aFZlcnNpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHcm91cCBFbnJvbGxtZW50XHJcbiAgICBjcmVhdGVJbnZpdGF0aW9uKGdyb3VwSWQ6IHN0cmluZywgaW52aXRlZUlkOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQsIGludml0ZWVJZCwgY29udGVudCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgY3JlYXRlR3JvdXBJbnZpdGF0aW9uUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIGludml0ZWVJZCxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IG5vdGlmaWNhdGlvbi5kYXRhLmlkcy52YWx1ZXNbMF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUludml0YXRpb24oaW52aXRhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koaW52aXRhdGlvbklkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBkZWxldGVHcm91cEludml0YXRpb25SZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBpbnZpdGF0aW9uSWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeUludml0YXRpb25zKGdyb3VwSWQ6IHN0cmluZywgbGFzdFVwZGF0ZWREYXRlPzogRGF0ZSk6IFByb21pc2U8UGFyc2VkTW9kZWwuR3JvdXBJbnZpdGF0aW9uc1dpdGhWZXJzaW9uPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeUdyb3VwSW52aXRhdGlvbnNSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgbGFzdFVwZGF0ZWREYXRlOiBSZXF1ZXN0VXRpbC53cmFwVGltZUlmTm90TnVsbChsYXN0VXBkYXRlZERhdGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKG5vdGlmaWNhdGlvbiA9PiBOb3RpZmljYXRpb25VdGlsLnRyYW5zZm9ybShub3RpZmljYXRpb24uZGF0YS5ncm91cEludml0YXRpb25zV2l0aFZlcnNpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVKb2luUmVxdWVzdChncm91cElkOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQsIGNvbnRlbnQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGNyZWF0ZUdyb3VwSm9pblJlcXVlc3RSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gbm90aWZpY2F0aW9uLmRhdGEuaWRzLnZhbHVlc1swXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlSm9pblJlcXVlc3QocmVxdWVzdElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kocmVxdWVzdElkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBkZWxldGVHcm91cEpvaW5SZXF1ZXN0UmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdElkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcXVlcnlKb2luUmVxdWVzdHMoZ3JvdXBJZDogc3RyaW5nLCBsYXN0VXBkYXRlZERhdGU/OiBEYXRlKTogUHJvbWlzZTxQYXJzZWRNb2RlbC5Hcm91cEpvaW5SZXF1ZXN0c1dpdGhWZXJzaW9uPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeUdyb3VwSm9pblJlcXVlc3RzUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVkRGF0ZTogUmVxdWVzdFV0aWwud3JhcFRpbWVJZk5vdE51bGwobGFzdFVwZGF0ZWREYXRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gTm90aWZpY2F0aW9uVXRpbC50cmFuc2Zvcm0obm90aWZpY2F0aW9uLmRhdGEuZ3JvdXBKb2luUmVxdWVzdHNXaXRoVmVyc2lvbikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTm90ZTogT25seSB0aGUgb3duZXIgYW5kIG1hbmFnZXJzIGhhdmUgdGhlIHJpZ2h0IHRvIGZldGNoIHF1ZXN0aW9ucyB3aXRoIGFuc3dlcnNcclxuICAgICAqL1xyXG4gICAgcXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0KFxyXG4gICAgICAgIGdyb3VwSWQ6IHN0cmluZyxcclxuICAgICAgICB3aXRoQW5zd2VycyA9IGZhbHNlLFxyXG4gICAgICAgIGxhc3RVcGRhdGVkRGF0ZT86IERhdGUpOiBQcm9taXNlPFBhcnNlZE1vZGVsLkdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQsIHdpdGhBbnN3ZXJzKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgcXVlcnlHcm91cEpvaW5RdWVzdGlvbnNSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgd2l0aEFuc3dlcnMsXHJcbiAgICAgICAgICAgICAgICBsYXN0VXBkYXRlZERhdGU6IFJlcXVlc3RVdGlsLndyYXBUaW1lSWZOb3ROdWxsKGxhc3RVcGRhdGVkRGF0ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IE5vdGlmaWNhdGlvblV0aWwudHJhbnNmb3JtKG5vdGlmaWNhdGlvbi5kYXRhLmdyb3VwSm9pblF1ZXN0aW9uc1dpdGhWZXJzaW9uKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYW5zd2VyR3JvdXBRdWVzdGlvbnMocXVlc3Rpb25JZHNBbmRBbnN3ZXJzOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZFbXB0eShxdWVzdGlvbklkc0FuZEFuc3dlcnMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGNoZWNrR3JvdXBKb2luUXVlc3Rpb25zQW5zd2Vyc1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIHF1ZXN0aW9uSWRBbmRBbnN3ZXI6IHF1ZXN0aW9uSWRzQW5kQW5zd2Vyc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gbm90aWZpY2F0aW9uLmRhdGEuc3VjY2Vzcy52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR3JvdXAgTWVtYmVyXHJcbiAgICBhZGRHcm91cE1lbWJlcihcclxuICAgICAgICBncm91cElkOiBzdHJpbmcsXHJcbiAgICAgICAgdXNlcklkOiBzdHJpbmcsXHJcbiAgICAgICAgbmFtZT86IHN0cmluZyxcclxuICAgICAgICByb2xlPzogc3RyaW5nIHwgR3JvdXBNZW1iZXJSb2xlLFxyXG4gICAgICAgIG11dGVFbmREYXRlPzogRGF0ZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShncm91cElkLCB1c2VySWQpO1xyXG4gICAgICAgIGlmICh0eXBlb2Ygcm9sZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcm9sZSA9IENvbnN0YW50VHJhbnNmb3JtZXIuc3RyaW5nMkdyb3VwTWVtYmVyUm9sZShyb2xlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgY3JlYXRlR3JvdXBNZW1iZXJSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKG5hbWUpLFxyXG4gICAgICAgICAgICAgICAgcm9sZTogcm9sZSxcclxuICAgICAgICAgICAgICAgIG11dGVFbmREYXRlOiBSZXF1ZXN0VXRpbC53cmFwVGltZUlmTm90TnVsbChtdXRlRW5kRGF0ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWl0R3JvdXAoZ3JvdXBJZDogc3RyaW5nLCBzdWNjZXNzb3JJZD86IHN0cmluZywgcXVpdEFmdGVyVHJhbnNmZXI/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIGdyb3VwTWVtYmVySWQ6IHRoaXMuX3R1cm1zQ2xpZW50LnVzZXJTZXJ2aWNlLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NvcklkOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoc3VjY2Vzc29ySWQpLFxyXG4gICAgICAgICAgICAgICAgcXVpdEFmdGVyVHJhbnNmZXI6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChxdWl0QWZ0ZXJUcmFuc2ZlcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVHcm91cE1lbWJlcihncm91cElkOiBzdHJpbmcsIG1lbWJlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZ3JvdXBJZCwgbWVtYmVySWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGRlbGV0ZUdyb3VwTWVtYmVyUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIGdyb3VwTWVtYmVySWQ6IG1lbWJlcklkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlR3JvdXBNZW1iZXJJbmZvKFxyXG4gICAgICAgIGdyb3VwSWQ6IHN0cmluZyxcclxuICAgICAgICBtZW1iZXJJZDogc3RyaW5nLFxyXG4gICAgICAgIG5hbWU/OiBzdHJpbmcsXHJcbiAgICAgICAgcm9sZT86IHN0cmluZyB8IEdyb3VwTWVtYmVyUm9sZSxcclxuICAgICAgICBtdXRlRW5kRGF0ZT86IERhdGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZ3JvdXBJZCwgbWVtYmVySWQpO1xyXG4gICAgICAgIGlmIChSZXF1ZXN0VXRpbC5hcmVBbGxGYWxzeShuYW1lLCByb2xlLCBtdXRlRW5kRGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHJvbGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJvbGUgPSBDb25zdGFudFRyYW5zZm9ybWVyLnN0cmluZzJHcm91cE1lbWJlclJvbGUocm9sZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIHVwZGF0ZUdyb3VwTWVtYmVyUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIG1lbWJlcklkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKG5hbWUpLFxyXG4gICAgICAgICAgICAgICAgcm9sZTogcm9sZSxcclxuICAgICAgICAgICAgICAgIG11dGVFbmREYXRlOiBSZXF1ZXN0VXRpbC53cmFwVGltZUlmTm90TnVsbChtdXRlRW5kRGF0ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBtdXRlR3JvdXBNZW1iZXIoZ3JvdXBJZDogc3RyaW5nLCBtZW1iZXJJZDogc3RyaW5nLCBtdXRlRW5kRGF0ZTogRGF0ZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShncm91cElkLCBtZW1iZXJJZCwgbXV0ZUVuZERhdGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUdyb3VwTWVtYmVySW5mbyhncm91cElkLCBtZW1iZXJJZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG11dGVFbmREYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICB1bm11dGVHcm91cE1lbWJlcihncm91cElkOiBzdHJpbmcsIG1lbWJlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdXRlR3JvdXBNZW1iZXIoZ3JvdXBJZCwgbWVtYmVySWQsIG5ldyBEYXRlKDApKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeUdyb3VwTWVtYmVycyhncm91cElkOiBzdHJpbmcsIHdpdGhTdGF0dXMgPSBmYWxzZSwgbGFzdFVwZGF0ZWREYXRlPzogRGF0ZSk6IFByb21pc2U8UGFyc2VkTW9kZWwuR3JvdXBNZW1iZXJzV2l0aFZlcnNpb24+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZ3JvdXBJZCk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIHF1ZXJ5R3JvdXBNZW1iZXJzUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVkRGF0ZTogUmVxdWVzdFV0aWwud3JhcFRpbWVJZk5vdE51bGwobGFzdFVwZGF0ZWREYXRlKSxcclxuICAgICAgICAgICAgICAgIHdpdGhTdGF0dXM6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbCh3aXRoU3RhdHVzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihub3RpZmljYXRpb24gPT4gTm90aWZpY2F0aW9uVXRpbC50cmFuc2Zvcm0obm90aWZpY2F0aW9uLmRhdGEuZ3JvdXBNZW1iZXJzV2l0aFZlcnNpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeUdyb3VwTWVtYmVyc0J5TWVtYmVyc0lkcyhncm91cElkOiBzdHJpbmcsIG1lbWJlcnNJZHM6IHN0cmluZ1tdLCB3aXRoU3RhdHVzID0gZmFsc2UpOiBQcm9taXNlPFBhcnNlZE1vZGVsLkdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KGdyb3VwSWQsIG1lbWJlcnNJZHMpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICBxdWVyeUdyb3VwTWVtYmVyc1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICBncm91cE1lbWJlcnNJZHM6IG1lbWJlcnNJZHMsXHJcbiAgICAgICAgICAgICAgICB3aXRoU3RhdHVzOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwod2l0aFN0YXR1cylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IE5vdGlmaWNhdGlvblV0aWwudHJhbnNmb3JtKG5vdGlmaWNhdGlvbi5kYXRhLmdyb3VwTWVtYmVyc1dpdGhWZXJzaW9uKSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFR1cm1zQ2xpZW50IGZyb20gXCIuLi90dXJtcy1jbGllbnRcIjtcclxuaW1wb3J0IE5vdGlmaWNhdGlvblV0aWwgZnJvbSBcIi4uL3V0aWwvbm90aWZpY2F0aW9uLXV0aWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGlmaWNhdGlvblNlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBfdHVybXNDbGllbnQ6IFR1cm1zQ2xpZW50O1xyXG4gICAgcHJpdmF0ZSBfb25Ob3RpZmljYXRpb24/OiAobm90aWZpY2F0aW9uOiBhbnksIHJlcXVlc3RlcklkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG4gICAgZ2V0IG9uTm90aWZpY2F0aW9uKCk6IChub3RpZmljYXRpb246IGFueSwgcmVxdWVzdGVySWQ6IHN0cmluZykgPT4gdm9pZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uTm90aWZpY2F0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBvbk5vdGlmaWNhdGlvbih2YWx1ZTogKG5vdGlmaWNhdGlvbjogYW55LCByZXF1ZXN0ZXJJZDogc3RyaW5nKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5fb25Ob3RpZmljYXRpb24gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0dXJtc0NsaWVudDogVHVybXNDbGllbnQpIHtcclxuICAgICAgICB0aGlzLl90dXJtc0NsaWVudCA9IHR1cm1zQ2xpZW50O1xyXG4gICAgICAgIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlclxyXG4gICAgICAgICAgICAub25Ob3RpZmljYXRpb25MaXN0ZW5lcnNcclxuICAgICAgICAgICAgLnB1c2gobm90aWZpY2F0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vbk5vdGlmaWNhdGlvbiAhPSBudWxsICYmIG5vdGlmaWNhdGlvbi5yZWxheWVkUmVxdWVzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTm90aWZpY2F0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb25VdGlsLnRyYW5zZm9ybShub3RpZmljYXRpb24ucmVsYXllZFJlcXVlc3QpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24ucmVxdWVzdGVySWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0RmlsZVJlYWRlciB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBfcmVhZGVyOiBGaWxlUmVhZGVyO1xyXG5cclxuICAgIHN0YXRpYyByZWFkRmlsZUZyb21IVE1MSW5wdXRFbGVtZW50KGVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIGZpbGVJbmRleCA9IDApOiBQcm9taXNlPHN0cmluZyB8IFVpbnQ4QXJyYXk+IHtcclxuICAgICAgICAvLyBlbGVtZW50LmZpbGVzIGluc3RhbmNlb2YgRmlsZUxpc3QgJiYgZWxlbWVudC5maWxlcy5sZW5ndGggPiAwXHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ2VsZW1lbnQgaXMgdW5kZWZpbmVkJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICghKGVsZW1lbnQuZmlsZXMgaW5zdGFuY2VvZiBGaWxlTGlzdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdlbGVtZW50LmZpbGVzIGlzblxcJ3QgYSBGaWxlTGlzdCBvYmplY3QnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuZmlsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnbm8gZmlsZXMgc2VsZWN0ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZEZpbGUoZWxlbWVudC5maWxlc1tmaWxlSW5kZXhdKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVhZEZpbGUoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nIHwgVWludDhBcnJheT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5fcmVhZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPHN0cmluZyB8IFVpbnQ4QXJyYXk+KChyZXNvbHZlLCByZWplY3QpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVhZGVyLm9ubG9hZCA9IChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudC50YXJnZXQucmVzdWx0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IFVpbnQ4QXJyYXkoZXZlbnQudGFyZ2V0LnJlc3VsdCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFkZXIub25lcnJvciA9IChlcnJvcik6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3JlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lciB7XHJcbiAgICBwcml2YXRlIF90aW1lcklkPzogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfaW50ZXJ2YWw/OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9jYWxsYmFjazogRnVuY3Rpb247XHJcbiAgICBwcml2YXRlIF9saWdodE1vZGU6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9pZ25vcmVOZXh0Q2FsbDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX2lzUnVubmluZzogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjazogRnVuY3Rpb24sIGludGVydmFsOiBudW1iZXIsIGxpZ2h0TW9kZSA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLl9jYWxsYmFjayA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9pZ25vcmVOZXh0Q2FsbCkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lnbm9yZU5leHRDYWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX2ludGVydmFsID0gaW50ZXJ2YWw7XHJcbiAgICAgICAgdGhpcy5fbGlnaHRNb2RlID0gbGlnaHRNb2RlO1xyXG4gICAgICAgIHRoaXMuX2lnbm9yZU5leHRDYWxsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzUnVubmluZygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNSdW5uaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3AoKTogVGltZXIge1xyXG4gICAgICAgIGlmICh0aGlzLl90aW1lcklkKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fdGltZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2lzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3RpbWVySWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQoKTogVGltZXIge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGltZXJJZCkge1xyXG4gICAgICAgICAgICB0aGlzLl90aW1lcklkID0gc2V0SW50ZXJ2YWwodGhpcy5fY2FsbGJhY2ssIHRoaXMuX2ludGVydmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICByZXNldChpbnRlcnZhbDogbnVtYmVyKTogVGltZXIge1xyXG4gICAgICAgIGlmICh0aGlzLl9saWdodE1vZGUgJiYgdGhpcy5faW50ZXJ2YWwgPT09IGludGVydmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lnbm9yZU5leHRDYWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBpbnRlcnZhbDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcCgpLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImVudW0gQ29kZSB7XHJcbiAgICBPSyA9IDIwMDAsXHJcbiAgICBOT19DT05URU5ULFxyXG4gICAgQUxSRUFEWV9VUF9UT19EQVRFLFxyXG4gICAgUkVDSVBJRU5UU19PRkZMSU5FLFxyXG5cclxuICAgIE5PVF9SRVNQT05TSUJMRSA9IDMwMDAsXHJcblxyXG4gICAgRkFJTEVEID0gNDAwMCxcclxuICAgIERJU0FCTEVEX0ZVTkNUSU9OLFxyXG4gICAgRVhQSVJZX0RBVEVfQkVGT1JFX05PVyxcclxuICAgIEVYUElSWV9SRVNPVVJDRSxcclxuICAgIElEX0RVUExJQ0FURUQsXHJcbiAgICBJTExFR0FMX0FSR1VNRU5UUyxcclxuICAgIElMTEVHQUxfREFURV9GT1JNQVQsXHJcbiAgICBOT1RfQUNUSVZFLFxyXG4gICAgT1dORURfUkVTT1VSQ0VfTElNSVRfUkVBQ0hFRCxcclxuICAgIFJFUVVFU1RFRF9SRUNPUkRTX1RPT19NQU5ZLFxyXG4gICAgUkVTT1VSQ0VTX0hBVkVfQkVFTl9IQU5ETEVELFxyXG4gICAgUkVTT1VSQ0VTX0hBVkVfQ0hBTkdFRCxcclxuICAgIFNFU1NJT05fU0lNVUxUQU5FT1VTX0NPTkZMSUNUU19ERUNMSU5FLFxyXG4gICAgU0VTU0lPTl9TSU1VTFRBTkVPVVNfQ09ORkxJQ1RTX05PVElGWSxcclxuICAgIFNFU1NJT05fU0lNVUxUQU5FT1VTX0NPTkZMSUNUU19PRkZMSU5FLFxyXG4gICAgU1VDQ0VTU09SX05PVF9HUk9VUF9NRU1CRVIsXHJcbiAgICBUQVJHRVRfVVNFUlNfVU5BVVRIT1JJWkVELFxyXG4gICAgVEFSR0VUX1VTRVJTX05PVF9FWElTVCxcclxuICAgIFRZUEVfTk9UX0VYSVNUUyxcclxuICAgIFVOQVVUSE9SSVpFRCxcclxuICAgIFJFRFVOREFOVF9SRVFVRVNULFxyXG4gICAgQUxSRUFEWV9HUk9VUF9NRU1CRVIsXHJcbiAgICBGUklFTkRfUkVRVUVTVF9IQVNfRVhJU1RFRCxcclxuICAgIFJFTEFUSU9OU0hJUF9IQVNfRVNUQUJMSVNIRUQsXHJcbiAgICBVU0VSX05PVF9HUk9VUF9NRU1CRVIsXHJcbiAgICBVU0VSX0hBU19CRUVOX0JMQUNLTElTVEVELFxyXG4gICAgR1JPVVBfSEFTX0JFRU5fTVVURUQsXHJcbiAgICBNRU1CRVJfSEFTX0JFRU5fTVVURUQsXHJcbiAgICBHVUVTVFNfSEFWRV9CRUVOX01VVEVELFxyXG5cclxuICAgIFNFUlZFUl9JTlRFUk5BTF9FUlJPUiA9IDUwMDAsXHJcbiAgICBMT0dHRURfREVWSUNFU19DQU5OT1RfT0ZGTElORVxyXG59XHJcblxyXG5jbGFzcyBUdXJtc1N0YXR1c0NvZGUge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2NvZGUyUmVhc29uTWFwID0ge1xyXG4gICAgICAgIFtDb2RlLk9LXTogXCJva1wiLFxyXG4gICAgICAgIFtDb2RlLk5PVF9SRVNQT05TSUJMRV06IFwiVGhlIHNlcnZlciBpc24ndCByZXNwb25zaWJsZSBmb3IgdGhlIHVzZXJcIixcclxuICAgICAgICBbQ29kZS5GQUlMRURdOiBcImZhaWxlZFwiLFxyXG4gICAgICAgIFtDb2RlLlNFUlZFUl9JTlRFUk5BTF9FUlJPUl06IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXHJcblxyXG4gICAgICAgIFtDb2RlLk5PX0NPTlRFTlRdOiBcIk5vIGNvbnRlbnRcIixcclxuICAgICAgICBbQ29kZS5BTFJFQURZX1VQX1RPX0RBVEVdOiBcIkFscmVhZHkgdXAtdG8tZGF0ZVwiLFxyXG4gICAgICAgIFtDb2RlLlJFQ0lQSUVOVFNfT0ZGTElORV06IFwiVGhlIHJlY2lwaWVudHMgYXJlIG9mZmxpbmVcIixcclxuXHJcbiAgICAgICAgW0NvZGUuRElTQUJMRURfRlVOQ1RJT05dOiBcIlRoZSBmdW5jdGlvbiBoYXMgYmVlbiBkaXNhYmxlZCBpbiBzZXJ2ZXJzXCIsXHJcbiAgICAgICAgW0NvZGUuRVhQSVJZX0RBVEVfQkVGT1JFX05PV106IFwiRXhwaXJhdGlvbiBkYXRlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG5vd1wiLFxyXG4gICAgICAgIFtDb2RlLkVYUElSWV9SRVNPVVJDRV06IFwiVGhlIHRhcmdldCByZXNvdXJjZSBoYXMgZXhwaXJlZFwiLFxyXG4gICAgICAgIFtDb2RlLklEX0RVUExJQ0FURURdOiBcIklEIG11c3QgYmUgdW5pcXVlXCIsXHJcbiAgICAgICAgW0NvZGUuSUxMRUdBTF9BUkdVTUVOVFNdOiBcIklsbGVnYWwgYXJndW1lbnRzXCIsXHJcbiAgICAgICAgW0NvZGUuSUxMRUdBTF9EQVRFX0ZPUk1BVF06IFwiSWxsZWdhbCBkYXRlIGZvcm1hdFwiLFxyXG4gICAgICAgIFtDb2RlLk5PVF9BQ1RJVkVdOiBcIk5vdCBhY3RpdmVcIixcclxuICAgICAgICBbQ29kZS5PV05FRF9SRVNPVVJDRV9MSU1JVF9SRUFDSEVEXTogXCJUaGUgcmVzb3VyY2UgbGltaXQgaXMgcmVhY2hlZFwiLFxyXG4gICAgICAgIFtDb2RlLlJFUVVFU1RFRF9SRUNPUkRTX1RPT19NQU5ZXTogXCJUb28gbWFueSByZWNvcmRzIGFyZSByZXF1ZXN0ZWRcIixcclxuICAgICAgICBbQ29kZS5SRVNPVVJDRVNfSEFWRV9CRUVOX0hBTkRMRURdOiBcIlRoZSByZXNvdXJjZXMgaGF2ZSBiZWVuIGhhbmRsZWRcIixcclxuICAgICAgICBbQ29kZS5SRVNPVVJDRVNfSEFWRV9DSEFOR0VEXTogXCJUaGUgcmVzb3VyY2VzIGhhdmUgYmVlbiBjaGFuZ2VkXCIsXHJcbiAgICAgICAgW0NvZGUuU0VTU0lPTl9TSU1VTFRBTkVPVVNfQ09ORkxJQ1RTX0RFQ0xJTkVdOiBcIkEgZGlmZmVyZW50IGRldmljZSBoYXMgbG9nZ2VkIGludG8geW91ciBhY2NvdW50XCIsXHJcbiAgICAgICAgW0NvZGUuU0VTU0lPTl9TSU1VTFRBTkVPVVNfQ09ORkxJQ1RTX05PVElGWV06IFwiU29tZW9uZSBhdHRlbXB0ZWQgdG8gbG9nIGludG8geW91ciBhY2NvdW50XCIsXHJcbiAgICAgICAgW0NvZGUuU0VTU0lPTl9TSU1VTFRBTkVPVVNfQ09ORkxJQ1RTX09GRkxJTkVdOiBcIkEgZGlmZmVyZW50IGRldmljZSBoYXMgbG9nZ2VkIGludG8geW91ciBhY2NvdW50XCIsXHJcbiAgICAgICAgW0NvZGUuU1VDQ0VTU09SX05PVF9HUk9VUF9NRU1CRVJdOiBcIlRoZSBzdWNjZXNzb3IgaXMgbm90IGEgbWVtYmVyIG9mIHRoZSBncm91cFwiLFxyXG4gICAgICAgIFtDb2RlLlRBUkdFVF9VU0VSU19VTkFVVEhPUklaRURdOiBcIlRoZSB0YXJnZXQgdXNlcnMgYXJlIHVuYXV0aG9yaXplZFwiLFxyXG4gICAgICAgIFtDb2RlLlRBUkdFVF9VU0VSU19OT1RfRVhJU1RdOiBcIlRoZSB0YXJnZXQgdXNlcnMgZG8gbm90IGV4aXN0XCIsXHJcbiAgICAgICAgW0NvZGUuVFlQRV9OT1RfRVhJU1RTXTogXCJUaGUgcmVzb3VyY2UgdHlwZSBkb2VzIG5vdCBleGlzdFwiLFxyXG4gICAgICAgIFtDb2RlLlVOQVVUSE9SSVpFRF06IFwiVW5hdXRob3JpemVkXCIsXHJcbiAgICAgICAgW0NvZGUuUkVEVU5EQU5UX1JFUVVFU1RdOiBcIlRoZSByZXF1ZXN0IGlzIHJlZHVuZGFudFwiLFxyXG4gICAgICAgIFtDb2RlLkFMUkVBRFlfR1JPVVBfTUVNQkVSXTogXCJUaGUgdXNlciBpcyBhbHJlYWR5IGEgbWVtYmVyIG9mIHRoZSBncm91cFwiLFxyXG4gICAgICAgIFtDb2RlLkZSSUVORF9SRVFVRVNUX0hBU19FWElTVEVEXTogXCJBIGZyaWVuZCByZXF1ZXN0IGhhcyBhbHJlYWR5IGV4aXN0ZWRcIixcclxuICAgICAgICBbQ29kZS5SRUxBVElPTlNISVBfSEFTX0VTVEFCTElTSEVEXTogXCJUaGUgcmVsYXRpb25zaGlwIGhhcyBhbHJlYWR5IGVzdGFibGlzaGVkXCIsXHJcbiAgICAgICAgW0NvZGUuVVNFUl9OT1RfR1JPVVBfTUVNQkVSXTogXCJUaGUgdXNlciBpcyBub3QgYSBtZW1iZXIgb2YgdGhlIGdyb3VwXCIsXHJcbiAgICAgICAgW0NvZGUuVVNFUl9IQVNfQkVFTl9CTEFDS0xJU1RFRF06IFwiVGhlIHVzZXIgaGFzIGJlZW4gYmxhY2tsaXN0ZWRcIixcclxuICAgICAgICBbQ29kZS5HUk9VUF9IQVNfQkVFTl9NVVRFRF06IFwiVGhlIGdyb3VwIGhhcyBiZWVuIG11dGVkXCIsXHJcbiAgICAgICAgW0NvZGUuTUVNQkVSX0hBU19CRUVOX01VVEVEXTogXCJUaGUgZ3JvdXAgbWVtYmVyIGhhcyBiZWVuIG11dGVkXCIsXHJcbiAgICAgICAgW0NvZGUuR1VFU1RTX0hBVkVfQkVFTl9NVVRFRF06IFwiVGhlIGd1ZXN0cyBvZiB0aGUgZ3JvdXAgaGF2ZSBiZWVuIG11dGVkXCIsXHJcbiAgICAgICAgW0NvZGUuTE9HR0VEX0RFVklDRVNfQ0FOTk9UX09GRkxJTkVdOiBcIkNhbm5vdCBzZXQgbG9nZ2VkIGluIGRldmljZXMgb2ZmbGluZVwiXHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBjb2RlOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlYXNvbjogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvZGU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5yZWFzb24gPSBUdXJtc1N0YXR1c0NvZGUuZ2V0UmVhc29uKGNvZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpc1N1Y2Nlc3NDb2RlKGNvZGU6IG51bWJlciB8IHN0cmluZyB8IENvZGUpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGNvZGUgPSBwYXJzZUludChjb2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvZGUgPT09IENvZGUuT0s7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGlzRXJyb3JDb2RlKGNvZGU6IG51bWJlciB8IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5pc1N1Y2Nlc3NDb2RlKGNvZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRSZWFzb24oY29kZTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29kZTJSZWFzb25NYXBbY29kZV07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5hc3NpZ24oVHVybXNTdGF0dXNDb2RlLCBDb2RlKTsiLCJpbXBvcnQge2ltfSBmcm9tIFwiLi9wcm90by1idW5kbGVcIjtcclxuaW1wb3J0IFR1cm1zU3RhdHVzQ29kZSBmcm9tIFwiLi90dXJtcy1zdGF0dXMtY29kZVwiO1xyXG5pbXBvcnQgVHVybXNOb3RpZmljYXRpb24gPSBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR1cm1zRXJyb3Ige1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29kZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVhc29uOiBzdHJpbmc7XHJcblxyXG4gICAgc3RhdGljIFVSTF9VTklOSVRJQUxJWkVEID0gJ1RoZSBiYXNlVXJsIGlzIHVuaW5pdGlhbGl6ZWQuJztcclxuICAgIHN0YXRpYyBDTElFTlRfQUxSRUFEWV9DT05ORUNURUQgPSAnVGhlIGNsaWVudCBoYXMgY29ubmVjdGVkIHRvIHRoZSBzZXJ2ZXIuIFBsZWFzZSBjbG9zZSBpdCBiZWZvcmUgbG9nZ2luZyBpbiBhZ2Fpbi4nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvZGU6IG51bWJlciwgcmVhc29uOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLl9yZWFzb24gPSByZWFzb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvZGUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29kZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmVhc29uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlYXNvbjtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLl9jb2RlfToke3RoaXMuX3JlYXNvbn1gO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbjogVHVybXNOb3RpZmljYXRpb24pOiBUdXJtc0Vycm9yIHtcclxuICAgICAgICBpZiAobm90aWZpY2F0aW9uLmNvZGUudmFsdWUgPT09IFR1cm1zU3RhdHVzQ29kZS5GQUlMRUQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXJtc0Vycm9yKG5vdGlmaWNhdGlvbi5jb2RlLnZhbHVlLCBub3RpZmljYXRpb24ucmVhc29uLnZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR1cm1zRXJyb3Iobm90aWZpY2F0aW9uLmNvZGUudmFsdWUsIFR1cm1zU3RhdHVzQ29kZS5nZXRSZWFzb24obm90aWZpY2F0aW9uLmNvZGUudmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21Db2RlKGNvZGU6IG51bWJlcik6IFR1cm1zRXJyb3Ige1xyXG4gICAgICAgIHJldHVybiBuZXcgVHVybXNFcnJvcihjb2RlLCBUdXJtc1N0YXR1c0NvZGUuZ2V0UmVhc29uKGNvZGUpKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGUsbil7cmV0dXJuIG49bnx8e30sbmV3IFByb21pc2UoZnVuY3Rpb24odCxyKXt2YXIgcz1uZXcgWE1MSHR0cFJlcXVlc3Qsbz1bXSx1PVtdLGk9e30sYT1mdW5jdGlvbigpe3JldHVybntvazoyPT0ocy5zdGF0dXMvMTAwfDApLHN0YXR1c1RleHQ6cy5zdGF0dXNUZXh0LHN0YXR1czpzLnN0YXR1cyx1cmw6cy5yZXNwb25zZVVSTCx0ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShzLnJlc3BvbnNlVGV4dCl9LGpzb246ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEpTT04ucGFyc2Uocy5yZXNwb25zZVRleHQpKX0sYmxvYjpmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3MucmVzcG9uc2VdKSl9LGNsb25lOmEsaGVhZGVyczp7a2V5czpmdW5jdGlvbigpe3JldHVybiBvfSxlbnRyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHV9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gaVtlLnRvTG93ZXJDYXNlKCldfSxoYXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9Mb3dlckNhc2UoKWluIGl9fX19O2Zvcih2YXIgbCBpbiBzLm9wZW4obi5tZXRob2R8fFwiZ2V0XCIsZSwhMCkscy5vbmxvYWQ9ZnVuY3Rpb24oKXtzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnJlcGxhY2UoL14oLio/KTpbXlxcU1xcbl0qKFtcXHNcXFNdKj8pJC9nbSxmdW5jdGlvbihlLG4sdCl7by5wdXNoKG49bi50b0xvd2VyQ2FzZSgpKSx1LnB1c2goW24sdF0pLGlbbl09aVtuXT9pW25dK1wiLFwiK3Q6dH0pLHQoYSgpKX0scy5vbmVycm9yPXIscy53aXRoQ3JlZGVudGlhbHM9XCJpbmNsdWRlXCI9PW4uY3JlZGVudGlhbHMsbi5oZWFkZXJzKXMuc2V0UmVxdWVzdEhlYWRlcihsLG4uaGVhZGVyc1tsXSk7cy5zZW5kKG4uYm9keXx8bnVsbCl9KX1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZmV0Y2gubWpzLm1hcFxuIiwiaW1wb3J0IFRpbWVyIGZyb20gXCIuLi91dGlsL3RpbWVyXCI7XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWlnbm9yZVxyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCAqIGFzIFdlYlNvY2tldEFzUHJvbWlzZWQgZnJvbSBcIndlYnNvY2tldC1hcy1wcm9taXNlZFwiO1xyXG5pbXBvcnQgVHVybXNTdGF0dXNDb2RlIGZyb20gXCIuLi9tb2RlbC90dXJtcy1zdGF0dXMtY29kZVwiO1xyXG5pbXBvcnQgVHVybXNFcnJvciBmcm9tIFwiLi4vbW9kZWwvdHVybXMtZXJyb3JcIjtcclxuaW1wb3J0IHtpbX0gZnJvbSBcIi4uL21vZGVsL3Byb3RvLWJ1bmRsZVwiO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCBmZXRjaCBmcm9tIFwidW5mZXRjaFwiO1xyXG5pbXBvcnQgcXVlcnlzdHJpbmcgZnJvbSBcInF1ZXJ5c3RyaW5nXCI7XHJcbmltcG9ydCBUdXJtc0NsaWVudCBmcm9tIFwiLi4vdHVybXMtY2xpZW50XCI7XHJcbmltcG9ydCBOb3RpZmljYXRpb25VdGlsIGZyb20gXCIuLi91dGlsL25vdGlmaWNhdGlvbi11dGlsXCI7XHJcbmltcG9ydCB7UGFyc2VkTm90aWZpY2F0aW9ufSBmcm9tIFwiLi4vbW9kZWwvcGFyc2VkLW5vdGlmaWNhdGlvblwiO1xyXG5pbXBvcnQgVHVybXNOb3RpZmljYXRpb24gPSBpbS50dXJtcy5wcm90by5UdXJtc05vdGlmaWNhdGlvbjtcclxuaW1wb3J0IFR1cm1zUmVxdWVzdCA9IGltLnR1cm1zLnByb3RvLlR1cm1zUmVxdWVzdDtcclxuXHJcbmNvbnN0IEhFQVJUQkVBVF9JTlRFUlZBTCA9IDIwICogMTAwMDtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHVybXNEcml2ZXIge1xyXG4gICAgcHJpdmF0ZSBfaGVhcnRiZWF0SW50ZXJ2YWw6IG51bWJlcjtcclxuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgcHJpdmF0ZSBfd2Vic29ja2V0OiBhbnk7IC8vV2ViU29ja2V0QXNQcm9taXNlZFxyXG4gICAgcHJpdmF0ZSBfaGVhcnRiZWF0VGltZXI/OiBUaW1lcjtcclxuICAgIHByaXZhdGUgX29uTm90aWZpY2F0aW9uTGlzdGVuZXJzOiAoKG5vdGlmaWNhdGlvbjogUGFyc2VkTm90aWZpY2F0aW9uKSA9PiB2b2lkKVtdID0gW107XHJcbiAgICBwcml2YXRlIF9vbkNsb3NlPzogKHdhc0Nvbm5lY3RlZDogYm9vbGVhbiwgZXJyb3I/OiBhbnksIHN0YXR1cz86IFR1cm1zRXJyb3IpID0+IHZvaWQ7XHJcblxyXG4gICAgcHJpdmF0ZSBfdHVybXNDbGllbnQ6IFR1cm1zQ2xpZW50O1xyXG4gICAgcHJpdmF0ZSBfdXJsID0gJ3dzOi8vbG9jYWxob3N0Ojk1MTAnO1xyXG4gICAgcHJpdmF0ZSBfaHR0cFVybCA9ICdodHRwOi8vbG9jYWxob3N0Ojk1MTAnO1xyXG4gICAgcHJpdmF0ZSBfY29ubmVjdGlvblRpbWVvdXQgPSAxMCAqIDEwMDA7XHJcbiAgICBwcml2YXRlIF9yZXF1ZXN0VGltZW91dCA9IDYwICogMTAwMDtcclxuICAgIHByaXZhdGUgX21pblJlcXVlc3RzSW50ZXJ2YWwgPSAwO1xyXG4gICAgcHJpdmF0ZSBfcmVxdWVzdHNNYXAgPSB7fTtcclxuICAgIHByaXZhdGUgX2xhc3RSZXF1ZXN0RGF0ZSA9IG5ldyBEYXRlKDApO1xyXG4gICAgcHJpdmF0ZSBfaXNMYXN0UmVxdWVzdEhlYXJ0YmVhdCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfcXVlcnlSZWFzb25XaGVuTG9naW5GYWlsZWQgPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfcXVlcnlSZWFzb25XaGVuRGlzY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgX3VzZXJJZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfcGFzc3dvcmQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3JlcXVlc3RJZDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfc2Vzc2lvbklkPzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfYWRkcmVzcz86IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjbGllbnQ6IFR1cm1zQ2xpZW50LFxyXG4gICAgICAgICAgICAgICAgdXJsPzogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvblRpbWVvdXQ/OiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0VGltZW91dD86IG51bWJlcixcclxuICAgICAgICAgICAgICAgIG1pblJlcXVlc3RzSW50ZXJ2YWw/OiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICBodHRwVXJsPzogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcXVlcnlSZWFzb25XaGVuTG9naW5GYWlsZWQgPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcXVlcnlSZWFzb25XaGVuRGlzY29ubmVjdGVkID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuX3R1cm1zQ2xpZW50ID0gY2xpZW50O1xyXG4gICAgICAgIGlmICh1cmwpIHRoaXMuX3VybCA9IHVybDtcclxuICAgICAgICBpZiAoY29ubmVjdGlvblRpbWVvdXQpIHRoaXMuX2Nvbm5lY3Rpb25UaW1lb3V0ID0gY29ubmVjdGlvblRpbWVvdXQ7XHJcbiAgICAgICAgaWYgKHJlcXVlc3RUaW1lb3V0KSB0aGlzLl9yZXF1ZXN0VGltZW91dCA9IHJlcXVlc3RUaW1lb3V0O1xyXG4gICAgICAgIGlmIChtaW5SZXF1ZXN0c0ludGVydmFsKSB0aGlzLl9taW5SZXF1ZXN0c0ludGVydmFsID0gbWluUmVxdWVzdHNJbnRlcnZhbDtcclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRJbnRlcnZhbCA9IEhFQVJUQkVBVF9JTlRFUlZBTDtcclxuICAgICAgICBpZiAoaHR0cFVybCkgdGhpcy5faHR0cFVybCA9IGh0dHBVcmw7XHJcbiAgICAgICAgdGhpcy5fcXVlcnlSZWFzb25XaGVuTG9naW5GYWlsZWQgPSBxdWVyeVJlYXNvbldoZW5Mb2dpbkZhaWxlZDtcclxuICAgICAgICB0aGlzLl9xdWVyeVJlYXNvbldoZW5EaXNjb25uZWN0ZWQgPSBxdWVyeVJlYXNvbldoZW5EaXNjb25uZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uQ2xvc2UodmFsdWU6IGFueSkge1xyXG4gICAgICAgIHRoaXMuX29uQ2xvc2UgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgb25Ob3RpZmljYXRpb25MaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uTm90aWZpY2F0aW9uTGlzdGVuZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmRIZWFydGJlYXQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldExhc3RSZXF1ZXN0UmVjb3JkKHRydWUsIG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2Vic29ja2V0LnNlbmQobmV3IFVpbnQ4QXJyYXkoMCkpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25uZWN0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dlYnNvY2tldCAmJiB0aGlzLl93ZWJzb2NrZXQuaXNPcGVuZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzY29ubmVjdCgpOiBQcm9taXNlPENsb3NlRXZlbnQ+IHtcclxuICAgICAgICBpZiAodGhpcy5fd2Vic29ja2V0LmlzT3BlbmVkIHx8IHRoaXMuX3dlYnNvY2tldC5pc09wZW5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dlYnNvY2tldC5jbG9zZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25uZWN0KHVzZXJJZDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCByZXF1ZXN0SWQ6IG51bWJlciwgdXJsPzogc3RyaW5nLCBjb25uZWN0aW9uVGltZW91dD86IG51bWJlciwgcmVxdWVzdFRpbWVvdXQ/OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KFR1cm1zRXJyb3IuQ0xJRU5UX0FMUkVBRFlfQ09OTkVDVEVEKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Bhc3N3b3JkID0gcGFzc3dvcmQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl93ZWJzb2NrZXQgPSBuZXcgV2ViU29ja2V0QXNQcm9taXNlZCh1cmwgfHwgdGhpcy5fdXJsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlV2ViU29ja2V0OiAoc2VydmVyVXJsKTogV2ViU29ja2V0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KHNlcnZlclVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdzLmJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3cztcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaFJlcXVlc3RJZDogKGRhdGE6IFVpbnQ4QXJyYXkpOiBVaW50OEFycmF5ID0+IGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFja01lc3NhZ2U6IChkYXRhOiBVaW50OEFycmF5KTogVWludDhBcnJheSA9PiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIHVucGFja01lc3NhZ2U6IChkYXRhOiBBcnJheUJ1ZmZlcik6IFR1cm1zTm90aWZpY2F0aW9uID0+IFR1cm1zTm90aWZpY2F0aW9uLmRlY29kZShuZXcgVWludDhBcnJheShkYXRhKSksXHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvblRpbWVvdXQ6IGNvbm5lY3Rpb25UaW1lb3V0IHx8IHRoaXMuX2Nvbm5lY3Rpb25UaW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHJlcXVlc3RUaW1lb3V0IHx8IHRoaXMuX3JlcXVlc3RUaW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RSZXF1ZXN0SWQ6IChub3RpZmljYXRpb246IFR1cm1zTm90aWZpY2F0aW9uKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFub3RpZmljYXRpb24ucmVsYXllZFJlcXVlc3QgJiYgbm90aWZpY2F0aW9uLnJlcXVlc3RJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vdGlmaWNhdGlvbi5yZXF1ZXN0SWQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dlYnNvY2tldC5vblVucGFja2VkTWVzc2FnZS5hZGRMaXN0ZW5lcigobm90aWZpY2F0aW9uOiBUdXJtc05vdGlmaWNhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub3RpZmljYXRpb24gJiYgbm90aWZpY2F0aW9uLmRhdGEgJiYgbm90aWZpY2F0aW9uLmRhdGEuc2Vzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXNzaW9uSWQgPSBub3RpZmljYXRpb24uZGF0YS5zZXNzaW9uLnNlc3Npb25JZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkcmVzcyA9IG5vdGlmaWNhdGlvbi5kYXRhLnNlc3Npb24uYWRkcmVzcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkTm90aWZpY2F0aW9uID0gTm90aWZpY2F0aW9uVXRpbC50cmFuc2Zvcm0obm90aWZpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMuX29uTm90aWZpY2F0aW9uTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcihwYXJzZWROb3RpZmljYXRpb24gYXMgUGFyc2VkTm90aWZpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhdXNlZEJ5RXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dlYnNvY2tldC5vbkNsb3NlLmFkZExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNhdXNlZEJ5RXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25XZWJzb2NrZXRDbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiByZXNvbHZlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiByZWplY3QoZXJyb3IpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dlYnNvY2tldC5vbkVycm9yLmFkZExpc3RlbmVyKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlZEJ5RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uV2Vic29ja2V0RXJyb3IoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHJlc29sdmUoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gcmVqZWN0KGVycm9yKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dlYnNvY2tldC5vcGVuKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uV2Vic29ja2V0T3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiByZWplY3QoZXJyb3IpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0SGVhcnRCZWF0VGltZXIoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdFRpbWVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdFRpbWVyLnJlc2V0KHRoaXMuX2hlYXJ0YmVhdEludGVydmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZChtZXNzYWdlOiBpbS50dXJtcy5wcm90by5JVHVybXNSZXF1ZXN0KTogUHJvbWlzZTxUdXJtc05vdGlmaWNhdGlvbj4ge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbWluUmVxdWVzdHNJbnRlcnZhbCB8fCBub3cuZ2V0VGltZSgpIC0gdGhpcy5fbGFzdFJlcXVlc3REYXRlLmdldFRpbWUoKSA+IHRoaXMuX21pblJlcXVlc3RzSW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldExhc3RSZXF1ZXN0UmVjb3JkKGZhbHNlLCBub3cpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdElkID0gdGhpcy5fZ2VuZXJhdGVSYW5kb21JZCgpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yZXF1ZXN0SWQgPSB7dmFsdWU6ICcnICsgcmVxdWVzdElkfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBUdXJtc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UpLmZpbmlzaCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldEhlYXJ0QmVhdFRpbWVyKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fd2Vic29ja2V0LnNlbmRSZXF1ZXN0KGRhdGEsIHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZFxyXG4gICAgICAgICAgICAgICAgfSkudGhlbigobm90aWZpY2F0aW9uOiBUdXJtc05vdGlmaWNhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub3RpZmljYXRpb24uY29kZSAmJiBUdXJtc1N0YXR1c0NvZGUuaXNFcnJvckNvZGUobm90aWZpY2F0aW9uLmNvZGUudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR1cm1zRXJyb3IuZnJvbU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3RpZmljYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5faXNMYXN0UmVxdWVzdEhlYXJ0YmVhdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKG1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNvbHZlKHJlc3BvbnNlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiByZWplY3QoZXJyb3IpKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLl9taW5SZXF1ZXN0c0ludGVydmFsKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJSZXF1ZXN0IGlzIHRvbyBmcmVxdWVudFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIlRoZSBXZWJTb2NrZXQgaXMgY2xvc2VkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zZXRMYXN0UmVxdWVzdFJlY29yZChpc0xhc3RSZXF1ZXN0SGVhcnRiZWF0OiBib29sZWFuLCBsYXN0UmVxdWVzdERhdGU6IERhdGUpIHtcclxuICAgICAgICB0aGlzLl9pc0xhc3RSZXF1ZXN0SGVhcnRiZWF0ID0gaXNMYXN0UmVxdWVzdEhlYXJ0YmVhdDtcclxuICAgICAgICB0aGlzLl9sYXN0UmVxdWVzdERhdGUgPSBsYXN0UmVxdWVzdERhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2VuZXJhdGVSYW5kb21JZCgpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBpZDtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTAwNzE5OTI1NDc0MDk5MSk7XHJcbiAgICAgICAgfSB3aGlsZSAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuX3JlcXVlc3RzTWFwLCBpZCkpO1xyXG4gICAgICAgIHRoaXMuX3JlcXVlc3RzTWFwW2lkXSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uV2Vic29ja2V0T3BlbigpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0VGltZXIgJiYgdGhpcy5faGVhcnRiZWF0VGltZXIuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdFRpbWVyLnJlc2V0KHRoaXMuX2hlYXJ0YmVhdEludGVydmFsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRUaW1lciA9IG5ldyBUaW1lcigoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmZXJlbmNlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLl9sYXN0UmVxdWVzdERhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpZmZlcmVuY2UgPiB0aGlzLl9taW5SZXF1ZXN0c0ludGVydmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZEhlYXJ0YmVhdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgdGhpcy5faGVhcnRiZWF0SW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRUaW1lci5zdGFydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbldlYnNvY2tldENsb3NlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdhc0xvZ2dlZCA9ICEhKHRoaXMuX2hlYXJ0YmVhdFRpbWVyICYmIHRoaXMuX2hlYXJ0YmVhdFRpbWVyLmlzUnVubmluZyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdFRpbWVyICYmIHRoaXMuX2hlYXJ0YmVhdFRpbWVyLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRUaW1lci5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9vbkNsb3NlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9xdWVyeVJlYXNvbldoZW5EaXNjb25uZWN0ZWQgJiYgdGhpcy5fdXNlcklkICYmIHRoaXMuX3Nlc3Npb25JZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMuX3VzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuX3Nlc3Npb25JZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5faHR0cFVybH0vcmVhc29ucy9kaXNjb25uZWN0aW9uPyR7cGFyYW1zfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbih0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkNsb3NlKHdhc0xvZ2dlZCwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA/IFR1cm1zRXJyb3IuZnJvbUNvZGUocGFyc2VJbnQodGV4dCkpIDogbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uQ2xvc2Uod2FzTG9nZ2VkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfb25XZWJzb2NrZXRFcnJvcihlcnJvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHdhc0xvZ2dlZCA9ICEhKHRoaXMuX2hlYXJ0YmVhdFRpbWVyICYmIHRoaXMuX2hlYXJ0YmVhdFRpbWVyLmlzUnVubmluZyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdFRpbWVyICYmIHRoaXMuX2hlYXJ0YmVhdFRpbWVyLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRUaW1lci5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghd2FzTG9nZ2VkICYmIHRoaXMuX3F1ZXJ5UmVhc29uV2hlbkxvZ2luRmFpbGVkICYmIHRoaXMuX3VzZXJJZCAmJiB0aGlzLl9yZXF1ZXN0SWQpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIHVzZXJJZDogdGhpcy5fdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdElkOiB0aGlzLl9yZXF1ZXN0SWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9odHRwVXJsfS9yZWFzb25zL2xvZ2luLWZhaWxlZD8ke3BhcmFtc31gKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDMwNykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQudXNlclNlcnZpY2UucmVsb2dpbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uQ2xvc2Uod2FzTG9nZ2VkLCBlcnJvciwgbmV3IFR1cm1zRXJyb3IoMzAwMCwgdGV4dCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKHdhc0xvZ2dlZCwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVzc2FnZUFkZGl0aW9uIHtcclxuICAgIHB1YmxpYyBpc01lbnRpb25lZDogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBtZW50aW9uZWRVc2VySWRzOiBzdHJpbmdbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihpc01lbnRpb25lZDogYm9vbGVhbiwgbWVudGlvbmVkVXNlcklkczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLmlzTWVudGlvbmVkID0gaXNNZW50aW9uZWQ7XHJcbiAgICAgICAgdGhpcy5tZW50aW9uZWRVc2VySWRzID0gbWVudGlvbmVkVXNlcklkcztcclxuICAgIH1cclxufSIsImltcG9ydCBUdXJtc0NsaWVudCBmcm9tIFwiLi4vdHVybXMtY2xpZW50XCI7XHJcbmltcG9ydCB7aW19IGZyb20gXCIuLi9tb2RlbC9wcm90by1idW5kbGVcIjtcclxuaW1wb3J0IENvbnN0YW50VHJhbnNmb3JtZXIgZnJvbSBcIi4uL3V0aWwvY29uc3RhbnQtdHJhbnNmb3JtZXJcIjtcclxuaW1wb3J0IFJlcXVlc3RVdGlsIGZyb20gXCIuLi91dGlsL3JlcXVlc3QtdXRpbFwiO1xyXG5pbXBvcnQge1BhcnNlZE1vZGVsfSBmcm9tIFwiLi4vbW9kZWwvcGFyc2VkLW1vZGVsXCI7XHJcbmltcG9ydCBOb3RpZmljYXRpb25VdGlsIGZyb20gXCIuLi91dGlsL25vdGlmaWNhdGlvbi11dGlsXCI7XHJcbmltcG9ydCBNZXNzYWdlQWRkaXRpb24gZnJvbSBcIi4uL21vZGVsL21lc3NhZ2UtYWRkaXRpb25cIjtcclxuaW1wb3J0IENoYXRUeXBlID0gaW0udHVybXMucHJvdG8uQ2hhdFR5cGU7XHJcbmltcG9ydCBGaWxlID0gaW0udHVybXMucHJvdG8uRmlsZTtcclxuaW1wb3J0IEF1ZGlvRmlsZSA9IGltLnR1cm1zLnByb3RvLkF1ZGlvRmlsZTtcclxuaW1wb3J0IFZpZGVvRmlsZSA9IGltLnR1cm1zLnByb3RvLlZpZGVvRmlsZTtcclxuaW1wb3J0IEltYWdlRmlsZSA9IGltLnR1cm1zLnByb3RvLkltYWdlRmlsZTtcclxuaW1wb3J0IExvY2F0aW9uID0gaW0udHVybXMucHJvdG8uVXNlckxvY2F0aW9uO1xyXG5pbXBvcnQgTWVzc2FnZURlbGl2ZXJ5U3RhdHVzID0gaW0udHVybXMucHJvdG8uTWVzc2FnZURlbGl2ZXJ5U3RhdHVzO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVzc2FnZVNlcnZpY2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKiBGb3JtYXQ6IFwiQHt1c2VySWR9XCJcclxuICAgICAqIEV4YW1wbGU6IFwiQHsxMjN9XCIsIFwiSSBuZWVkIHRvIHRhbGsgd2l0aCBAezEyM30gYW5kIEB7MzIxfVwiXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfTUVOVElPTkVEX1VTRVJfSURTX1BBUlNFUiA9IGZ1bmN0aW9uIChtZXNzYWdlOiBQYXJzZWRNb2RlbC5NZXNzYWdlKTogc3RyaW5nW10ge1xyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gL0B7KFxcZCs/KX0vZztcclxuICAgICAgICBpZiAobWVzc2FnZS50ZXh0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJJZHMgPSBbXTtcclxuICAgICAgICAgICAgbGV0IG1hdGNoZXM7XHJcbiAgICAgICAgICAgIHdoaWxlICghIShtYXRjaGVzID0gcmVnZXguZXhlYyhtZXNzYWdlLnRleHQpKSkge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkcy5wdXNoKG1hdGNoZXNbMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1c2VySWRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgX3R1cm1zQ2xpZW50OiBUdXJtc0NsaWVudDtcclxuICAgIHByaXZhdGUgX21lbnRpb25lZFVzZXJJZHNQYXJzZXI/OiAobWVzc2FnZTogUGFyc2VkTW9kZWwuTWVzc2FnZSkgPT4gc3RyaW5nW107XHJcbiAgICBwcml2YXRlIF9vbk1lc3NhZ2U/OiAobWVzc2FnZTogUGFyc2VkTW9kZWwuTWVzc2FnZSwgbWVzc2FnZUFkZGl0aW9uOiBNZXNzYWdlQWRkaXRpb24pID0+IHZvaWQ7XHJcblxyXG4gICAgZ2V0IG9uTWVzc2FnZSgpOiAobWVzc2FnZTogUGFyc2VkTW9kZWwuTWVzc2FnZSwgbWVzc2FnZUFkZGl0aW9uOiBNZXNzYWdlQWRkaXRpb24pID0+IHZvaWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vbk1lc3NhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uTWVzc2FnZSh2YWx1ZTogKG1lc3NhZ2U6IFBhcnNlZE1vZGVsLk1lc3NhZ2UsIG1lc3NhZ2VBZGRpdGlvbjogTWVzc2FnZUFkZGl0aW9uKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5fb25NZXNzYWdlID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IodHVybXNDbGllbnQ6IFR1cm1zQ2xpZW50KSB7XHJcbiAgICAgICAgdGhpcy5fdHVybXNDbGllbnQgPSB0dXJtc0NsaWVudDtcclxuICAgICAgICB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXJcclxuICAgICAgICAgICAgLm9uTm90aWZpY2F0aW9uTGlzdGVuZXJzXHJcbiAgICAgICAgICAgIC5wdXNoKG5vdGlmaWNhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fb25NZXNzYWdlICE9IG51bGwgJiYgbm90aWZpY2F0aW9uLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbm90aWZpY2F0aW9uLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubWVzc2FnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIGRhdGEubWVzc2FnZXMubWVzc2FnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGl0aW9uID0gdGhpcy5wYXJzZU1lc3NhZ2VBZGRpdGlvbihtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShtZXNzYWdlIGFzIFBhcnNlZE1vZGVsLk1lc3NhZ2UsIGFkZGl0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZW5kTWVzc2FnZShcclxuICAgICAgICBjaGF0VHlwZTogc3RyaW5nIHwgQ2hhdFR5cGUsXHJcbiAgICAgICAgdG9JZDogc3RyaW5nLFxyXG4gICAgICAgIGRlbGl2ZXJ5RGF0ZTogRGF0ZSxcclxuICAgICAgICB0ZXh0Pzogc3RyaW5nLFxyXG4gICAgICAgIHJlY29yZHM/OiBVaW50OEFycmF5W10sXHJcbiAgICAgICAgYnVybkFmdGVyPzogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koY2hhdFR5cGUsIHRvSWQsIGRlbGl2ZXJ5RGF0ZSk7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFsbEZhbHN5KHRleHQsIHJlY29yZHMpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgY2hhdFR5cGUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgY2hhdFR5cGUgPSBDb25zdGFudFRyYW5zZm9ybWVyLnN0cmluZzJDaGF0VHlwZShjaGF0VHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIGNyZWF0ZU1lc3NhZ2VSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBjaGF0VHlwZSxcclxuICAgICAgICAgICAgICAgIHRvSWQsXHJcbiAgICAgICAgICAgICAgICBkZWxpdmVyeURhdGU6ICcnICsgZGVsaXZlcnlEYXRlLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgICAgIHRleHQ6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbCh0ZXh0KSxcclxuICAgICAgICAgICAgICAgIHJlY29yZHM6IHJlY29yZHMsXHJcbiAgICAgICAgICAgICAgICBidXJuQWZ0ZXI6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChidXJuQWZ0ZXIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKG5vdGlmaWNhdGlvbiA9PiBub3RpZmljYXRpb24uZGF0YS5pZHMudmFsdWVzWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3J3YXJkTWVzc2FnZShcclxuICAgICAgICBtZXNzYWdlSWQ6IHN0cmluZyxcclxuICAgICAgICBjaGF0VHlwZTogc3RyaW5nIHwgQ2hhdFR5cGUsXHJcbiAgICAgICAgdG9JZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kobWVzc2FnZUlkLCBjaGF0VHlwZSwgdG9JZCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjaGF0VHlwZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBjaGF0VHlwZSA9IENvbnN0YW50VHJhbnNmb3JtZXIuc3RyaW5nMkNoYXRUeXBlKGNoYXRUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgY3JlYXRlTWVzc2FnZVJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VJZDoge3ZhbHVlOiBtZXNzYWdlSWR9LFxyXG4gICAgICAgICAgICAgICAgY2hhdFR5cGUsXHJcbiAgICAgICAgICAgICAgICB0b0lkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKG5vdGlmaWNhdGlvbiA9PiBub3RpZmljYXRpb24uZGF0YS5pZHMudmFsdWVzWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTZW50TWVzc2FnZShcclxuICAgICAgICBtZXNzYWdlSWQ6IHN0cmluZyxcclxuICAgICAgICB0ZXh0Pzogc3RyaW5nLFxyXG4gICAgICAgIHJlY29yZHM/OiBVaW50OEFycmF5W10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kobWVzc2FnZUlkKTtcclxuICAgICAgICBpZiAoUmVxdWVzdFV0aWwuYXJlQWxsRmFsc3kodGV4dCwgcmVjb3JkcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICB1cGRhdGVNZXNzYWdlUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUlkLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKHRleHQpLFxyXG4gICAgICAgICAgICAgICAgcmVjb3Jkc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5TWVzc2FnZXMoXHJcbiAgICAgICAgaWRzPzogc3RyaW5nW10sXHJcbiAgICAgICAgY2hhdFR5cGU/OiBzdHJpbmcgfCBDaGF0VHlwZSxcclxuICAgICAgICBhcmVTeXN0ZW1NZXNzYWdlcz86IGJvb2xlYW4sXHJcbiAgICAgICAgZnJvbUlkPzogc3RyaW5nLFxyXG4gICAgICAgIGRlbGl2ZXJ5RGF0ZUFmdGVyPzogRGF0ZSxcclxuICAgICAgICBkZWxpdmVyeURhdGVCZWZvcmU/OiBEYXRlLFxyXG4gICAgICAgIGRlbGl2ZXJ5U3RhdHVzPzogc3RyaW5nIHwgTWVzc2FnZURlbGl2ZXJ5U3RhdHVzLFxyXG4gICAgICAgIHNpemUgPSA1MCk6IFByb21pc2U8UGFyc2VkTW9kZWwuTWVzc2FnZVtdPiB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjaGF0VHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgY2hhdFR5cGUgPSBDb25zdGFudFRyYW5zZm9ybWVyLnN0cmluZzJDaGF0VHlwZShjaGF0VHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZGVsaXZlcnlTdGF0dXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGRlbGl2ZXJ5U3RhdHVzID0gQ29uc3RhbnRUcmFuc2Zvcm1lci5zdHJpbmcyRGVsaXZlcnlTdGF0dXMoZGVsaXZlcnlTdGF0dXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgcXVlcnlNZXNzYWdlc1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIGlkczogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGlkcyksXHJcbiAgICAgICAgICAgICAgICBjaGF0VHlwZSxcclxuICAgICAgICAgICAgICAgIGFyZVN5c3RlbU1lc3NhZ2VzOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoYXJlU3lzdGVtTWVzc2FnZXMpLFxyXG4gICAgICAgICAgICAgICAgZnJvbUlkOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoZnJvbUlkKSxcclxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5RGF0ZUFmdGVyOiBSZXF1ZXN0VXRpbC53cmFwVGltZUlmTm90TnVsbChkZWxpdmVyeURhdGVBZnRlciksXHJcbiAgICAgICAgICAgICAgICBkZWxpdmVyeURhdGVCZWZvcmU6IFJlcXVlc3RVdGlsLndyYXBUaW1lSWZOb3ROdWxsKGRlbGl2ZXJ5RGF0ZUJlZm9yZSksXHJcbiAgICAgICAgICAgICAgICBzaXplOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoc2l6ZSksXHJcbiAgICAgICAgICAgICAgICBkZWxpdmVyeVN0YXR1czogZGVsaXZlcnlTdGF0dXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IE5vdGlmaWNhdGlvblV0aWwuZ2V0Rmlyc3RBcnJheUFuZFRyYW5zZm9ybShub3RpZmljYXRpb24uZGF0YS5tZXNzYWdlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsKHNpemUgPSAxKTogUHJvbWlzZTxQYXJzZWRNb2RlbC5NZXNzYWdlc1dpdGhUb3RhbFtdPiB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGVuZGluZ01lc3NhZ2VzV2l0aFRvdGFsUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgc2l6ZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKHNpemUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKG5vdGlmaWNhdGlvbiA9PiBOb3RpZmljYXRpb25VdGlsLmdldEZpcnN0QXJyYXlBbmRUcmFuc2Zvcm0obm90aWZpY2F0aW9uLmRhdGEubWVzc2FnZXNXaXRoVG90YWxMaXN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcXVlcnlNZXNzYWdlU3RhdHVzKG1lc3NhZ2VJZDogc3RyaW5nKTogUHJvbWlzZTxQYXJzZWRNb2RlbC5NZXNzYWdlU3RhdHVzW10+IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kobWVzc2FnZUlkKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgcXVlcnlNZXNzYWdlU3RhdHVzZXNSZXF1ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlSWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4obm90aWZpY2F0aW9uID0+IE5vdGlmaWNhdGlvblV0aWwudHJhbnNmb3JtKG5vdGlmaWNhdGlvbi5kYXRhLm1lc3NhZ2VTdGF0dXNlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlY2FsbE1lc3NhZ2UobWVzc2FnZUlkOiBzdHJpbmcsIHJlY2FsbERhdGUgPSBuZXcgRGF0ZSgpKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KG1lc3NhZ2VJZCwgcmVjYWxsRGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R1cm1zQ2xpZW50LmRyaXZlci5zZW5kKHtcclxuICAgICAgICAgICAgdXBkYXRlTWVzc2FnZVJlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VJZCxcclxuICAgICAgICAgICAgICAgIHJlY2FsbERhdGU6IFJlcXVlc3RVdGlsLndyYXBUaW1lSWZOb3ROdWxsKHJlY2FsbERhdGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZE1lc3NhZ2UobWVzc2FnZUlkOiBzdHJpbmcsIHJlYWREYXRlID0gbmV3IERhdGUoKSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShtZXNzYWdlSWQsIHJlYWREYXRlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHVybXNDbGllbnQuZHJpdmVyLnNlbmQoe1xyXG4gICAgICAgICAgICB1cGRhdGVNZXNzYWdlUmVxdWVzdDoge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUlkLFxyXG4gICAgICAgICAgICAgICAgcmVhZERhdGU6IFJlcXVlc3RVdGlsLndyYXBUaW1lSWZOb3ROdWxsKHJlYWREYXRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIG1hcmtNZXNzYWdlVW5yZWFkKG1lc3NhZ2VJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZE1lc3NhZ2UobWVzc2FnZUlkLCBuZXcgRGF0ZSgwKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVHlwaW5nU3RhdHVzUmVxdWVzdChjaGF0VHlwZTogc3RyaW5nIHwgQ2hhdFR5cGUsIHRvSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShjaGF0VHlwZSwgdG9JZCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjaGF0VHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgY2hhdFR5cGUgPSBDb25zdGFudFRyYW5zZm9ybWVyLnN0cmluZzJDaGF0VHlwZShjaGF0VHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90dXJtc0NsaWVudC5kcml2ZXIuc2VuZCh7XHJcbiAgICAgICAgICAgIHVwZGF0ZVR5cGluZ1N0YXR1c1JlcXVlc3Q6IHtcclxuICAgICAgICAgICAgICAgIGNoYXRUeXBlLFxyXG4gICAgICAgICAgICAgICAgdG9JZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTWVudGlvbkVuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21lbnRpb25lZFVzZXJJZHNQYXJzZXIgIT0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVNZW50aW9uKG1lbnRpb25lZFVzZXJJZHNQYXJzZXI/OiAobWVzc2FnZTogUGFyc2VkTW9kZWwuTWVzc2FnZSkgPT4gc3RyaW5nW10pIHtcclxuICAgICAgICBpZiAobWVudGlvbmVkVXNlcklkc1BhcnNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9tZW50aW9uZWRVc2VySWRzUGFyc2VyID0gbWVudGlvbmVkVXNlcklkc1BhcnNlcjtcclxuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl9tZW50aW9uZWRVc2VySWRzUGFyc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lbnRpb25lZFVzZXJJZHNQYXJzZXIgPSBNZXNzYWdlU2VydmljZS5ERUZBVUxUX01FTlRJT05FRF9VU0VSX0lEU19QQVJTRVI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZW5lcmF0ZUxvY2F0aW9uUmVjb3JkKFxyXG4gICAgICAgIGxhdGl0dWRlOiBudW1iZXIsXHJcbiAgICAgICAgbG9uZ2l0dWRlOiBudW1iZXIsXHJcbiAgICAgICAgbG9jYXRpb25OYW1lPzogc3RyaW5nLFxyXG4gICAgICAgIGFkZHJlc3M/OiBzdHJpbmdcclxuICAgICk6IFVpbnQ4QXJyYXkge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShsYXRpdHVkZSwgbG9uZ2l0dWRlKTtcclxuICAgICAgICByZXR1cm4gTG9jYXRpb24uZW5jb2RlKHtcclxuICAgICAgICAgICAgbGF0aXR1ZGUsXHJcbiAgICAgICAgICAgIGxvbmdpdHVkZSxcclxuICAgICAgICAgICAgYWRkcmVzczogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGFkZHJlc3MpLFxyXG4gICAgICAgICAgICBuYW1lOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwobmFtZSlcclxuICAgICAgICB9KS5maW5pc2goKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2VuZXJhdGVBdWRpb1JlY29yZEJ5RGVzY3JpcHRpb24odXJsOiBzdHJpbmcsIGR1cmF0aW9uPzogbnVtYmVyLCBmb3JtYXQ/OiBzdHJpbmcsIHNpemU/OiBudW1iZXIpOiBVaW50OEFycmF5IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kodXJsKTtcclxuICAgICAgICByZXR1cm4gQXVkaW9GaWxlLmVuY29kZSh7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGR1cmF0aW9uKSxcclxuICAgICAgICAgICAgICAgIGZvcm1hdDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGZvcm1hdCksXHJcbiAgICAgICAgICAgICAgICBzaXplOiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoc2l6ZSksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5maW5pc2goKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2VuZXJhdGVBdWRpb1JlY29yZEJ5RGF0YShkYXRhOiBBcnJheUJ1ZmZlcik6IFVpbnQ4QXJyYXkge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShkYXRhKTtcclxuICAgICAgICByZXR1cm4gQXVkaW9GaWxlLmVuY29kZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgVWludDhBcnJheShkYXRhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuZmluaXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdlbmVyYXRlVmlkZW9SZWNvcmRCeURlc2NyaXB0aW9uKHVybDogc3RyaW5nLCBkdXJhdGlvbj86IG51bWJlciwgZm9ybWF0Pzogc3RyaW5nLCBzaXplPzogbnVtYmVyKTogVWludDhBcnJheSB7XHJcbiAgICAgICAgUmVxdWVzdFV0aWwudGhyb3dJZkFueUZhbHN5KHVybCk7XHJcbiAgICAgICAgcmV0dXJuIFZpZGVvRmlsZS5lbmNvZGUoe1xyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChkdXJhdGlvbiksXHJcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChmb3JtYXQpLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKHNpemUpLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuZmluaXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdlbmVyYXRlVmlkZW9SZWNvcmRCeURhdGEoZGF0YTogQXJyYXlCdWZmZXIpOiBVaW50OEFycmF5IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3koZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIFZpZGVvRmlsZS5lbmNvZGUoe1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IFVpbnQ4QXJyYXkoZGF0YSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmZpbmlzaCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVJbWFnZVJlY29yZEJ5RGF0YShkYXRhOiBBcnJheUJ1ZmZlcik6IFVpbnQ4QXJyYXkge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShkYXRhKTtcclxuICAgICAgICByZXR1cm4gSW1hZ2VGaWxlLmVuY29kZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgVWludDhBcnJheShkYXRhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuZmluaXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdlbmVyYXRlSW1hZ2VSZWNvcmRCeURlc2NyaXB0aW9uKHVybDogc3RyaW5nLCBmaWxlU2l6ZT86IG51bWJlciwgaW1hZ2VTaXplPzogbnVtYmVyLCBvcmlnaW5hbD86IGJvb2xlYW4pOiBVaW50OEFycmF5IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kodXJsKTtcclxuICAgICAgICByZXR1cm4gSW1hZ2VGaWxlLmVuY29kZSh7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICAgICAgICBmaWxlU2l6ZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGZpbGVTaXplKSxcclxuICAgICAgICAgICAgICAgIGltYWdlU2l6ZTogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKGltYWdlU2l6ZSksXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbDogUmVxdWVzdFV0aWwud3JhcFZhbHVlSWZOb3ROdWxsKG9yaWdpbmFsKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuZmluaXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdlbmVyYXRlRmlsZVJlY29yZEJ5RGF0ZShkYXRhOiBBcnJheUJ1ZmZlcik6IFVpbnQ4QXJyYXkge1xyXG4gICAgICAgIFJlcXVlc3RVdGlsLnRocm93SWZBbnlGYWxzeShkYXRhKTtcclxuICAgICAgICByZXR1cm4gRmlsZS5lbmNvZGUoe1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IFVpbnQ4QXJyYXkoZGF0YSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmZpbmlzaCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZW5lcmF0ZUZpbGVSZWNvcmRCeURlc2NyaXB0aW9uKHVybDogc3RyaW5nLCBmb3JtYXQ/OiBzdHJpbmcsIHNpemU/OiBudW1iZXIpOiBVaW50OEFycmF5IHtcclxuICAgICAgICBSZXF1ZXN0VXRpbC50aHJvd0lmQW55RmFsc3kodXJsKTtcclxuICAgICAgICByZXR1cm4gRmlsZS5lbmNvZGUoe1xyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0OiBSZXF1ZXN0VXRpbC53cmFwVmFsdWVJZk5vdE51bGwoZm9ybWF0KSxcclxuICAgICAgICAgICAgICAgIHNpemU6IFJlcXVlc3RVdGlsLndyYXBWYWx1ZUlmTm90TnVsbChzaXplKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuZmluaXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZU1lc3NhZ2VBZGRpdGlvbihtZXNzYWdlOiBQYXJzZWRNb2RlbC5NZXNzYWdlKTogTWVzc2FnZUFkZGl0aW9uIHtcclxuICAgICAgICBsZXQgbWVudGlvbmVkVXNlcklkcztcclxuICAgICAgICBpZiAodGhpcy5fbWVudGlvbmVkVXNlcklkc1BhcnNlcikge1xyXG4gICAgICAgICAgICBtZW50aW9uZWRVc2VySWRzID0gdGhpcy5fbWVudGlvbmVkVXNlcklkc1BhcnNlcihtZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtZW50aW9uZWRVc2VySWRzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlzTWVudGlvbmVkID0gbWVudGlvbmVkVXNlcklkcy5pbmNsdWRlcyh0aGlzLl90dXJtc0NsaWVudC51c2VyU2VydmljZS51c2VySWQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTWVzc2FnZUFkZGl0aW9uKGlzTWVudGlvbmVkLCBtZW50aW9uZWRVc2VySWRzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVHVybXNEcml2ZXIgZnJvbSBcIi4vZHJpdmVyL3R1cm1zLWRyaXZlclwiO1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4vc2VydmljZS91c2VyLXNlcnZpY2VcIjtcclxuaW1wb3J0IEdyb3VwU2VydmljZSBmcm9tIFwiLi9zZXJ2aWNlL2dyb3VwLXNlcnZpY2VcIjtcclxuaW1wb3J0IE1lc3NhZ2VTZXJ2aWNlIGZyb20gXCIuL3NlcnZpY2UvbWVzc2FnZS1zZXJ2aWNlXCI7XHJcbmltcG9ydCBOb3RpZmljYXRpb25TZXJ2aWNlIGZyb20gXCIuL3NlcnZpY2Uvbm90aWZpY2F0aW9uLXNlcnZpY2VcIjtcclxuaW1wb3J0IElucHV0RmlsZVJlYWRlciBmcm9tIFwiLi91dGlsL2lucHV0LWZpbGUtcmVhZGVyXCI7XHJcblxyXG4vL1RPRE86IFN1cHBvcnQgbG9hZCAucHJvdG8gZmlsZXMgZHluYW1pY2FsbHkuXHJcbmNsYXNzIFR1cm1zQ2xpZW50IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2RyaXZlcjogVHVybXNEcml2ZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF91c2VyU2VydmljZTogVXNlclNlcnZpY2U7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9ncm91cFNlcnZpY2U6IEdyb3VwU2VydmljZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX21lc3NhZ2VTZXJ2aWNlOiBNZXNzYWdlU2VydmljZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX25vdGlmaWNhdGlvblNlcnZpY2U6IE5vdGlmaWNhdGlvblNlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgdXJsPzogc3RyaW5nLFxyXG4gICAgICAgIGNvbm5lY3Rpb25UaW1lb3V0PzogbnVtYmVyLFxyXG4gICAgICAgIHJlcXVlc3RUaW1lb3V0PzogbnVtYmVyLFxyXG4gICAgICAgIG1pblJlcXVlc3RzSW50ZXJ2YWw/OiBudW1iZXIsXHJcbiAgICAgICAgaHR0cFVybD86IHN0cmluZyxcclxuICAgICAgICBxdWVyeVJlYXNvbldoZW5Mb2dpbkZhaWxlZD86IGJvb2xlYW4sXHJcbiAgICAgICAgcXVlcnlSZWFzb25XaGVuRGlzY29ubmVjdGVkPzogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2RyaXZlciA9IG5ldyBUdXJtc0RyaXZlcihcclxuICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICBjb25uZWN0aW9uVGltZW91dCxcclxuICAgICAgICAgICAgcmVxdWVzdFRpbWVvdXQsXHJcbiAgICAgICAgICAgIG1pblJlcXVlc3RzSW50ZXJ2YWwsXHJcbiAgICAgICAgICAgIGh0dHBVcmwsXHJcbiAgICAgICAgICAgIHF1ZXJ5UmVhc29uV2hlbkxvZ2luRmFpbGVkLFxyXG4gICAgICAgICAgICBxdWVyeVJlYXNvbldoZW5EaXNjb25uZWN0ZWQpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2dyb3VwU2VydmljZSA9IG5ldyBHcm91cFNlcnZpY2UodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fbWVzc2FnZVNlcnZpY2UgPSBuZXcgTWVzc2FnZVNlcnZpY2UodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fbm90aWZpY2F0aW9uU2VydmljZSA9IG5ldyBOb3RpZmljYXRpb25TZXJ2aWNlKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vRHJpdmVyXHJcbiAgICBnZXQgZHJpdmVyKCk6IFR1cm1zRHJpdmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZHJpdmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vU2VydmljZVxyXG4gICAgZ2V0IHVzZXJTZXJ2aWNlKCk6IFVzZXJTZXJ2aWNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlclNlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGdyb3VwU2VydmljZSgpOiBHcm91cFNlcnZpY2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9ncm91cFNlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1lc3NhZ2VTZXJ2aWNlKCk6IE1lc3NhZ2VTZXJ2aWNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWVzc2FnZVNlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5vdGlmaWNhdGlvblNlcnZpY2UoKTogTm90aWZpY2F0aW9uU2VydmljZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25vdGlmaWNhdGlvblNlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy9VdGlsXHJcbiAgICBzdGF0aWMgSW5wdXRGaWxlUmVhZGVyKCk6IElucHV0RmlsZVJlYWRlciB7XHJcbiAgICAgICAgcmV0dXJuIElucHV0RmlsZVJlYWRlcjtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3Qgcm9vdCA9IHdpbmRvdyB8fCBnbG9iYWw7XHJcbmlmIChyb290KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm9vdCwgJ1R1cm1zQ2xpZW50Jywge1xyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIHZhbHVlOiBUdXJtc0NsaWVudFxyXG4gICAgfSk7XHJcbn0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdNYWtlIHN1cmUgdG8gcnVuIHR1cm1zLWNsaWVudCBpbiBlaXRoZXIgYnJvd3NlciBvciBub2RlanMnKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVHVybXNDbGllbnQ7XHJcbiIsInZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBvYmplY3RLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1rZXlzJyk7XG5cbi8vIGBPYmplY3QuZGVmaW5lUHJvcGVydGllc2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QuZGVmaW5lcHJvcGVydGllc1xubW9kdWxlLmV4cG9ydHMgPSBERVNDUklQVE9SUyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzIDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKSB7XG4gIGFuT2JqZWN0KE8pO1xuICB2YXIga2V5cyA9IG9iamVjdEtleXMoUHJvcGVydGllcyk7XG4gIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGtleTtcbiAgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mKE8sIGtleSA9IGtleXNbaW5kZXgrK10sIFByb3BlcnRpZXNba2V5XSk7XG4gIHJldHVybiBPO1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgaW5zcGVjdFNvdXJjZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnNwZWN0LXNvdXJjZScpO1xuXG52YXIgV2Vha01hcCA9IGdsb2JhbC5XZWFrTWFwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiBXZWFrTWFwID09PSAnZnVuY3Rpb24nICYmIC9uYXRpdmUgY29kZS8udGVzdChpbnNwZWN0U291cmNlKFdlYWtNYXApKTtcbiIsInZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xudmFyIGdldE93blByb3BlcnR5TmFtZXNNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktbmFtZXMnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHNNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktc3ltYm9scycpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xuXG4vLyBhbGwgb2JqZWN0IGtleXMsIGluY2x1ZGVzIG5vbi1lbnVtZXJhYmxlIGFuZCBzeW1ib2xzXG5tb2R1bGUuZXhwb3J0cyA9IGdldEJ1aWx0SW4oJ1JlZmxlY3QnLCAnb3duS2V5cycpIHx8IGZ1bmN0aW9uIG93bktleXMoaXQpIHtcbiAgdmFyIGtleXMgPSBnZXRPd25Qcm9wZXJ0eU5hbWVzTW9kdWxlLmYoYW5PYmplY3QoaXQpKTtcbiAgdmFyIGdldE93blByb3BlcnR5U3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZS5mO1xuICByZXR1cm4gZ2V0T3duUHJvcGVydHlTeW1ib2xzID8ga2V5cy5jb25jYXQoZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KSkgOiBrZXlzO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBJdGVyYXRvclByb3RvdHlwZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pdGVyYXRvcnMtY29yZScpLkl0ZXJhdG9yUHJvdG90eXBlO1xudmFyIGNyZWF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtY3JlYXRlJyk7XG52YXIgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7XG52YXIgc2V0VG9TdHJpbmdUYWcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2V0LXRvLXN0cmluZy10YWcnKTtcbnZhciBJdGVyYXRvcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXRlcmF0b3JzJyk7XG5cbnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoSXRlcmF0b3JDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCkge1xuICB2YXIgVE9fU1RSSU5HX1RBRyA9IE5BTUUgKyAnIEl0ZXJhdG9yJztcbiAgSXRlcmF0b3JDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBjcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUsIHsgbmV4dDogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKDEsIG5leHQpIH0pO1xuICBzZXRUb1N0cmluZ1RhZyhJdGVyYXRvckNvbnN0cnVjdG9yLCBUT19TVFJJTkdfVEFHLCBmYWxzZSwgdHJ1ZSk7XG4gIEl0ZXJhdG9yc1tUT19TVFJJTkdfVEFHXSA9IHJldHVyblRoaXM7XG4gIHJldHVybiBJdGVyYXRvckNvbnN0cnVjdG9yO1xufTtcbiIsInZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEYoKSB7IC8qIGVtcHR5ICovIH1cbiAgRi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBudWxsO1xuICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKG5ldyBGKCkpICE9PSBGLnByb3RvdHlwZTtcbn0pO1xuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAoIWlzT2JqZWN0KGl0KSAmJiBpdCAhPT0gbnVsbCkge1xuICAgIHRocm93IFR5cGVFcnJvcihcIkNhbid0IHNldCBcIiArIFN0cmluZyhpdCkgKyAnIGFzIGEgcHJvdG90eXBlJyk7XG4gIH0gcmV0dXJuIGl0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBUT19TVFJJTkdfVEFHX1NVUFBPUlQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nLXRhZy1zdXBwb3J0Jyk7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mJyk7XG5cbi8vIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYCBtZXRob2QgaW1wbGVtZW50YXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmdcbm1vZHVsZS5leHBvcnRzID0gVE9fU1RSSU5HX1RBR19TVVBQT1JUID8ge30udG9TdHJpbmcgOiBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdbb2JqZWN0ICcgKyBjbGFzc29mKHRoaXMpICsgJ10nO1xufTtcbiIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLlByb21pc2U7XG4iLCJ2YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgaXNBcnJheUl0ZXJhdG9yTWV0aG9kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWFycmF5LWl0ZXJhdG9yLW1ldGhvZCcpO1xudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWxlbmd0aCcpO1xudmFyIGJpbmQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1jb250ZXh0Jyk7XG52YXIgZ2V0SXRlcmF0b3JNZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWl0ZXJhdG9yLW1ldGhvZCcpO1xudmFyIGNhbGxXaXRoU2FmZUl0ZXJhdGlvbkNsb3NpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2FsbC13aXRoLXNhZmUtaXRlcmF0aW9uLWNsb3NpbmcnKTtcblxudmFyIFJlc3VsdCA9IGZ1bmN0aW9uIChzdG9wcGVkLCByZXN1bHQpIHtcbiAgdGhpcy5zdG9wcGVkID0gc3RvcHBlZDtcbiAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG59O1xuXG52YXIgaXRlcmF0ZSA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCBmbiwgdGhhdCwgQVNfRU5UUklFUywgSVNfSVRFUkFUT1IpIHtcbiAgdmFyIGJvdW5kRnVuY3Rpb24gPSBiaW5kKGZuLCB0aGF0LCBBU19FTlRSSUVTID8gMiA6IDEpO1xuICB2YXIgaXRlcmF0b3IsIGl0ZXJGbiwgaW5kZXgsIGxlbmd0aCwgcmVzdWx0LCBuZXh0LCBzdGVwO1xuXG4gIGlmIChJU19JVEVSQVRPUikge1xuICAgIGl0ZXJhdG9yID0gaXRlcmFibGU7XG4gIH0gZWxzZSB7XG4gICAgaXRlckZuID0gZ2V0SXRlcmF0b3JNZXRob2QoaXRlcmFibGUpO1xuICAgIGlmICh0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpIHRocm93IFR5cGVFcnJvcignVGFyZ2V0IGlzIG5vdCBpdGVyYWJsZScpO1xuICAgIC8vIG9wdGltaXNhdGlvbiBmb3IgYXJyYXkgaXRlcmF0b3JzXG4gICAgaWYgKGlzQXJyYXlJdGVyYXRvck1ldGhvZChpdGVyRm4pKSB7XG4gICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gdG9MZW5ndGgoaXRlcmFibGUubGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIHtcbiAgICAgICAgcmVzdWx0ID0gQVNfRU5UUklFU1xuICAgICAgICAgID8gYm91bmRGdW5jdGlvbihhbk9iamVjdChzdGVwID0gaXRlcmFibGVbaW5kZXhdKVswXSwgc3RlcFsxXSlcbiAgICAgICAgICA6IGJvdW5kRnVuY3Rpb24oaXRlcmFibGVbaW5kZXhdKTtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgaW5zdGFuY2VvZiBSZXN1bHQpIHJldHVybiByZXN1bHQ7XG4gICAgICB9IHJldHVybiBuZXcgUmVzdWx0KGZhbHNlKTtcbiAgICB9XG4gICAgaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChpdGVyYWJsZSk7XG4gIH1cblxuICBuZXh0ID0gaXRlcmF0b3IubmV4dDtcbiAgd2hpbGUgKCEoc3RlcCA9IG5leHQuY2FsbChpdGVyYXRvcikpLmRvbmUpIHtcbiAgICByZXN1bHQgPSBjYWxsV2l0aFNhZmVJdGVyYXRpb25DbG9zaW5nKGl0ZXJhdG9yLCBib3VuZEZ1bmN0aW9uLCBzdGVwLnZhbHVlLCBBU19FTlRSSUVTKTtcbiAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAnb2JqZWN0JyAmJiByZXN1bHQgJiYgcmVzdWx0IGluc3RhbmNlb2YgUmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuICB9IHJldHVybiBuZXcgUmVzdWx0KGZhbHNlKTtcbn07XG5cbml0ZXJhdGUuc3RvcCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgcmV0dXJuIG5ldyBSZXN1bHQodHJ1ZSwgcmVzdWx0KTtcbn07XG4iLCJ2YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG5cbi8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3Jcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIEVOVFJJRVMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gRU5UUklFUyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpO1xuICAvLyA3LjQuNiBJdGVyYXRvckNsb3NlKGl0ZXJhdG9yLCBjb21wbGV0aW9uKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHZhciByZXR1cm5NZXRob2QgPSBpdGVyYXRvclsncmV0dXJuJ107XG4gICAgaWYgKHJldHVybk1ldGhvZCAhPT0gdW5kZWZpbmVkKSBhbk9iamVjdChyZXR1cm5NZXRob2QuY2FsbChpdGVyYXRvcikpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuIiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcicpLmY7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mLXJhdycpO1xudmFyIG1hY3JvdGFzayA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90YXNrJykuc2V0O1xudmFyIElTX0lPUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbmdpbmUtaXMtaW9zJyk7XG5cbnZhciBNdXRhdGlvbk9ic2VydmVyID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG52YXIgcHJvY2VzcyA9IGdsb2JhbC5wcm9jZXNzO1xudmFyIFByb21pc2UgPSBnbG9iYWwuUHJvbWlzZTtcbnZhciBJU19OT0RFID0gY2xhc3NvZihwcm9jZXNzKSA9PSAncHJvY2Vzcyc7XG4vLyBOb2RlLmpzIDExIHNob3dzIEV4cGVyaW1lbnRhbFdhcm5pbmcgb24gZ2V0dGluZyBgcXVldWVNaWNyb3Rhc2tgXG52YXIgcXVldWVNaWNyb3Rhc2tEZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGdsb2JhbCwgJ3F1ZXVlTWljcm90YXNrJyk7XG52YXIgcXVldWVNaWNyb3Rhc2sgPSBxdWV1ZU1pY3JvdGFza0Rlc2NyaXB0b3IgJiYgcXVldWVNaWNyb3Rhc2tEZXNjcmlwdG9yLnZhbHVlO1xuXG52YXIgZmx1c2gsIGhlYWQsIGxhc3QsIG5vdGlmeSwgdG9nZ2xlLCBub2RlLCBwcm9taXNlLCB0aGVuO1xuXG4vLyBtb2Rlcm4gZW5naW5lcyBoYXZlIHF1ZXVlTWljcm90YXNrIG1ldGhvZFxuaWYgKCFxdWV1ZU1pY3JvdGFzaykge1xuICBmbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGFyZW50LCBmbjtcbiAgICBpZiAoSVNfTk9ERSAmJiAocGFyZW50ID0gcHJvY2Vzcy5kb21haW4pKSBwYXJlbnQuZXhpdCgpO1xuICAgIHdoaWxlIChoZWFkKSB7XG4gICAgICBmbiA9IGhlYWQuZm47XG4gICAgICBoZWFkID0gaGVhZC5uZXh0O1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChoZWFkKSBub3RpZnkoKTtcbiAgICAgICAgZWxzZSBsYXN0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9IGxhc3QgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHBhcmVudCkgcGFyZW50LmVudGVyKCk7XG4gIH07XG5cbiAgLy8gTm9kZS5qc1xuICBpZiAoSVNfTk9ERSkge1xuICAgIG5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICAgIH07XG4gIC8vIGJyb3dzZXJzIHdpdGggTXV0YXRpb25PYnNlcnZlciwgZXhjZXB0IGlPUyAtIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8zMzlcbiAgfSBlbHNlIGlmIChNdXRhdGlvbk9ic2VydmVyICYmICFJU19JT1MpIHtcbiAgICB0b2dnbGUgPSB0cnVlO1xuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuICAgIG5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIG5vZGUuZGF0YSA9IHRvZ2dsZSA9ICF0b2dnbGU7XG4gICAgfTtcbiAgLy8gZW52aXJvbm1lbnRzIHdpdGggbWF5YmUgbm9uLWNvbXBsZXRlbHkgY29ycmVjdCwgYnV0IGV4aXN0ZW50IFByb21pc2VcbiAgfSBlbHNlIGlmIChQcm9taXNlICYmIFByb21pc2UucmVzb2x2ZSkge1xuICAgIC8vIFByb21pc2UucmVzb2x2ZSB3aXRob3V0IGFuIGFyZ3VtZW50IHRocm93cyBhbiBlcnJvciBpbiBMRyBXZWJPUyAyXG4gICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgIHRoZW4gPSBwcm9taXNlLnRoZW47XG4gICAgbm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlbi5jYWxsKHByb21pc2UsIGZsdXNoKTtcbiAgICB9O1xuICAvLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOlxuICAvLyAtIHNldEltbWVkaWF0ZVxuICAvLyAtIE1lc3NhZ2VDaGFubmVsXG4gIC8vIC0gd2luZG93LnBvc3RNZXNzYWdcbiAgLy8gLSBvbnJlYWR5c3RhdGVjaGFuZ2VcbiAgLy8gLSBzZXRUaW1lb3V0XG4gIH0gZWxzZSB7XG4gICAgbm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKVxuICAgICAgbWFjcm90YXNrLmNhbGwoZ2xvYmFsLCBmbHVzaCk7XG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHF1ZXVlTWljcm90YXNrIHx8IGZ1bmN0aW9uIChmbikge1xuICB2YXIgdGFzayA9IHsgZm46IGZuLCBuZXh0OiB1bmRlZmluZWQgfTtcbiAgaWYgKGxhc3QpIGxhc3QubmV4dCA9IHRhc2s7XG4gIGlmICghaGVhZCkge1xuICAgIGhlYWQgPSB0YXNrO1xuICAgIG5vdGlmeSgpO1xuICB9IGxhc3QgPSB0YXNrO1xufTtcbiIsInZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9uZXctcHJvbWlzZS1jYXBhYmlsaXR5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEMsIHgpIHtcbiAgYW5PYmplY3QoQyk7XG4gIGlmIChpc09iamVjdCh4KSAmJiB4LmNvbnN0cnVjdG9yID09PSBDKSByZXR1cm4geDtcbiAgdmFyIHByb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkuZihDKTtcbiAgdmFyIHJlc29sdmUgPSBwcm9taXNlQ2FwYWJpbGl0eS5yZXNvbHZlO1xuICByZXNvbHZlKHgpO1xuICByZXR1cm4gcHJvbWlzZUNhcGFiaWxpdHkucHJvbWlzZTtcbn07XG4iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gIHZhciBjb25zb2xlID0gZ2xvYmFsLmNvbnNvbGU7XG4gIGlmIChjb25zb2xlICYmIGNvbnNvbGUuZXJyb3IpIHtcbiAgICBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gY29uc29sZS5lcnJvcihhKSA6IGNvbnNvbGUuZXJyb3IoYSwgYik7XG4gIH1cbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChleGVjKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6IGZhbHNlLCB2YWx1ZTogZXhlYygpIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIHZhbHVlOiBlcnJvciB9O1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgVFlQRURfQVJSQVlTX0NPTlNUUlVDVE9SU19SRVFVSVJFU19XUkFQUEVSUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90eXBlZC1hcnJheS1jb25zdHJ1Y3RvcnMtcmVxdWlyZS13cmFwcGVycycpO1xudmFyIEFycmF5QnVmZmVyVmlld0NvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktYnVmZmVyLXZpZXctY29yZScpO1xudmFyIEFycmF5QnVmZmVyTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlcicpO1xudmFyIGFuSW5zdGFuY2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4taW5zdGFuY2UnKTtcbnZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLXByb3BlcnR5LWRlc2NyaXB0b3InKTtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tbGVuZ3RoJyk7XG52YXIgdG9JbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbmRleCcpO1xudmFyIHRvT2Zmc2V0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLW9mZnNldCcpO1xudmFyIHRvUHJpbWl0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXByaW1pdGl2ZScpO1xudmFyIGhhcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMnKTtcbnZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBjcmVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWNyZWF0ZScpO1xudmFyIHNldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1zZXQtcHJvdG90eXBlLW9mJyk7XG52YXIgZ2V0T3duUHJvcGVydHlOYW1lcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcycpLmY7XG52YXIgdHlwZWRBcnJheUZyb20gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdHlwZWQtYXJyYXktZnJvbScpO1xudmFyIGZvckVhY2ggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uJykuZm9yRWFjaDtcbnZhciBzZXRTcGVjaWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NldC1zcGVjaWVzJyk7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpO1xudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvck1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7XG52YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpO1xudmFyIGluaGVyaXRJZlJlcXVpcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luaGVyaXQtaWYtcmVxdWlyZWQnKTtcblxudmFyIGdldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldDtcbnZhciBzZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5zZXQ7XG52YXIgbmF0aXZlRGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mO1xudmFyIG5hdGl2ZUdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvck1vZHVsZS5mO1xudmFyIHJvdW5kID0gTWF0aC5yb3VuZDtcbnZhciBSYW5nZUVycm9yID0gZ2xvYmFsLlJhbmdlRXJyb3I7XG52YXIgQXJyYXlCdWZmZXIgPSBBcnJheUJ1ZmZlck1vZHVsZS5BcnJheUJ1ZmZlcjtcbnZhciBEYXRhVmlldyA9IEFycmF5QnVmZmVyTW9kdWxlLkRhdGFWaWV3O1xudmFyIE5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLk5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1M7XG52YXIgVFlQRURfQVJSQVlfVEFHID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5UWVBFRF9BUlJBWV9UQUc7XG52YXIgVHlwZWRBcnJheSA9IEFycmF5QnVmZmVyVmlld0NvcmUuVHlwZWRBcnJheTtcbnZhciBUeXBlZEFycmF5UHJvdG90eXBlID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5UeXBlZEFycmF5UHJvdG90eXBlO1xudmFyIGFUeXBlZEFycmF5Q29uc3RydWN0b3IgPSBBcnJheUJ1ZmZlclZpZXdDb3JlLmFUeXBlZEFycmF5Q29uc3RydWN0b3I7XG52YXIgaXNUeXBlZEFycmF5ID0gQXJyYXlCdWZmZXJWaWV3Q29yZS5pc1R5cGVkQXJyYXk7XG52YXIgQllURVNfUEVSX0VMRU1FTlQgPSAnQllURVNfUEVSX0VMRU1FTlQnO1xudmFyIFdST05HX0xFTkdUSCA9ICdXcm9uZyBsZW5ndGgnO1xuXG52YXIgZnJvbUxpc3QgPSBmdW5jdGlvbiAoQywgbGlzdCkge1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHZhciByZXN1bHQgPSBuZXcgKGFUeXBlZEFycmF5Q29uc3RydWN0b3IoQykpKGxlbmd0aCk7XG4gIHdoaWxlIChsZW5ndGggPiBpbmRleCkgcmVzdWx0W2luZGV4XSA9IGxpc3RbaW5kZXgrK107XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG52YXIgYWRkR2V0dGVyID0gZnVuY3Rpb24gKGl0LCBrZXkpIHtcbiAgbmF0aXZlRGVmaW5lUHJvcGVydHkoaXQsIGtleSwgeyBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0SW50ZXJuYWxTdGF0ZSh0aGlzKVtrZXldO1xuICB9IH0pO1xufTtcblxudmFyIGlzQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiAoaXQpIHtcbiAgdmFyIGtsYXNzO1xuICByZXR1cm4gaXQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCAoa2xhc3MgPSBjbGFzc29mKGl0KSkgPT0gJ0FycmF5QnVmZmVyJyB8fCBrbGFzcyA9PSAnU2hhcmVkQXJyYXlCdWZmZXInO1xufTtcblxudmFyIGlzVHlwZWRBcnJheUluZGV4ID0gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7XG4gIHJldHVybiBpc1R5cGVkQXJyYXkodGFyZ2V0KVxuICAgICYmIHR5cGVvZiBrZXkgIT0gJ3N5bWJvbCdcbiAgICAmJiBrZXkgaW4gdGFyZ2V0XG4gICAgJiYgU3RyaW5nKCtrZXkpID09IFN0cmluZyhrZXkpO1xufTtcblxudmFyIHdyYXBwZWRHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIHtcbiAgcmV0dXJuIGlzVHlwZWRBcnJheUluZGV4KHRhcmdldCwga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSlcbiAgICA/IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcigyLCB0YXJnZXRba2V5XSlcbiAgICA6IG5hdGl2ZUdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSk7XG59O1xuXG52YXIgd3JhcHBlZERlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgaWYgKGlzVHlwZWRBcnJheUluZGV4KHRhcmdldCwga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSlcbiAgICAmJiBpc09iamVjdChkZXNjcmlwdG9yKVxuICAgICYmIGhhcyhkZXNjcmlwdG9yLCAndmFsdWUnKVxuICAgICYmICFoYXMoZGVzY3JpcHRvciwgJ2dldCcpXG4gICAgJiYgIWhhcyhkZXNjcmlwdG9yLCAnc2V0JylcbiAgICAvLyBUT0RPOiBhZGQgdmFsaWRhdGlvbiBkZXNjcmlwdG9yIHcvbyBjYWxsaW5nIGFjY2Vzc29yc1xuICAgICYmICFkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZVxuICAgICYmICghaGFzKGRlc2NyaXB0b3IsICd3cml0YWJsZScpIHx8IGRlc2NyaXB0b3Iud3JpdGFibGUpXG4gICAgJiYgKCFoYXMoZGVzY3JpcHRvciwgJ2VudW1lcmFibGUnKSB8fCBkZXNjcmlwdG9yLmVudW1lcmFibGUpXG4gICkge1xuICAgIHRhcmdldFtrZXldID0gZGVzY3JpcHRvci52YWx1ZTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9IHJldHVybiBuYXRpdmVEZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgZGVzY3JpcHRvcik7XG59O1xuXG5pZiAoREVTQ1JJUFRPUlMpIHtcbiAgaWYgKCFOQVRJVkVfQVJSQVlfQlVGRkVSX1ZJRVdTKSB7XG4gICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yTW9kdWxlLmYgPSB3cmFwcGVkR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgIGRlZmluZVByb3BlcnR5TW9kdWxlLmYgPSB3cmFwcGVkRGVmaW5lUHJvcGVydHk7XG4gICAgYWRkR2V0dGVyKFR5cGVkQXJyYXlQcm90b3R5cGUsICdidWZmZXInKTtcbiAgICBhZGRHZXR0ZXIoVHlwZWRBcnJheVByb3RvdHlwZSwgJ2J5dGVPZmZzZXQnKTtcbiAgICBhZGRHZXR0ZXIoVHlwZWRBcnJheVByb3RvdHlwZSwgJ2J5dGVMZW5ndGgnKTtcbiAgICBhZGRHZXR0ZXIoVHlwZWRBcnJheVByb3RvdHlwZSwgJ2xlbmd0aCcpO1xuICB9XG5cbiAgJCh7IHRhcmdldDogJ09iamVjdCcsIHN0YXQ6IHRydWUsIGZvcmNlZDogIU5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MgfSwge1xuICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogd3JhcHBlZEdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgICBkZWZpbmVQcm9wZXJ0eTogd3JhcHBlZERlZmluZVByb3BlcnR5XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFRZUEUsIHdyYXBwZXIsIENMQU1QRUQpIHtcbiAgICB2YXIgQllURVMgPSBUWVBFLm1hdGNoKC9cXGQrJC8pWzBdIC8gODtcbiAgICB2YXIgQ09OU1RSVUNUT1JfTkFNRSA9IFRZUEUgKyAoQ0xBTVBFRCA/ICdDbGFtcGVkJyA6ICcnKSArICdBcnJheSc7XG4gICAgdmFyIEdFVFRFUiA9ICdnZXQnICsgVFlQRTtcbiAgICB2YXIgU0VUVEVSID0gJ3NldCcgKyBUWVBFO1xuICAgIHZhciBOYXRpdmVUeXBlZEFycmF5Q29uc3RydWN0b3IgPSBnbG9iYWxbQ09OU1RSVUNUT1JfTkFNRV07XG4gICAgdmFyIFR5cGVkQXJyYXlDb25zdHJ1Y3RvciA9IE5hdGl2ZVR5cGVkQXJyYXlDb25zdHJ1Y3RvcjtcbiAgICB2YXIgVHlwZWRBcnJheUNvbnN0cnVjdG9yUHJvdG90eXBlID0gVHlwZWRBcnJheUNvbnN0cnVjdG9yICYmIFR5cGVkQXJyYXlDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gICAgdmFyIGV4cG9ydGVkID0ge307XG5cbiAgICB2YXIgZ2V0dGVyID0gZnVuY3Rpb24gKHRoYXQsIGluZGV4KSB7XG4gICAgICB2YXIgZGF0YSA9IGdldEludGVybmFsU3RhdGUodGhhdCk7XG4gICAgICByZXR1cm4gZGF0YS52aWV3W0dFVFRFUl0oaW5kZXggKiBCWVRFUyArIGRhdGEuYnl0ZU9mZnNldCwgdHJ1ZSk7XG4gICAgfTtcblxuICAgIHZhciBzZXR0ZXIgPSBmdW5jdGlvbiAodGhhdCwgaW5kZXgsIHZhbHVlKSB7XG4gICAgICB2YXIgZGF0YSA9IGdldEludGVybmFsU3RhdGUodGhhdCk7XG4gICAgICBpZiAoQ0xBTVBFRCkgdmFsdWUgPSAodmFsdWUgPSByb3VuZCh2YWx1ZSkpIDwgMCA/IDAgOiB2YWx1ZSA+IDB4RkYgPyAweEZGIDogdmFsdWUgJiAweEZGO1xuICAgICAgZGF0YS52aWV3W1NFVFRFUl0oaW5kZXggKiBCWVRFUyArIGRhdGEuYnl0ZU9mZnNldCwgdmFsdWUsIHRydWUpO1xuICAgIH07XG5cbiAgICB2YXIgYWRkRWxlbWVudCA9IGZ1bmN0aW9uICh0aGF0LCBpbmRleCkge1xuICAgICAgbmF0aXZlRGVmaW5lUHJvcGVydHkodGhhdCwgaW5kZXgsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGdldHRlcih0aGlzLCBpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHNldHRlcih0aGlzLCBpbmRleCwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKCFOQVRJVkVfQVJSQVlfQlVGRkVSX1ZJRVdTKSB7XG4gICAgICBUeXBlZEFycmF5Q29uc3RydWN0b3IgPSB3cmFwcGVyKGZ1bmN0aW9uICh0aGF0LCBkYXRhLCBvZmZzZXQsICRsZW5ndGgpIHtcbiAgICAgICAgYW5JbnN0YW5jZSh0aGF0LCBUeXBlZEFycmF5Q29uc3RydWN0b3IsIENPTlNUUlVDVE9SX05BTUUpO1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IDA7XG4gICAgICAgIHZhciBidWZmZXIsIGJ5dGVMZW5ndGgsIGxlbmd0aDtcbiAgICAgICAgaWYgKCFpc09iamVjdChkYXRhKSkge1xuICAgICAgICAgIGxlbmd0aCA9IHRvSW5kZXgoZGF0YSk7XG4gICAgICAgICAgYnl0ZUxlbmd0aCA9IGxlbmd0aCAqIEJZVEVTO1xuICAgICAgICAgIGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihieXRlTGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5QnVmZmVyKGRhdGEpKSB7XG4gICAgICAgICAgYnVmZmVyID0gZGF0YTtcbiAgICAgICAgICBieXRlT2Zmc2V0ID0gdG9PZmZzZXQob2Zmc2V0LCBCWVRFUyk7XG4gICAgICAgICAgdmFyICRsZW4gPSBkYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgaWYgKCRsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCRsZW4gJSBCWVRFUykgdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuICAgICAgICAgICAgYnl0ZUxlbmd0aCA9ICRsZW4gLSBieXRlT2Zmc2V0O1xuICAgICAgICAgICAgaWYgKGJ5dGVMZW5ndGggPCAwKSB0aHJvdyBSYW5nZUVycm9yKFdST05HX0xFTkdUSCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJ5dGVMZW5ndGggPSB0b0xlbmd0aCgkbGVuZ3RoKSAqIEJZVEVTO1xuICAgICAgICAgICAgaWYgKGJ5dGVMZW5ndGggKyBieXRlT2Zmc2V0ID4gJGxlbikgdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZW5ndGggPSBieXRlTGVuZ3RoIC8gQllURVM7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNUeXBlZEFycmF5KGRhdGEpKSB7XG4gICAgICAgICAgcmV0dXJuIGZyb21MaXN0KFR5cGVkQXJyYXlDb25zdHJ1Y3RvciwgZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVkQXJyYXlGcm9tLmNhbGwoVHlwZWRBcnJheUNvbnN0cnVjdG9yLCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRJbnRlcm5hbFN0YXRlKHRoYXQsIHtcbiAgICAgICAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICAgICAgICBieXRlT2Zmc2V0OiBieXRlT2Zmc2V0LFxuICAgICAgICAgIGJ5dGVMZW5ndGg6IGJ5dGVMZW5ndGgsXG4gICAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgICAgdmlldzogbmV3IERhdGFWaWV3KGJ1ZmZlcilcbiAgICAgICAgfSk7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkgYWRkRWxlbWVudCh0aGF0LCBpbmRleCsrKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoc2V0UHJvdG90eXBlT2YpIHNldFByb3RvdHlwZU9mKFR5cGVkQXJyYXlDb25zdHJ1Y3RvciwgVHlwZWRBcnJheSk7XG4gICAgICBUeXBlZEFycmF5Q29uc3RydWN0b3JQcm90b3R5cGUgPSBUeXBlZEFycmF5Q29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKFR5cGVkQXJyYXlQcm90b3R5cGUpO1xuICAgIH0gZWxzZSBpZiAoVFlQRURfQVJSQVlTX0NPTlNUUlVDVE9SU19SRVFVSVJFU19XUkFQUEVSUykge1xuICAgICAgVHlwZWRBcnJheUNvbnN0cnVjdG9yID0gd3JhcHBlcihmdW5jdGlvbiAoZHVtbXksIGRhdGEsIHR5cGVkQXJyYXlPZmZzZXQsICRsZW5ndGgpIHtcbiAgICAgICAgYW5JbnN0YW5jZShkdW1teSwgVHlwZWRBcnJheUNvbnN0cnVjdG9yLCBDT05TVFJVQ1RPUl9OQU1FKTtcbiAgICAgICAgcmV0dXJuIGluaGVyaXRJZlJlcXVpcmVkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIWlzT2JqZWN0KGRhdGEpKSByZXR1cm4gbmV3IE5hdGl2ZVR5cGVkQXJyYXlDb25zdHJ1Y3Rvcih0b0luZGV4KGRhdGEpKTtcbiAgICAgICAgICBpZiAoaXNBcnJheUJ1ZmZlcihkYXRhKSkgcmV0dXJuICRsZW5ndGggIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBuZXcgTmF0aXZlVHlwZWRBcnJheUNvbnN0cnVjdG9yKGRhdGEsIHRvT2Zmc2V0KHR5cGVkQXJyYXlPZmZzZXQsIEJZVEVTKSwgJGxlbmd0aClcbiAgICAgICAgICAgIDogdHlwZWRBcnJheU9mZnNldCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgID8gbmV3IE5hdGl2ZVR5cGVkQXJyYXlDb25zdHJ1Y3RvcihkYXRhLCB0b09mZnNldCh0eXBlZEFycmF5T2Zmc2V0LCBCWVRFUykpXG4gICAgICAgICAgICAgIDogbmV3IE5hdGl2ZVR5cGVkQXJyYXlDb25zdHJ1Y3RvcihkYXRhKTtcbiAgICAgICAgICBpZiAoaXNUeXBlZEFycmF5KGRhdGEpKSByZXR1cm4gZnJvbUxpc3QoVHlwZWRBcnJheUNvbnN0cnVjdG9yLCBkYXRhKTtcbiAgICAgICAgICByZXR1cm4gdHlwZWRBcnJheUZyb20uY2FsbChUeXBlZEFycmF5Q29uc3RydWN0b3IsIGRhdGEpO1xuICAgICAgICB9KCksIGR1bW15LCBUeXBlZEFycmF5Q29uc3RydWN0b3IpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChzZXRQcm90b3R5cGVPZikgc2V0UHJvdG90eXBlT2YoVHlwZWRBcnJheUNvbnN0cnVjdG9yLCBUeXBlZEFycmF5KTtcbiAgICAgIGZvckVhY2goZ2V0T3duUHJvcGVydHlOYW1lcyhOYXRpdmVUeXBlZEFycmF5Q29uc3RydWN0b3IpLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICghKGtleSBpbiBUeXBlZEFycmF5Q29uc3RydWN0b3IpKSB7XG4gICAgICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KFR5cGVkQXJyYXlDb25zdHJ1Y3Rvciwga2V5LCBOYXRpdmVUeXBlZEFycmF5Q29uc3RydWN0b3Jba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgVHlwZWRBcnJheUNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IFR5cGVkQXJyYXlDb25zdHJ1Y3RvclByb3RvdHlwZTtcbiAgICB9XG5cbiAgICBpZiAoVHlwZWRBcnJheUNvbnN0cnVjdG9yUHJvdG90eXBlLmNvbnN0cnVjdG9yICE9PSBUeXBlZEFycmF5Q29uc3RydWN0b3IpIHtcbiAgICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eShUeXBlZEFycmF5Q29uc3RydWN0b3JQcm90b3R5cGUsICdjb25zdHJ1Y3RvcicsIFR5cGVkQXJyYXlDb25zdHJ1Y3Rvcik7XG4gICAgfVxuXG4gICAgaWYgKFRZUEVEX0FSUkFZX1RBRykge1xuICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KFR5cGVkQXJyYXlDb25zdHJ1Y3RvclByb3RvdHlwZSwgVFlQRURfQVJSQVlfVEFHLCBDT05TVFJVQ1RPUl9OQU1FKTtcbiAgICB9XG5cbiAgICBleHBvcnRlZFtDT05TVFJVQ1RPUl9OQU1FXSA9IFR5cGVkQXJyYXlDb25zdHJ1Y3RvcjtcblxuICAgICQoe1xuICAgICAgZ2xvYmFsOiB0cnVlLCBmb3JjZWQ6IFR5cGVkQXJyYXlDb25zdHJ1Y3RvciAhPSBOYXRpdmVUeXBlZEFycmF5Q29uc3RydWN0b3IsIHNoYW06ICFOQVRJVkVfQVJSQVlfQlVGRkVSX1ZJRVdTXG4gICAgfSwgZXhwb3J0ZWQpO1xuXG4gICAgaWYgKCEoQllURVNfUEVSX0VMRU1FTlQgaW4gVHlwZWRBcnJheUNvbnN0cnVjdG9yKSkge1xuICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KFR5cGVkQXJyYXlDb25zdHJ1Y3RvciwgQllURVNfUEVSX0VMRU1FTlQsIEJZVEVTKTtcbiAgICB9XG5cbiAgICBpZiAoIShCWVRFU19QRVJfRUxFTUVOVCBpbiBUeXBlZEFycmF5Q29uc3RydWN0b3JQcm90b3R5cGUpKSB7XG4gICAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkoVHlwZWRBcnJheUNvbnN0cnVjdG9yUHJvdG90eXBlLCBCWVRFU19QRVJfRUxFTUVOVCwgQllURVMpO1xuICAgIH1cblxuICAgIHNldFNwZWNpZXMoQ09OU1RSVUNUT1JfTkFNRSk7XG4gIH07XG59IGVsc2UgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXcgKi9cbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBjaGVja0NvcnJlY3RuZXNzT2ZJdGVyYXRpb24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2hlY2stY29ycmVjdG5lc3Mtb2YtaXRlcmF0aW9uJyk7XG52YXIgTkFUSVZFX0FSUkFZX0JVRkZFUl9WSUVXUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1idWZmZXItdmlldy1jb3JlJykuTkFUSVZFX0FSUkFZX0JVRkZFUl9WSUVXUztcblxudmFyIEFycmF5QnVmZmVyID0gZ2xvYmFsLkFycmF5QnVmZmVyO1xudmFyIEludDhBcnJheSA9IGdsb2JhbC5JbnQ4QXJyYXk7XG5cbm1vZHVsZS5leHBvcnRzID0gIU5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MgfHwgIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgSW50OEFycmF5KDEpO1xufSkgfHwgIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgbmV3IEludDhBcnJheSgtMSk7XG59KSB8fCAhY2hlY2tDb3JyZWN0bmVzc09mSXRlcmF0aW9uKGZ1bmN0aW9uIChpdGVyYWJsZSkge1xuICBuZXcgSW50OEFycmF5KCk7XG4gIG5ldyBJbnQ4QXJyYXkobnVsbCk7XG4gIG5ldyBJbnQ4QXJyYXkoMS41KTtcbiAgbmV3IEludDhBcnJheShpdGVyYWJsZSk7XG59LCB0cnVlKSB8fCBmYWlscyhmdW5jdGlvbiAoKSB7XG4gIC8vIFNhZmFyaSAoMTErKSBidWcgLSBhIHJlYXNvbiB3aHkgZXZlbiBTYWZhcmkgMTMgc2hvdWxkIGxvYWQgYSB0eXBlZCBhcnJheSBwb2x5ZmlsbFxuICByZXR1cm4gbmV3IEludDhBcnJheShuZXcgQXJyYXlCdWZmZXIoMiksIDEsIHVuZGVmaW5lZCkubGVuZ3RoICE9PSAxO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgTkFUSVZFX0FSUkFZX0JVRkZFUiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1idWZmZXItbmF0aXZlJyk7XG52YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1ub24tZW51bWVyYWJsZS1wcm9wZXJ0eScpO1xudmFyIHJlZGVmaW5lQWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZGVmaW5lLWFsbCcpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgYW5JbnN0YW5jZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1pbnN0YW5jZScpO1xudmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbnRlZ2VyJyk7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tbGVuZ3RoJyk7XG52YXIgdG9JbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbmRleCcpO1xudmFyIElFRUU3NTQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaWVlZTc1NCcpO1xudmFyIGdldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtcHJvdG90eXBlLW9mJyk7XG52YXIgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LXNldC1wcm90b3R5cGUtb2YnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eU5hbWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LW5hbWVzJykuZjtcbnZhciBkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5JykuZjtcbnZhciBhcnJheUZpbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktZmlsbCcpO1xudmFyIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NldC10by1zdHJpbmctdGFnJyk7XG52YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpO1xuXG52YXIgZ2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuZ2V0O1xudmFyIHNldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLnNldDtcbnZhciBBUlJBWV9CVUZGRVIgPSAnQXJyYXlCdWZmZXInO1xudmFyIERBVEFfVklFVyA9ICdEYXRhVmlldyc7XG52YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG52YXIgV1JPTkdfTEVOR1RIID0gJ1dyb25nIGxlbmd0aCc7XG52YXIgV1JPTkdfSU5ERVggPSAnV3JvbmcgaW5kZXgnO1xudmFyIE5hdGl2ZUFycmF5QnVmZmVyID0gZ2xvYmFsW0FSUkFZX0JVRkZFUl07XG52YXIgJEFycmF5QnVmZmVyID0gTmF0aXZlQXJyYXlCdWZmZXI7XG52YXIgJERhdGFWaWV3ID0gZ2xvYmFsW0RBVEFfVklFV107XG52YXIgJERhdGFWaWV3UHJvdG90eXBlID0gJERhdGFWaWV3ICYmICREYXRhVmlld1tQUk9UT1RZUEVdO1xudmFyIE9iamVjdFByb3RvdHlwZSA9IE9iamVjdC5wcm90b3R5cGU7XG52YXIgUmFuZ2VFcnJvciA9IGdsb2JhbC5SYW5nZUVycm9yO1xuXG52YXIgcGFja0lFRUU3NTQgPSBJRUVFNzU0LnBhY2s7XG52YXIgdW5wYWNrSUVFRTc1NCA9IElFRUU3NTQudW5wYWNrO1xuXG52YXIgcGFja0ludDggPSBmdW5jdGlvbiAobnVtYmVyKSB7XG4gIHJldHVybiBbbnVtYmVyICYgMHhGRl07XG59O1xuXG52YXIgcGFja0ludDE2ID0gZnVuY3Rpb24gKG51bWJlcikge1xuICByZXR1cm4gW251bWJlciAmIDB4RkYsIG51bWJlciA+PiA4ICYgMHhGRl07XG59O1xuXG52YXIgcGFja0ludDMyID0gZnVuY3Rpb24gKG51bWJlcikge1xuICByZXR1cm4gW251bWJlciAmIDB4RkYsIG51bWJlciA+PiA4ICYgMHhGRiwgbnVtYmVyID4+IDE2ICYgMHhGRiwgbnVtYmVyID4+IDI0ICYgMHhGRl07XG59O1xuXG52YXIgdW5wYWNrSW50MzIgPSBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gIHJldHVybiBidWZmZXJbM10gPDwgMjQgfCBidWZmZXJbMl0gPDwgMTYgfCBidWZmZXJbMV0gPDwgOCB8IGJ1ZmZlclswXTtcbn07XG5cbnZhciBwYWNrRmxvYXQzMiA9IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgcmV0dXJuIHBhY2tJRUVFNzU0KG51bWJlciwgMjMsIDQpO1xufTtcblxudmFyIHBhY2tGbG9hdDY0ID0gZnVuY3Rpb24gKG51bWJlcikge1xuICByZXR1cm4gcGFja0lFRUU3NTQobnVtYmVyLCA1MiwgOCk7XG59O1xuXG52YXIgYWRkR2V0dGVyID0gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBrZXkpIHtcbiAgZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3JbUFJPVE9UWVBFXSwga2V5LCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0SW50ZXJuYWxTdGF0ZSh0aGlzKVtrZXldOyB9IH0pO1xufTtcblxudmFyIGdldCA9IGZ1bmN0aW9uICh2aWV3LCBjb3VudCwgaW5kZXgsIGlzTGl0dGxlRW5kaWFuKSB7XG4gIHZhciBpbnRJbmRleCA9IHRvSW5kZXgoaW5kZXgpO1xuICB2YXIgc3RvcmUgPSBnZXRJbnRlcm5hbFN0YXRlKHZpZXcpO1xuICBpZiAoaW50SW5kZXggKyBjb3VudCA+IHN0b3JlLmJ5dGVMZW5ndGgpIHRocm93IFJhbmdlRXJyb3IoV1JPTkdfSU5ERVgpO1xuICB2YXIgYnl0ZXMgPSBnZXRJbnRlcm5hbFN0YXRlKHN0b3JlLmJ1ZmZlcikuYnl0ZXM7XG4gIHZhciBzdGFydCA9IGludEluZGV4ICsgc3RvcmUuYnl0ZU9mZnNldDtcbiAgdmFyIHBhY2sgPSBieXRlcy5zbGljZShzdGFydCwgc3RhcnQgKyBjb3VudCk7XG4gIHJldHVybiBpc0xpdHRsZUVuZGlhbiA/IHBhY2sgOiBwYWNrLnJldmVyc2UoKTtcbn07XG5cbnZhciBzZXQgPSBmdW5jdGlvbiAodmlldywgY291bnQsIGluZGV4LCBjb252ZXJzaW9uLCB2YWx1ZSwgaXNMaXR0bGVFbmRpYW4pIHtcbiAgdmFyIGludEluZGV4ID0gdG9JbmRleChpbmRleCk7XG4gIHZhciBzdG9yZSA9IGdldEludGVybmFsU3RhdGUodmlldyk7XG4gIGlmIChpbnRJbmRleCArIGNvdW50ID4gc3RvcmUuYnl0ZUxlbmd0aCkgdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19JTkRFWCk7XG4gIHZhciBieXRlcyA9IGdldEludGVybmFsU3RhdGUoc3RvcmUuYnVmZmVyKS5ieXRlcztcbiAgdmFyIHN0YXJ0ID0gaW50SW5kZXggKyBzdG9yZS5ieXRlT2Zmc2V0O1xuICB2YXIgcGFjayA9IGNvbnZlcnNpb24oK3ZhbHVlKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSBieXRlc1tzdGFydCArIGldID0gcGFja1tpc0xpdHRsZUVuZGlhbiA/IGkgOiBjb3VudCAtIGkgLSAxXTtcbn07XG5cbmlmICghTkFUSVZFX0FSUkFZX0JVRkZFUikge1xuICAkQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiBBcnJheUJ1ZmZlcihsZW5ndGgpIHtcbiAgICBhbkluc3RhbmNlKHRoaXMsICRBcnJheUJ1ZmZlciwgQVJSQVlfQlVGRkVSKTtcbiAgICB2YXIgYnl0ZUxlbmd0aCA9IHRvSW5kZXgobGVuZ3RoKTtcbiAgICBzZXRJbnRlcm5hbFN0YXRlKHRoaXMsIHtcbiAgICAgIGJ5dGVzOiBhcnJheUZpbGwuY2FsbChuZXcgQXJyYXkoYnl0ZUxlbmd0aCksIDApLFxuICAgICAgYnl0ZUxlbmd0aDogYnl0ZUxlbmd0aFxuICAgIH0pO1xuICAgIGlmICghREVTQ1JJUFRPUlMpIHRoaXMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGg7XG4gIH07XG5cbiAgJERhdGFWaWV3ID0gZnVuY3Rpb24gRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSB7XG4gICAgYW5JbnN0YW5jZSh0aGlzLCAkRGF0YVZpZXcsIERBVEFfVklFVyk7XG4gICAgYW5JbnN0YW5jZShidWZmZXIsICRBcnJheUJ1ZmZlciwgREFUQV9WSUVXKTtcbiAgICB2YXIgYnVmZmVyTGVuZ3RoID0gZ2V0SW50ZXJuYWxTdGF0ZShidWZmZXIpLmJ5dGVMZW5ndGg7XG4gICAgdmFyIG9mZnNldCA9IHRvSW50ZWdlcihieXRlT2Zmc2V0KTtcbiAgICBpZiAob2Zmc2V0IDwgMCB8fCBvZmZzZXQgPiBidWZmZXJMZW5ndGgpIHRocm93IFJhbmdlRXJyb3IoJ1dyb25nIG9mZnNldCcpO1xuICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID09PSB1bmRlZmluZWQgPyBidWZmZXJMZW5ndGggLSBvZmZzZXQgOiB0b0xlbmd0aChieXRlTGVuZ3RoKTtcbiAgICBpZiAob2Zmc2V0ICsgYnl0ZUxlbmd0aCA+IGJ1ZmZlckxlbmd0aCkgdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuICAgIHNldEludGVybmFsU3RhdGUodGhpcywge1xuICAgICAgYnVmZmVyOiBidWZmZXIsXG4gICAgICBieXRlTGVuZ3RoOiBieXRlTGVuZ3RoLFxuICAgICAgYnl0ZU9mZnNldDogb2Zmc2V0XG4gICAgfSk7XG4gICAgaWYgKCFERVNDUklQVE9SUykge1xuICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgICB0aGlzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoO1xuICAgICAgdGhpcy5ieXRlT2Zmc2V0ID0gb2Zmc2V0O1xuICAgIH1cbiAgfTtcblxuICBpZiAoREVTQ1JJUFRPUlMpIHtcbiAgICBhZGRHZXR0ZXIoJEFycmF5QnVmZmVyLCAnYnl0ZUxlbmd0aCcpO1xuICAgIGFkZEdldHRlcigkRGF0YVZpZXcsICdidWZmZXInKTtcbiAgICBhZGRHZXR0ZXIoJERhdGFWaWV3LCAnYnl0ZUxlbmd0aCcpO1xuICAgIGFkZEdldHRlcigkRGF0YVZpZXcsICdieXRlT2Zmc2V0Jyk7XG4gIH1cblxuICByZWRlZmluZUFsbCgkRGF0YVZpZXdbUFJPVE9UWVBFXSwge1xuICAgIGdldEludDg6IGZ1bmN0aW9uIGdldEludDgoYnl0ZU9mZnNldCkge1xuICAgICAgcmV0dXJuIGdldCh0aGlzLCAxLCBieXRlT2Zmc2V0KVswXSA8PCAyNCA+PiAyNDtcbiAgICB9LFxuICAgIGdldFVpbnQ4OiBmdW5jdGlvbiBnZXRVaW50OChieXRlT2Zmc2V0KSB7XG4gICAgICByZXR1cm4gZ2V0KHRoaXMsIDEsIGJ5dGVPZmZzZXQpWzBdO1xuICAgIH0sXG4gICAgZ2V0SW50MTY6IGZ1bmN0aW9uIGdldEludDE2KGJ5dGVPZmZzZXQgLyogLCBsaXR0bGVFbmRpYW4gKi8pIHtcbiAgICAgIHZhciBieXRlcyA9IGdldCh0aGlzLCAyLCBieXRlT2Zmc2V0LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gICAgICByZXR1cm4gKGJ5dGVzWzFdIDw8IDggfCBieXRlc1swXSkgPDwgMTYgPj4gMTY7XG4gICAgfSxcbiAgICBnZXRVaW50MTY6IGZ1bmN0aW9uIGdldFVpbnQxNihieXRlT2Zmc2V0IC8qICwgbGl0dGxlRW5kaWFuICovKSB7XG4gICAgICB2YXIgYnl0ZXMgPSBnZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICAgICAgcmV0dXJuIGJ5dGVzWzFdIDw8IDggfCBieXRlc1swXTtcbiAgICB9LFxuICAgIGdldEludDMyOiBmdW5jdGlvbiBnZXRJbnQzMihieXRlT2Zmc2V0IC8qICwgbGl0dGxlRW5kaWFuICovKSB7XG4gICAgICByZXR1cm4gdW5wYWNrSW50MzIoZ2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKSk7XG4gICAgfSxcbiAgICBnZXRVaW50MzI6IGZ1bmN0aW9uIGdldFVpbnQzMihieXRlT2Zmc2V0IC8qICwgbGl0dGxlRW5kaWFuICovKSB7XG4gICAgICByZXR1cm4gdW5wYWNrSW50MzIoZ2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKSkgPj4+IDA7XG4gICAgfSxcbiAgICBnZXRGbG9hdDMyOiBmdW5jdGlvbiBnZXRGbG9hdDMyKGJ5dGVPZmZzZXQgLyogLCBsaXR0bGVFbmRpYW4gKi8pIHtcbiAgICAgIHJldHVybiB1bnBhY2tJRUVFNzU0KGdldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCksIDIzKTtcbiAgICB9LFxuICAgIGdldEZsb2F0NjQ6IGZ1bmN0aW9uIGdldEZsb2F0NjQoYnl0ZU9mZnNldCAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgcmV0dXJuIHVucGFja0lFRUU3NTQoZ2V0KHRoaXMsIDgsIGJ5dGVPZmZzZXQsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKSwgNTIpO1xuICAgIH0sXG4gICAgc2V0SW50ODogZnVuY3Rpb24gc2V0SW50OChieXRlT2Zmc2V0LCB2YWx1ZSkge1xuICAgICAgc2V0KHRoaXMsIDEsIGJ5dGVPZmZzZXQsIHBhY2tJbnQ4LCB2YWx1ZSk7XG4gICAgfSxcbiAgICBzZXRVaW50ODogZnVuY3Rpb24gc2V0VWludDgoYnl0ZU9mZnNldCwgdmFsdWUpIHtcbiAgICAgIHNldCh0aGlzLCAxLCBieXRlT2Zmc2V0LCBwYWNrSW50OCwgdmFsdWUpO1xuICAgIH0sXG4gICAgc2V0SW50MTY6IGZ1bmN0aW9uIHNldEludDE2KGJ5dGVPZmZzZXQsIHZhbHVlIC8qICwgbGl0dGxlRW5kaWFuICovKSB7XG4gICAgICBzZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgcGFja0ludDE2LCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgc2V0VWludDE2OiBmdW5jdGlvbiBzZXRVaW50MTYoYnl0ZU9mZnNldCwgdmFsdWUgLyogLCBsaXR0bGVFbmRpYW4gKi8pIHtcbiAgICAgIHNldCh0aGlzLCAyLCBieXRlT2Zmc2V0LCBwYWNrSW50MTYsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBzZXRJbnQzMjogZnVuY3Rpb24gc2V0SW50MzIoYnl0ZU9mZnNldCwgdmFsdWUgLyogLCBsaXR0bGVFbmRpYW4gKi8pIHtcbiAgICAgIHNldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBwYWNrSW50MzIsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBzZXRVaW50MzI6IGZ1bmN0aW9uIHNldFVpbnQzMihieXRlT2Zmc2V0LCB2YWx1ZSAvKiAsIGxpdHRsZUVuZGlhbiAqLykge1xuICAgICAgc2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIHBhY2tJbnQzMiwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIHNldEZsb2F0MzI6IGZ1bmN0aW9uIHNldEZsb2F0MzIoYnl0ZU9mZnNldCwgdmFsdWUgLyogLCBsaXR0bGVFbmRpYW4gKi8pIHtcbiAgICAgIHNldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBwYWNrRmxvYXQzMiwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIHNldEZsb2F0NjQ6IGZ1bmN0aW9uIHNldEZsb2F0NjQoYnl0ZU9mZnNldCwgdmFsdWUgLyogLCBsaXR0bGVFbmRpYW4gKi8pIHtcbiAgICAgIHNldCh0aGlzLCA4LCBieXRlT2Zmc2V0LCBwYWNrRmxvYXQ2NCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkKTtcbiAgICB9XG4gIH0pO1xufSBlbHNlIHtcbiAgaWYgKCFmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgTmF0aXZlQXJyYXlCdWZmZXIoMSk7XG4gIH0pIHx8ICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgbmV3IE5hdGl2ZUFycmF5QnVmZmVyKC0xKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcbiAgfSkgfHwgZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIG5ldyBOYXRpdmVBcnJheUJ1ZmZlcigpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICAgIG5ldyBOYXRpdmVBcnJheUJ1ZmZlcigxLjUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICAgIG5ldyBOYXRpdmVBcnJheUJ1ZmZlcihOYU4pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICAgIHJldHVybiBOYXRpdmVBcnJheUJ1ZmZlci5uYW1lICE9IEFSUkFZX0JVRkZFUjtcbiAgfSkpIHtcbiAgICAkQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiBBcnJheUJ1ZmZlcihsZW5ndGgpIHtcbiAgICAgIGFuSW5zdGFuY2UodGhpcywgJEFycmF5QnVmZmVyKTtcbiAgICAgIHJldHVybiBuZXcgTmF0aXZlQXJyYXlCdWZmZXIodG9JbmRleChsZW5ndGgpKTtcbiAgICB9O1xuICAgIHZhciBBcnJheUJ1ZmZlclByb3RvdHlwZSA9ICRBcnJheUJ1ZmZlcltQUk9UT1RZUEVdID0gTmF0aXZlQXJyYXlCdWZmZXJbUFJPVE9UWVBFXTtcbiAgICBmb3IgKHZhciBrZXlzID0gZ2V0T3duUHJvcGVydHlOYW1lcyhOYXRpdmVBcnJheUJ1ZmZlciksIGogPSAwLCBrZXk7IGtleXMubGVuZ3RoID4gajspIHtcbiAgICAgIGlmICghKChrZXkgPSBrZXlzW2orK10pIGluICRBcnJheUJ1ZmZlcikpIHtcbiAgICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KCRBcnJheUJ1ZmZlciwga2V5LCBOYXRpdmVBcnJheUJ1ZmZlcltrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgQXJyYXlCdWZmZXJQcm90b3R5cGUuY29uc3RydWN0b3IgPSAkQXJyYXlCdWZmZXI7XG4gIH1cblxuICAvLyBXZWJLaXQgYnVnIC0gdGhlIHNhbWUgcGFyZW50IHByb3RvdHlwZSBmb3IgdHlwZWQgYXJyYXlzIGFuZCBkYXRhIHZpZXdcbiAgaWYgKHNldFByb3RvdHlwZU9mICYmIGdldFByb3RvdHlwZU9mKCREYXRhVmlld1Byb3RvdHlwZSkgIT09IE9iamVjdFByb3RvdHlwZSkge1xuICAgIHNldFByb3RvdHlwZU9mKCREYXRhVmlld1Byb3RvdHlwZSwgT2JqZWN0UHJvdG90eXBlKTtcbiAgfVxuXG4gIC8vIGlPUyBTYWZhcmkgNy54IGJ1Z1xuICB2YXIgdGVzdFZpZXcgPSBuZXcgJERhdGFWaWV3KG5ldyAkQXJyYXlCdWZmZXIoMikpO1xuICB2YXIgbmF0aXZlU2V0SW50OCA9ICREYXRhVmlld1Byb3RvdHlwZS5zZXRJbnQ4O1xuICB0ZXN0Vmlldy5zZXRJbnQ4KDAsIDIxNDc0ODM2NDgpO1xuICB0ZXN0Vmlldy5zZXRJbnQ4KDEsIDIxNDc0ODM2NDkpO1xuICBpZiAodGVzdFZpZXcuZ2V0SW50OCgwKSB8fCAhdGVzdFZpZXcuZ2V0SW50OCgxKSkgcmVkZWZpbmVBbGwoJERhdGFWaWV3UHJvdG90eXBlLCB7XG4gICAgc2V0SW50ODogZnVuY3Rpb24gc2V0SW50OChieXRlT2Zmc2V0LCB2YWx1ZSkge1xuICAgICAgbmF0aXZlU2V0SW50OC5jYWxsKHRoaXMsIGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDI0ID4+IDI0KTtcbiAgICB9LFxuICAgIHNldFVpbnQ4OiBmdW5jdGlvbiBzZXRVaW50OChieXRlT2Zmc2V0LCB2YWx1ZSkge1xuICAgICAgbmF0aXZlU2V0SW50OC5jYWxsKHRoaXMsIGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDI0ID4+IDI0KTtcbiAgICB9XG4gIH0sIHsgdW5zYWZlOiB0cnVlIH0pO1xufVxuXG5zZXRUb1N0cmluZ1RhZygkQXJyYXlCdWZmZXIsIEFSUkFZX0JVRkZFUik7XG5zZXRUb1N0cmluZ1RhZygkRGF0YVZpZXcsIERBVEFfVklFVyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBBcnJheUJ1ZmZlcjogJEFycmF5QnVmZmVyLFxuICBEYXRhVmlldzogJERhdGFWaWV3XG59O1xuIiwiLy8gSUVFRTc1NCBjb252ZXJzaW9ucyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2llZWU3NTRcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3ctcmVzdHJpY3RlZC1uYW1lc1xudmFyIEluZmluaXR5ID0gMSAvIDA7XG52YXIgYWJzID0gTWF0aC5hYnM7XG52YXIgcG93ID0gTWF0aC5wb3c7XG52YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xudmFyIGxvZyA9IE1hdGgubG9nO1xudmFyIExOMiA9IE1hdGguTE4yO1xuXG52YXIgcGFjayA9IGZ1bmN0aW9uIChudW1iZXIsIG1hbnRpc3NhTGVuZ3RoLCBieXRlcykge1xuICB2YXIgYnVmZmVyID0gbmV3IEFycmF5KGJ5dGVzKTtcbiAgdmFyIGV4cG9uZW50TGVuZ3RoID0gYnl0ZXMgKiA4IC0gbWFudGlzc2FMZW5ndGggLSAxO1xuICB2YXIgZU1heCA9ICgxIDw8IGV4cG9uZW50TGVuZ3RoKSAtIDE7XG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMTtcbiAgdmFyIHJ0ID0gbWFudGlzc2FMZW5ndGggPT09IDIzID8gcG93KDIsIC0yNCkgLSBwb3coMiwgLTc3KSA6IDA7XG4gIHZhciBzaWduID0gbnVtYmVyIDwgMCB8fCBudW1iZXIgPT09IDAgJiYgMSAvIG51bWJlciA8IDAgPyAxIDogMDtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGV4cG9uZW50LCBtYW50aXNzYSwgYztcbiAgbnVtYmVyID0gYWJzKG51bWJlcik7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgaWYgKG51bWJlciAhPSBudW1iZXIgfHwgbnVtYmVyID09PSBJbmZpbml0eSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICBtYW50aXNzYSA9IG51bWJlciAhPSBudW1iZXIgPyAxIDogMDtcbiAgICBleHBvbmVudCA9IGVNYXg7XG4gIH0gZWxzZSB7XG4gICAgZXhwb25lbnQgPSBmbG9vcihsb2cobnVtYmVyKSAvIExOMik7XG4gICAgaWYgKG51bWJlciAqIChjID0gcG93KDIsIC1leHBvbmVudCkpIDwgMSkge1xuICAgICAgZXhwb25lbnQtLTtcbiAgICAgIGMgKj0gMjtcbiAgICB9XG4gICAgaWYgKGV4cG9uZW50ICsgZUJpYXMgPj0gMSkge1xuICAgICAgbnVtYmVyICs9IHJ0IC8gYztcbiAgICB9IGVsc2Uge1xuICAgICAgbnVtYmVyICs9IHJ0ICogcG93KDIsIDEgLSBlQmlhcyk7XG4gICAgfVxuICAgIGlmIChudW1iZXIgKiBjID49IDIpIHtcbiAgICAgIGV4cG9uZW50Kys7XG4gICAgICBjIC89IDI7XG4gICAgfVxuICAgIGlmIChleHBvbmVudCArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG1hbnRpc3NhID0gMDtcbiAgICAgIGV4cG9uZW50ID0gZU1heDtcbiAgICB9IGVsc2UgaWYgKGV4cG9uZW50ICsgZUJpYXMgPj0gMSkge1xuICAgICAgbWFudGlzc2EgPSAobnVtYmVyICogYyAtIDEpICogcG93KDIsIG1hbnRpc3NhTGVuZ3RoKTtcbiAgICAgIGV4cG9uZW50ID0gZXhwb25lbnQgKyBlQmlhcztcbiAgICB9IGVsc2Uge1xuICAgICAgbWFudGlzc2EgPSBudW1iZXIgKiBwb3coMiwgZUJpYXMgLSAxKSAqIHBvdygyLCBtYW50aXNzYUxlbmd0aCk7XG4gICAgICBleHBvbmVudCA9IDA7XG4gICAgfVxuICB9XG4gIGZvciAoOyBtYW50aXNzYUxlbmd0aCA+PSA4OyBidWZmZXJbaW5kZXgrK10gPSBtYW50aXNzYSAmIDI1NSwgbWFudGlzc2EgLz0gMjU2LCBtYW50aXNzYUxlbmd0aCAtPSA4KTtcbiAgZXhwb25lbnQgPSBleHBvbmVudCA8PCBtYW50aXNzYUxlbmd0aCB8IG1hbnRpc3NhO1xuICBleHBvbmVudExlbmd0aCArPSBtYW50aXNzYUxlbmd0aDtcbiAgZm9yICg7IGV4cG9uZW50TGVuZ3RoID4gMDsgYnVmZmVyW2luZGV4KytdID0gZXhwb25lbnQgJiAyNTUsIGV4cG9uZW50IC89IDI1NiwgZXhwb25lbnRMZW5ndGggLT0gOCk7XG4gIGJ1ZmZlclstLWluZGV4XSB8PSBzaWduICogMTI4O1xuICByZXR1cm4gYnVmZmVyO1xufTtcblxudmFyIHVucGFjayA9IGZ1bmN0aW9uIChidWZmZXIsIG1hbnRpc3NhTGVuZ3RoKSB7XG4gIHZhciBieXRlcyA9IGJ1ZmZlci5sZW5ndGg7XG4gIHZhciBleHBvbmVudExlbmd0aCA9IGJ5dGVzICogOCAtIG1hbnRpc3NhTGVuZ3RoIC0gMTtcbiAgdmFyIGVNYXggPSAoMSA8PCBleHBvbmVudExlbmd0aCkgLSAxO1xuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDE7XG4gIHZhciBuQml0cyA9IGV4cG9uZW50TGVuZ3RoIC0gNztcbiAgdmFyIGluZGV4ID0gYnl0ZXMgLSAxO1xuICB2YXIgc2lnbiA9IGJ1ZmZlcltpbmRleC0tXTtcbiAgdmFyIGV4cG9uZW50ID0gc2lnbiAmIDEyNztcbiAgdmFyIG1hbnRpc3NhO1xuICBzaWduID4+PSA3O1xuICBmb3IgKDsgbkJpdHMgPiAwOyBleHBvbmVudCA9IGV4cG9uZW50ICogMjU2ICsgYnVmZmVyW2luZGV4XSwgaW5kZXgtLSwgbkJpdHMgLT0gOCk7XG4gIG1hbnRpc3NhID0gZXhwb25lbnQgJiAoMSA8PCAtbkJpdHMpIC0gMTtcbiAgZXhwb25lbnQgPj49IC1uQml0cztcbiAgbkJpdHMgKz0gbWFudGlzc2FMZW5ndGg7XG4gIGZvciAoOyBuQml0cyA+IDA7IG1hbnRpc3NhID0gbWFudGlzc2EgKiAyNTYgKyBidWZmZXJbaW5kZXhdLCBpbmRleC0tLCBuQml0cyAtPSA4KTtcbiAgaWYgKGV4cG9uZW50ID09PSAwKSB7XG4gICAgZXhwb25lbnQgPSAxIC0gZUJpYXM7XG4gIH0gZWxzZSBpZiAoZXhwb25lbnQgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbWFudGlzc2EgPyBOYU4gOiBzaWduID8gLUluZmluaXR5IDogSW5maW5pdHk7XG4gIH0gZWxzZSB7XG4gICAgbWFudGlzc2EgPSBtYW50aXNzYSArIHBvdygyLCBtYW50aXNzYUxlbmd0aCk7XG4gICAgZXhwb25lbnQgPSBleHBvbmVudCAtIGVCaWFzO1xuICB9IHJldHVybiAoc2lnbiA/IC0xIDogMSkgKiBtYW50aXNzYSAqIHBvdygyLCBleHBvbmVudCAtIG1hbnRpc3NhTGVuZ3RoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBwYWNrOiBwYWNrLFxuICB1bnBhY2s6IHVucGFja1xufTtcbiIsInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW50ZWdlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICB2YXIgcmVzdWx0ID0gdG9JbnRlZ2VyKGl0KTtcbiAgaWYgKHJlc3VsdCA8IDApIHRocm93IFJhbmdlRXJyb3IoXCJUaGUgYXJndW1lbnQgY2FuJ3QgYmUgbGVzcyB0aGFuIDBcIik7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwidmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLW9iamVjdCcpO1xudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWxlbmd0aCcpO1xudmFyIGdldEl0ZXJhdG9yTWV0aG9kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1pdGVyYXRvci1tZXRob2QnKTtcbnZhciBpc0FycmF5SXRlcmF0b3JNZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtYXJyYXktaXRlcmF0b3ItbWV0aG9kJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQnKTtcbnZhciBhVHlwZWRBcnJheUNvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWJ1ZmZlci12aWV3LWNvcmUnKS5hVHlwZWRBcnJheUNvbnN0cnVjdG9yO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZyb20oc291cmNlIC8qICwgbWFwZm4sIHRoaXNBcmcgKi8pIHtcbiAgdmFyIE8gPSB0b09iamVjdChzb3VyY2UpO1xuICB2YXIgYXJndW1lbnRzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgdmFyIG1hcGZuID0gYXJndW1lbnRzTGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgdmFyIG1hcHBpbmcgPSBtYXBmbiAhPT0gdW5kZWZpbmVkO1xuICB2YXIgaXRlcmF0b3JNZXRob2QgPSBnZXRJdGVyYXRvck1ldGhvZChPKTtcbiAgdmFyIGksIGxlbmd0aCwgcmVzdWx0LCBzdGVwLCBpdGVyYXRvciwgbmV4dDtcbiAgaWYgKGl0ZXJhdG9yTWV0aG9kICE9IHVuZGVmaW5lZCAmJiAhaXNBcnJheUl0ZXJhdG9yTWV0aG9kKGl0ZXJhdG9yTWV0aG9kKSkge1xuICAgIGl0ZXJhdG9yID0gaXRlcmF0b3JNZXRob2QuY2FsbChPKTtcbiAgICBuZXh0ID0gaXRlcmF0b3IubmV4dDtcbiAgICBPID0gW107XG4gICAgd2hpbGUgKCEoc3RlcCA9IG5leHQuY2FsbChpdGVyYXRvcikpLmRvbmUpIHtcbiAgICAgIE8ucHVzaChzdGVwLnZhbHVlKTtcbiAgICB9XG4gIH1cbiAgaWYgKG1hcHBpbmcgJiYgYXJndW1lbnRzTGVuZ3RoID4gMikge1xuICAgIG1hcGZuID0gYmluZChtYXBmbiwgYXJndW1lbnRzWzJdLCAyKTtcbiAgfVxuICBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7XG4gIHJlc3VsdCA9IG5ldyAoYVR5cGVkQXJyYXlDb25zdHJ1Y3Rvcih0aGlzKSkobGVuZ3RoKTtcbiAgZm9yIChpID0gMDsgbGVuZ3RoID4gaTsgaSsrKSB7XG4gICAgcmVzdWx0W2ldID0gbWFwcGluZyA/IG1hcGZuKE9baV0sIGkpIDogT1tpXTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWFycmF5Jyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBTUEVDSUVTID0gd2VsbEtub3duU3ltYm9sKCdzcGVjaWVzJyk7XG5cbi8vIGBBcnJheVNwZWNpZXNDcmVhdGVgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXlzcGVjaWVzY3JlYXRlXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvcmlnaW5hbEFycmF5LCBsZW5ndGgpIHtcbiAgdmFyIEM7XG4gIGlmIChpc0FycmF5KG9yaWdpbmFsQXJyYXkpKSB7XG4gICAgQyA9IG9yaWdpbmFsQXJyYXkuY29uc3RydWN0b3I7XG4gICAgLy8gY3Jvc3MtcmVhbG0gZmFsbGJhY2tcbiAgICBpZiAodHlwZW9mIEMgPT0gJ2Z1bmN0aW9uJyAmJiAoQyA9PT0gQXJyYXkgfHwgaXNBcnJheShDLnByb3RvdHlwZSkpKSBDID0gdW5kZWZpbmVkO1xuICAgIGVsc2UgaWYgKGlzT2JqZWN0KEMpKSB7XG4gICAgICBDID0gQ1tTUEVDSUVTXTtcbiAgICAgIGlmIChDID09PSBudWxsKSBDID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSByZXR1cm4gbmV3IChDID09PSB1bmRlZmluZWQgPyBBcnJheSA6IEMpKGxlbmd0aCA9PT0gMCA/IDAgOiBsZW5ndGgpO1xufTtcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBzZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qtc2V0LXByb3RvdHlwZS1vZicpO1xuXG4vLyBtYWtlcyBzdWJjbGFzc2luZyB3b3JrIGNvcnJlY3QgZm9yIHdyYXBwZWQgYnVpbHQtaW5zXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkdGhpcywgZHVtbXksIFdyYXBwZXIpIHtcbiAgdmFyIE5ld1RhcmdldCwgTmV3VGFyZ2V0UHJvdG90eXBlO1xuICBpZiAoXG4gICAgLy8gaXQgY2FuIHdvcmsgb25seSB3aXRoIG5hdGl2ZSBgc2V0UHJvdG90eXBlT2ZgXG4gICAgc2V0UHJvdG90eXBlT2YgJiZcbiAgICAvLyB3ZSBoYXZlbid0IGNvbXBsZXRlbHkgY29ycmVjdCBwcmUtRVM2IHdheSBmb3IgZ2V0dGluZyBgbmV3LnRhcmdldGAsIHNvIHVzZSB0aGlzXG4gICAgdHlwZW9mIChOZXdUYXJnZXQgPSBkdW1teS5jb25zdHJ1Y3RvcikgPT0gJ2Z1bmN0aW9uJyAmJlxuICAgIE5ld1RhcmdldCAhPT0gV3JhcHBlciAmJlxuICAgIGlzT2JqZWN0KE5ld1RhcmdldFByb3RvdHlwZSA9IE5ld1RhcmdldC5wcm90b3R5cGUpICYmXG4gICAgTmV3VGFyZ2V0UHJvdG90eXBlICE9PSBXcmFwcGVyLnByb3RvdHlwZVxuICApIHNldFByb3RvdHlwZU9mKCR0aGlzLCBOZXdUYXJnZXRQcm90b3R5cGUpO1xuICByZXR1cm4gJHRoaXM7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLW9iamVjdCcpO1xudmFyIHRvQWJzb2x1dGVJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1hYnNvbHV0ZS1pbmRleCcpO1xudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWxlbmd0aCcpO1xuXG52YXIgbWluID0gTWF0aC5taW47XG5cbi8vIGBBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbmAgbWV0aG9kIGltcGxlbWVudGF0aW9uXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuY29weXdpdGhpblxubW9kdWxlLmV4cG9ydHMgPSBbXS5jb3B5V2l0aGluIHx8IGZ1bmN0aW9uIGNvcHlXaXRoaW4odGFyZ2V0IC8qID0gMCAqLywgc3RhcnQgLyogPSAwLCBlbmQgPSBAbGVuZ3RoICovKSB7XG4gIHZhciBPID0gdG9PYmplY3QodGhpcyk7XG4gIHZhciBsZW4gPSB0b0xlbmd0aChPLmxlbmd0aCk7XG4gIHZhciB0byA9IHRvQWJzb2x1dGVJbmRleCh0YXJnZXQsIGxlbik7XG4gIHZhciBmcm9tID0gdG9BYnNvbHV0ZUluZGV4KHN0YXJ0LCBsZW4pO1xuICB2YXIgZW5kID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7XG4gIHZhciBjb3VudCA9IG1pbigoZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB0b0Fic29sdXRlSW5kZXgoZW5kLCBsZW4pKSAtIGZyb20sIGxlbiAtIHRvKTtcbiAgdmFyIGluYyA9IDE7XG4gIGlmIChmcm9tIDwgdG8gJiYgdG8gPCBmcm9tICsgY291bnQpIHtcbiAgICBpbmMgPSAtMTtcbiAgICBmcm9tICs9IGNvdW50IC0gMTtcbiAgICB0byArPSBjb3VudCAtIDE7XG4gIH1cbiAgd2hpbGUgKGNvdW50LS0gPiAwKSB7XG4gICAgaWYgKGZyb20gaW4gTykgT1t0b10gPSBPW2Zyb21dO1xuICAgIGVsc2UgZGVsZXRlIE9bdG9dO1xuICAgIHRvICs9IGluYztcbiAgICBmcm9tICs9IGluYztcbiAgfSByZXR1cm4gTztcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWludGVnZXInKTtcbnZhciB0b0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1sZW5ndGgnKTtcbnZhciBhcnJheU1ldGhvZElzU3RyaWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LW1ldGhvZC1pcy1zdHJpY3QnKTtcbnZhciBhcnJheU1ldGhvZFVzZXNUb0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1tZXRob2QtdXNlcy10by1sZW5ndGgnKTtcblxudmFyIG1pbiA9IE1hdGgubWluO1xudmFyIG5hdGl2ZUxhc3RJbmRleE9mID0gW10ubGFzdEluZGV4T2Y7XG52YXIgTkVHQVRJVkVfWkVSTyA9ICEhbmF0aXZlTGFzdEluZGV4T2YgJiYgMSAvIFsxXS5sYXN0SW5kZXhPZigxLCAtMCkgPCAwO1xudmFyIFNUUklDVF9NRVRIT0QgPSBhcnJheU1ldGhvZElzU3RyaWN0KCdsYXN0SW5kZXhPZicpO1xuLy8gRm9yIHByZXZlbnRpbmcgcG9zc2libGUgYWxtb3N0IGluZmluaXRlIGxvb3AgaW4gbm9uLXN0YW5kYXJkIGltcGxlbWVudGF0aW9ucywgdGVzdCB0aGUgZm9yd2FyZCB2ZXJzaW9uIG9mIHRoZSBtZXRob2RcbnZhciBVU0VTX1RPX0xFTkdUSCA9IGFycmF5TWV0aG9kVXNlc1RvTGVuZ3RoKCdpbmRleE9mJywgeyBBQ0NFU1NPUlM6IHRydWUsIDE6IDAgfSk7XG52YXIgRk9SQ0VEID0gTkVHQVRJVkVfWkVSTyB8fCAhU1RSSUNUX01FVEhPRCB8fCAhVVNFU19UT19MRU5HVEg7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2ZgIG1ldGhvZCBpbXBsZW1lbnRhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmxhc3RpbmRleG9mXG5tb2R1bGUuZXhwb3J0cyA9IEZPUkNFRCA/IGZ1bmN0aW9uIGxhc3RJbmRleE9mKHNlYXJjaEVsZW1lbnQgLyogLCBmcm9tSW5kZXggPSBAWyotMV0gKi8pIHtcbiAgLy8gY29udmVydCAtMCB0byArMFxuICBpZiAoTkVHQVRJVkVfWkVSTykgcmV0dXJuIG5hdGl2ZUxhc3RJbmRleE9mLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgMDtcbiAgdmFyIE8gPSB0b0luZGV4ZWRPYmplY3QodGhpcyk7XG4gIHZhciBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7XG4gIHZhciBpbmRleCA9IGxlbmd0aCAtIDE7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgaW5kZXggPSBtaW4oaW5kZXgsIHRvSW50ZWdlcihhcmd1bWVudHNbMV0pKTtcbiAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSBsZW5ndGggKyBpbmRleDtcbiAgZm9yICg7aW5kZXggPj0gMDsgaW5kZXgtLSkgaWYgKGluZGV4IGluIE8gJiYgT1tpbmRleF0gPT09IHNlYXJjaEVsZW1lbnQpIHJldHVybiBpbmRleCB8fCAwO1xuICByZXR1cm4gLTE7XG59IDogbmF0aXZlTGFzdEluZGV4T2Y7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTUVUSE9EX05BTUUsIGFyZ3VtZW50KSB7XG4gIHZhciBtZXRob2QgPSBbXVtNRVRIT0RfTkFNRV07XG4gIHJldHVybiAhIW1ldGhvZCAmJiBmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY2FsbCxuby10aHJvdy1saXRlcmFsXG4gICAgbWV0aG9kLmNhbGwobnVsbCwgYXJndW1lbnQgfHwgZnVuY3Rpb24gKCkgeyB0aHJvdyAxOyB9LCAxKTtcbiAgfSk7XG59O1xuIiwiLyogY2hubCB2MS4xLjAgYnkgVml0YWxpeSBQb3RhcG92IEBwcmVzZXJ2ZSAqL1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX3R5cGVvZihlKXtyZXR1cm4oX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgaT10W25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLmtleSxpKX19ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKGUsdCxuKXtyZXR1cm4gdCYmX2RlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksbiYmX2RlZmluZVByb3BlcnRpZXMoZSxuKSxlfWZ1bmN0aW9uIF9pbmhlcml0cyhlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmX3NldFByb3RvdHlwZU9mKGUsdCl9ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKGUpe3JldHVybihfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihlLHQpe3JldHVybihfc2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9KShlLHQpfWZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9dHlwZW9mIHQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/X2Fzc2VydFRoaXNJbml0aWFsaXplZChlKTp0fXZhciBDaGFubmVsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KSx0aGlzLl9saXN0ZW5lcnM9W10sdGhpcy5fbXV0ZT0hMSx0aGlzLl9hY2N1bXVsYXRlPSExLHRoaXMuX2FjY3VtdWxhdGVkRXZlbnRzPVtdLHRoaXMuX25hbWU9ZXx8XCJcIix0aGlzLl9vbkxpc3RlbmVyQWRkZWQ9bnVsbCx0aGlzLl9vbkZpcnN0TGlzdGVuZXJBZGRlZD1udWxsLHRoaXMuX29uTGlzdGVuZXJSZW1vdmVkPW51bGwsdGhpcy5fb25MYXN0TGlzdGVuZXJSZW1vdmVkPW51bGx9cmV0dXJuIF9jcmVhdGVDbGFzcyh0LFt7a2V5OlwiYWRkTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3B1c2hMaXN0ZW5lcihlLHQsITEpfX0se2tleTpcImFkZE9uY2VMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fcHVzaExpc3RlbmVyKGUsdCwhMCl9fSx7a2V5OlwicmVtb3ZlTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX2Vuc3VyZUZ1bmN0aW9uKGUpO3ZhciBuPXRoaXMuX2luZGV4T2ZMaXN0ZW5lcihlLHQpOzA8PW4mJnRoaXMuX3NwbGljZUxpc3RlbmVyKG4pfX0se2tleTpcInJlbW92ZUFsbExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKDt0aGlzLmhhc0xpc3RlbmVycygpOyl0aGlzLl9zcGxpY2VMaXN0ZW5lcigwKX19LHtrZXk6XCJoYXNMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2Vuc3VyZUZ1bmN0aW9uKGUpLDA8PXRoaXMuX2luZGV4T2ZMaXN0ZW5lcihlLHQpfX0se2tleTpcImhhc0xpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5fbGlzdGVuZXJzLmxlbmd0aH19LHtrZXk6XCJkaXNwYXRjaFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSksbj0wO248ZTtuKyspdFtuXT1hcmd1bWVudHNbbl07dGhpcy5faW52b2tlTGlzdGVuZXJzKHthcmdzOnQsYXN5bmM6ITF9KX19LHtrZXk6XCJkaXNwYXRjaEFzeW5jXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxuPTA7bjxlO24rKyl0W25dPWFyZ3VtZW50c1tuXTt0aGlzLl9pbnZva2VMaXN0ZW5lcnMoe2FyZ3M6dCxhc3luYzohMH0pfX0se2tleTpcIm11dGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWU/ZTp7fTt0aGlzLl9tdXRlPSEwLHQuYWNjdW11bGF0ZT90aGlzLl9hY2N1bXVsYXRlPSEwOih0aGlzLl9hY2N1bXVsYXRlPSExLHRoaXMuX2FjY3VtdWxhdGVkRXZlbnRzPVtdKX19LHtrZXk6XCJ1bm11dGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX211dGU9ITEsdGhpcy5fYWNjdW11bGF0ZSYmKHRoaXMuX2Rpc3BhdGNoQWNjdW11bGF0ZWQoKSx0aGlzLl9hY2N1bXVsYXRlPSExKX19LHtrZXk6XCJfaW52b2tlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZT9lOnthcmdzOltdLGFzeW5jOiExfTt0aGlzLl9tdXRlP3RoaXMuX2FjY3VtdWxhdGUmJnRoaXMuX2FjY3VtdWxhdGVkRXZlbnRzLnB1c2gobik6dGhpcy5fbGlzdGVuZXJzLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9pbnZva2VMaXN0ZW5lcihlLG4pLGUub25jZSYmdC5yZW1vdmVMaXN0ZW5lcihlLmNhbGxiYWNrLGUuY29udGV4dCl9KX19LHtrZXk6XCJfaW52b2tlTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3QuYXN5bmM/c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBlLmNhbGxiYWNrLmFwcGx5KGUuY29udGV4dCx0LmFyZ3MpfSwwKTplLmNhbGxiYWNrLmFwcGx5KGUuY29udGV4dCx0LmFyZ3MpfX0se2tleTpcIl9lbnN1cmVGdW5jdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKFwiQ2hhbm5lbCBcIit0aGlzLl9uYW1lK1wiOiBsaXN0ZW5lciBpcyBub3QgYSBmdW5jdGlvblwiKX19LHtrZXk6XCJfZGlzcGF0Y2hJbm5lckFkZEV2ZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLl9vbkxpc3RlbmVyQWRkZWQmJihlPXRoaXMuX29uTGlzdGVuZXJBZGRlZCkuZGlzcGF0Y2guYXBwbHkoZSxhcmd1bWVudHMpO3RoaXMuX29uRmlyc3RMaXN0ZW5lckFkZGVkJiYxPT09dGhpcy5fbGlzdGVuZXJzLmxlbmd0aCYmKHQ9dGhpcy5fb25GaXJzdExpc3RlbmVyQWRkZWQpLmRpc3BhdGNoLmFwcGx5KHQsYXJndW1lbnRzKX19LHtrZXk6XCJfZGlzcGF0Y2hJbm5lclJlbW92ZUV2ZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLl9vbkxpc3RlbmVyUmVtb3ZlZCYmKGU9dGhpcy5fb25MaXN0ZW5lclJlbW92ZWQpLmRpc3BhdGNoLmFwcGx5KGUsYXJndW1lbnRzKTt0aGlzLl9vbkxhc3RMaXN0ZW5lclJlbW92ZWQmJjA9PT10aGlzLl9saXN0ZW5lcnMubGVuZ3RoJiYodD10aGlzLl9vbkxhc3RMaXN0ZW5lclJlbW92ZWQpLmRpc3BhdGNoLmFwcGx5KHQsYXJndW1lbnRzKX19LHtrZXk6XCJfaW5kZXhPZkxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7bisrKXt2YXIgaT10aGlzLl9saXN0ZW5lcnNbbl0scz1pLmNhbGxiYWNrPT09ZSxyPXZvaWQgMD09PXQmJnZvaWQgMD09PWkuY29udGV4dCxvPXQ9PT1pLmNvbnRleHQ7aWYocyYmKHJ8fG8pKXJldHVybiBufX19LHtrZXk6XCJfZGlzcGF0Y2hBY2N1bXVsYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9hY2N1bXVsYXRlZEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9pbnZva2VMaXN0ZW5lcnMoZSl9KSx0aGlzLl9hY2N1bXVsYXRlZEV2ZW50cz1bXX19LHtrZXk6XCJfcHVzaExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX2Vuc3VyZUZ1bmN0aW9uKGUpLHRoaXMuX2xpc3RlbmVycy5wdXNoKHtjYWxsYmFjazplLGNvbnRleHQ6dCxvbmNlOm59KSx0aGlzLl9kaXNwYXRjaElubmVyQWRkRXZlbnRzKGUsdCxuKX19LHtrZXk6XCJfc3BsaWNlTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9saXN0ZW5lcnNbZV0sbj10LmNhbGxiYWNrLGk9dC5jb250ZXh0LHM9dC5vbmNlO3RoaXMuX2xpc3RlbmVycy5zcGxpY2UoZSwxKSx0aGlzLl9kaXNwYXRjaElubmVyUmVtb3ZlRXZlbnRzKG4saSxzKX19LHtrZXk6XCJvbkxpc3RlbmVyQWRkZWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25MaXN0ZW5lckFkZGVkfHwodGhpcy5fb25MaXN0ZW5lckFkZGVkPW5ldyB0KFwiXCIuY29uY2F0KHRoaXMuX25hbWUsXCI6b25MaXN0ZW5lckFkZGVkXCIpKSksdGhpcy5fb25MaXN0ZW5lckFkZGVkfX0se2tleTpcIm9uRmlyc3RMaXN0ZW5lckFkZGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRmlyc3RMaXN0ZW5lckFkZGVkfHwodGhpcy5fb25GaXJzdExpc3RlbmVyQWRkZWQ9bmV3IHQoXCJcIi5jb25jYXQodGhpcy5fbmFtZSxcIjpvbkZpcnN0TGlzdGVuZXJBZGRlZFwiKSkpLHRoaXMuX29uRmlyc3RMaXN0ZW5lckFkZGVkfX0se2tleTpcIm9uTGlzdGVuZXJSZW1vdmVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uTGlzdGVuZXJSZW1vdmVkfHwodGhpcy5fb25MaXN0ZW5lclJlbW92ZWQ9bmV3IHQoXCJcIi5jb25jYXQodGhpcy5fbmFtZSxcIjpvbkxpc3RlbmVyUmVtb3ZlZFwiKSkpLHRoaXMuX29uTGlzdGVuZXJSZW1vdmVkfX0se2tleTpcIm9uTGFzdExpc3RlbmVyUmVtb3ZlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkxhc3RMaXN0ZW5lclJlbW92ZWR8fCh0aGlzLl9vbkxhc3RMaXN0ZW5lclJlbW92ZWQ9bmV3IHQoXCJcIi5jb25jYXQodGhpcy5fbmFtZSxcIjpvbkxhc3RMaXN0ZW5lclJlbW92ZWRcIikpKSx0aGlzLl9vbkxhc3RMaXN0ZW5lclJlbW92ZWR9fV0pLHR9KCksRXZlbnRFbWl0dGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe19jbGFzc0NhbGxDaGVjayh0aGlzLGUpLHRoaXMuX2NoYW5uZWxzPW5ldyBNYXB9cmV0dXJuIF9jcmVhdGVDbGFzcyhlLFt7a2V5OlwiYWRkTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dGhpcy5fZ2V0Q2hhbm5lbChlKS5hZGRMaXN0ZW5lcih0LG4pfX0se2tleTpcIm9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuYWRkTGlzdGVuZXIoZSx0LG4pfX0se2tleTpcImFkZE9uY2VMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9nZXRDaGFubmVsKGUpLmFkZE9uY2VMaXN0ZW5lcih0LG4pfX0se2tleTpcIm9uY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dGhpcy5hZGRPbmNlTGlzdGVuZXIoZSx0LG4pfX0se2tleTpcInJlbW92ZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX2dldENoYW5uZWwoZSkucmVtb3ZlTGlzdGVuZXIodCxuKX19LHtrZXk6XCJvZmZcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dGhpcy5yZW1vdmVMaXN0ZW5lcihlLHQsbil9fSx7a2V5OlwiaGFzTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2dldENoYW5uZWwoZSkuaGFzTGlzdGVuZXIodCxuKX19LHtrZXk6XCJoYXNcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuaGFzTGlzdGVuZXIoZSx0LG4pfX0se2tleTpcImhhc0xpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9nZXRDaGFubmVsKGUpLmhhc0xpc3RlbmVycygpfX0se2tleTpcImRpc3BhdGNoXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49YXJndW1lbnRzLmxlbmd0aCxpPW5ldyBBcnJheSgxPG4/bi0xOjApLHM9MTtzPG47cysrKWlbcy0xXT1hcmd1bWVudHNbc107KHQ9dGhpcy5fZ2V0Q2hhbm5lbChlKSkuZGlzcGF0Y2guYXBwbHkodCxpKX19LHtrZXk6XCJlbWl0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkoMTx0P3QtMTowKSxpPTE7aTx0O2krKyluW2ktMV09YXJndW1lbnRzW2ldO3RoaXMuZGlzcGF0Y2guYXBwbHkodGhpcyxbZV0uY29uY2F0KG4pKX19LHtrZXk6XCJfZ2V0Q2hhbm5lbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jaGFubmVscy5oYXMoZSl8fHRoaXMuX2NoYW5uZWxzLnNldChlLG5ldyBDaGFubmVsKGUpKSx0aGlzLl9jaGFubmVscy5nZXQoZSl9fV0pLGV9KCksU3Vic2NyaXB0aW9uSXRlbT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7X2NsYXNzQ2FsbENoZWNrKHRoaXMsdCksdGhpcy5fcGFyYW1zPWUsdGhpcy5faXNPbj0hMSx0aGlzLl9hc3NlcnRQYXJhbXMoKX1yZXR1cm4gX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJvblwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2lzT24pe3ZhciBlPXRoaXMuX3BhcmFtcy5jaGFubmVsLHQ9ZS5hZGRMaXN0ZW5lcnx8ZS5hZGRFdmVudExpc3RlbmVyfHxlLm9uO3RoaXMuX2FwcGx5TWV0aG9kKHQpLHRoaXMuX2lzT249ITB9fX0se2tleTpcIm9mZlwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5faXNPbil7dmFyIGU9dGhpcy5fcGFyYW1zLmNoYW5uZWwsdD1lLnJlbW92ZUxpc3RlbmVyfHxlLnJlbW92ZUV2ZW50TGlzdGVuZXJ8fGUub2ZmO3RoaXMuX2FwcGx5TWV0aG9kKHQpLHRoaXMuX2lzT249ITF9fX0se2tleTpcIl9hcHBseU1ldGhvZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3BhcmFtcyxuPXQuY2hhbm5lbCxpPXQuZXZlbnQscz10Lmxpc3RlbmVyLHI9aT9baSxzXTpbc107ZS5hcHBseShuLHIpfX0se2tleTpcIl9hc3NlcnRQYXJhbXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3BhcmFtcyx0PWUuY2hhbm5lbCxuPWUuZXZlbnQsaT1lLmxpc3RlbmVyO2lmKCF0fHxcIm9iamVjdFwiIT09X3R5cGVvZih0KSl0aHJvdyBuZXcgRXJyb3IoXCJDaGFubmVsIHNob3VsZCBiZSBvYmplY3RcIik7aWYobiYmXCJzdHJpbmdcIiE9dHlwZW9mIG4pdGhyb3cgbmV3IEVycm9yKFwiRXZlbnQgc2hvdWxkIGJlIHN0cmluZ1wiKTtpZighaXx8XCJmdW5jdGlvblwiIT10eXBlb2YgaSl0aHJvdyBuZXcgRXJyb3IoXCJMaXN0ZW5lciBzaG91bGQgYmUgZnVuY3Rpb25cIil9fV0pLHR9KCksU3Vic2NyaXB0aW9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KSx0aGlzLl9pdGVtcz1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFN1YnNjcmlwdGlvbkl0ZW0oZSl9KX1yZXR1cm4gX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1zLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGUub24oKX0pLHRoaXN9fSx7a2V5Olwib2ZmXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbXMuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZS5vZmYoKX0pLHRoaXN9fV0pLHR9KCksUmVhY3RTdWJzY3JpcHRpb249ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKGUsdCl7dmFyIG47cmV0dXJuIF9jbGFzc0NhbGxDaGVjayh0aGlzLGkpLChuPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsX2dldFByb3RvdHlwZU9mKGkpLmNhbGwodGhpcyx0KSkpLl9vdmVycmlkZUNvbXBvbmVudENhbGxiYWNrKGUsXCJjb21wb25lbnREaWRNb3VudFwiLFwib25cIiksbi5fb3ZlcnJpZGVDb21wb25lbnRDYWxsYmFjayhlLFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcIm9mZlwiKSxufXJldHVybiBfaW5oZXJpdHMoaSxTdWJzY3JpcHRpb24pLF9jcmVhdGVDbGFzcyhpLFt7a2V5OlwiX292ZXJyaWRlQ29tcG9uZW50Q2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbihpLGUscyl7dmFyIHI9dGhpcyxvPWlbZV07aVtlXT1mdW5jdGlvbigpe2lmKHJbc10oKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBvKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxuPTA7bjxlO24rKyl0W25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gby5hcHBseShpLHQpfX19fV0pLGl9KCksY2hubD1DaGFubmVsO2NobmwuRXZlbnRFbWl0dGVyPUV2ZW50RW1pdHRlcixjaG5sLlN1YnNjcmlwdGlvbj1TdWJzY3JpcHRpb24sY2hubC5SZWFjdFN1YnNjcmlwdGlvbj1SZWFjdFN1YnNjcmlwdGlvbixtb2R1bGUuZXhwb3J0cz1jaG5sO1xuIiwiLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFt0aW1lb3V0PTBdIC0gVGltZW91dCBpbiBtcyBhZnRlciB0aGF0IHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCBhdXRvbWF0aWNhbGx5LlxuICogQHByb3BlcnR5IHtTdHJpbmd8RnVuY3Rpb259IFt0aW1lb3V0UmVhc29uXSAtIFJlamVjdGlvbiByZWFzb24gZm9yIHRpbWVvdXQuXG4gKiBQcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB7QGxpbmsgUHJvbWlzZUNvbnRyb2xsZXIuVGltZW91dEVycm9yfSBhbmQgdGhpcyBtZXNzYWdlLiBUaGUgbWVzc2FnZSBjYW4gY29udGFpblxuICogcGxhY2Vob2xkZXIgYHt0aW1lb3V0fWAgZm9yIGFjdHVhbCB0aW1lb3V0IHZhbHVlLiBJZiB0aW1lb3V0UmVhc29uIGlzIGEgZnVuY3Rpb24sXG4gKiBpdCB3aWxsIGJlIGV2YWx1YXRlZCBhbmQgcmV0dXJuZWQgdmFsdWUgd2lsbCBiZSB1c2VkIGFzIG1lc3NhZ2UuXG4gKiBAcHJvcGVydHkge1N0cmluZ3xGdW5jdGlvbn0gW3Jlc2V0UmVhc29uXSAtIFJlamVjdGlvbiByZWFzb24gdXNlZCB3aGVuIGAucmVzZXQoKWAgaXMgY2FsbGVkIHdoaWxlIHByb21pc2UgaXMgcGVuZGluZy5cbiAqIFByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHtAbGluayBQcm9taXNlQ29udHJvbGxlci5SZXNldEVycm9yfSBhbmQgdGhpcyBtZXNzYWdlLiBJZiByZXNldFJlYXNvbiBpcyBhIGZ1bmN0aW9uLFxuICogaXQgd2lsbCBiZSBldmFsdWF0ZWQgYW5kIHJldHVybmVkIHZhbHVlIHdpbGwgYmUgdXNlZCBhcyBtZXNzYWdlLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB0aW1lb3V0OiAwLFxuICB0aW1lb3V0UmVhc29uOiAnUHJvbWlzZSByZWplY3RlZCBieSBQcm9taXNlQ29udHJvbGxlciB0aW1lb3V0IHt0aW1lb3V0fSBtcy4nLFxuICByZXNldFJlYXNvbjogJ1Byb21pc2UgcmVqZWN0ZWQgYnkgUHJvbWlzZUNvbnRyb2xsZXIgcmVzZXQuJyxcbn07XG4iLCJcbi8qKlxuICogU2ltcGxlIGNoZWNrIGZvciBQcm9taXNlLlxuICogQHBhcmFtIHsqfSBwXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqIEBpZ25vcmVcbiAqL1xuZXhwb3J0cy5pc1Byb21pc2UgPSBmdW5jdGlvbiAocCkge1xuICByZXR1cm4gcCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nO1xufTtcblxuLyoqXG4gKiBDYWxscyBhcmd1bWVudCBpZiBpdCBpcyBmdW5jdGlvblxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybnMgeyp9XG4gKiBAaWdub3JlXG4gKi9cbmV4cG9ydHMudHJ5Q2FsbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID8gdmFsdWUoKSA6IHZhbHVlO1xufTtcblxuLyoqXG4gKiBKdXN0IGBjbGFzcyBNeUVycm9yIGV4dGVuZHMgRXJyb3JgIGRvZXMgbm90IHdvcmsgd2l0aCB0cmFuc3BpbGVyLlxuICogU2VlOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMzgyMTA3L3doYXRzLWEtZ29vZC13YXktdG8tZXh0ZW5kLWVycm9yLWluLWphdmFzY3JpcHRcbiAqIEBpZ25vcmVcbiAqL1xuZXhwb3J0cy5jcmVhdGVFcnJvclR5cGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICBmdW5jdGlvbiBFKG1lc3NhZ2UpIHtcbiAgICBpZiAoIUVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICB0aGlzLnN0YWNrID0gKG5ldyBFcnJvcigpKS5zdGFjaztcbiAgICB9IGVsc2Uge1xuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIH1cbiAgRS5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTtcbiAgRS5wcm90b3R5cGUubmFtZSA9IG5hbWU7XG4gIEUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRTtcbiAgcmV0dXJuIEU7XG59O1xuIiwiLyoqXG4gKiBDbGFzcyBmb3IgbWFuYWdlIHBlbmRpbmcgcmVxdWVzdHMuXG4gKiBAcHJpdmF0ZVxuICovXG5cbmNvbnN0IFByb21pc2VDb250cm9sbGVyID0gcmVxdWlyZSgncHJvbWlzZS1jb250cm9sbGVyJyk7XG5jb25zdCBwcm9taXNlRmluYWxseSA9IHJlcXVpcmUoJ3Byb21pc2UucHJvdG90eXBlLmZpbmFsbHknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBSZXF1ZXN0cyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2l0ZW1zID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbmV3IHJlcXVlc3QgYW5kIHN0b3JlcyBpdCBpbiB0aGUgbGlzdC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXRcbiAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAqL1xuICBjcmVhdGUocmVxdWVzdElkLCBmbiwgdGltZW91dCkge1xuICAgIHRoaXMuX3JlamVjdEV4aXN0aW5nUmVxdWVzdChyZXF1ZXN0SWQpO1xuICAgIHJldHVybiB0aGlzLl9jcmVhdGVOZXdSZXF1ZXN0KHJlcXVlc3RJZCwgZm4sIHRpbWVvdXQpO1xuICB9XG5cbiAgcmVzb2x2ZShyZXF1ZXN0SWQsIGRhdGEpIHtcbiAgICBpZiAocmVxdWVzdElkICYmIHRoaXMuX2l0ZW1zLmhhcyhyZXF1ZXN0SWQpKSB7XG4gICAgICB0aGlzLl9pdGVtcy5nZXQocmVxdWVzdElkKS5yZXNvbHZlKGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIHJlamVjdEFsbChlcnJvcikge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2gocmVxdWVzdCA9PiByZXF1ZXN0LmlzUGVuZGluZyA/IHJlcXVlc3QucmVqZWN0KGVycm9yKSA6IG51bGwpO1xuICB9XG5cbiAgX3JlamVjdEV4aXN0aW5nUmVxdWVzdChyZXF1ZXN0SWQpIHtcbiAgICBjb25zdCBleGlzdGluZ1JlcXVlc3QgPSB0aGlzLl9pdGVtcy5nZXQocmVxdWVzdElkKTtcbiAgICBpZiAoZXhpc3RpbmdSZXF1ZXN0ICYmIGV4aXN0aW5nUmVxdWVzdC5pc1BlbmRpbmcpIHtcbiAgICAgIGV4aXN0aW5nUmVxdWVzdC5yZWplY3QobmV3IEVycm9yKGBXZWJTb2NrZXQgcmVxdWVzdCBpcyByZXBsYWNlZCwgaWQ6ICR7cmVxdWVzdElkfWApKTtcbiAgICB9XG4gIH1cblxuICBfY3JlYXRlTmV3UmVxdWVzdChyZXF1ZXN0SWQsIGZuLCB0aW1lb3V0KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBQcm9taXNlQ29udHJvbGxlcih7XG4gICAgICB0aW1lb3V0LFxuICAgICAgdGltZW91dFJlYXNvbjogYFdlYlNvY2tldCByZXF1ZXN0IHdhcyByZWplY3RlZCBieSB0aW1lb3V0ICgke3RpbWVvdXR9IG1zKS4gUmVxdWVzdElkOiAke3JlcXVlc3RJZH1gXG4gICAgfSk7XG4gICAgdGhpcy5faXRlbXMuc2V0KHJlcXVlc3RJZCwgcmVxdWVzdCk7XG4gICAgcmV0dXJuIHByb21pc2VGaW5hbGx5KHJlcXVlc3QuY2FsbChmbiksICgpID0+IHRoaXMuX2RlbGV0ZVJlcXVlc3QocmVxdWVzdElkLCByZXF1ZXN0KSk7XG4gIH1cblxuICBfZGVsZXRlUmVxdWVzdChyZXF1ZXN0SWQsIHJlcXVlc3QpIHtcbiAgICAvLyB0aGlzIGNoZWNrIGlzIGltcG9ydGFudCB3aGVuIHJlcXVlc3Qgd2FzIHJlcGxhY2VkXG4gICAgaWYgKHRoaXMuX2l0ZW1zLmdldChyZXF1ZXN0SWQpID09PSByZXF1ZXN0KSB7XG4gICAgICB0aGlzLl9pdGVtcy5kZWxldGUocmVxdWVzdElkKTtcbiAgICB9XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnZnVuY3Rpb24tYmluZCcpO1xudmFyIGRlZmluZSA9IHJlcXVpcmUoJ2RlZmluZS1wcm9wZXJ0aWVzJyk7XG5cbnZhciBpbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUoJy4vaW1wbGVtZW50YXRpb24nKTtcbnZhciBnZXRQb2x5ZmlsbCA9IHJlcXVpcmUoJy4vcG9seWZpbGwnKTtcbnZhciBzaGltID0gcmVxdWlyZSgnLi9zaGltJyk7XG5cbnZhciBib3VuZCA9IGJpbmQuY2FsbChGdW5jdGlvbi5jYWxsLCBnZXRQb2x5ZmlsbCgpKTtcblxuZGVmaW5lKGJvdW5kLCB7XG5cdGdldFBvbHlmaWxsOiBnZXRQb2x5ZmlsbCxcblx0aW1wbGVtZW50YXRpb246IGltcGxlbWVudGF0aW9uLFxuXHRzaGltOiBzaGltXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBib3VuZDtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyogZXNsaW50IG5vLWludmFsaWQtdGhpczogMSAqL1xuXG52YXIgRVJST1JfTUVTU0FHRSA9ICdGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBjYWxsZWQgb24gaW5jb21wYXRpYmxlICc7XG52YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG52YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIGZ1bmNUeXBlID0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKHRoYXQpIHtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcztcbiAgICBpZiAodHlwZW9mIHRhcmdldCAhPT0gJ2Z1bmN0aW9uJyB8fCB0b1N0ci5jYWxsKHRhcmdldCkgIT09IGZ1bmNUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRVJST1JfTUVTU0FHRSArIHRhcmdldCk7XG4gICAgfVxuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gICAgdmFyIGJvdW5kO1xuICAgIHZhciBiaW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgYm91bmQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0YXJnZXQuYXBwbHkoXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKE9iamVjdChyZXN1bHQpID09PSByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0LmFwcGx5KFxuICAgICAgICAgICAgICAgIHRoYXQsXG4gICAgICAgICAgICAgICAgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgYm91bmRMZW5ndGggPSBNYXRoLm1heCgwLCB0YXJnZXQubGVuZ3RoIC0gYXJncy5sZW5ndGgpO1xuICAgIHZhciBib3VuZEFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvdW5kTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYm91bmRBcmdzLnB1c2goJyQnICsgaSk7XG4gICAgfVxuXG4gICAgYm91bmQgPSBGdW5jdGlvbignYmluZGVyJywgJ3JldHVybiBmdW5jdGlvbiAoJyArIGJvdW5kQXJncy5qb2luKCcsJykgKyAnKXsgcmV0dXJuIGJpbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7IH0nKShiaW5kZXIpO1xuXG4gICAgaWYgKHRhcmdldC5wcm90b3R5cGUpIHtcbiAgICAgICAgdmFyIEVtcHR5ID0gZnVuY3Rpb24gRW1wdHkoKSB7fTtcbiAgICAgICAgRW1wdHkucHJvdG90eXBlID0gdGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgYm91bmQucHJvdG90eXBlID0gbmV3IEVtcHR5KCk7XG4gICAgICAgIEVtcHR5LnByb3RvdHlwZSA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvdW5kO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGlzQXJncyA9IHJlcXVpcmUoJy4vaXNBcmd1bWVudHMnKTtcblxudmFyIG9yaWdLZXlzID0gT2JqZWN0LmtleXM7XG52YXIga2V5c1NoaW0gPSBvcmlnS2V5cyA/IGZ1bmN0aW9uIGtleXMobykgeyByZXR1cm4gb3JpZ0tleXMobyk7IH0gOiByZXF1aXJlKCcuL2ltcGxlbWVudGF0aW9uJyk7XG5cbnZhciBvcmlnaW5hbEtleXMgPSBPYmplY3Qua2V5cztcblxua2V5c1NoaW0uc2hpbSA9IGZ1bmN0aW9uIHNoaW1PYmplY3RLZXlzKCkge1xuXHRpZiAoT2JqZWN0LmtleXMpIHtcblx0XHR2YXIga2V5c1dvcmtzV2l0aEFyZ3VtZW50cyA9IChmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyBTYWZhcmkgNS4wIGJ1Z1xuXHRcdFx0dmFyIGFyZ3MgPSBPYmplY3Qua2V5cyhhcmd1bWVudHMpO1xuXHRcdFx0cmV0dXJuIGFyZ3MgJiYgYXJncy5sZW5ndGggPT09IGFyZ3VtZW50cy5sZW5ndGg7XG5cdFx0fSgxLCAyKSk7XG5cdFx0aWYgKCFrZXlzV29ya3NXaXRoQXJndW1lbnRzKSB7XG5cdFx0XHRPYmplY3Qua2V5cyA9IGZ1bmN0aW9uIGtleXMob2JqZWN0KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuYy1uYW1lLW1hdGNoaW5nXG5cdFx0XHRcdGlmIChpc0FyZ3Mob2JqZWN0KSkge1xuXHRcdFx0XHRcdHJldHVybiBvcmlnaW5hbEtleXMoc2xpY2UuY2FsbChvYmplY3QpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gb3JpZ2luYWxLZXlzKG9iamVjdCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRPYmplY3Qua2V5cyA9IGtleXNTaGltO1xuXHR9XG5cdHJldHVybiBPYmplY3Qua2V5cyB8fCBrZXlzU2hpbTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5c1NoaW07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBrZXlzU2hpbTtcbmlmICghT2JqZWN0LmtleXMpIHtcblx0Ly8gbW9kaWZpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZXMtc2hpbXMvZXM1LXNoaW1cblx0dmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdHZhciB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdHZhciBpc0FyZ3MgPSByZXF1aXJlKCcuL2lzQXJndW1lbnRzJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZ2xvYmFsLXJlcXVpcmVcblx0dmFyIGlzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5cdHZhciBoYXNEb250RW51bUJ1ZyA9ICFpc0VudW1lcmFibGUuY2FsbCh7IHRvU3RyaW5nOiBudWxsIH0sICd0b1N0cmluZycpO1xuXHR2YXIgaGFzUHJvdG9FbnVtQnVnID0gaXNFbnVtZXJhYmxlLmNhbGwoZnVuY3Rpb24gKCkge30sICdwcm90b3R5cGUnKTtcblx0dmFyIGRvbnRFbnVtcyA9IFtcblx0XHQndG9TdHJpbmcnLFxuXHRcdCd0b0xvY2FsZVN0cmluZycsXG5cdFx0J3ZhbHVlT2YnLFxuXHRcdCdoYXNPd25Qcm9wZXJ0eScsXG5cdFx0J2lzUHJvdG90eXBlT2YnLFxuXHRcdCdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG5cdFx0J2NvbnN0cnVjdG9yJ1xuXHRdO1xuXHR2YXIgZXF1YWxzQ29uc3RydWN0b3JQcm90b3R5cGUgPSBmdW5jdGlvbiAobykge1xuXHRcdHZhciBjdG9yID0gby5jb25zdHJ1Y3Rvcjtcblx0XHRyZXR1cm4gY3RvciAmJiBjdG9yLnByb3RvdHlwZSA9PT0gbztcblx0fTtcblx0dmFyIGV4Y2x1ZGVkS2V5cyA9IHtcblx0XHQkYXBwbGljYXRpb25DYWNoZTogdHJ1ZSxcblx0XHQkY29uc29sZTogdHJ1ZSxcblx0XHQkZXh0ZXJuYWw6IHRydWUsXG5cdFx0JGZyYW1lOiB0cnVlLFxuXHRcdCRmcmFtZUVsZW1lbnQ6IHRydWUsXG5cdFx0JGZyYW1lczogdHJ1ZSxcblx0XHQkaW5uZXJIZWlnaHQ6IHRydWUsXG5cdFx0JGlubmVyV2lkdGg6IHRydWUsXG5cdFx0JG9ubW96ZnVsbHNjcmVlbmNoYW5nZTogdHJ1ZSxcblx0XHQkb25tb3pmdWxsc2NyZWVuZXJyb3I6IHRydWUsXG5cdFx0JG91dGVySGVpZ2h0OiB0cnVlLFxuXHRcdCRvdXRlcldpZHRoOiB0cnVlLFxuXHRcdCRwYWdlWE9mZnNldDogdHJ1ZSxcblx0XHQkcGFnZVlPZmZzZXQ6IHRydWUsXG5cdFx0JHBhcmVudDogdHJ1ZSxcblx0XHQkc2Nyb2xsTGVmdDogdHJ1ZSxcblx0XHQkc2Nyb2xsVG9wOiB0cnVlLFxuXHRcdCRzY3JvbGxYOiB0cnVlLFxuXHRcdCRzY3JvbGxZOiB0cnVlLFxuXHRcdCRzZWxmOiB0cnVlLFxuXHRcdCR3ZWJraXRJbmRleGVkREI6IHRydWUsXG5cdFx0JHdlYmtpdFN0b3JhZ2VJbmZvOiB0cnVlLFxuXHRcdCR3aW5kb3c6IHRydWVcblx0fTtcblx0dmFyIGhhc0F1dG9tYXRpb25FcXVhbGl0eUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG5cdFx0LyogZ2xvYmFsIHdpbmRvdyAqL1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgeyByZXR1cm4gZmFsc2U7IH1cblx0XHRmb3IgKHZhciBrIGluIHdpbmRvdykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKCFleGNsdWRlZEtleXNbJyQnICsga10gJiYgaGFzLmNhbGwod2luZG93LCBrKSAmJiB3aW5kb3dba10gIT09IG51bGwgJiYgdHlwZW9mIHdpbmRvd1trXSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0ZXF1YWxzQ29uc3RydWN0b3JQcm90b3R5cGUod2luZG93W2tdKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSgpKTtcblx0dmFyIGVxdWFsc0NvbnN0cnVjdG9yUHJvdG90eXBlSWZOb3RCdWdneSA9IGZ1bmN0aW9uIChvKSB7XG5cdFx0LyogZ2xvYmFsIHdpbmRvdyAqL1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCAhaGFzQXV0b21hdGlvbkVxdWFsaXR5QnVnKSB7XG5cdFx0XHRyZXR1cm4gZXF1YWxzQ29uc3RydWN0b3JQcm90b3R5cGUobyk7XG5cdFx0fVxuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gZXF1YWxzQ29uc3RydWN0b3JQcm90b3R5cGUobyk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fTtcblxuXHRrZXlzU2hpbSA9IGZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG5cdFx0dmFyIGlzT2JqZWN0ID0gb2JqZWN0ICE9PSBudWxsICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnO1xuXHRcdHZhciBpc0Z1bmN0aW9uID0gdG9TdHIuY2FsbChvYmplY3QpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXHRcdHZhciBpc0FyZ3VtZW50cyA9IGlzQXJncyhvYmplY3QpO1xuXHRcdHZhciBpc1N0cmluZyA9IGlzT2JqZWN0ICYmIHRvU3RyLmNhbGwob2JqZWN0KSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7XG5cdFx0dmFyIHRoZUtleXMgPSBbXTtcblxuXHRcdGlmICghaXNPYmplY3QgJiYgIWlzRnVuY3Rpb24gJiYgIWlzQXJndW1lbnRzKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3Qua2V5cyBjYWxsZWQgb24gYSBub24tb2JqZWN0Jyk7XG5cdFx0fVxuXG5cdFx0dmFyIHNraXBQcm90byA9IGhhc1Byb3RvRW51bUJ1ZyAmJiBpc0Z1bmN0aW9uO1xuXHRcdGlmIChpc1N0cmluZyAmJiBvYmplY3QubGVuZ3RoID4gMCAmJiAhaGFzLmNhbGwob2JqZWN0LCAwKSkge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3QubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0dGhlS2V5cy5wdXNoKFN0cmluZyhpKSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGlzQXJndW1lbnRzICYmIG9iamVjdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IG9iamVjdC5sZW5ndGg7ICsraikge1xuXHRcdFx0XHR0aGVLZXlzLnB1c2goU3RyaW5nKGopKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICh2YXIgbmFtZSBpbiBvYmplY3QpIHtcblx0XHRcdFx0aWYgKCEoc2tpcFByb3RvICYmIG5hbWUgPT09ICdwcm90b3R5cGUnKSAmJiBoYXMuY2FsbChvYmplY3QsIG5hbWUpKSB7XG5cdFx0XHRcdFx0dGhlS2V5cy5wdXNoKFN0cmluZyhuYW1lKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoaGFzRG9udEVudW1CdWcpIHtcblx0XHRcdHZhciBza2lwQ29uc3RydWN0b3IgPSBlcXVhbHNDb25zdHJ1Y3RvclByb3RvdHlwZUlmTm90QnVnZ3kob2JqZWN0KTtcblxuXHRcdFx0Zm9yICh2YXIgayA9IDA7IGsgPCBkb250RW51bXMubGVuZ3RoOyArK2spIHtcblx0XHRcdFx0aWYgKCEoc2tpcENvbnN0cnVjdG9yICYmIGRvbnRFbnVtc1trXSA9PT0gJ2NvbnN0cnVjdG9yJykgJiYgaGFzLmNhbGwob2JqZWN0LCBkb250RW51bXNba10pKSB7XG5cdFx0XHRcdFx0dGhlS2V5cy5wdXNoKGRvbnRFbnVtc1trXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHRoZUtleXM7XG5cdH07XG59XG5tb2R1bGUuZXhwb3J0cyA9IGtleXNTaGltO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtOS4xMVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2lzLWNhbGxhYmxlJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBmblRvU3RyID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXG52YXIgY29uc3RydWN0b3JSZWdleCA9IC9eXFxzKmNsYXNzXFxiLztcbnZhciBpc0VTNkNsYXNzRm4gPSBmdW5jdGlvbiBpc0VTNkNsYXNzRnVuY3Rpb24odmFsdWUpIHtcblx0dHJ5IHtcblx0XHR2YXIgZm5TdHIgPSBmblRvU3RyLmNhbGwodmFsdWUpO1xuXHRcdHJldHVybiBjb25zdHJ1Y3RvclJlZ2V4LnRlc3QoZm5TdHIpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0cmV0dXJuIGZhbHNlOyAvLyBub3QgYSBmdW5jdGlvblxuXHR9XG59O1xuXG52YXIgdHJ5RnVuY3Rpb25PYmplY3QgPSBmdW5jdGlvbiB0cnlGdW5jdGlvblRvU3RyKHZhbHVlKSB7XG5cdHRyeSB7XG5cdFx0aWYgKGlzRVM2Q2xhc3NGbih2YWx1ZSkpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0Zm5Ub1N0ci5jYWxsKHZhbHVlKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcbnZhciB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgZm5DbGFzcyA9ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG52YXIgZ2VuQ2xhc3MgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nO1xudmFyIGhhc1RvU3RyaW5nVGFnID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSAnc3ltYm9sJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0NhbGxhYmxlKHZhbHVlKSB7XG5cdGlmICghdmFsdWUpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdGlmICh0eXBlb2YgdmFsdWUgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JykgeyByZXR1cm4gZmFsc2U7IH1cblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiAhdmFsdWUucHJvdG90eXBlKSB7IHJldHVybiB0cnVlOyB9XG5cdGlmIChoYXNUb1N0cmluZ1RhZykgeyByZXR1cm4gdHJ5RnVuY3Rpb25PYmplY3QodmFsdWUpOyB9XG5cdGlmIChpc0VTNkNsYXNzRm4odmFsdWUpKSB7IHJldHVybiBmYWxzZTsgfVxuXHR2YXIgc3RyQ2xhc3MgPSB0b1N0ci5jYWxsKHZhbHVlKTtcblx0cmV0dXJuIHN0ckNsYXNzID09PSBmbkNsYXNzIHx8IHN0ckNsYXNzID09PSBnZW5DbGFzcztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBHZXRJbnRyaW5zaWMgPSByZXF1aXJlKCcuLi9HZXRJbnRyaW5zaWMnKTtcblxudmFyICRzcGVjaWVzID0gR2V0SW50cmluc2ljKCclU3ltYm9sLnNwZWNpZXMlJywgdHJ1ZSk7XG52YXIgJFR5cGVFcnJvciA9IEdldEludHJpbnNpYygnJVR5cGVFcnJvciUnKTtcblxudmFyIElzQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuL0lzQ29uc3RydWN0b3InKTtcbnZhciBUeXBlID0gcmVxdWlyZSgnLi9UeXBlJyk7XG5cbi8vIGh0dHBzOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zcGVjaWVzY29uc3RydWN0b3JcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBTcGVjaWVzQ29uc3RydWN0b3IoTywgZGVmYXVsdENvbnN0cnVjdG9yKSB7XG5cdGlmIChUeXBlKE8pICE9PSAnT2JqZWN0Jykge1xuXHRcdHRocm93IG5ldyAkVHlwZUVycm9yKCdBc3NlcnRpb24gZmFpbGVkOiBUeXBlKE8pIGlzIG5vdCBPYmplY3QnKTtcblx0fVxuXHR2YXIgQyA9IE8uY29uc3RydWN0b3I7XG5cdGlmICh0eXBlb2YgQyA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRyZXR1cm4gZGVmYXVsdENvbnN0cnVjdG9yO1xuXHR9XG5cdGlmIChUeXBlKEMpICE9PSAnT2JqZWN0Jykge1xuXHRcdHRocm93IG5ldyAkVHlwZUVycm9yKCdPLmNvbnN0cnVjdG9yIGlzIG5vdCBhbiBPYmplY3QnKTtcblx0fVxuXHR2YXIgUyA9ICRzcGVjaWVzID8gQ1skc3BlY2llc10gOiB2b2lkIDA7XG5cdGlmIChTID09IG51bGwpIHtcblx0XHRyZXR1cm4gZGVmYXVsdENvbnN0cnVjdG9yO1xuXHR9XG5cdGlmIChJc0NvbnN0cnVjdG9yKFMpKSB7XG5cdFx0cmV0dXJuIFM7XG5cdH1cblx0dGhyb3cgbmV3ICRUeXBlRXJyb3IoJ25vIGNvbnN0cnVjdG9yIGZvdW5kJyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWxzXG5cdEF0b21pY3MsXG5cdFNoYXJlZEFycmF5QnVmZmVyLFxuKi9cblxudmFyIHVuZGVmaW5lZDtcblxudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG5cbnZhciAkZ09QRCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5pZiAoJGdPUEQpIHtcblx0dHJ5IHtcblx0XHQkZ09QRCh7fSwgJycpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0JGdPUEQgPSBudWxsOyAvLyB0aGlzIGlzIElFIDgsIHdoaWNoIGhhcyBhIGJyb2tlbiBnT1BEXG5cdH1cbn1cblxudmFyIHRocm93VHlwZUVycm9yID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgJFR5cGVFcnJvcigpOyB9O1xudmFyIFRocm93VHlwZUVycm9yID0gJGdPUERcblx0PyAoZnVuY3Rpb24gKCkge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zLCBuby1jYWxsZXIsIG5vLXJlc3RyaWN0ZWQtcHJvcGVydGllc1xuXHRcdFx0YXJndW1lbnRzLmNhbGxlZTsgLy8gSUUgOCBkb2VzIG5vdCB0aHJvdyBoZXJlXG5cdFx0XHRyZXR1cm4gdGhyb3dUeXBlRXJyb3I7XG5cdFx0fSBjYXRjaCAoY2FsbGVlVGhyb3dzKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHQvLyBJRSA4IHRocm93cyBvbiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGFyZ3VtZW50cywgJycpXG5cdFx0XHRcdHJldHVybiAkZ09QRChhcmd1bWVudHMsICdjYWxsZWUnKS5nZXQ7XG5cdFx0XHR9IGNhdGNoIChnT1BEdGhyb3dzKSB7XG5cdFx0XHRcdHJldHVybiB0aHJvd1R5cGVFcnJvcjtcblx0XHRcdH1cblx0XHR9XG5cdH0oKSlcblx0OiB0aHJvd1R5cGVFcnJvcjtcblxudmFyIGhhc1N5bWJvbHMgPSByZXF1aXJlKCdoYXMtc3ltYm9scycpKCk7XG5cbnZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5fX3Byb3RvX187IH07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG9cblxudmFyIGdlbmVyYXRvcjsgLy8gPSBmdW5jdGlvbiAqICgpIHt9O1xudmFyIGdlbmVyYXRvckZ1bmN0aW9uID0gZ2VuZXJhdG9yID8gZ2V0UHJvdG8oZ2VuZXJhdG9yKSA6IHVuZGVmaW5lZDtcbnZhciBhc3luY0ZuOyAvLyBhc3luYyBmdW5jdGlvbigpIHt9O1xudmFyIGFzeW5jRnVuY3Rpb24gPSBhc3luY0ZuID8gYXN5bmNGbi5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZDtcbnZhciBhc3luY0dlbjsgLy8gYXN5bmMgZnVuY3Rpb24gKiAoKSB7fTtcbnZhciBhc3luY0dlbkZ1bmN0aW9uID0gYXN5bmNHZW4gPyBnZXRQcm90byhhc3luY0dlbikgOiB1bmRlZmluZWQ7XG52YXIgYXN5bmNHZW5JdGVyYXRvciA9IGFzeW5jR2VuID8gYXN5bmNHZW4oKSA6IHVuZGVmaW5lZDtcblxudmFyIFR5cGVkQXJyYXkgPSB0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBnZXRQcm90byhVaW50OEFycmF5KTtcblxudmFyIElOVFJJTlNJQ1MgPSB7XG5cdCclQXJyYXklJzogQXJyYXksXG5cdCclQXJyYXlCdWZmZXIlJzogdHlwZW9mIEFycmF5QnVmZmVyID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEFycmF5QnVmZmVyLFxuXHQnJUFycmF5QnVmZmVyUHJvdG90eXBlJSc6IHR5cGVvZiBBcnJheUJ1ZmZlciA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBBcnJheUJ1ZmZlci5wcm90b3R5cGUsXG5cdCclQXJyYXlJdGVyYXRvclByb3RvdHlwZSUnOiBoYXNTeW1ib2xzID8gZ2V0UHJvdG8oW11bU3ltYm9sLml0ZXJhdG9yXSgpKSA6IHVuZGVmaW5lZCxcblx0JyVBcnJheVByb3RvdHlwZSUnOiBBcnJheS5wcm90b3R5cGUsXG5cdCclQXJyYXlQcm90b19lbnRyaWVzJSc6IEFycmF5LnByb3RvdHlwZS5lbnRyaWVzLFxuXHQnJUFycmF5UHJvdG9fZm9yRWFjaCUnOiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCxcblx0JyVBcnJheVByb3RvX2tleXMlJzogQXJyYXkucHJvdG90eXBlLmtleXMsXG5cdCclQXJyYXlQcm90b192YWx1ZXMlJzogQXJyYXkucHJvdG90eXBlLnZhbHVlcyxcblx0JyVBc3luY0Zyb21TeW5jSXRlcmF0b3JQcm90b3R5cGUlJzogdW5kZWZpbmVkLFxuXHQnJUFzeW5jRnVuY3Rpb24lJzogYXN5bmNGdW5jdGlvbixcblx0JyVBc3luY0Z1bmN0aW9uUHJvdG90eXBlJSc6IGFzeW5jRnVuY3Rpb24gPyBhc3luY0Z1bmN0aW9uLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcblx0JyVBc3luY0dlbmVyYXRvciUnOiBhc3luY0dlbiA/IGdldFByb3RvKGFzeW5jR2VuSXRlcmF0b3IpIDogdW5kZWZpbmVkLFxuXHQnJUFzeW5jR2VuZXJhdG9yRnVuY3Rpb24lJzogYXN5bmNHZW5GdW5jdGlvbixcblx0JyVBc3luY0dlbmVyYXRvclByb3RvdHlwZSUnOiBhc3luY0dlbkZ1bmN0aW9uID8gYXN5bmNHZW5GdW5jdGlvbi5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG5cdCclQXN5bmNJdGVyYXRvclByb3RvdHlwZSUnOiBhc3luY0dlbkl0ZXJhdG9yICYmIGhhc1N5bWJvbHMgJiYgU3ltYm9sLmFzeW5jSXRlcmF0b3IgPyBhc3luY0dlbkl0ZXJhdG9yW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIDogdW5kZWZpbmVkLFxuXHQnJUF0b21pY3MlJzogdHlwZW9mIEF0b21pY3MgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogQXRvbWljcyxcblx0JyVCb29sZWFuJSc6IEJvb2xlYW4sXG5cdCclQm9vbGVhblByb3RvdHlwZSUnOiBCb29sZWFuLnByb3RvdHlwZSxcblx0JyVEYXRhVmlldyUnOiB0eXBlb2YgRGF0YVZpZXcgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogRGF0YVZpZXcsXG5cdCclRGF0YVZpZXdQcm90b3R5cGUlJzogdHlwZW9mIERhdGFWaWV3ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IERhdGFWaWV3LnByb3RvdHlwZSxcblx0JyVEYXRlJSc6IERhdGUsXG5cdCclRGF0ZVByb3RvdHlwZSUnOiBEYXRlLnByb3RvdHlwZSxcblx0JyVkZWNvZGVVUkklJzogZGVjb2RlVVJJLFxuXHQnJWRlY29kZVVSSUNvbXBvbmVudCUnOiBkZWNvZGVVUklDb21wb25lbnQsXG5cdCclZW5jb2RlVVJJJSc6IGVuY29kZVVSSSxcblx0JyVlbmNvZGVVUklDb21wb25lbnQlJzogZW5jb2RlVVJJQ29tcG9uZW50LFxuXHQnJUVycm9yJSc6IEVycm9yLFxuXHQnJUVycm9yUHJvdG90eXBlJSc6IEVycm9yLnByb3RvdHlwZSxcblx0JyVldmFsJSc6IGV2YWwsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZXZhbFxuXHQnJUV2YWxFcnJvciUnOiBFdmFsRXJyb3IsXG5cdCclRXZhbEVycm9yUHJvdG90eXBlJSc6IEV2YWxFcnJvci5wcm90b3R5cGUsXG5cdCclRmxvYXQzMkFycmF5JSc6IHR5cGVvZiBGbG9hdDMyQXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogRmxvYXQzMkFycmF5LFxuXHQnJUZsb2F0MzJBcnJheVByb3RvdHlwZSUnOiB0eXBlb2YgRmxvYXQzMkFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEZsb2F0MzJBcnJheS5wcm90b3R5cGUsXG5cdCclRmxvYXQ2NEFycmF5JSc6IHR5cGVvZiBGbG9hdDY0QXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogRmxvYXQ2NEFycmF5LFxuXHQnJUZsb2F0NjRBcnJheVByb3RvdHlwZSUnOiB0eXBlb2YgRmxvYXQ2NEFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEZsb2F0NjRBcnJheS5wcm90b3R5cGUsXG5cdCclRnVuY3Rpb24lJzogRnVuY3Rpb24sXG5cdCclRnVuY3Rpb25Qcm90b3R5cGUlJzogRnVuY3Rpb24ucHJvdG90eXBlLFxuXHQnJUdlbmVyYXRvciUnOiBnZW5lcmF0b3IgPyBnZXRQcm90byhnZW5lcmF0b3IoKSkgOiB1bmRlZmluZWQsXG5cdCclR2VuZXJhdG9yRnVuY3Rpb24lJzogZ2VuZXJhdG9yRnVuY3Rpb24sXG5cdCclR2VuZXJhdG9yUHJvdG90eXBlJSc6IGdlbmVyYXRvckZ1bmN0aW9uID8gZ2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuXHQnJUludDhBcnJheSUnOiB0eXBlb2YgSW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEludDhBcnJheSxcblx0JyVJbnQ4QXJyYXlQcm90b3R5cGUlJzogdHlwZW9mIEludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBJbnQ4QXJyYXkucHJvdG90eXBlLFxuXHQnJUludDE2QXJyYXklJzogdHlwZW9mIEludDE2QXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogSW50MTZBcnJheSxcblx0JyVJbnQxNkFycmF5UHJvdG90eXBlJSc6IHR5cGVvZiBJbnQxNkFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEludDhBcnJheS5wcm90b3R5cGUsXG5cdCclSW50MzJBcnJheSUnOiB0eXBlb2YgSW50MzJBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBJbnQzMkFycmF5LFxuXHQnJUludDMyQXJyYXlQcm90b3R5cGUlJzogdHlwZW9mIEludDMyQXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogSW50MzJBcnJheS5wcm90b3R5cGUsXG5cdCclaXNGaW5pdGUlJzogaXNGaW5pdGUsXG5cdCclaXNOYU4lJzogaXNOYU4sXG5cdCclSXRlcmF0b3JQcm90b3R5cGUlJzogaGFzU3ltYm9scyA/IGdldFByb3RvKGdldFByb3RvKFtdW1N5bWJvbC5pdGVyYXRvcl0oKSkpIDogdW5kZWZpbmVkLFxuXHQnJUpTT04lJzogdHlwZW9mIEpTT04gPT09ICdvYmplY3QnID8gSlNPTiA6IHVuZGVmaW5lZCxcblx0JyVKU09OUGFyc2UlJzogdHlwZW9mIEpTT04gPT09ICdvYmplY3QnID8gSlNPTi5wYXJzZSA6IHVuZGVmaW5lZCxcblx0JyVNYXAlJzogdHlwZW9mIE1hcCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBNYXAsXG5cdCclTWFwSXRlcmF0b3JQcm90b3R5cGUlJzogdHlwZW9mIE1hcCA9PT0gJ3VuZGVmaW5lZCcgfHwgIWhhc1N5bWJvbHMgPyB1bmRlZmluZWQgOiBnZXRQcm90byhuZXcgTWFwKClbU3ltYm9sLml0ZXJhdG9yXSgpKSxcblx0JyVNYXBQcm90b3R5cGUlJzogdHlwZW9mIE1hcCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBNYXAucHJvdG90eXBlLFxuXHQnJU1hdGglJzogTWF0aCxcblx0JyVOdW1iZXIlJzogTnVtYmVyLFxuXHQnJU51bWJlclByb3RvdHlwZSUnOiBOdW1iZXIucHJvdG90eXBlLFxuXHQnJU9iamVjdCUnOiBPYmplY3QsXG5cdCclT2JqZWN0UHJvdG90eXBlJSc6IE9iamVjdC5wcm90b3R5cGUsXG5cdCclT2JqUHJvdG9fdG9TdHJpbmclJzogT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcblx0JyVPYmpQcm90b192YWx1ZU9mJSc6IE9iamVjdC5wcm90b3R5cGUudmFsdWVPZixcblx0JyVwYXJzZUZsb2F0JSc6IHBhcnNlRmxvYXQsXG5cdCclcGFyc2VJbnQlJzogcGFyc2VJbnQsXG5cdCclUHJvbWlzZSUnOiB0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBQcm9taXNlLFxuXHQnJVByb21pc2VQcm90b3R5cGUlJzogdHlwZW9mIFByb21pc2UgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogUHJvbWlzZS5wcm90b3R5cGUsXG5cdCclUHJvbWlzZVByb3RvX3RoZW4lJzogdHlwZW9mIFByb21pc2UgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogUHJvbWlzZS5wcm90b3R5cGUudGhlbixcblx0JyVQcm9taXNlX2FsbCUnOiB0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBQcm9taXNlLmFsbCxcblx0JyVQcm9taXNlX3JlamVjdCUnOiB0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBQcm9taXNlLnJlamVjdCxcblx0JyVQcm9taXNlX3Jlc29sdmUlJzogdHlwZW9mIFByb21pc2UgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogUHJvbWlzZS5yZXNvbHZlLFxuXHQnJVByb3h5JSc6IHR5cGVvZiBQcm94eSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBQcm94eSxcblx0JyVSYW5nZUVycm9yJSc6IFJhbmdlRXJyb3IsXG5cdCclUmFuZ2VFcnJvclByb3RvdHlwZSUnOiBSYW5nZUVycm9yLnByb3RvdHlwZSxcblx0JyVSZWZlcmVuY2VFcnJvciUnOiBSZWZlcmVuY2VFcnJvcixcblx0JyVSZWZlcmVuY2VFcnJvclByb3RvdHlwZSUnOiBSZWZlcmVuY2VFcnJvci5wcm90b3R5cGUsXG5cdCclUmVmbGVjdCUnOiB0eXBlb2YgUmVmbGVjdCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBSZWZsZWN0LFxuXHQnJVJlZ0V4cCUnOiBSZWdFeHAsXG5cdCclUmVnRXhwUHJvdG90eXBlJSc6IFJlZ0V4cC5wcm90b3R5cGUsXG5cdCclU2V0JSc6IHR5cGVvZiBTZXQgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogU2V0LFxuXHQnJVNldEl0ZXJhdG9yUHJvdG90eXBlJSc6IHR5cGVvZiBTZXQgPT09ICd1bmRlZmluZWQnIHx8ICFoYXNTeW1ib2xzID8gdW5kZWZpbmVkIDogZ2V0UHJvdG8obmV3IFNldCgpW1N5bWJvbC5pdGVyYXRvcl0oKSksXG5cdCclU2V0UHJvdG90eXBlJSc6IHR5cGVvZiBTZXQgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogU2V0LnByb3RvdHlwZSxcblx0JyVTaGFyZWRBcnJheUJ1ZmZlciUnOiB0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogU2hhcmVkQXJyYXlCdWZmZXIsXG5cdCclU2hhcmVkQXJyYXlCdWZmZXJQcm90b3R5cGUlJzogdHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFNoYXJlZEFycmF5QnVmZmVyLnByb3RvdHlwZSxcblx0JyVTdHJpbmclJzogU3RyaW5nLFxuXHQnJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJSc6IGhhc1N5bWJvbHMgPyBnZXRQcm90bygnJ1tTeW1ib2wuaXRlcmF0b3JdKCkpIDogdW5kZWZpbmVkLFxuXHQnJVN0cmluZ1Byb3RvdHlwZSUnOiBTdHJpbmcucHJvdG90eXBlLFxuXHQnJVN5bWJvbCUnOiBoYXNTeW1ib2xzID8gU3ltYm9sIDogdW5kZWZpbmVkLFxuXHQnJVN5bWJvbFByb3RvdHlwZSUnOiBoYXNTeW1ib2xzID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcblx0JyVTeW50YXhFcnJvciUnOiBTeW50YXhFcnJvcixcblx0JyVTeW50YXhFcnJvclByb3RvdHlwZSUnOiBTeW50YXhFcnJvci5wcm90b3R5cGUsXG5cdCclVGhyb3dUeXBlRXJyb3IlJzogVGhyb3dUeXBlRXJyb3IsXG5cdCclVHlwZWRBcnJheSUnOiBUeXBlZEFycmF5LFxuXHQnJVR5cGVkQXJyYXlQcm90b3R5cGUlJzogVHlwZWRBcnJheSA/IFR5cGVkQXJyYXkucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuXHQnJVR5cGVFcnJvciUnOiAkVHlwZUVycm9yLFxuXHQnJVR5cGVFcnJvclByb3RvdHlwZSUnOiAkVHlwZUVycm9yLnByb3RvdHlwZSxcblx0JyVVaW50OEFycmF5JSc6IHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFVpbnQ4QXJyYXksXG5cdCclVWludDhBcnJheVByb3RvdHlwZSUnOiB0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBVaW50OEFycmF5LnByb3RvdHlwZSxcblx0JyVVaW50OENsYW1wZWRBcnJheSUnOiB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogVWludDhDbGFtcGVkQXJyYXksXG5cdCclVWludDhDbGFtcGVkQXJyYXlQcm90b3R5cGUlJzogdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFVpbnQ4Q2xhbXBlZEFycmF5LnByb3RvdHlwZSxcblx0JyVVaW50MTZBcnJheSUnOiB0eXBlb2YgVWludDE2QXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogVWludDE2QXJyYXksXG5cdCclVWludDE2QXJyYXlQcm90b3R5cGUlJzogdHlwZW9mIFVpbnQxNkFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFVpbnQxNkFycmF5LnByb3RvdHlwZSxcblx0JyVVaW50MzJBcnJheSUnOiB0eXBlb2YgVWludDMyQXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogVWludDMyQXJyYXksXG5cdCclVWludDMyQXJyYXlQcm90b3R5cGUlJzogdHlwZW9mIFVpbnQzMkFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFVpbnQzMkFycmF5LnByb3RvdHlwZSxcblx0JyVVUklFcnJvciUnOiBVUklFcnJvcixcblx0JyVVUklFcnJvclByb3RvdHlwZSUnOiBVUklFcnJvci5wcm90b3R5cGUsXG5cdCclV2Vha01hcCUnOiB0eXBlb2YgV2Vha01hcCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBXZWFrTWFwLFxuXHQnJVdlYWtNYXBQcm90b3R5cGUlJzogdHlwZW9mIFdlYWtNYXAgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogV2Vha01hcC5wcm90b3R5cGUsXG5cdCclV2Vha1NldCUnOiB0eXBlb2YgV2Vha1NldCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBXZWFrU2V0LFxuXHQnJVdlYWtTZXRQcm90b3R5cGUlJzogdHlwZW9mIFdlYWtTZXQgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogV2Vha1NldC5wcm90b3R5cGVcbn07XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnZnVuY3Rpb24tYmluZCcpO1xudmFyICRyZXBsYWNlID0gYmluZC5jYWxsKEZ1bmN0aW9uLmNhbGwsIFN0cmluZy5wcm90b3R5cGUucmVwbGFjZSk7XG5cbi8qIGFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vbG9kYXNoL2xvZGFzaC9ibG9iLzQuMTcuMTUvZGlzdC9sb2Rhc2guanMjTDY3MzUtTDY3NDQgKi9cbnZhciByZVByb3BOYW1lID0gL1teJS5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXFxcXXxcXFxcLikqPylcXDIpXFxdfCg/PSg/OlxcLnxcXFtcXF0pKD86XFwufFxcW1xcXXwlJCkpL2c7XG52YXIgcmVFc2NhcGVDaGFyID0gL1xcXFwoXFxcXCk/L2c7IC8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHN0cmluZ1RvUGF0aCA9IGZ1bmN0aW9uIHN0cmluZ1RvUGF0aChzdHJpbmcpIHtcblx0dmFyIHJlc3VsdCA9IFtdO1xuXHQkcmVwbGFjZShzdHJpbmcsIHJlUHJvcE5hbWUsIGZ1bmN0aW9uIChtYXRjaCwgbnVtYmVyLCBxdW90ZSwgc3ViU3RyaW5nKSB7XG5cdFx0cmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gcXVvdGUgPyAkcmVwbGFjZShzdWJTdHJpbmcsIHJlRXNjYXBlQ2hhciwgJyQxJykgOiAobnVtYmVyIHx8IG1hdGNoKTtcblx0fSk7XG5cdHJldHVybiByZXN1bHQ7XG59O1xuLyogZW5kIGFkYXB0YXRpb24gKi9cblxudmFyIGdldEJhc2VJbnRyaW5zaWMgPSBmdW5jdGlvbiBnZXRCYXNlSW50cmluc2ljKG5hbWUsIGFsbG93TWlzc2luZykge1xuXHRpZiAoIShuYW1lIGluIElOVFJJTlNJQ1MpKSB7XG5cdFx0dGhyb3cgbmV3IFN5bnRheEVycm9yKCdpbnRyaW5zaWMgJyArIG5hbWUgKyAnIGRvZXMgbm90IGV4aXN0IScpO1xuXHR9XG5cblx0Ly8gaXN0YW5idWwgaWdub3JlIGlmIC8vIGhvcGVmdWxseSB0aGlzIGlzIGltcG9zc2libGUgdG8gdGVzdCA6LSlcblx0aWYgKHR5cGVvZiBJTlRSSU5TSUNTW25hbWVdID09PSAndW5kZWZpbmVkJyAmJiAhYWxsb3dNaXNzaW5nKSB7XG5cdFx0dGhyb3cgbmV3ICRUeXBlRXJyb3IoJ2ludHJpbnNpYyAnICsgbmFtZSArICcgZXhpc3RzLCBidXQgaXMgbm90IGF2YWlsYWJsZS4gUGxlYXNlIGZpbGUgYW4gaXNzdWUhJyk7XG5cdH1cblxuXHRyZXR1cm4gSU5UUklOU0lDU1tuYW1lXTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gR2V0SW50cmluc2ljKG5hbWUsIGFsbG93TWlzc2luZykge1xuXHRpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8IG5hbWUubGVuZ3RoID09PSAwKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignaW50cmluc2ljIG5hbWUgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcblx0fVxuXHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFsbG93TWlzc2luZyAhPT0gJ2Jvb2xlYW4nKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignXCJhbGxvd01pc3NpbmdcIiBhcmd1bWVudCBtdXN0IGJlIGEgYm9vbGVhbicpO1xuXHR9XG5cblx0dmFyIHBhcnRzID0gc3RyaW5nVG9QYXRoKG5hbWUpO1xuXG5cdHZhciB2YWx1ZSA9IGdldEJhc2VJbnRyaW5zaWMoJyUnICsgKHBhcnRzLmxlbmd0aCA+IDAgPyBwYXJ0c1swXSA6ICcnKSArICclJywgYWxsb3dNaXNzaW5nKTtcblx0Zm9yICh2YXIgaSA9IDE7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdGlmICh2YWx1ZSAhPSBudWxsKSB7XG5cdFx0XHRpZiAoJGdPUEQgJiYgKGkgKyAxKSA+PSBwYXJ0cy5sZW5ndGgpIHtcblx0XHRcdFx0dmFyIGRlc2MgPSAkZ09QRCh2YWx1ZSwgcGFydHNbaV0pO1xuXHRcdFx0XHRpZiAoIWFsbG93TWlzc2luZyAmJiAhKHBhcnRzW2ldIGluIHZhbHVlKSkge1xuXHRcdFx0XHRcdHRocm93IG5ldyAkVHlwZUVycm9yKCdiYXNlIGludHJpbnNpYyBmb3IgJyArIG5hbWUgKyAnIGV4aXN0cywgYnV0IHRoZSBwcm9wZXJ0eSBpcyBub3QgYXZhaWxhYmxlLicpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhbHVlID0gZGVzYyA/IChkZXNjLmdldCB8fCBkZXNjLnZhbHVlKSA6IHZhbHVlW3BhcnRzW2ldXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbHVlID0gdmFsdWVbcGFydHNbaV1dO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gdmFsdWU7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgb3JpZ1N5bWJvbCA9IGdsb2JhbC5TeW1ib2w7XG52YXIgaGFzU3ltYm9sU2hhbSA9IHJlcXVpcmUoJy4vc2hhbXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBoYXNOYXRpdmVTeW1ib2xzKCkge1xuXHRpZiAodHlwZW9mIG9yaWdTeW1ib2wgIT09ICdmdW5jdGlvbicpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdGlmICh0eXBlb2YgU3ltYm9sICE9PSAnZnVuY3Rpb24nKSB7IHJldHVybiBmYWxzZTsgfVxuXHRpZiAodHlwZW9mIG9yaWdTeW1ib2woJ2ZvbycpICE9PSAnc3ltYm9sJykgeyByZXR1cm4gZmFsc2U7IH1cblx0aWYgKHR5cGVvZiBTeW1ib2woJ2JhcicpICE9PSAnc3ltYm9sJykgeyByZXR1cm4gZmFsc2U7IH1cblxuXHRyZXR1cm4gaGFzU3ltYm9sU2hhbSgpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyogZXNsaW50IGNvbXBsZXhpdHk6IFsyLCAxOF0sIG1heC1zdGF0ZW1lbnRzOiBbMiwgMzNdICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGhhc1N5bWJvbHMoKSB7XG5cdGlmICh0eXBlb2YgU3ltYm9sICE9PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICE9PSAnZnVuY3Rpb24nKSB7IHJldHVybiBmYWxzZTsgfVxuXHRpZiAodHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gJ3N5bWJvbCcpIHsgcmV0dXJuIHRydWU7IH1cblxuXHR2YXIgb2JqID0ge307XG5cdHZhciBzeW0gPSBTeW1ib2woJ3Rlc3QnKTtcblx0dmFyIHN5bU9iaiA9IE9iamVjdChzeW0pO1xuXHRpZiAodHlwZW9mIHN5bSA9PT0gJ3N0cmluZycpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblx0aWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzeW0pICE9PSAnW29iamVjdCBTeW1ib2xdJykgeyByZXR1cm4gZmFsc2U7IH1cblx0aWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzeW1PYmopICE9PSAnW29iamVjdCBTeW1ib2xdJykgeyByZXR1cm4gZmFsc2U7IH1cblxuXHQvLyB0ZW1wIGRpc2FibGVkIHBlciBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL29iamVjdC5hc3NpZ24vaXNzdWVzLzE3XG5cdC8vIGlmIChzeW0gaW5zdGFuY2VvZiBTeW1ib2wpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdC8vIHRlbXAgZGlzYWJsZWQgcGVyIGh0dHBzOi8vZ2l0aHViLmNvbS9XZWJSZWZsZWN0aW9uL2dldC1vd24tcHJvcGVydHktc3ltYm9scy9pc3N1ZXMvNFxuXHQvLyBpZiAoIShzeW1PYmogaW5zdGFuY2VvZiBTeW1ib2wpKSB7IHJldHVybiBmYWxzZTsgfVxuXG5cdC8vIGlmICh0eXBlb2YgU3ltYm9sLnByb3RvdHlwZS50b1N0cmluZyAhPT0gJ2Z1bmN0aW9uJykgeyByZXR1cm4gZmFsc2U7IH1cblx0Ly8gaWYgKFN0cmluZyhzeW0pICE9PSBTeW1ib2wucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3ltKSkgeyByZXR1cm4gZmFsc2U7IH1cblxuXHR2YXIgc3ltVmFsID0gNDI7XG5cdG9ialtzeW1dID0gc3ltVmFsO1xuXHRmb3IgKHN5bSBpbiBvYmopIHsgcmV0dXJuIGZhbHNlOyB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcblx0aWYgKHR5cGVvZiBPYmplY3Qua2V5cyA9PT0gJ2Z1bmN0aW9uJyAmJiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCAhPT0gMCkgeyByZXR1cm4gZmFsc2U7IH1cblxuXHRpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzID09PSAnZnVuY3Rpb24nICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubGVuZ3RoICE9PSAwKSB7IHJldHVybiBmYWxzZTsgfVxuXG5cdHZhciBzeW1zID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmopO1xuXHRpZiAoc3ltcy5sZW5ndGggIT09IDEgfHwgc3ltc1swXSAhPT0gc3ltKSB7IHJldHVybiBmYWxzZTsgfVxuXG5cdGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKG9iaiwgc3ltKSkgeyByZXR1cm4gZmFsc2U7IH1cblxuXHRpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPT09ICdmdW5jdGlvbicpIHtcblx0XHR2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBzeW0pO1xuXHRcdGlmIChkZXNjcmlwdG9yLnZhbHVlICE9PSBzeW1WYWwgfHwgZGVzY3JpcHRvci5lbnVtZXJhYmxlICE9PSB0cnVlKSB7IHJldHVybiBmYWxzZTsgfVxuXHR9XG5cblx0cmV0dXJuIHRydWU7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLWlzY29uc3RydWN0b3JcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBJc0NvbnN0cnVjdG9yKGFyZ3VtZW50KSB7XG5cdHJldHVybiB0eXBlb2YgYXJndW1lbnQgPT09ICdmdW5jdGlvbicgJiYgISFhcmd1bWVudC5wcm90b3R5cGU7IC8vIHVuZm9ydHVuYXRlbHkgdGhlcmUncyBubyB3YXkgdG8gdHJ1bHkgY2hlY2sgdGhpcyB3aXRob3V0IHRyeS9jYXRjaCBgbmV3IGFyZ3VtZW50YFxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy04XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gVHlwZSh4KSB7XG5cdGlmICh4ID09PSBudWxsKSB7XG5cdFx0cmV0dXJuICdOdWxsJztcblx0fVxuXHRpZiAodHlwZW9mIHggPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0cmV0dXJuICdVbmRlZmluZWQnO1xuXHR9XG5cdGlmICh0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgeCA9PT0gJ29iamVjdCcpIHtcblx0XHRyZXR1cm4gJ09iamVjdCc7XG5cdH1cblx0aWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuXHRcdHJldHVybiAnTnVtYmVyJztcblx0fVxuXHRpZiAodHlwZW9mIHggPT09ICdib29sZWFuJykge1xuXHRcdHJldHVybiAnQm9vbGVhbic7XG5cdH1cblx0aWYgKHR5cGVvZiB4ID09PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiAnU3RyaW5nJztcblx0fVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHJlcXVpcmVQcm9taXNlID0gcmVxdWlyZSgnLi9yZXF1aXJlUHJvbWlzZScpO1xuXG52YXIgZ2V0UG9seWZpbGwgPSByZXF1aXJlKCcuL3BvbHlmaWxsJyk7XG52YXIgZGVmaW5lID0gcmVxdWlyZSgnZGVmaW5lLXByb3BlcnRpZXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzaGltUHJvbWlzZUZpbmFsbHkoKSB7XG5cdHJlcXVpcmVQcm9taXNlKCk7XG5cblx0dmFyIHBvbHlmaWxsID0gZ2V0UG9seWZpbGwoKTtcblx0ZGVmaW5lKFByb21pc2UucHJvdG90eXBlLCB7ICdmaW5hbGx5JzogcG9seWZpbGwgfSwge1xuXHRcdCdmaW5hbGx5JzogZnVuY3Rpb24gdGVzdEZpbmFsbHkoKSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSAhPT0gcG9seWZpbGw7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIHBvbHlmaWxsO1xufTtcbiIsIi8qKlxuICogRGVmYXVsdCBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gW2NyZWF0ZVdlYlNvY2tldD11cmwgPT4gbmV3IFdlYlNvY2tldCh1cmwpXSAtIGN1c3RvbSBmdW5jdGlvbiBmb3IgV2ViU29ja2V0IGNvbnN0cnVjdGlvbi5cbiAgKlxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gW3BhY2tNZXNzYWdlPW5vb3BdIC0gcGFja3MgbWVzc2FnZSBmb3Igc2VuZGluZy4gRm9yIGV4YW1wbGUsIGBkYXRhID0+IEpTT04uc3RyaW5naWZ5KGRhdGEpYC5cbiAqXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBbdW5wYWNrTWVzc2FnZT1ub29wXSAtIHVucGFja3MgcmVjZWl2ZWQgbWVzc2FnZS4gRm9yIGV4YW1wbGUsIGBkYXRhID0+IEpTT04ucGFyc2UoZGF0YSlgLlxuICpcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IFthdHRhY2hSZXF1ZXN0SWQ9bm9vcF0gLSBpbmplY3RzIHJlcXVlc3QgaWQgaW50byBkYXRhLlxuICogRm9yIGV4YW1wbGUsIGAoZGF0YSwgcmVxdWVzdElkKSA9PiBPYmplY3QuYXNzaWduKHtyZXF1ZXN0SWR9LCBkYXRhKWAuXG4gKlxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gW2V4dHJhY3RSZXF1ZXN0SWQ9bm9vcF0gLSBleHRyYWN0cyByZXF1ZXN0IGlkIGZyb20gcmVjZWl2ZWQgZGF0YS5cbiAqIEZvciBleGFtcGxlLCBgZGF0YSA9PiBkYXRhLnJlcXVlc3RJZGAuXG4gKlxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gW2V4dHJhY3RNZXNzYWdlRGF0YT1ldmVudCA9PiBldmVudC5kYXRhXSAtIGV4dHJhY3RzIGRhdGEgZnJvbSBldmVudCBvYmplY3QuXG4gKlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHRpbWVvdXQ9MCAtIHRpbWVvdXQgZm9yIG9wZW5pbmcgY29ubmVjdGlvbiBhbmQgc2VuZGluZyBtZXNzYWdlcy5cbiAqXG4gKiBAcHJvcGVydHkge051bWJlcn0gY29ubmVjdGlvblRpbWVvdXQ9MCAtIHNwZWNpYWwgdGltZW91dCBmb3Igb3BlbmluZyBjb25uZWN0aW9uLCBieSBkZWZhdWx0IGVxdWFscyB0byBgdGltZW91dGAuXG4gKlxuICogQGRlZmF1bHRzXG4gKiBwbGVhc2Ugc2VlIFtvcHRpb25zLmpzXShodHRwczovL2dpdGh1Yi5jb20vdml0YWxldHMvd2Vic29ja2V0LWFzLXByb21pc2VkL2Jsb2IvbWFzdGVyL3NyYy9vcHRpb25zLmpzKVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvKipcbiAgICogU2VlIHtAbGluayBPcHRpb25zLmNyZWF0ZVdlYlNvY2tldH1cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICAgKiBAcmV0dXJucyB7V2ViU29ja2V0fVxuICAgKi9cbiAgY3JlYXRlV2ViU29ja2V0OiB1cmwgPT4gbmV3IFdlYlNvY2tldCh1cmwpLFxuXG4gIC8qKlxuICAgKiBTZWUge0BsaW5rIE9wdGlvbnMucGFja01lc3NhZ2V9XG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcmV0dXJucyB7U3RyaW5nfEFycmF5QnVmZmVyfEJsb2J9XG4gICAqL1xuICBwYWNrTWVzc2FnZTogbnVsbCxcblxuICAvKipcbiAgICogU2VlIHtAbGluayBPcHRpb25zLnVucGFja01lc3NhZ2V9XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfEJsb2J9IGRhdGFcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuICB1bnBhY2tNZXNzYWdlOiBudWxsLFxuXG4gIC8qKlxuICAgKiBTZWUge0BsaW5rIE9wdGlvbnMuYXR0YWNoUmVxdWVzdElkfVxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSByZXF1ZXN0SWRcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuICBhdHRhY2hSZXF1ZXN0SWQ6IG51bGwsXG5cbiAgLyoqXG4gICAqIFNlZSB7QGxpbmsgT3B0aW9ucy5leHRyYWN0UmVxdWVzdElkfVxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHJldHVybnMge1N0cmluZ3xOdW1iZXJ8dW5kZWZpbmVkfVxuICAgKi9cbiAgZXh0cmFjdFJlcXVlc3RJZDogbnVsbCxcblxuICAvKipcbiAgICogU2VlIHtAbGluayBPcHRpb25zLmV4dHJhY3RNZXNzYWdlRGF0YX1cbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG4gIGV4dHJhY3RNZXNzYWdlRGF0YTogZXZlbnQgPT4gZXZlbnQuZGF0YSxcblxuICAvKipcbiAgICogU2VlIHtAbGluayBPcHRpb25zLnRpbWVvdXR9XG4gICAqL1xuICB0aW1lb3V0OiAwLFxuXG4gIC8qKlxuICAgKiBTZWUge0BsaW5rIE9wdGlvbnMuY29ubmVjdGlvblRpbWVvdXR9XG4gICAqL1xuICBjb25uZWN0aW9uVGltZW91dDogMCxcbn07XG4iLCJcbmV4cG9ydHMudGhyb3dJZiA9IChjb25kaXRpb24sIG1lc3NhZ2UpID0+IHtcbiAgaWYgKGNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfVxufTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8vIElmIG9iai5oYXNPd25Qcm9wZXJ0eSBoYXMgYmVlbiBvdmVycmlkZGVuLCB0aGVuIGNhbGxpbmdcbi8vIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSB3aWxsIGJyZWFrLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvaXNzdWVzLzE3MDdcbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocXMsIHNlcCwgZXEsIG9wdGlvbnMpIHtcbiAgc2VwID0gc2VwIHx8ICcmJztcbiAgZXEgPSBlcSB8fCAnPSc7XG4gIHZhciBvYmogPSB7fTtcblxuICBpZiAodHlwZW9mIHFzICE9PSAnc3RyaW5nJyB8fCBxcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgdmFyIHJlZ2V4cCA9IC9cXCsvZztcbiAgcXMgPSBxcy5zcGxpdChzZXApO1xuXG4gIHZhciBtYXhLZXlzID0gMTAwMDtcbiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMubWF4S2V5cyA9PT0gJ251bWJlcicpIHtcbiAgICBtYXhLZXlzID0gb3B0aW9ucy5tYXhLZXlzO1xuICB9XG5cbiAgdmFyIGxlbiA9IHFzLmxlbmd0aDtcbiAgLy8gbWF4S2V5cyA8PSAwIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsaW1pdCBrZXlzIGNvdW50XG4gIGlmIChtYXhLZXlzID4gMCAmJiBsZW4gPiBtYXhLZXlzKSB7XG4gICAgbGVuID0gbWF4S2V5cztcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICB2YXIgeCA9IHFzW2ldLnJlcGxhY2UocmVnZXhwLCAnJTIwJyksXG4gICAgICAgIGlkeCA9IHguaW5kZXhPZihlcSksXG4gICAgICAgIGtzdHIsIHZzdHIsIGssIHY7XG5cbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgIGtzdHIgPSB4LnN1YnN0cigwLCBpZHgpO1xuICAgICAgdnN0ciA9IHguc3Vic3RyKGlkeCArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrc3RyID0geDtcbiAgICAgIHZzdHIgPSAnJztcbiAgICB9XG5cbiAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpO1xuICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodnN0cik7XG5cbiAgICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwgaykpIHtcbiAgICAgIG9ialtrXSA9IHY7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG9ialtrXSkpIHtcbiAgICAgIG9ialtrXS5wdXNoKHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpba10gPSBbb2JqW2tdLCB2XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uICh4cykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHhzKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgc3RyaW5naWZ5UHJpbWl0aXZlID0gZnVuY3Rpb24odikge1xuICBzd2l0Y2ggKHR5cGVvZiB2KSB7XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIHJldHVybiB2O1xuXG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gdiA/ICd0cnVlJyA6ICdmYWxzZSc7XG5cbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgcmV0dXJuIGlzRmluaXRlKHYpID8gdiA6ICcnO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAnJztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmosIHNlcCwgZXEsIG5hbWUpIHtcbiAgc2VwID0gc2VwIHx8ICcmJztcbiAgZXEgPSBlcSB8fCAnPSc7XG4gIGlmIChvYmogPT09IG51bGwpIHtcbiAgICBvYmogPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gbWFwKG9iamVjdEtleXMob2JqKSwgZnVuY3Rpb24oaykge1xuICAgICAgdmFyIGtzID0gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShrKSkgKyBlcTtcbiAgICAgIGlmIChpc0FycmF5KG9ialtrXSkpIHtcbiAgICAgICAgcmV0dXJuIG1hcChvYmpba10sIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKHYpKTtcbiAgICAgICAgfSkuam9pbihzZXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmpba10pKTtcbiAgICAgIH1cbiAgICB9KS5qb2luKHNlcCk7XG5cbiAgfVxuXG4gIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShuYW1lKSkgKyBlcSArXG4gICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9iaikpO1xufTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uICh4cykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHhzKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cbmZ1bmN0aW9uIG1hcCAoeHMsIGYpIHtcbiAgaWYgKHhzLm1hcCkgcmV0dXJuIHhzLm1hcChmKTtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgcmVzLnB1c2goZih4c1tpXSwgaSkpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIgcmVzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgcmVzLnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4gcmVzO1xufTtcbiIsIi8vIG1pbmltYWwgbGlicmFyeSBlbnRyeSBwb2ludC5cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL3NyYy9pbmRleC1taW5pbWFsXCIpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIHByb3RvYnVmID0gZXhwb3J0cztcclxuXHJcbi8qKlxyXG4gKiBCdWlsZCB0eXBlLCBvbmUgb2YgYFwiZnVsbFwiYCwgYFwibGlnaHRcImAgb3IgYFwibWluaW1hbFwiYC5cclxuICogQG5hbWUgYnVpbGRcclxuICogQHR5cGUge3N0cmluZ31cclxuICogQGNvbnN0XHJcbiAqL1xyXG5wcm90b2J1Zi5idWlsZCA9IFwibWluaW1hbFwiO1xyXG5cclxuLy8gU2VyaWFsaXphdGlvblxyXG5wcm90b2J1Zi5Xcml0ZXIgICAgICAgPSByZXF1aXJlKFwiLi93cml0ZXJcIik7XHJcbnByb3RvYnVmLkJ1ZmZlcldyaXRlciA9IHJlcXVpcmUoXCIuL3dyaXRlcl9idWZmZXJcIik7XHJcbnByb3RvYnVmLlJlYWRlciAgICAgICA9IHJlcXVpcmUoXCIuL3JlYWRlclwiKTtcclxucHJvdG9idWYuQnVmZmVyUmVhZGVyID0gcmVxdWlyZShcIi4vcmVhZGVyX2J1ZmZlclwiKTtcclxuXHJcbi8vIFV0aWxpdHlcclxucHJvdG9idWYudXRpbCAgICAgICAgID0gcmVxdWlyZShcIi4vdXRpbC9taW5pbWFsXCIpO1xyXG5wcm90b2J1Zi5ycGMgICAgICAgICAgPSByZXF1aXJlKFwiLi9ycGNcIik7XHJcbnByb3RvYnVmLnJvb3RzICAgICAgICA9IHJlcXVpcmUoXCIuL3Jvb3RzXCIpO1xyXG5wcm90b2J1Zi5jb25maWd1cmUgICAgPSBjb25maWd1cmU7XHJcblxyXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4vKipcclxuICogUmVjb25maWd1cmVzIHRoZSBsaWJyYXJ5IGFjY29yZGluZyB0byB0aGUgZW52aXJvbm1lbnQuXHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5mdW5jdGlvbiBjb25maWd1cmUoKSB7XHJcbiAgICBwcm90b2J1Zi51dGlsLl9jb25maWd1cmUoKTtcclxuICAgIHByb3RvYnVmLldyaXRlci5fY29uZmlndXJlKHByb3RvYnVmLkJ1ZmZlcldyaXRlcik7XHJcbiAgICBwcm90b2J1Zi5SZWFkZXIuX2NvbmZpZ3VyZShwcm90b2J1Zi5CdWZmZXJSZWFkZXIpO1xyXG59XHJcblxyXG4vLyBTZXQgdXAgYnVmZmVyIHV0aWxpdHkgYWNjb3JkaW5nIHRvIHRoZSBlbnZpcm9ubWVudFxyXG5jb25maWd1cmUoKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbm1vZHVsZS5leHBvcnRzID0gYXNQcm9taXNlO1xyXG5cclxuLyoqXHJcbiAqIENhbGxiYWNrIGFzIHVzZWQgYnkge0BsaW5rIHV0aWwuYXNQcm9taXNlfS5cclxuICogQHR5cGVkZWYgYXNQcm9taXNlQ2FsbGJhY2tcclxuICogQHR5cGUge2Z1bmN0aW9ufVxyXG4gKiBAcGFyYW0ge0Vycm9yfG51bGx9IGVycm9yIEVycm9yLCBpZiBhbnlcclxuICogQHBhcmFtIHsuLi4qfSBwYXJhbXMgQWRkaXRpb25hbCBhcmd1bWVudHNcclxuICogQHJldHVybnMge3VuZGVmaW5lZH1cclxuICovXHJcblxyXG4vKipcclxuICogUmV0dXJucyBhIHByb21pc2UgZnJvbSBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAqIEBtZW1iZXJvZiB1dGlsXHJcbiAqIEBwYXJhbSB7YXNQcm9taXNlQ2FsbGJhY2t9IGZuIEZ1bmN0aW9uIHRvIGNhbGxcclxuICogQHBhcmFtIHsqfSBjdHggRnVuY3Rpb24gY29udGV4dFxyXG4gKiBAcGFyYW0gey4uLip9IHBhcmFtcyBGdW5jdGlvbiBhcmd1bWVudHNcclxuICogQHJldHVybnMge1Byb21pc2U8Kj59IFByb21pc2lmaWVkIGZ1bmN0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBhc1Byb21pc2UoZm4sIGN0eC8qLCB2YXJhcmdzICovKSB7XHJcbiAgICB2YXIgcGFyYW1zICA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSksXHJcbiAgICAgICAgb2Zmc2V0ICA9IDAsXHJcbiAgICAgICAgaW5kZXggICA9IDIsXHJcbiAgICAgICAgcGVuZGluZyA9IHRydWU7XHJcbiAgICB3aGlsZSAoaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoKVxyXG4gICAgICAgIHBhcmFtc1tvZmZzZXQrK10gPSBhcmd1bWVudHNbaW5kZXgrK107XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgcGFyYW1zW29mZnNldF0gPSBmdW5jdGlvbiBjYWxsYmFjayhlcnIvKiwgdmFyYXJncyAqLykge1xyXG4gICAgICAgICAgICBpZiAocGVuZGluZykge1xyXG4gICAgICAgICAgICAgICAgcGVuZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycilcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChvZmZzZXQgPCBwYXJhbXMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNbb2Zmc2V0KytdID0gYXJndW1lbnRzW29mZnNldF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZS5hcHBseShudWxsLCBwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBmbi5hcHBseShjdHggfHwgbnVsbCwgcGFyYW1zKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgaWYgKHBlbmRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHBlbmRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogQSBtaW5pbWFsIGJhc2U2NCBpbXBsZW1lbnRhdGlvbiBmb3IgbnVtYmVyIGFycmF5cy5cclxuICogQG1lbWJlcm9mIHV0aWxcclxuICogQG5hbWVzcGFjZVxyXG4gKi9cclxudmFyIGJhc2U2NCA9IGV4cG9ydHM7XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgYnl0ZSBsZW5ndGggb2YgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgQmFzZTY0IGVuY29kZWQgc3RyaW5nXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IEJ5dGUgbGVuZ3RoXHJcbiAqL1xyXG5iYXNlNjQubGVuZ3RoID0gZnVuY3Rpb24gbGVuZ3RoKHN0cmluZykge1xyXG4gICAgdmFyIHAgPSBzdHJpbmcubGVuZ3RoO1xyXG4gICAgaWYgKCFwKVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgdmFyIG4gPSAwO1xyXG4gICAgd2hpbGUgKC0tcCAlIDQgPiAxICYmIHN0cmluZy5jaGFyQXQocCkgPT09IFwiPVwiKVxyXG4gICAgICAgICsrbjtcclxuICAgIHJldHVybiBNYXRoLmNlaWwoc3RyaW5nLmxlbmd0aCAqIDMpIC8gNCAtIG47XHJcbn07XHJcblxyXG4vLyBCYXNlNjQgZW5jb2RpbmcgdGFibGVcclxudmFyIGI2NCA9IG5ldyBBcnJheSg2NCk7XHJcblxyXG4vLyBCYXNlNjQgZGVjb2RpbmcgdGFibGVcclxudmFyIHM2NCA9IG5ldyBBcnJheSgxMjMpO1xyXG5cclxuLy8gNjUuLjkwLCA5Ny4uMTIyLCA0OC4uNTcsIDQzLCA0N1xyXG5mb3IgKHZhciBpID0gMDsgaSA8IDY0OylcclxuICAgIHM2NFtiNjRbaV0gPSBpIDwgMjYgPyBpICsgNjUgOiBpIDwgNTIgPyBpICsgNzEgOiBpIDwgNjIgPyBpIC0gNCA6IGkgLSA1OSB8IDQzXSA9IGkrKztcclxuXHJcbi8qKlxyXG4gKiBFbmNvZGVzIGEgYnVmZmVyIHRvIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBTb3VyY2UgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBTb3VyY2Ugc3RhcnRcclxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBTb3VyY2UgZW5kXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEJhc2U2NCBlbmNvZGVkIHN0cmluZ1xyXG4gKi9cclxuYmFzZTY0LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShidWZmZXIsIHN0YXJ0LCBlbmQpIHtcclxuICAgIHZhciBwYXJ0cyA9IG51bGwsXHJcbiAgICAgICAgY2h1bmsgPSBbXTtcclxuICAgIHZhciBpID0gMCwgLy8gb3V0cHV0IGluZGV4XHJcbiAgICAgICAgaiA9IDAsIC8vIGdvdG8gaW5kZXhcclxuICAgICAgICB0OyAgICAgLy8gdGVtcG9yYXJ5XHJcbiAgICB3aGlsZSAoc3RhcnQgPCBlbmQpIHtcclxuICAgICAgICB2YXIgYiA9IGJ1ZmZlcltzdGFydCsrXTtcclxuICAgICAgICBzd2l0Y2ggKGopIHtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgY2h1bmtbaSsrXSA9IGI2NFtiID4+IDJdO1xyXG4gICAgICAgICAgICAgICAgdCA9IChiICYgMykgPDwgNDtcclxuICAgICAgICAgICAgICAgIGogPSAxO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIGNodW5rW2krK10gPSBiNjRbdCB8IGIgPj4gNF07XHJcbiAgICAgICAgICAgICAgICB0ID0gKGIgJiAxNSkgPDwgMjtcclxuICAgICAgICAgICAgICAgIGogPSAyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIGNodW5rW2krK10gPSBiNjRbdCB8IGIgPj4gNl07XHJcbiAgICAgICAgICAgICAgICBjaHVua1tpKytdID0gYjY0W2IgJiA2M107XHJcbiAgICAgICAgICAgICAgICBqID0gMDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaSA+IDgxOTEpIHtcclxuICAgICAgICAgICAgKHBhcnRzIHx8IChwYXJ0cyA9IFtdKSkucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY2h1bmspKTtcclxuICAgICAgICAgICAgaSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGopIHtcclxuICAgICAgICBjaHVua1tpKytdID0gYjY0W3RdO1xyXG4gICAgICAgIGNodW5rW2krK10gPSA2MTtcclxuICAgICAgICBpZiAoaiA9PT0gMSlcclxuICAgICAgICAgICAgY2h1bmtbaSsrXSA9IDYxO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhcnRzKSB7XHJcbiAgICAgICAgaWYgKGkpXHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNodW5rLnNsaWNlKDAsIGkpKSk7XHJcbiAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oXCJcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNodW5rLnNsaWNlKDAsIGkpKTtcclxufTtcclxuXHJcbnZhciBpbnZhbGlkRW5jb2RpbmcgPSBcImludmFsaWQgZW5jb2RpbmdcIjtcclxuXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIGEgYnVmZmVyLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFNvdXJjZSBzdHJpbmdcclxuICogQHBhcmFtIHtVaW50OEFycmF5fSBidWZmZXIgRGVzdGluYXRpb24gYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgRGVzdGluYXRpb24gb2Zmc2V0XHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IE51bWJlciBvZiBieXRlcyB3cml0dGVuXHJcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBlbmNvZGluZyBpcyBpbnZhbGlkXHJcbiAqL1xyXG5iYXNlNjQuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHN0cmluZywgYnVmZmVyLCBvZmZzZXQpIHtcclxuICAgIHZhciBzdGFydCA9IG9mZnNldDtcclxuICAgIHZhciBqID0gMCwgLy8gZ290byBpbmRleFxyXG4gICAgICAgIHQ7ICAgICAvLyB0ZW1wb3JhcnlcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDspIHtcclxuICAgICAgICB2YXIgYyA9IHN0cmluZy5jaGFyQ29kZUF0KGkrKyk7XHJcbiAgICAgICAgaWYgKGMgPT09IDYxICYmIGogPiAxKVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBpZiAoKGMgPSBzNjRbY10pID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGludmFsaWRFbmNvZGluZyk7XHJcbiAgICAgICAgc3dpdGNoIChqKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgIHQgPSBjO1xyXG4gICAgICAgICAgICAgICAgaiA9IDE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IHQgPDwgMiB8IChjICYgNDgpID4+IDQ7XHJcbiAgICAgICAgICAgICAgICB0ID0gYztcclxuICAgICAgICAgICAgICAgIGogPSAyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSAodCAmIDE1KSA8PCA0IHwgKGMgJiA2MCkgPj4gMjtcclxuICAgICAgICAgICAgICAgIHQgPSBjO1xyXG4gICAgICAgICAgICAgICAgaiA9IDM7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9ICh0ICYgMykgPDwgNiB8IGM7XHJcbiAgICAgICAgICAgICAgICBqID0gMDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChqID09PSAxKVxyXG4gICAgICAgIHRocm93IEVycm9yKGludmFsaWRFbmNvZGluZyk7XHJcbiAgICByZXR1cm4gb2Zmc2V0IC0gc3RhcnQ7XHJcbn07XHJcblxyXG4vKipcclxuICogVGVzdHMgaWYgdGhlIHNwZWNpZmllZCBzdHJpbmcgYXBwZWFycyB0byBiZSBiYXNlNjQgZW5jb2RlZC5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBTdHJpbmcgdG8gdGVzdFxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHByb2JhYmx5IGJhc2U2NCBlbmNvZGVkLCBvdGhlcndpc2UgZmFsc2VcclxuICovXHJcbmJhc2U2NC50ZXN0ID0gZnVuY3Rpb24gdGVzdChzdHJpbmcpIHtcclxuICAgIHJldHVybiAvXig/OltBLVphLXowLTkrL117NH0pKig/OltBLVphLXowLTkrL117Mn09PXxbQS1aYS16MC05Ky9dezN9PSk/JC8udGVzdChzdHJpbmcpO1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBhIG5ldyBldmVudCBlbWl0dGVyIGluc3RhbmNlLlxyXG4gKiBAY2xhc3NkZXNjIEEgbWluaW1hbCBldmVudCBlbWl0dGVyLlxyXG4gKiBAbWVtYmVyb2YgdXRpbFxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxyXG4gICAgICogQHR5cGUge09iamVjdC48c3RyaW5nLCo+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBldnQgRXZlbnQgbmFtZVxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiBMaXN0ZW5lclxyXG4gKiBAcGFyYW0geyp9IFtjdHhdIExpc3RlbmVyIGNvbnRleHRcclxuICogQHJldHVybnMge3V0aWwuRXZlbnRFbWl0dGVyfSBgdGhpc2BcclxuICovXHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldnQsIGZuLCBjdHgpIHtcclxuICAgICh0aGlzLl9saXN0ZW5lcnNbZXZ0XSB8fCAodGhpcy5fbGlzdGVuZXJzW2V2dF0gPSBbXSkpLnB1c2goe1xyXG4gICAgICAgIGZuICA6IGZuLFxyXG4gICAgICAgIGN0eCA6IGN0eCB8fCB0aGlzXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZXMgYW4gZXZlbnQgbGlzdGVuZXIgb3IgYW55IG1hdGNoaW5nIGxpc3RlbmVycyBpZiBhcmd1bWVudHMgYXJlIG9taXR0ZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZXZ0XSBFdmVudCBuYW1lLiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMgaWYgb21pdHRlZC5cclxuICogQHBhcmFtIHtmdW5jdGlvbn0gW2ZuXSBMaXN0ZW5lciB0byByZW1vdmUuIFJlbW92ZXMgYWxsIGxpc3RlbmVycyBvZiBgZXZ0YCBpZiBvbWl0dGVkLlxyXG4gKiBAcmV0dXJucyB7dXRpbC5FdmVudEVtaXR0ZXJ9IGB0aGlzYFxyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiBvZmYoZXZ0LCBmbikge1xyXG4gICAgaWYgKGV2dCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKGZuID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVyc1tldnRdID0gW107XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbZXZ0XTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOylcclxuICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lcnNbaV0uZm4gPT09IGZuKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgKytpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEVtaXRzIGFuIGV2ZW50IGJ5IGNhbGxpbmcgaXRzIGxpc3RlbmVycyB3aXRoIHRoZSBzcGVjaWZpZWQgYXJndW1lbnRzLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZ0IEV2ZW50IG5hbWVcclxuICogQHBhcmFtIHsuLi4qfSBhcmdzIEFyZ3VtZW50c1xyXG4gKiBAcmV0dXJucyB7dXRpbC5FdmVudEVtaXR0ZXJ9IGB0aGlzYFxyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdChldnQpIHtcclxuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbZXZ0XTtcclxuICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdLFxyXG4gICAgICAgICAgICBpID0gMTtcclxuICAgICAgICBmb3IgKDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7KVxyXG4gICAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOylcclxuICAgICAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmFwcGx5KGxpc3RlbmVyc1tpKytdLmN0eCwgYXJncyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoZmFjdG9yeSk7XHJcblxyXG4vKipcclxuICogUmVhZHMgLyB3cml0ZXMgZmxvYXRzIC8gZG91YmxlcyBmcm9tIC8gdG8gYnVmZmVycy5cclxuICogQG5hbWUgdXRpbC5mbG9hdFxyXG4gKiBAbmFtZXNwYWNlXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFdyaXRlcyBhIDMyIGJpdCBmbG9hdCB0byBhIGJ1ZmZlciB1c2luZyBsaXR0bGUgZW5kaWFuIGJ5dGUgb3JkZXIuXHJcbiAqIEBuYW1lIHV0aWwuZmxvYXQud3JpdGVGbG9hdExFXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsIFZhbHVlIHRvIHdyaXRlXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmIFRhcmdldCBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHBvcyBUYXJnZXQgYnVmZmVyIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSAzMiBiaXQgZmxvYXQgdG8gYSBidWZmZXIgdXNpbmcgYmlnIGVuZGlhbiBieXRlIG9yZGVyLlxyXG4gKiBAbmFtZSB1dGlsLmZsb2F0LndyaXRlRmxvYXRCRVxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbCBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZiBUYXJnZXQgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgVGFyZ2V0IGJ1ZmZlciBvZmZzZXRcclxuICogQHJldHVybnMge3VuZGVmaW5lZH1cclxuICovXHJcblxyXG4vKipcclxuICogUmVhZHMgYSAzMiBiaXQgZmxvYXQgZnJvbSBhIGJ1ZmZlciB1c2luZyBsaXR0bGUgZW5kaWFuIGJ5dGUgb3JkZXIuXHJcbiAqIEBuYW1lIHV0aWwuZmxvYXQucmVhZEZsb2F0TEVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmIFNvdXJjZSBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHBvcyBTb3VyY2UgYnVmZmVyIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgMzIgYml0IGZsb2F0IGZyb20gYSBidWZmZXIgdXNpbmcgYmlnIGVuZGlhbiBieXRlIG9yZGVyLlxyXG4gKiBAbmFtZSB1dGlsLmZsb2F0LnJlYWRGbG9hdEJFXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZiBTb3VyY2UgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgU291cmNlIGJ1ZmZlciBvZmZzZXRcclxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSA2NCBiaXQgZG91YmxlIHRvIGEgYnVmZmVyIHVzaW5nIGxpdHRsZSBlbmRpYW4gYnl0ZSBvcmRlci5cclxuICogQG5hbWUgdXRpbC5mbG9hdC53cml0ZURvdWJsZUxFXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsIFZhbHVlIHRvIHdyaXRlXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmIFRhcmdldCBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHBvcyBUYXJnZXQgYnVmZmVyIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSA2NCBiaXQgZG91YmxlIHRvIGEgYnVmZmVyIHVzaW5nIGJpZyBlbmRpYW4gYnl0ZSBvcmRlci5cclxuICogQG5hbWUgdXRpbC5mbG9hdC53cml0ZURvdWJsZUJFXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsIFZhbHVlIHRvIHdyaXRlXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmIFRhcmdldCBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHBvcyBUYXJnZXQgYnVmZmVyIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBhIDY0IGJpdCBkb3VibGUgZnJvbSBhIGJ1ZmZlciB1c2luZyBsaXR0bGUgZW5kaWFuIGJ5dGUgb3JkZXIuXHJcbiAqIEBuYW1lIHV0aWwuZmxvYXQucmVhZERvdWJsZUxFXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZiBTb3VyY2UgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgU291cmNlIGJ1ZmZlciBvZmZzZXRcclxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBhIDY0IGJpdCBkb3VibGUgZnJvbSBhIGJ1ZmZlciB1c2luZyBiaWcgZW5kaWFuIGJ5dGUgb3JkZXIuXHJcbiAqIEBuYW1lIHV0aWwuZmxvYXQucmVhZERvdWJsZUJFXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZiBTb3VyY2UgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgU291cmNlIGJ1ZmZlciBvZmZzZXRcclxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxyXG4gKi9cclxuXHJcbi8vIEZhY3RvcnkgZnVuY3Rpb24gZm9yIHRoZSBwdXJwb3NlIG9mIG5vZGUtYmFzZWQgdGVzdGluZyBpbiBtb2RpZmllZCBnbG9iYWwgZW52aXJvbm1lbnRzXHJcbmZ1bmN0aW9uIGZhY3RvcnkoZXhwb3J0cykge1xyXG5cclxuICAgIC8vIGZsb2F0OiB0eXBlZCBhcnJheVxyXG4gICAgaWYgKHR5cGVvZiBGbG9hdDMyQXJyYXkgIT09IFwidW5kZWZpbmVkXCIpIChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIGYzMiA9IG5ldyBGbG9hdDMyQXJyYXkoWyAtMCBdKSxcclxuICAgICAgICAgICAgZjhiID0gbmV3IFVpbnQ4QXJyYXkoZjMyLmJ1ZmZlciksXHJcbiAgICAgICAgICAgIGxlICA9IGY4YlszXSA9PT0gMTI4O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB3cml0ZUZsb2F0X2YzMl9jcHkodmFsLCBidWYsIHBvcykge1xyXG4gICAgICAgICAgICBmMzJbMF0gPSB2YWw7XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgICAgXSA9IGY4YlswXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDFdID0gZjhiWzFdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgMl0gPSBmOGJbMl07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAzXSA9IGY4YlszXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyaXRlRmxvYXRfZjMyX3Jldih2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIGYzMlswXSA9IHZhbDtcclxuICAgICAgICAgICAgYnVmW3BvcyAgICBdID0gZjhiWzNdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgMV0gPSBmOGJbMl07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAyXSA9IGY4YlsxXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDNdID0gZjhiWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBleHBvcnRzLndyaXRlRmxvYXRMRSA9IGxlID8gd3JpdGVGbG9hdF9mMzJfY3B5IDogd3JpdGVGbG9hdF9mMzJfcmV2O1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgZXhwb3J0cy53cml0ZUZsb2F0QkUgPSBsZSA/IHdyaXRlRmxvYXRfZjMyX3JldiA6IHdyaXRlRmxvYXRfZjMyX2NweTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVhZEZsb2F0X2YzMl9jcHkoYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgZjhiWzBdID0gYnVmW3BvcyAgICBdO1xyXG4gICAgICAgICAgICBmOGJbMV0gPSBidWZbcG9zICsgMV07XHJcbiAgICAgICAgICAgIGY4YlsyXSA9IGJ1Zltwb3MgKyAyXTtcclxuICAgICAgICAgICAgZjhiWzNdID0gYnVmW3BvcyArIDNdO1xyXG4gICAgICAgICAgICByZXR1cm4gZjMyWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVhZEZsb2F0X2YzMl9yZXYoYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgZjhiWzNdID0gYnVmW3BvcyAgICBdO1xyXG4gICAgICAgICAgICBmOGJbMl0gPSBidWZbcG9zICsgMV07XHJcbiAgICAgICAgICAgIGY4YlsxXSA9IGJ1Zltwb3MgKyAyXTtcclxuICAgICAgICAgICAgZjhiWzBdID0gYnVmW3BvcyArIDNdO1xyXG4gICAgICAgICAgICByZXR1cm4gZjMyWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBleHBvcnRzLnJlYWRGbG9hdExFID0gbGUgPyByZWFkRmxvYXRfZjMyX2NweSA6IHJlYWRGbG9hdF9mMzJfcmV2O1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgZXhwb3J0cy5yZWFkRmxvYXRCRSA9IGxlID8gcmVhZEZsb2F0X2YzMl9yZXYgOiByZWFkRmxvYXRfZjMyX2NweTtcclxuXHJcbiAgICAvLyBmbG9hdDogaWVlZTc1NFxyXG4gICAgfSkoKTsgZWxzZSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyaXRlRmxvYXRfaWVlZTc1NCh3cml0ZVVpbnQsIHZhbCwgYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgdmFyIHNpZ24gPSB2YWwgPCAwID8gMSA6IDA7XHJcbiAgICAgICAgICAgIGlmIChzaWduKVxyXG4gICAgICAgICAgICAgICAgdmFsID0gLXZhbDtcclxuICAgICAgICAgICAgaWYgKHZhbCA9PT0gMClcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgxIC8gdmFsID4gMCA/IC8qIHBvc2l0aXZlICovIDAgOiAvKiBuZWdhdGl2ZSAwICovIDIxNDc0ODM2NDgsIGJ1ZiwgcG9zKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNOYU4odmFsKSlcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgyMTQzMjg5MzQ0LCBidWYsIHBvcyk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbCA+IDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpIC8vICstSW5maW5pdHlcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgoc2lnbiA8PCAzMSB8IDIxMzkwOTUwNDApID4+PiAwLCBidWYsIHBvcyk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbCA8IDEuMTc1NDk0MzUwODIyMjg3NWUtMzgpIC8vIGRlbm9ybWFsXHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoKHNpZ24gPDwgMzEgfCBNYXRoLnJvdW5kKHZhbCAvIDEuNDAxMjk4NDY0MzI0ODE3ZS00NSkpID4+PiAwLCBidWYsIHBvcyk7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4cG9uZW50ID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWwpIC8gTWF0aC5MTjIpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hbnRpc3NhID0gTWF0aC5yb3VuZCh2YWwgKiBNYXRoLnBvdygyLCAtZXhwb25lbnQpICogODM4ODYwOCkgJiA4Mzg4NjA3O1xyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KChzaWduIDw8IDMxIHwgZXhwb25lbnQgKyAxMjcgPDwgMjMgfCBtYW50aXNzYSkgPj4+IDAsIGJ1ZiwgcG9zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0cy53cml0ZUZsb2F0TEUgPSB3cml0ZUZsb2F0X2llZWU3NTQuYmluZChudWxsLCB3cml0ZVVpbnRMRSk7XHJcbiAgICAgICAgZXhwb3J0cy53cml0ZUZsb2F0QkUgPSB3cml0ZUZsb2F0X2llZWU3NTQuYmluZChudWxsLCB3cml0ZVVpbnRCRSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlYWRGbG9hdF9pZWVlNzU0KHJlYWRVaW50LCBidWYsIHBvcykge1xyXG4gICAgICAgICAgICB2YXIgdWludCA9IHJlYWRVaW50KGJ1ZiwgcG9zKSxcclxuICAgICAgICAgICAgICAgIHNpZ24gPSAodWludCA+PiAzMSkgKiAyICsgMSxcclxuICAgICAgICAgICAgICAgIGV4cG9uZW50ID0gdWludCA+Pj4gMjMgJiAyNTUsXHJcbiAgICAgICAgICAgICAgICBtYW50aXNzYSA9IHVpbnQgJiA4Mzg4NjA3O1xyXG4gICAgICAgICAgICByZXR1cm4gZXhwb25lbnQgPT09IDI1NVxyXG4gICAgICAgICAgICAgICAgPyBtYW50aXNzYVxyXG4gICAgICAgICAgICAgICAgPyBOYU5cclxuICAgICAgICAgICAgICAgIDogc2lnbiAqIEluZmluaXR5XHJcbiAgICAgICAgICAgICAgICA6IGV4cG9uZW50ID09PSAwIC8vIGRlbm9ybWFsXHJcbiAgICAgICAgICAgICAgICA/IHNpZ24gKiAxLjQwMTI5ODQ2NDMyNDgxN2UtNDUgKiBtYW50aXNzYVxyXG4gICAgICAgICAgICAgICAgOiBzaWduICogTWF0aC5wb3coMiwgZXhwb25lbnQgLSAxNTApICogKG1hbnRpc3NhICsgODM4ODYwOCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHBvcnRzLnJlYWRGbG9hdExFID0gcmVhZEZsb2F0X2llZWU3NTQuYmluZChudWxsLCByZWFkVWludExFKTtcclxuICAgICAgICBleHBvcnRzLnJlYWRGbG9hdEJFID0gcmVhZEZsb2F0X2llZWU3NTQuYmluZChudWxsLCByZWFkVWludEJFKTtcclxuXHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8vIGRvdWJsZTogdHlwZWQgYXJyYXlcclxuICAgIGlmICh0eXBlb2YgRmxvYXQ2NEFycmF5ICE9PSBcInVuZGVmaW5lZFwiKSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBmNjQgPSBuZXcgRmxvYXQ2NEFycmF5KFstMF0pLFxyXG4gICAgICAgICAgICBmOGIgPSBuZXcgVWludDhBcnJheShmNjQuYnVmZmVyKSxcclxuICAgICAgICAgICAgbGUgID0gZjhiWzddID09PSAxMjg7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyaXRlRG91YmxlX2Y2NF9jcHkodmFsLCBidWYsIHBvcykge1xyXG4gICAgICAgICAgICBmNjRbMF0gPSB2YWw7XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgICAgXSA9IGY4YlswXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDFdID0gZjhiWzFdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgMl0gPSBmOGJbMl07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAzXSA9IGY4YlszXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDRdID0gZjhiWzRdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgNV0gPSBmOGJbNV07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyA2XSA9IGY4Yls2XTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDddID0gZjhiWzddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd3JpdGVEb3VibGVfZjY0X3Jldih2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIGY2NFswXSA9IHZhbDtcclxuICAgICAgICAgICAgYnVmW3BvcyAgICBdID0gZjhiWzddO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgMV0gPSBmOGJbNl07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAyXSA9IGY4Yls1XTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDNdID0gZjhiWzRdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgNF0gPSBmOGJbM107XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyA1XSA9IGY4YlsyXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDZdID0gZjhiWzFdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgN10gPSBmOGJbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIGV4cG9ydHMud3JpdGVEb3VibGVMRSA9IGxlID8gd3JpdGVEb3VibGVfZjY0X2NweSA6IHdyaXRlRG91YmxlX2Y2NF9yZXY7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBleHBvcnRzLndyaXRlRG91YmxlQkUgPSBsZSA/IHdyaXRlRG91YmxlX2Y2NF9yZXYgOiB3cml0ZURvdWJsZV9mNjRfY3B5O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWFkRG91YmxlX2Y2NF9jcHkoYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgZjhiWzBdID0gYnVmW3BvcyAgICBdO1xyXG4gICAgICAgICAgICBmOGJbMV0gPSBidWZbcG9zICsgMV07XHJcbiAgICAgICAgICAgIGY4YlsyXSA9IGJ1Zltwb3MgKyAyXTtcclxuICAgICAgICAgICAgZjhiWzNdID0gYnVmW3BvcyArIDNdO1xyXG4gICAgICAgICAgICBmOGJbNF0gPSBidWZbcG9zICsgNF07XHJcbiAgICAgICAgICAgIGY4Yls1XSA9IGJ1Zltwb3MgKyA1XTtcclxuICAgICAgICAgICAgZjhiWzZdID0gYnVmW3BvcyArIDZdO1xyXG4gICAgICAgICAgICBmOGJbN10gPSBidWZbcG9zICsgN107XHJcbiAgICAgICAgICAgIHJldHVybiBmNjRbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWFkRG91YmxlX2Y2NF9yZXYoYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgZjhiWzddID0gYnVmW3BvcyAgICBdO1xyXG4gICAgICAgICAgICBmOGJbNl0gPSBidWZbcG9zICsgMV07XHJcbiAgICAgICAgICAgIGY4Yls1XSA9IGJ1Zltwb3MgKyAyXTtcclxuICAgICAgICAgICAgZjhiWzRdID0gYnVmW3BvcyArIDNdO1xyXG4gICAgICAgICAgICBmOGJbM10gPSBidWZbcG9zICsgNF07XHJcbiAgICAgICAgICAgIGY4YlsyXSA9IGJ1Zltwb3MgKyA1XTtcclxuICAgICAgICAgICAgZjhiWzFdID0gYnVmW3BvcyArIDZdO1xyXG4gICAgICAgICAgICBmOGJbMF0gPSBidWZbcG9zICsgN107XHJcbiAgICAgICAgICAgIHJldHVybiBmNjRbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIGV4cG9ydHMucmVhZERvdWJsZUxFID0gbGUgPyByZWFkRG91YmxlX2Y2NF9jcHkgOiByZWFkRG91YmxlX2Y2NF9yZXY7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBleHBvcnRzLnJlYWREb3VibGVCRSA9IGxlID8gcmVhZERvdWJsZV9mNjRfcmV2IDogcmVhZERvdWJsZV9mNjRfY3B5O1xyXG5cclxuICAgIC8vIGRvdWJsZTogaWVlZTc1NFxyXG4gICAgfSkoKTsgZWxzZSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyaXRlRG91YmxlX2llZWU3NTQod3JpdGVVaW50LCBvZmYwLCBvZmYxLCB2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIHZhciBzaWduID0gdmFsIDwgMCA/IDEgOiAwO1xyXG4gICAgICAgICAgICBpZiAoc2lnbilcclxuICAgICAgICAgICAgICAgIHZhbCA9IC12YWw7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgwLCBidWYsIHBvcyArIG9mZjApO1xyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KDEgLyB2YWwgPiAwID8gLyogcG9zaXRpdmUgKi8gMCA6IC8qIG5lZ2F0aXZlIDAgKi8gMjE0NzQ4MzY0OCwgYnVmLCBwb3MgKyBvZmYxKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc05hTih2YWwpKSB7XHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoMCwgYnVmLCBwb3MgKyBvZmYwKTtcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgyMTQ2OTU5MzYwLCBidWYsIHBvcyArIG9mZjEpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbCA+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4KSB7IC8vICstSW5maW5pdHlcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgwLCBidWYsIHBvcyArIG9mZjApO1xyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KChzaWduIDw8IDMxIHwgMjE0NjQzNTA3MikgPj4+IDAsIGJ1ZiwgcG9zICsgb2ZmMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFudGlzc2E7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsIDwgMi4yMjUwNzM4NTg1MDcyMDE0ZS0zMDgpIHsgLy8gZGVub3JtYWxcclxuICAgICAgICAgICAgICAgICAgICBtYW50aXNzYSA9IHZhbCAvIDVlLTMyNDtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVVpbnQobWFudGlzc2EgPj4+IDAsIGJ1ZiwgcG9zICsgb2ZmMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVVaW50KChzaWduIDw8IDMxIHwgbWFudGlzc2EgLyA0Mjk0OTY3Mjk2KSA+Pj4gMCwgYnVmLCBwb3MgKyBvZmYxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4cG9uZW50ID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWwpIC8gTWF0aC5MTjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvbmVudCA9PT0gMTAyNClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb25lbnQgPSAxMDIzO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbnRpc3NhID0gdmFsICogTWF0aC5wb3coMiwgLWV4cG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVVpbnQobWFudGlzc2EgKiA0NTAzNTk5NjI3MzcwNDk2ID4+PiAwLCBidWYsIHBvcyArIG9mZjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlVWludCgoc2lnbiA8PCAzMSB8IGV4cG9uZW50ICsgMTAyMyA8PCAyMCB8IG1hbnRpc3NhICogMTA0ODU3NiAmIDEwNDg1NzUpID4+PiAwLCBidWYsIHBvcyArIG9mZjEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHBvcnRzLndyaXRlRG91YmxlTEUgPSB3cml0ZURvdWJsZV9pZWVlNzU0LmJpbmQobnVsbCwgd3JpdGVVaW50TEUsIDAsIDQpO1xyXG4gICAgICAgIGV4cG9ydHMud3JpdGVEb3VibGVCRSA9IHdyaXRlRG91YmxlX2llZWU3NTQuYmluZChudWxsLCB3cml0ZVVpbnRCRSwgNCwgMCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlYWREb3VibGVfaWVlZTc1NChyZWFkVWludCwgb2ZmMCwgb2ZmMSwgYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgdmFyIGxvID0gcmVhZFVpbnQoYnVmLCBwb3MgKyBvZmYwKSxcclxuICAgICAgICAgICAgICAgIGhpID0gcmVhZFVpbnQoYnVmLCBwb3MgKyBvZmYxKTtcclxuICAgICAgICAgICAgdmFyIHNpZ24gPSAoaGkgPj4gMzEpICogMiArIDEsXHJcbiAgICAgICAgICAgICAgICBleHBvbmVudCA9IGhpID4+PiAyMCAmIDIwNDcsXHJcbiAgICAgICAgICAgICAgICBtYW50aXNzYSA9IDQyOTQ5NjcyOTYgKiAoaGkgJiAxMDQ4NTc1KSArIGxvO1xyXG4gICAgICAgICAgICByZXR1cm4gZXhwb25lbnQgPT09IDIwNDdcclxuICAgICAgICAgICAgICAgID8gbWFudGlzc2FcclxuICAgICAgICAgICAgICAgID8gTmFOXHJcbiAgICAgICAgICAgICAgICA6IHNpZ24gKiBJbmZpbml0eVxyXG4gICAgICAgICAgICAgICAgOiBleHBvbmVudCA9PT0gMCAvLyBkZW5vcm1hbFxyXG4gICAgICAgICAgICAgICAgPyBzaWduICogNWUtMzI0ICogbWFudGlzc2FcclxuICAgICAgICAgICAgICAgIDogc2lnbiAqIE1hdGgucG93KDIsIGV4cG9uZW50IC0gMTA3NSkgKiAobWFudGlzc2EgKyA0NTAzNTk5NjI3MzcwNDk2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV4cG9ydHMucmVhZERvdWJsZUxFID0gcmVhZERvdWJsZV9pZWVlNzU0LmJpbmQobnVsbCwgcmVhZFVpbnRMRSwgMCwgNCk7XHJcbiAgICAgICAgZXhwb3J0cy5yZWFkRG91YmxlQkUgPSByZWFkRG91YmxlX2llZWU3NTQuYmluZChudWxsLCByZWFkVWludEJFLCA0LCAwKTtcclxuXHJcbiAgICB9KSgpO1xyXG5cclxuICAgIHJldHVybiBleHBvcnRzO1xyXG59XHJcblxyXG4vLyB1aW50IGhlbHBlcnNcclxuXHJcbmZ1bmN0aW9uIHdyaXRlVWludExFKHZhbCwgYnVmLCBwb3MpIHtcclxuICAgIGJ1Zltwb3MgICAgXSA9ICB2YWwgICAgICAgICYgMjU1O1xyXG4gICAgYnVmW3BvcyArIDFdID0gIHZhbCA+Pj4gOCAgJiAyNTU7XHJcbiAgICBidWZbcG9zICsgMl0gPSAgdmFsID4+PiAxNiAmIDI1NTtcclxuICAgIGJ1Zltwb3MgKyAzXSA9ICB2YWwgPj4+IDI0O1xyXG59XHJcblxyXG5mdW5jdGlvbiB3cml0ZVVpbnRCRSh2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICBidWZbcG9zICAgIF0gPSAgdmFsID4+PiAyNDtcclxuICAgIGJ1Zltwb3MgKyAxXSA9ICB2YWwgPj4+IDE2ICYgMjU1O1xyXG4gICAgYnVmW3BvcyArIDJdID0gIHZhbCA+Pj4gOCAgJiAyNTU7XHJcbiAgICBidWZbcG9zICsgM10gPSAgdmFsICAgICAgICAmIDI1NTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZFVpbnRMRShidWYsIHBvcykge1xyXG4gICAgcmV0dXJuIChidWZbcG9zICAgIF1cclxuICAgICAgICAgIHwgYnVmW3BvcyArIDFdIDw8IDhcclxuICAgICAgICAgIHwgYnVmW3BvcyArIDJdIDw8IDE2XHJcbiAgICAgICAgICB8IGJ1Zltwb3MgKyAzXSA8PCAyNCkgPj4+IDA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWRVaW50QkUoYnVmLCBwb3MpIHtcclxuICAgIHJldHVybiAoYnVmW3BvcyAgICBdIDw8IDI0XHJcbiAgICAgICAgICB8IGJ1Zltwb3MgKyAxXSA8PCAxNlxyXG4gICAgICAgICAgfCBidWZbcG9zICsgMl0gPDwgOFxyXG4gICAgICAgICAgfCBidWZbcG9zICsgM10pID4+PiAwO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5tb2R1bGUuZXhwb3J0cyA9IGlucXVpcmU7XHJcblxyXG4vKipcclxuICogUmVxdWlyZXMgYSBtb2R1bGUgb25seSBpZiBhdmFpbGFibGUuXHJcbiAqIEBtZW1iZXJvZiB1dGlsXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVOYW1lIE1vZHVsZSB0byByZXF1aXJlXHJcbiAqIEByZXR1cm5zIHs/T2JqZWN0fSBSZXF1aXJlZCBtb2R1bGUgaWYgYXZhaWxhYmxlIGFuZCBub3QgZW1wdHksIG90aGVyd2lzZSBgbnVsbGBcclxuICovXHJcbmZ1bmN0aW9uIGlucXVpcmUobW9kdWxlTmFtZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB2YXIgbW9kID0gZXZhbChcInF1aXJlXCIucmVwbGFjZSgvXi8sXCJyZVwiKSkobW9kdWxlTmFtZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZXZhbFxyXG4gICAgICAgIGlmIChtb2QgJiYgKG1vZC5sZW5ndGggfHwgT2JqZWN0LmtleXMobW9kKS5sZW5ndGgpKVxyXG4gICAgICAgICAgICByZXR1cm4gbW9kO1xyXG4gICAgfSBjYXRjaCAoZSkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lbXB0eVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogQSBtaW5pbWFsIFVURjggaW1wbGVtZW50YXRpb24gZm9yIG51bWJlciBhcnJheXMuXHJcbiAqIEBtZW1iZXJvZiB1dGlsXHJcbiAqIEBuYW1lc3BhY2VcclxuICovXHJcbnZhciB1dGY4ID0gZXhwb3J0cztcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBVVEY4IGJ5dGUgbGVuZ3RoIG9mIGEgc3RyaW5nLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZ1xyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBCeXRlIGxlbmd0aFxyXG4gKi9cclxudXRmOC5sZW5ndGggPSBmdW5jdGlvbiB1dGY4X2xlbmd0aChzdHJpbmcpIHtcclxuICAgIHZhciBsZW4gPSAwLFxyXG4gICAgICAgIGMgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjID0gc3RyaW5nLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpXHJcbiAgICAgICAgICAgIGxlbiArPSAxO1xyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KVxyXG4gICAgICAgICAgICBsZW4gKz0gMjtcclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4RkMwMCkgPT09IDB4RDgwMCAmJiAoc3RyaW5nLmNoYXJDb2RlQXQoaSArIDEpICYgMHhGQzAwKSA9PT0gMHhEQzAwKSB7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgbGVuICs9IDQ7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIGxlbiArPSAzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlbjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBVVEY4IGJ5dGVzIGFzIGEgc3RyaW5nLlxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBTb3VyY2UgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBTb3VyY2Ugc3RhcnRcclxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBTb3VyY2UgZW5kXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFN0cmluZyByZWFkXHJcbiAqL1xyXG51dGY4LnJlYWQgPSBmdW5jdGlvbiB1dGY4X3JlYWQoYnVmZmVyLCBzdGFydCwgZW5kKSB7XHJcbiAgICB2YXIgbGVuID0gZW5kIC0gc3RhcnQ7XHJcbiAgICBpZiAobGVuIDwgMSlcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIHZhciBwYXJ0cyA9IG51bGwsXHJcbiAgICAgICAgY2h1bmsgPSBbXSxcclxuICAgICAgICBpID0gMCwgLy8gY2hhciBvZmZzZXRcclxuICAgICAgICB0OyAgICAgLy8gdGVtcG9yYXJ5XHJcbiAgICB3aGlsZSAoc3RhcnQgPCBlbmQpIHtcclxuICAgICAgICB0ID0gYnVmZmVyW3N0YXJ0KytdO1xyXG4gICAgICAgIGlmICh0IDwgMTI4KVxyXG4gICAgICAgICAgICBjaHVua1tpKytdID0gdDtcclxuICAgICAgICBlbHNlIGlmICh0ID4gMTkxICYmIHQgPCAyMjQpXHJcbiAgICAgICAgICAgIGNodW5rW2krK10gPSAodCAmIDMxKSA8PCA2IHwgYnVmZmVyW3N0YXJ0KytdICYgNjM7XHJcbiAgICAgICAgZWxzZSBpZiAodCA+IDIzOSAmJiB0IDwgMzY1KSB7XHJcbiAgICAgICAgICAgIHQgPSAoKHQgJiA3KSA8PCAxOCB8IChidWZmZXJbc3RhcnQrK10gJiA2MykgPDwgMTIgfCAoYnVmZmVyW3N0YXJ0KytdICYgNjMpIDw8IDYgfCBidWZmZXJbc3RhcnQrK10gJiA2MykgLSAweDEwMDAwO1xyXG4gICAgICAgICAgICBjaHVua1tpKytdID0gMHhEODAwICsgKHQgPj4gMTApO1xyXG4gICAgICAgICAgICBjaHVua1tpKytdID0gMHhEQzAwICsgKHQgJiAxMDIzKTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgY2h1bmtbaSsrXSA9ICh0ICYgMTUpIDw8IDEyIHwgKGJ1ZmZlcltzdGFydCsrXSAmIDYzKSA8PCA2IHwgYnVmZmVyW3N0YXJ0KytdICYgNjM7XHJcbiAgICAgICAgaWYgKGkgPiA4MTkxKSB7XHJcbiAgICAgICAgICAgIChwYXJ0cyB8fCAocGFydHMgPSBbXSkpLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNodW5rKSk7XHJcbiAgICAgICAgICAgIGkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChwYXJ0cykge1xyXG4gICAgICAgIGlmIChpKVxyXG4gICAgICAgICAgICBwYXJ0cy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjaHVuay5zbGljZSgwLCBpKSkpO1xyXG4gICAgICAgIHJldHVybiBwYXJ0cy5qb2luKFwiXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjaHVuay5zbGljZSgwLCBpKSk7XHJcbn07XHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgc3RyaW5nIGFzIFVURjggYnl0ZXMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU291cmNlIHN0cmluZ1xyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBEZXN0aW5hdGlvbiBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBEZXN0aW5hdGlvbiBvZmZzZXRcclxuICogQHJldHVybnMge251bWJlcn0gQnl0ZXMgd3JpdHRlblxyXG4gKi9cclxudXRmOC53cml0ZSA9IGZ1bmN0aW9uIHV0Zjhfd3JpdGUoc3RyaW5nLCBidWZmZXIsIG9mZnNldCkge1xyXG4gICAgdmFyIHN0YXJ0ID0gb2Zmc2V0LFxyXG4gICAgICAgIGMxLCAvLyBjaGFyYWN0ZXIgMVxyXG4gICAgICAgIGMyOyAvLyBjaGFyYWN0ZXIgMlxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjMSA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzE7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjMSA8IDIwNDgpIHtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxID4+IDYgICAgICAgfCAxOTI7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBjMSAgICAgICAmIDYzIHwgMTI4O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoKGMxICYgMHhGQzAwKSA9PT0gMHhEODAwICYmICgoYzIgPSBzdHJpbmcuY2hhckNvZGVBdChpICsgMSkpICYgMHhGQzAwKSA9PT0gMHhEQzAwKSB7XHJcbiAgICAgICAgICAgIGMxID0gMHgxMDAwMCArICgoYzEgJiAweDAzRkYpIDw8IDEwKSArIChjMiAmIDB4MDNGRik7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxID4+IDE4ICAgICAgfCAyNDA7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBjMSA+PiAxMiAmIDYzIHwgMTI4O1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzEgPj4gNiAgJiA2MyB8IDEyODtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxICAgICAgICYgNjMgfCAxMjg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxID4+IDEyICAgICAgfCAyMjQ7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBjMSA+PiA2ICAmIDYzIHwgMTI4O1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzEgICAgICAgJiA2MyB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2Zmc2V0IC0gc3RhcnQ7XHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5tb2R1bGUuZXhwb3J0cyA9IHBvb2w7XHJcblxyXG4vKipcclxuICogQW4gYWxsb2NhdG9yIGFzIHVzZWQgYnkge0BsaW5rIHV0aWwucG9vbH0uXHJcbiAqIEB0eXBlZGVmIFBvb2xBbGxvY2F0b3JcclxuICogQHR5cGUge2Z1bmN0aW9ufVxyXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBCdWZmZXIgc2l6ZVxyXG4gKiBAcmV0dXJucyB7VWludDhBcnJheX0gQnVmZmVyXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEEgc2xpY2VyIGFzIHVzZWQgYnkge0BsaW5rIHV0aWwucG9vbH0uXHJcbiAqIEB0eXBlZGVmIFBvb2xTbGljZXJcclxuICogQHR5cGUge2Z1bmN0aW9ufVxyXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgU3RhcnQgb2Zmc2V0XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kIG9mZnNldFxyXG4gKiBAcmV0dXJucyB7VWludDhBcnJheX0gQnVmZmVyIHNsaWNlXHJcbiAqIEB0aGlzIHtVaW50OEFycmF5fVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBBIGdlbmVyYWwgcHVycG9zZSBidWZmZXIgcG9vbC5cclxuICogQG1lbWJlcm9mIHV0aWxcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7UG9vbEFsbG9jYXRvcn0gYWxsb2MgQWxsb2NhdG9yXHJcbiAqIEBwYXJhbSB7UG9vbFNsaWNlcn0gc2xpY2UgU2xpY2VyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbc2l6ZT04MTkyXSBTbGFiIHNpemVcclxuICogQHJldHVybnMge1Bvb2xBbGxvY2F0b3J9IFBvb2xlZCBhbGxvY2F0b3JcclxuICovXHJcbmZ1bmN0aW9uIHBvb2woYWxsb2MsIHNsaWNlLCBzaXplKSB7XHJcbiAgICB2YXIgU0laRSAgID0gc2l6ZSB8fCA4MTkyO1xyXG4gICAgdmFyIE1BWCAgICA9IFNJWkUgPj4+IDE7XHJcbiAgICB2YXIgc2xhYiAgID0gbnVsbDtcclxuICAgIHZhciBvZmZzZXQgPSBTSVpFO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHBvb2xfYWxsb2Moc2l6ZSkge1xyXG4gICAgICAgIGlmIChzaXplIDwgMSB8fCBzaXplID4gTUFYKVxyXG4gICAgICAgICAgICByZXR1cm4gYWxsb2Moc2l6ZSk7XHJcbiAgICAgICAgaWYgKG9mZnNldCArIHNpemUgPiBTSVpFKSB7XHJcbiAgICAgICAgICAgIHNsYWIgPSBhbGxvYyhTSVpFKTtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJ1ZiA9IHNsaWNlLmNhbGwoc2xhYiwgb2Zmc2V0LCBvZmZzZXQgKz0gc2l6ZSk7XHJcbiAgICAgICAgaWYgKG9mZnNldCAmIDcpIC8vIGFsaWduIHRvIDMyIGJpdFxyXG4gICAgICAgICAgICBvZmZzZXQgPSAob2Zmc2V0IHwgNykgKyAxO1xyXG4gICAgICAgIHJldHVybiBidWY7XHJcbiAgICB9O1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5tb2R1bGUuZXhwb3J0cyA9IExvbmdCaXRzO1xyXG5cclxudmFyIHV0aWwgPSByZXF1aXJlKFwiLi4vdXRpbC9taW5pbWFsXCIpO1xyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdHMgbmV3IGxvbmcgYml0cy5cclxuICogQGNsYXNzZGVzYyBIZWxwZXIgY2xhc3MgZm9yIHdvcmtpbmcgd2l0aCB0aGUgbG93IGFuZCBoaWdoIGJpdHMgb2YgYSA2NCBiaXQgdmFsdWUuXHJcbiAqIEBtZW1iZXJvZiB1dGlsXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge251bWJlcn0gbG8gTG93IDMyIGJpdHMsIHVuc2lnbmVkXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaSBIaWdoIDMyIGJpdHMsIHVuc2lnbmVkXHJcbiAqL1xyXG5mdW5jdGlvbiBMb25nQml0cyhsbywgaGkpIHtcclxuXHJcbiAgICAvLyBub3RlIHRoYXQgdGhlIGNhc3RzIGJlbG93IGFyZSB0aGVvcmV0aWNhbGx5IHVubmVjZXNzYXJ5IGFzIG9mIHRvZGF5LCBidXQgb2xkZXIgc3RhdGljYWxseVxyXG4gICAgLy8gZ2VuZXJhdGVkIGNvbnZlcnRlciBjb2RlIG1pZ2h0IHN0aWxsIGNhbGwgdGhlIGN0b3Igd2l0aCBzaWduZWQgMzJiaXRzLiBrZXB0IGZvciBjb21wYXQuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb3cgYml0cy5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMubG8gPSBsbyA+Pj4gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhpZ2ggYml0cy5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMuaGkgPSBoaSA+Pj4gMDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFplcm8gYml0cy5cclxuICogQG1lbWJlcm9mIHV0aWwuTG9uZ0JpdHNcclxuICogQHR5cGUge3V0aWwuTG9uZ0JpdHN9XHJcbiAqL1xyXG52YXIgemVybyA9IExvbmdCaXRzLnplcm8gPSBuZXcgTG9uZ0JpdHMoMCwgMCk7XHJcblxyXG56ZXJvLnRvTnVtYmVyID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xyXG56ZXJvLnp6RW5jb2RlID0gemVyby56ekRlY29kZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfTtcclxuemVyby5sZW5ndGggPSBmdW5jdGlvbigpIHsgcmV0dXJuIDE7IH07XHJcblxyXG4vKipcclxuICogWmVybyBoYXNoLlxyXG4gKiBAbWVtYmVyb2YgdXRpbC5Mb25nQml0c1xyXG4gKiBAdHlwZSB7c3RyaW5nfVxyXG4gKi9cclxudmFyIHplcm9IYXNoID0gTG9uZ0JpdHMuemVyb0hhc2ggPSBcIlxcMFxcMFxcMFxcMFxcMFxcMFxcMFxcMFwiO1xyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdHMgbmV3IGxvbmcgYml0cyBmcm9tIHRoZSBzcGVjaWZpZWQgbnVtYmVyLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWVcclxuICogQHJldHVybnMge3V0aWwuTG9uZ0JpdHN9IEluc3RhbmNlXHJcbiAqL1xyXG5Mb25nQml0cy5mcm9tTnVtYmVyID0gZnVuY3Rpb24gZnJvbU51bWJlcih2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlID09PSAwKVxyXG4gICAgICAgIHJldHVybiB6ZXJvO1xyXG4gICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDA7XHJcbiAgICBpZiAoc2lnbilcclxuICAgICAgICB2YWx1ZSA9IC12YWx1ZTtcclxuICAgIHZhciBsbyA9IHZhbHVlID4+PiAwLFxyXG4gICAgICAgIGhpID0gKHZhbHVlIC0gbG8pIC8gNDI5NDk2NzI5NiA+Pj4gMDtcclxuICAgIGlmIChzaWduKSB7XHJcbiAgICAgICAgaGkgPSB+aGkgPj4+IDA7XHJcbiAgICAgICAgbG8gPSB+bG8gPj4+IDA7XHJcbiAgICAgICAgaWYgKCsrbG8gPiA0Mjk0OTY3Mjk1KSB7XHJcbiAgICAgICAgICAgIGxvID0gMDtcclxuICAgICAgICAgICAgaWYgKCsraGkgPiA0Mjk0OTY3Mjk1KVxyXG4gICAgICAgICAgICAgICAgaGkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgTG9uZ0JpdHMobG8sIGhpKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIG5ldyBsb25nIGJpdHMgZnJvbSBhIG51bWJlciwgbG9uZyBvciBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZVxyXG4gKiBAcmV0dXJucyB7dXRpbC5Mb25nQml0c30gSW5zdGFuY2VcclxuICovXHJcbkxvbmdCaXRzLmZyb20gPSBmdW5jdGlvbiBmcm9tKHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKVxyXG4gICAgICAgIHJldHVybiBMb25nQml0cy5mcm9tTnVtYmVyKHZhbHVlKTtcclxuICAgIGlmICh1dGlsLmlzU3RyaW5nKHZhbHVlKSkge1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgaWYgKHV0aWwuTG9uZylcclxuICAgICAgICAgICAgdmFsdWUgPSB1dGlsLkxvbmcuZnJvbVN0cmluZyh2YWx1ZSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gTG9uZ0JpdHMuZnJvbU51bWJlcihwYXJzZUludCh2YWx1ZSwgMTApKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZS5sb3cgfHwgdmFsdWUuaGlnaCA/IG5ldyBMb25nQml0cyh2YWx1ZS5sb3cgPj4+IDAsIHZhbHVlLmhpZ2ggPj4+IDApIDogemVybztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyB0aGlzIGxvbmcgYml0cyB0byBhIHBvc3NpYmx5IHVuc2FmZSBKYXZhU2NyaXB0IG51bWJlci5cclxuICogQHBhcmFtIHtib29sZWFufSBbdW5zaWduZWQ9ZmFsc2VdIFdoZXRoZXIgdW5zaWduZWQgb3Igbm90XHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFBvc3NpYmx5IHVuc2FmZSBudW1iZXJcclxuICovXHJcbkxvbmdCaXRzLnByb3RvdHlwZS50b051bWJlciA9IGZ1bmN0aW9uIHRvTnVtYmVyKHVuc2lnbmVkKSB7XHJcbiAgICBpZiAoIXVuc2lnbmVkICYmIHRoaXMuaGkgPj4+IDMxKSB7XHJcbiAgICAgICAgdmFyIGxvID0gfnRoaXMubG8gKyAxID4+PiAwLFxyXG4gICAgICAgICAgICBoaSA9IH50aGlzLmhpICAgICA+Pj4gMDtcclxuICAgICAgICBpZiAoIWxvKVxyXG4gICAgICAgICAgICBoaSA9IGhpICsgMSA+Pj4gMDtcclxuICAgICAgICByZXR1cm4gLShsbyArIGhpICogNDI5NDk2NzI5Nik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5sbyArIHRoaXMuaGkgKiA0Mjk0OTY3Mjk2O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnRzIHRoaXMgbG9uZyBiaXRzIHRvIGEgbG9uZy5cclxuICogQHBhcmFtIHtib29sZWFufSBbdW5zaWduZWQ9ZmFsc2VdIFdoZXRoZXIgdW5zaWduZWQgb3Igbm90XHJcbiAqIEByZXR1cm5zIHtMb25nfSBMb25nXHJcbiAqL1xyXG5Mb25nQml0cy5wcm90b3R5cGUudG9Mb25nID0gZnVuY3Rpb24gdG9Mb25nKHVuc2lnbmVkKSB7XHJcbiAgICByZXR1cm4gdXRpbC5Mb25nXHJcbiAgICAgICAgPyBuZXcgdXRpbC5Mb25nKHRoaXMubG8gfCAwLCB0aGlzLmhpIHwgMCwgQm9vbGVhbih1bnNpZ25lZCkpXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICA6IHsgbG93OiB0aGlzLmxvIHwgMCwgaGlnaDogdGhpcy5oaSB8IDAsIHVuc2lnbmVkOiBCb29sZWFuKHVuc2lnbmVkKSB9O1xyXG59O1xyXG5cclxudmFyIGNoYXJDb2RlQXQgPSBTdHJpbmcucHJvdG90eXBlLmNoYXJDb2RlQXQ7XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBuZXcgbG9uZyBiaXRzIGZyb20gdGhlIHNwZWNpZmllZCA4IGNoYXJhY3RlcnMgbG9uZyBoYXNoLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBIYXNoXHJcbiAqIEByZXR1cm5zIHt1dGlsLkxvbmdCaXRzfSBCaXRzXHJcbiAqL1xyXG5Mb25nQml0cy5mcm9tSGFzaCA9IGZ1bmN0aW9uIGZyb21IYXNoKGhhc2gpIHtcclxuICAgIGlmIChoYXNoID09PSB6ZXJvSGFzaClcclxuICAgICAgICByZXR1cm4gemVybztcclxuICAgIHJldHVybiBuZXcgTG9uZ0JpdHMoXHJcbiAgICAgICAgKCBjaGFyQ29kZUF0LmNhbGwoaGFzaCwgMClcclxuICAgICAgICB8IGNoYXJDb2RlQXQuY2FsbChoYXNoLCAxKSA8PCA4XHJcbiAgICAgICAgfCBjaGFyQ29kZUF0LmNhbGwoaGFzaCwgMikgPDwgMTZcclxuICAgICAgICB8IGNoYXJDb2RlQXQuY2FsbChoYXNoLCAzKSA8PCAyNCkgPj4+IDBcclxuICAgICxcclxuICAgICAgICAoIGNoYXJDb2RlQXQuY2FsbChoYXNoLCA0KVxyXG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDUpIDw8IDhcclxuICAgICAgICB8IGNoYXJDb2RlQXQuY2FsbChoYXNoLCA2KSA8PCAxNlxyXG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDcpIDw8IDI0KSA+Pj4gMFxyXG4gICAgKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyB0aGlzIGxvbmcgYml0cyB0byBhIDggY2hhcmFjdGVycyBsb25nIGhhc2guXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEhhc2hcclxuICovXHJcbkxvbmdCaXRzLnByb3RvdHlwZS50b0hhc2ggPSBmdW5jdGlvbiB0b0hhc2goKSB7XHJcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShcclxuICAgICAgICB0aGlzLmxvICAgICAgICAmIDI1NSxcclxuICAgICAgICB0aGlzLmxvID4+PiA4ICAmIDI1NSxcclxuICAgICAgICB0aGlzLmxvID4+PiAxNiAmIDI1NSxcclxuICAgICAgICB0aGlzLmxvID4+PiAyNCAgICAgICxcclxuICAgICAgICB0aGlzLmhpICAgICAgICAmIDI1NSxcclxuICAgICAgICB0aGlzLmhpID4+PiA4ICAmIDI1NSxcclxuICAgICAgICB0aGlzLmhpID4+PiAxNiAmIDI1NSxcclxuICAgICAgICB0aGlzLmhpID4+PiAyNFxyXG4gICAgKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBaaWctemFnIGVuY29kZXMgdGhpcyBsb25nIGJpdHMuXHJcbiAqIEByZXR1cm5zIHt1dGlsLkxvbmdCaXRzfSBgdGhpc2BcclxuICovXHJcbkxvbmdCaXRzLnByb3RvdHlwZS56ekVuY29kZSA9IGZ1bmN0aW9uIHp6RW5jb2RlKCkge1xyXG4gICAgdmFyIG1hc2sgPSAgIHRoaXMuaGkgPj4gMzE7XHJcbiAgICB0aGlzLmhpICA9ICgodGhpcy5oaSA8PCAxIHwgdGhpcy5sbyA+Pj4gMzEpIF4gbWFzaykgPj4+IDA7XHJcbiAgICB0aGlzLmxvICA9ICggdGhpcy5sbyA8PCAxICAgICAgICAgICAgICAgICAgIF4gbWFzaykgPj4+IDA7XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBaaWctemFnIGRlY29kZXMgdGhpcyBsb25nIGJpdHMuXHJcbiAqIEByZXR1cm5zIHt1dGlsLkxvbmdCaXRzfSBgdGhpc2BcclxuICovXHJcbkxvbmdCaXRzLnByb3RvdHlwZS56ekRlY29kZSA9IGZ1bmN0aW9uIHp6RGVjb2RlKCkge1xyXG4gICAgdmFyIG1hc2sgPSAtKHRoaXMubG8gJiAxKTtcclxuICAgIHRoaXMubG8gID0gKCh0aGlzLmxvID4+PiAxIHwgdGhpcy5oaSA8PCAzMSkgXiBtYXNrKSA+Pj4gMDtcclxuICAgIHRoaXMuaGkgID0gKCB0aGlzLmhpID4+PiAxICAgICAgICAgICAgICAgICAgXiBtYXNrKSA+Pj4gMDtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiB0aGlzIGxvbmdiaXRzIHdoZW4gZW5jb2RlZCBhcyBhIHZhcmludC5cclxuICogQHJldHVybnMge251bWJlcn0gTGVuZ3RoXHJcbiAqL1xyXG5Mb25nQml0cy5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gbGVuZ3RoKCkge1xyXG4gICAgdmFyIHBhcnQwID0gIHRoaXMubG8sXHJcbiAgICAgICAgcGFydDEgPSAodGhpcy5sbyA+Pj4gMjggfCB0aGlzLmhpIDw8IDQpID4+PiAwLFxyXG4gICAgICAgIHBhcnQyID0gIHRoaXMuaGkgPj4+IDI0O1xyXG4gICAgcmV0dXJuIHBhcnQyID09PSAwXHJcbiAgICAgICAgID8gcGFydDEgPT09IDBcclxuICAgICAgICAgICA/IHBhcnQwIDwgMTYzODRcclxuICAgICAgICAgICAgID8gcGFydDAgPCAxMjggPyAxIDogMlxyXG4gICAgICAgICAgICAgOiBwYXJ0MCA8IDIwOTcxNTIgPyAzIDogNFxyXG4gICAgICAgICAgIDogcGFydDEgPCAxNjM4NFxyXG4gICAgICAgICAgICAgPyBwYXJ0MSA8IDEyOCA/IDUgOiA2XHJcbiAgICAgICAgICAgICA6IHBhcnQxIDwgMjA5NzE1MiA/IDcgOiA4XHJcbiAgICAgICAgIDogcGFydDIgPCAxMjggPyA5IDogMTA7XHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEJ1ZmZlcldyaXRlcjtcclxuXHJcbi8vIGV4dGVuZHMgV3JpdGVyXHJcbnZhciBXcml0ZXIgPSByZXF1aXJlKFwiLi93cml0ZXJcIik7XHJcbihCdWZmZXJXcml0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShXcml0ZXIucHJvdG90eXBlKSkuY29uc3RydWN0b3IgPSBCdWZmZXJXcml0ZXI7XHJcblxyXG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuL3V0aWwvbWluaW1hbFwiKTtcclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGJ1ZmZlciB3cml0ZXIgaW5zdGFuY2UuXHJcbiAqIEBjbGFzc2Rlc2MgV2lyZSBmb3JtYXQgd3JpdGVyIHVzaW5nIG5vZGUgYnVmZmVycy5cclxuICogQGV4dGVuZHMgV3JpdGVyXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZnVuY3Rpb24gQnVmZmVyV3JpdGVyKCkge1xyXG4gICAgV3JpdGVyLmNhbGwodGhpcyk7XHJcbn1cclxuXHJcbkJ1ZmZlcldyaXRlci5fY29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbGxvY2F0ZXMgYSBidWZmZXIgb2YgdGhlIHNwZWNpZmllZCBzaXplLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQnVmZmVyIHNpemVcclxuICAgICAqIEByZXR1cm5zIHtCdWZmZXJ9IEJ1ZmZlclxyXG4gICAgICovXHJcbiAgICBCdWZmZXJXcml0ZXIuYWxsb2MgPSB1dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmU7XHJcblxyXG4gICAgQnVmZmVyV3JpdGVyLndyaXRlQnl0ZXNCdWZmZXIgPSB1dGlsLkJ1ZmZlciAmJiB1dGlsLkJ1ZmZlci5wcm90b3R5cGUgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmIHV0aWwuQnVmZmVyLnByb3RvdHlwZS5zZXQubmFtZSA9PT0gXCJzZXRcIlxyXG4gICAgICAgID8gZnVuY3Rpb24gd3JpdGVCeXRlc0J1ZmZlcl9zZXQodmFsLCBidWYsIHBvcykge1xyXG4gICAgICAgICAgYnVmLnNldCh2YWwsIHBvcyk7IC8vIGZhc3RlciB0aGFuIGNvcHkgKHJlcXVpcmVzIG5vZGUgPj0gNCB3aGVyZSBCdWZmZXJzIGV4dGVuZCBVaW50OEFycmF5IGFuZCBzZXQgaXMgcHJvcGVybHkgaW5oZXJpdGVkKVxyXG4gICAgICAgICAgLy8gYWxzbyB3b3JrcyBmb3IgcGxhaW4gYXJyYXkgdmFsdWVzXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgOiBmdW5jdGlvbiB3cml0ZUJ5dGVzQnVmZmVyX2NvcHkodmFsLCBidWYsIHBvcykge1xyXG4gICAgICAgICAgaWYgKHZhbC5jb3B5KSAvLyBCdWZmZXIgdmFsdWVzXHJcbiAgICAgICAgICAgIHZhbC5jb3B5KGJ1ZiwgcG9zLCAwLCB2YWwubGVuZ3RoKTtcclxuICAgICAgICAgIGVsc2UgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWwubGVuZ3RoOykgLy8gcGxhaW4gYXJyYXkgdmFsdWVzXHJcbiAgICAgICAgICAgIGJ1Zltwb3MrK10gPSB2YWxbaSsrXTtcclxuICAgICAgICB9O1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAb3ZlcnJpZGVcclxuICovXHJcbkJ1ZmZlcldyaXRlci5wcm90b3R5cGUuYnl0ZXMgPSBmdW5jdGlvbiB3cml0ZV9ieXRlc19idWZmZXIodmFsdWUpIHtcclxuICAgIGlmICh1dGlsLmlzU3RyaW5nKHZhbHVlKSlcclxuICAgICAgICB2YWx1ZSA9IHV0aWwuX0J1ZmZlcl9mcm9tKHZhbHVlLCBcImJhc2U2NFwiKTtcclxuICAgIHZhciBsZW4gPSB2YWx1ZS5sZW5ndGggPj4+IDA7XHJcbiAgICB0aGlzLnVpbnQzMihsZW4pO1xyXG4gICAgaWYgKGxlbilcclxuICAgICAgICB0aGlzLl9wdXNoKEJ1ZmZlcldyaXRlci53cml0ZUJ5dGVzQnVmZmVyLCBsZW4sIHZhbHVlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gd3JpdGVTdHJpbmdCdWZmZXIodmFsLCBidWYsIHBvcykge1xyXG4gICAgaWYgKHZhbC5sZW5ndGggPCA0MCkgLy8gcGxhaW4ganMgaXMgZmFzdGVyIGZvciBzaG9ydCBzdHJpbmdzIChwcm9iYWJseSBkdWUgdG8gcmVkdW5kYW50IGFzc2VydGlvbnMpXHJcbiAgICAgICAgdXRpbC51dGY4LndyaXRlKHZhbCwgYnVmLCBwb3MpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIGJ1Zi51dGY4V3JpdGUgPyBidWYudXRmOFdyaXRlKHZhbCwgcG9zKSA6IGJ1Zi53cml0ZSh2YWwsIHBvcyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAb3ZlcnJpZGVcclxuICovXHJcbkJ1ZmZlcldyaXRlci5wcm90b3R5cGUuc3RyaW5nID0gZnVuY3Rpb24gd3JpdGVfc3RyaW5nX2J1ZmZlcih2YWx1ZSkge1xyXG4gICAgdmFyIGxlbiA9IHV0aWwuQnVmZmVyLmJ5dGVMZW5ndGgodmFsdWUpO1xyXG4gICAgdGhpcy51aW50MzIobGVuKTtcclxuICAgIGlmIChsZW4pXHJcbiAgICAgICAgdGhpcy5fcHVzaCh3cml0ZVN0cmluZ0J1ZmZlciwgbGVuLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcblxyXG4vKipcclxuICogRmluaXNoZXMgdGhlIHdyaXRlIG9wZXJhdGlvbi5cclxuICogQG5hbWUgQnVmZmVyV3JpdGVyI2ZpbmlzaFxyXG4gKiBAZnVuY3Rpb25cclxuICogQHJldHVybnMge0J1ZmZlcn0gRmluaXNoZWQgYnVmZmVyXHJcbiAqL1xyXG5cclxuQnVmZmVyV3JpdGVyLl9jb25maWd1cmUoKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbm1vZHVsZS5leHBvcnRzID0gQnVmZmVyUmVhZGVyO1xyXG5cclxuLy8gZXh0ZW5kcyBSZWFkZXJcclxudmFyIFJlYWRlciA9IHJlcXVpcmUoXCIuL3JlYWRlclwiKTtcclxuKEJ1ZmZlclJlYWRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlYWRlci5wcm90b3R5cGUpKS5jb25zdHJ1Y3RvciA9IEJ1ZmZlclJlYWRlcjtcclxuXHJcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC9taW5pbWFsXCIpO1xyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdHMgYSBuZXcgYnVmZmVyIHJlYWRlciBpbnN0YW5jZS5cclxuICogQGNsYXNzZGVzYyBXaXJlIGZvcm1hdCByZWFkZXIgdXNpbmcgbm9kZSBidWZmZXJzLlxyXG4gKiBAZXh0ZW5kcyBSZWFkZXJcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7QnVmZmVyfSBidWZmZXIgQnVmZmVyIHRvIHJlYWQgZnJvbVxyXG4gKi9cclxuZnVuY3Rpb24gQnVmZmVyUmVhZGVyKGJ1ZmZlcikge1xyXG4gICAgUmVhZGVyLmNhbGwodGhpcywgYnVmZmVyKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgYnVmZmVyLlxyXG4gICAgICogQG5hbWUgQnVmZmVyUmVhZGVyI2J1ZlxyXG4gICAgICogQHR5cGUge0J1ZmZlcn1cclxuICAgICAqL1xyXG59XHJcblxyXG5CdWZmZXJSZWFkZXIuX2NvbmZpZ3VyZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICBpZiAodXRpbC5CdWZmZXIpXHJcbiAgICAgICAgQnVmZmVyUmVhZGVyLnByb3RvdHlwZS5fc2xpY2UgPSB1dGlsLkJ1ZmZlci5wcm90b3R5cGUuc2xpY2U7XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBvdmVycmlkZVxyXG4gKi9cclxuQnVmZmVyUmVhZGVyLnByb3RvdHlwZS5zdHJpbmcgPSBmdW5jdGlvbiByZWFkX3N0cmluZ19idWZmZXIoKSB7XHJcbiAgICB2YXIgbGVuID0gdGhpcy51aW50MzIoKTsgLy8gbW9kaWZpZXMgcG9zXHJcbiAgICByZXR1cm4gdGhpcy5idWYudXRmOFNsaWNlXHJcbiAgICAgICAgPyB0aGlzLmJ1Zi51dGY4U2xpY2UodGhpcy5wb3MsIHRoaXMucG9zID0gTWF0aC5taW4odGhpcy5wb3MgKyBsZW4sIHRoaXMubGVuKSlcclxuICAgICAgICA6IHRoaXMuYnVmLnRvU3RyaW5nKCd1dGYtOCcsIHRoaXMucG9zLCB0aGlzLnBvcyA9IE1hdGgubWluKHRoaXMucG9zICsgbGVuLCB0aGlzLmxlbikpXHJcbn07XHJcblxyXG4vKipcclxuICogUmVhZHMgYSBzZXF1ZW5jZSBvZiBieXRlcyBwcmVjZWVkZWQgYnkgaXRzIGxlbmd0aCBhcyBhIHZhcmludC5cclxuICogQG5hbWUgQnVmZmVyUmVhZGVyI2J5dGVzXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcmV0dXJucyB7QnVmZmVyfSBWYWx1ZSByZWFkXHJcbiAqL1xyXG5cclxuQnVmZmVyUmVhZGVyLl9jb25maWd1cmUoKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogU3RyZWFtaW5nIFJQQyBoZWxwZXJzLlxyXG4gKiBAbmFtZXNwYWNlXHJcbiAqL1xyXG52YXIgcnBjID0gZXhwb3J0cztcclxuXHJcbi8qKlxyXG4gKiBSUEMgaW1wbGVtZW50YXRpb24gcGFzc2VkIHRvIHtAbGluayBTZXJ2aWNlI2NyZWF0ZX0gcGVyZm9ybWluZyBhIHNlcnZpY2UgcmVxdWVzdCBvbiBuZXR3b3JrIGxldmVsLCBpLmUuIGJ5IHV0aWxpemluZyBodHRwIHJlcXVlc3RzIG9yIHdlYnNvY2tldHMuXHJcbiAqIEB0eXBlZGVmIFJQQ0ltcGxcclxuICogQHR5cGUge2Z1bmN0aW9ufVxyXG4gKiBAcGFyYW0ge01ldGhvZHxycGMuU2VydmljZU1ldGhvZDxNZXNzYWdlPHt9PixNZXNzYWdlPHt9Pj59IG1ldGhvZCBSZWZsZWN0ZWQgb3Igc3RhdGljIG1ldGhvZCBiZWluZyBjYWxsZWRcclxuICogQHBhcmFtIHtVaW50OEFycmF5fSByZXF1ZXN0RGF0YSBSZXF1ZXN0IGRhdGFcclxuICogQHBhcmFtIHtSUENJbXBsQ2FsbGJhY2t9IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uXHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAqIEBleGFtcGxlXHJcbiAqIGZ1bmN0aW9uIHJwY0ltcGwobWV0aG9kLCByZXF1ZXN0RGF0YSwgY2FsbGJhY2spIHtcclxuICogICAgIGlmIChwcm90b2J1Zi51dGlsLmxjRmlyc3QobWV0aG9kLm5hbWUpICE9PSBcIm15TWV0aG9kXCIpIC8vIGNvbXBhdGlibGUgd2l0aCBzdGF0aWMgY29kZVxyXG4gKiAgICAgICAgIHRocm93IEVycm9yKFwibm8gc3VjaCBtZXRob2RcIik7XHJcbiAqICAgICBhc3luY2hyb25vdXNseU9idGFpbkFSZXNwb25zZShyZXF1ZXN0RGF0YSwgZnVuY3Rpb24oZXJyLCByZXNwb25zZURhdGEpIHtcclxuICogICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3BvbnNlRGF0YSk7XHJcbiAqICAgICB9KTtcclxuICogfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBOb2RlLXN0eWxlIGNhbGxiYWNrIGFzIHVzZWQgYnkge0BsaW5rIFJQQ0ltcGx9LlxyXG4gKiBAdHlwZWRlZiBSUENJbXBsQ2FsbGJhY2tcclxuICogQHR5cGUge2Z1bmN0aW9ufVxyXG4gKiBAcGFyYW0ge0Vycm9yfG51bGx9IGVycm9yIEVycm9yLCBpZiBhbnksIG90aGVyd2lzZSBgbnVsbGBcclxuICogQHBhcmFtIHtVaW50OEFycmF5fG51bGx9IFtyZXNwb25zZV0gUmVzcG9uc2UgZGF0YSBvciBgbnVsbGAgdG8gc2lnbmFsIGVuZCBvZiBzdHJlYW0sIGlmIHRoZXJlIGhhc24ndCBiZWVuIGFuIGVycm9yXHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5cclxucnBjLlNlcnZpY2UgPSByZXF1aXJlKFwiLi9ycGMvc2VydmljZVwiKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbm1vZHVsZS5leHBvcnRzID0gU2VydmljZTtcclxuXHJcbnZhciB1dGlsID0gcmVxdWlyZShcIi4uL3V0aWwvbWluaW1hbFwiKTtcclxuXHJcbi8vIEV4dGVuZHMgRXZlbnRFbWl0dGVyXHJcbihTZXJ2aWNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodXRpbC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKSkuY29uc3RydWN0b3IgPSBTZXJ2aWNlO1xyXG5cclxuLyoqXHJcbiAqIEEgc2VydmljZSBtZXRob2QgY2FsbGJhY2sgYXMgdXNlZCBieSB7QGxpbmsgcnBjLlNlcnZpY2VNZXRob2R8U2VydmljZU1ldGhvZH0uXHJcbiAqXHJcbiAqIERpZmZlcnMgZnJvbSB7QGxpbmsgUlBDSW1wbENhbGxiYWNrfSBpbiB0aGF0IGl0IGlzIGFuIGFjdHVhbCBjYWxsYmFjayBvZiBhIHNlcnZpY2UgbWV0aG9kIHdoaWNoIG1heSBub3QgcmV0dXJuIGByZXNwb25zZSA9IG51bGxgLlxyXG4gKiBAdHlwZWRlZiBycGMuU2VydmljZU1ldGhvZENhbGxiYWNrXHJcbiAqIEB0ZW1wbGF0ZSBUUmVzIGV4dGVuZHMgTWVzc2FnZTxUUmVzPlxyXG4gKiBAdHlwZSB7ZnVuY3Rpb259XHJcbiAqIEBwYXJhbSB7RXJyb3J8bnVsbH0gZXJyb3IgRXJyb3IsIGlmIGFueVxyXG4gKiBAcGFyYW0ge1RSZXN9IFtyZXNwb25zZV0gUmVzcG9uc2UgbWVzc2FnZVxyXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBBIHNlcnZpY2UgbWV0aG9kIHBhcnQgb2YgYSB7QGxpbmsgcnBjLlNlcnZpY2V9IGFzIGNyZWF0ZWQgYnkge0BsaW5rIFNlcnZpY2UuY3JlYXRlfS5cclxuICogQHR5cGVkZWYgcnBjLlNlcnZpY2VNZXRob2RcclxuICogQHRlbXBsYXRlIFRSZXEgZXh0ZW5kcyBNZXNzYWdlPFRSZXE+XHJcbiAqIEB0ZW1wbGF0ZSBUUmVzIGV4dGVuZHMgTWVzc2FnZTxUUmVzPlxyXG4gKiBAdHlwZSB7ZnVuY3Rpb259XHJcbiAqIEBwYXJhbSB7VFJlcXxQcm9wZXJ0aWVzPFRSZXE+fSByZXF1ZXN0IFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3RcclxuICogQHBhcmFtIHtycGMuU2VydmljZU1ldGhvZENhbGxiYWNrPFRSZXM+fSBbY2FsbGJhY2tdIE5vZGUtc3R5bGUgY2FsbGJhY2sgY2FsbGVkIHdpdGggdGhlIGVycm9yLCBpZiBhbnksIGFuZCB0aGUgcmVzcG9uc2UgbWVzc2FnZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxNZXNzYWdlPFRSZXM+Pn0gUHJvbWlzZSBpZiBgY2FsbGJhY2tgIGhhcyBiZWVuIG9taXR0ZWQsIG90aGVyd2lzZSBgdW5kZWZpbmVkYFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IFJQQyBzZXJ2aWNlIGluc3RhbmNlLlxyXG4gKiBAY2xhc3NkZXNjIEFuIFJQQyBzZXJ2aWNlIGFzIHJldHVybmVkIGJ5IHtAbGluayBTZXJ2aWNlI2NyZWF0ZX0uXHJcbiAqIEBleHBvcnRzIHJwYy5TZXJ2aWNlXHJcbiAqIEBleHRlbmRzIHV0aWwuRXZlbnRFbWl0dGVyXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge1JQQ0ltcGx9IHJwY0ltcGwgUlBDIGltcGxlbWVudGF0aW9uXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlcXVlc3REZWxpbWl0ZWQ9ZmFsc2VdIFdoZXRoZXIgcmVxdWVzdHMgYXJlIGxlbmd0aC1kZWxpbWl0ZWRcclxuICogQHBhcmFtIHtib29sZWFufSBbcmVzcG9uc2VEZWxpbWl0ZWQ9ZmFsc2VdIFdoZXRoZXIgcmVzcG9uc2VzIGFyZSBsZW5ndGgtZGVsaW1pdGVkXHJcbiAqL1xyXG5mdW5jdGlvbiBTZXJ2aWNlKHJwY0ltcGwsIHJlcXVlc3REZWxpbWl0ZWQsIHJlc3BvbnNlRGVsaW1pdGVkKSB7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBycGNJbXBsICE9PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwicnBjSW1wbCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XHJcblxyXG4gICAgdXRpbC5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJQQyBpbXBsZW1lbnRhdGlvbi4gQmVjb21lcyBgbnVsbGAgb25jZSB0aGUgc2VydmljZSBpcyBlbmRlZC5cclxuICAgICAqIEB0eXBlIHtSUENJbXBsfG51bGx9XHJcbiAgICAgKi9cclxuICAgIHRoaXMucnBjSW1wbCA9IHJwY0ltcGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHJlcXVlc3RzIGFyZSBsZW5ndGgtZGVsaW1pdGVkLlxyXG4gICAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIHRoaXMucmVxdWVzdERlbGltaXRlZCA9IEJvb2xlYW4ocmVxdWVzdERlbGltaXRlZCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHJlc3BvbnNlcyBhcmUgbGVuZ3RoLWRlbGltaXRlZC5cclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICB0aGlzLnJlc3BvbnNlRGVsaW1pdGVkID0gQm9vbGVhbihyZXNwb25zZURlbGltaXRlZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxscyBhIHNlcnZpY2UgbWV0aG9kIHRocm91Z2gge0BsaW5rIHJwYy5TZXJ2aWNlI3JwY0ltcGx8cnBjSW1wbH0uXHJcbiAqIEBwYXJhbSB7TWV0aG9kfHJwYy5TZXJ2aWNlTWV0aG9kPFRSZXEsVFJlcz59IG1ldGhvZCBSZWZsZWN0ZWQgb3Igc3RhdGljIG1ldGhvZFxyXG4gKiBAcGFyYW0ge0NvbnN0cnVjdG9yPFRSZXE+fSByZXF1ZXN0Q3RvciBSZXF1ZXN0IGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7Q29uc3RydWN0b3I8VFJlcz59IHJlc3BvbnNlQ3RvciBSZXNwb25zZSBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge1RSZXF8UHJvcGVydGllczxUUmVxPn0gcmVxdWVzdCBSZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0XHJcbiAqIEBwYXJhbSB7cnBjLlNlcnZpY2VNZXRob2RDYWxsYmFjazxUUmVzPn0gY2FsbGJhY2sgU2VydmljZSBjYWxsYmFja1xyXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gKiBAdGVtcGxhdGUgVFJlcSBleHRlbmRzIE1lc3NhZ2U8VFJlcT5cclxuICogQHRlbXBsYXRlIFRSZXMgZXh0ZW5kcyBNZXNzYWdlPFRSZXM+XHJcbiAqL1xyXG5TZXJ2aWNlLnByb3RvdHlwZS5ycGNDYWxsID0gZnVuY3Rpb24gcnBjQ2FsbChtZXRob2QsIHJlcXVlc3RDdG9yLCByZXNwb25zZUN0b3IsIHJlcXVlc3QsIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgaWYgKCFyZXF1ZXN0KVxyXG4gICAgICAgIHRocm93IFR5cGVFcnJvcihcInJlcXVlc3QgbXVzdCBiZSBzcGVjaWZpZWRcIik7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKCFjYWxsYmFjaylcclxuICAgICAgICByZXR1cm4gdXRpbC5hc1Byb21pc2UocnBjQ2FsbCwgc2VsZiwgbWV0aG9kLCByZXF1ZXN0Q3RvciwgcmVzcG9uc2VDdG9yLCByZXF1ZXN0KTtcclxuXHJcbiAgICBpZiAoIXNlbGYucnBjSW1wbCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNhbGxiYWNrKEVycm9yKFwiYWxyZWFkeSBlbmRlZFwiKSk7IH0sIDApO1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gc2VsZi5ycGNJbXBsKFxyXG4gICAgICAgICAgICBtZXRob2QsXHJcbiAgICAgICAgICAgIHJlcXVlc3RDdG9yW3NlbGYucmVxdWVzdERlbGltaXRlZCA/IFwiZW5jb2RlRGVsaW1pdGVkXCIgOiBcImVuY29kZVwiXShyZXF1ZXN0KS5maW5pc2goKSxcclxuICAgICAgICAgICAgZnVuY3Rpb24gcnBjQ2FsbGJhY2soZXJyLCByZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVtaXQoXCJlcnJvclwiLCBlcnIsIG1ldGhvZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbmQoLyogZW5kZWRCeVJQQyAqLyB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlIGluc3RhbmNlb2YgcmVzcG9uc2VDdG9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2VDdG9yW3NlbGYucmVzcG9uc2VEZWxpbWl0ZWQgPyBcImRlY29kZURlbGltaXRlZFwiIDogXCJkZWNvZGVcIl0ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVtaXQoXCJlcnJvclwiLCBlcnIsIG1ldGhvZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLmVtaXQoXCJkYXRhXCIsIHJlc3BvbnNlLCBtZXRob2QpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBzZWxmLmVtaXQoXCJlcnJvclwiLCBlcnIsIG1ldGhvZCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soZXJyKTsgfSwgMCk7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBFbmRzIHRoaXMgc2VydmljZSBhbmQgZW1pdHMgdGhlIGBlbmRgIGV2ZW50LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtlbmRlZEJ5UlBDPWZhbHNlXSBXaGV0aGVyIHRoZSBzZXJ2aWNlIGhhcyBiZWVuIGVuZGVkIGJ5IHRoZSBSUEMgaW1wbGVtZW50YXRpb24uXHJcbiAqIEByZXR1cm5zIHtycGMuU2VydmljZX0gYHRoaXNgXHJcbiAqL1xyXG5TZXJ2aWNlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiBlbmQoZW5kZWRCeVJQQykge1xyXG4gICAgaWYgKHRoaXMucnBjSW1wbCkge1xyXG4gICAgICAgIGlmICghZW5kZWRCeVJQQykgLy8gc2lnbmFsIGVuZCB0byBycGNJbXBsXHJcbiAgICAgICAgICAgIHRoaXMucnBjSW1wbChudWxsLCBudWxsLCBudWxsKTtcclxuICAgICAgICB0aGlzLnJwY0ltcGwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZW1pdChcImVuZFwiKS5vZmYoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxubW9kdWxlLmV4cG9ydHMgPSB7fTtcclxuXHJcbi8qKlxyXG4gKiBOYW1lZCByb290cy5cclxuICogVGhpcyBpcyB3aGVyZSBwYmpzIHN0b3JlcyBnZW5lcmF0ZWQgc3RydWN0dXJlcyAodGhlIG9wdGlvbiBgLXIsIC0tcm9vdGAgc3BlY2lmaWVzIGEgbmFtZSkuXHJcbiAqIENhbiBhbHNvIGJlIHVzZWQgbWFudWFsbHkgdG8gbWFrZSByb290cyBhdmFpbGFibGUgYWNjcm9zcyBtb2R1bGVzLlxyXG4gKiBAbmFtZSByb290c1xyXG4gKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsUm9vdD59XHJcbiAqIEBleGFtcGxlXHJcbiAqIC8vIHBianMgLXIgbXlyb290IC1vIGNvbXBpbGVkLmpzIC4uLlxyXG4gKlxyXG4gKiAvLyBpbiBhbm90aGVyIG1vZHVsZTpcclxuICogcmVxdWlyZShcIi4vY29tcGlsZWQuanNcIik7XHJcbiAqXHJcbiAqIC8vIGluIGFueSBzdWJzZXF1ZW50IG1vZHVsZTpcclxuICogdmFyIHJvb3QgPSBwcm90b2J1Zi5yb290c1tcIm15cm9vdFwiXTtcclxuICovXHJcbiIsInZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpO1xudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtYXNzaWduJyk7XG5cbi8vIGBPYmplY3QuYXNzaWduYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW9iamVjdC5hc3NpZ25cbiQoeyB0YXJnZXQ6ICdPYmplY3QnLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IE9iamVjdC5hc3NpZ24gIT09IGFzc2lnbiB9LCB7XG4gIGFzc2lnbjogYXNzaWduXG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgb2JqZWN0S2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3Qta2V5cycpO1xudmFyIGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1zeW1ib2xzJyk7XG52YXIgcHJvcGVydHlJc0VudW1lcmFibGVNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LXByb3BlcnR5LWlzLWVudW1lcmFibGUnKTtcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1vYmplY3QnKTtcbnZhciBJbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luZGV4ZWQtb2JqZWN0Jyk7XG5cbnZhciBuYXRpdmVBc3NpZ24gPSBPYmplY3QuYXNzaWduO1xudmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuXG4vLyBgT2JqZWN0LmFzc2lnbmAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QuYXNzaWduXG5tb2R1bGUuZXhwb3J0cyA9ICFuYXRpdmVBc3NpZ24gfHwgZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyBzaG91bGQgaGF2ZSBjb3JyZWN0IG9yZGVyIG9mIG9wZXJhdGlvbnMgKEVkZ2UgYnVnKVxuICBpZiAoREVTQ1JJUFRPUlMgJiYgbmF0aXZlQXNzaWduKHsgYjogMSB9LCBuYXRpdmVBc3NpZ24oZGVmaW5lUHJvcGVydHkoe30sICdhJywge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBkZWZpbmVQcm9wZXJ0eSh0aGlzLCAnYicsIHtcbiAgICAgICAgdmFsdWU6IDMsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG4gIH0pLCB7IGI6IDIgfSkpLmIgIT09IDEpIHJldHVybiB0cnVlO1xuICAvLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZylcbiAgdmFyIEEgPSB7fTtcbiAgdmFyIEIgPSB7fTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBzeW1ib2wgPSBTeW1ib2woKTtcbiAgdmFyIGFscGhhYmV0ID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JztcbiAgQVtzeW1ib2xdID0gNztcbiAgYWxwaGFiZXQuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24gKGNocikgeyBCW2Nocl0gPSBjaHI7IH0pO1xuICByZXR1cm4gbmF0aXZlQXNzaWduKHt9LCBBKVtzeW1ib2xdICE9IDcgfHwgb2JqZWN0S2V5cyhuYXRpdmVBc3NpZ24oe30sIEIpKS5qb2luKCcnKSAhPSBhbHBoYWJldDtcbn0pID8gZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgc291cmNlKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgdmFyIFQgPSB0b09iamVjdCh0YXJnZXQpO1xuICB2YXIgYXJndW1lbnRzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgdmFyIGluZGV4ID0gMTtcbiAgdmFyIGdldE93blByb3BlcnR5U3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZS5mO1xuICB2YXIgcHJvcGVydHlJc0VudW1lcmFibGUgPSBwcm9wZXJ0eUlzRW51bWVyYWJsZU1vZHVsZS5mO1xuICB3aGlsZSAoYXJndW1lbnRzTGVuZ3RoID4gaW5kZXgpIHtcbiAgICB2YXIgUyA9IEluZGV4ZWRPYmplY3QoYXJndW1lbnRzW2luZGV4KytdKTtcbiAgICB2YXIga2V5cyA9IGdldE93blByb3BlcnR5U3ltYm9scyA/IG9iamVjdEtleXMoUykuY29uY2F0KGdldE93blByb3BlcnR5U3ltYm9scyhTKSkgOiBvYmplY3RLZXlzKFMpO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgaiA9IDA7XG4gICAgdmFyIGtleTtcbiAgICB3aGlsZSAobGVuZ3RoID4gaikge1xuICAgICAga2V5ID0ga2V5c1tqKytdO1xuICAgICAgaWYgKCFERVNDUklQVE9SUyB8fCBwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKFMsIGtleSkpIFRba2V5XSA9IFNba2V5XTtcbiAgICB9XG4gIH0gcmV0dXJuIFQ7XG59IDogbmF0aXZlQXNzaWduO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGdldEJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWJ1aWx0LWluJyk7XG52YXIgSVNfUFVSRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1wdXJlJyk7XG52YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBOQVRJVkVfU1lNQk9MID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL25hdGl2ZS1zeW1ib2wnKTtcbnZhciBVU0VfU1lNQk9MX0FTX1VJRCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy91c2Utc3ltYm9sLWFzLXVpZCcpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgaGFzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcycpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtYXJyYXknKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1vYmplY3QnKTtcbnZhciB0b0luZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW5kZXhlZC1vYmplY3QnKTtcbnZhciB0b1ByaW1pdGl2ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1wcmltaXRpdmUnKTtcbnZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLXByb3BlcnR5LWRlc2NyaXB0b3InKTtcbnZhciBuYXRpdmVPYmplY3RDcmVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWNyZWF0ZScpO1xudmFyIG9iamVjdEtleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWtleXMnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eU5hbWVzTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LW5hbWVzJyk7XG52YXIgZ2V0T3duUHJvcGVydHlOYW1lc0V4dGVybmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LW5hbWVzLWV4dGVybmFsJyk7XG52YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LXN5bWJvbHMnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcicpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcbnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtcHJvcGVydHktaXMtZW51bWVyYWJsZScpO1xudmFyIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtbm9uLWVudW1lcmFibGUtcHJvcGVydHknKTtcbnZhciByZWRlZmluZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWRlZmluZScpO1xudmFyIHNoYXJlZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zaGFyZWQnKTtcbnZhciBzaGFyZWRLZXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkLWtleScpO1xudmFyIGhpZGRlbktleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGlkZGVuLWtleXMnKTtcbnZhciB1aWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdWlkJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgd3JhcHBlZFdlbGxLbm93blN5bWJvbE1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbC13cmFwcGVkJyk7XG52YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS13ZWxsLWtub3duLXN5bWJvbCcpO1xudmFyIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NldC10by1zdHJpbmctdGFnJyk7XG52YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZScpO1xudmFyICRmb3JFYWNoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWl0ZXJhdGlvbicpLmZvckVhY2g7XG5cbnZhciBISURERU4gPSBzaGFyZWRLZXkoJ2hpZGRlbicpO1xudmFyIFNZTUJPTCA9ICdTeW1ib2wnO1xudmFyIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnO1xudmFyIFRPX1BSSU1JVElWRSA9IHdlbGxLbm93blN5bWJvbCgndG9QcmltaXRpdmUnKTtcbnZhciBzZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5zZXQ7XG52YXIgZ2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuZ2V0dGVyRm9yKFNZTUJPTCk7XG52YXIgT2JqZWN0UHJvdG90eXBlID0gT2JqZWN0W1BST1RPVFlQRV07XG52YXIgJFN5bWJvbCA9IGdsb2JhbC5TeW1ib2w7XG52YXIgJHN0cmluZ2lmeSA9IGdldEJ1aWx0SW4oJ0pTT04nLCAnc3RyaW5naWZ5Jyk7XG52YXIgbmF0aXZlR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yTW9kdWxlLmY7XG52YXIgbmF0aXZlRGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mO1xudmFyIG5hdGl2ZUdldE93blByb3BlcnR5TmFtZXMgPSBnZXRPd25Qcm9wZXJ0eU5hbWVzRXh0ZXJuYWwuZjtcbnZhciBuYXRpdmVQcm9wZXJ0eUlzRW51bWVyYWJsZSA9IHByb3BlcnR5SXNFbnVtZXJhYmxlTW9kdWxlLmY7XG52YXIgQWxsU3ltYm9scyA9IHNoYXJlZCgnc3ltYm9scycpO1xudmFyIE9iamVjdFByb3RvdHlwZVN5bWJvbHMgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKTtcbnZhciBTdHJpbmdUb1N5bWJvbFJlZ2lzdHJ5ID0gc2hhcmVkKCdzdHJpbmctdG8tc3ltYm9sLXJlZ2lzdHJ5Jyk7XG52YXIgU3ltYm9sVG9TdHJpbmdSZWdpc3RyeSA9IHNoYXJlZCgnc3ltYm9sLXRvLXN0cmluZy1yZWdpc3RyeScpO1xudmFyIFdlbGxLbm93blN5bWJvbHNTdG9yZSA9IHNoYXJlZCgnd2tzJyk7XG52YXIgUU9iamVjdCA9IGdsb2JhbC5RT2JqZWN0O1xuLy8gRG9uJ3QgdXNlIHNldHRlcnMgaW4gUXQgU2NyaXB0LCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTczXG52YXIgVVNFX1NFVFRFUiA9ICFRT2JqZWN0IHx8ICFRT2JqZWN0W1BST1RPVFlQRV0gfHwgIVFPYmplY3RbUFJPVE9UWVBFXS5maW5kQ2hpbGQ7XG5cbi8vIGZhbGxiYWNrIGZvciBvbGQgQW5kcm9pZCwgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTY4N1xudmFyIHNldFN5bWJvbERlc2NyaXB0b3IgPSBERVNDUklQVE9SUyAmJiBmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBuYXRpdmVPYmplY3RDcmVhdGUobmF0aXZlRGVmaW5lUHJvcGVydHkoe30sICdhJywge1xuICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbmF0aXZlRGVmaW5lUHJvcGVydHkodGhpcywgJ2EnLCB7IHZhbHVlOiA3IH0pLmE7IH1cbiAgfSkpLmEgIT0gNztcbn0pID8gZnVuY3Rpb24gKE8sIFAsIEF0dHJpYnV0ZXMpIHtcbiAgdmFyIE9iamVjdFByb3RvdHlwZURlc2NyaXB0b3IgPSBuYXRpdmVHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0UHJvdG90eXBlLCBQKTtcbiAgaWYgKE9iamVjdFByb3RvdHlwZURlc2NyaXB0b3IpIGRlbGV0ZSBPYmplY3RQcm90b3R5cGVbUF07XG4gIG5hdGl2ZURlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpO1xuICBpZiAoT2JqZWN0UHJvdG90eXBlRGVzY3JpcHRvciAmJiBPICE9PSBPYmplY3RQcm90b3R5cGUpIHtcbiAgICBuYXRpdmVEZWZpbmVQcm9wZXJ0eShPYmplY3RQcm90b3R5cGUsIFAsIE9iamVjdFByb3RvdHlwZURlc2NyaXB0b3IpO1xuICB9XG59IDogbmF0aXZlRGVmaW5lUHJvcGVydHk7XG5cbnZhciB3cmFwID0gZnVuY3Rpb24gKHRhZywgZGVzY3JpcHRpb24pIHtcbiAgdmFyIHN5bWJvbCA9IEFsbFN5bWJvbHNbdGFnXSA9IG5hdGl2ZU9iamVjdENyZWF0ZSgkU3ltYm9sW1BST1RPVFlQRV0pO1xuICBzZXRJbnRlcm5hbFN0YXRlKHN5bWJvbCwge1xuICAgIHR5cGU6IFNZTUJPTCxcbiAgICB0YWc6IHRhZyxcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25cbiAgfSk7XG4gIGlmICghREVTQ1JJUFRPUlMpIHN5bWJvbC5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICByZXR1cm4gc3ltYm9sO1xufTtcblxudmFyIGlzU3ltYm9sID0gVVNFX1NZTUJPTF9BU19VSUQgPyBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJztcbn0gOiBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIE9iamVjdChpdCkgaW5zdGFuY2VvZiAkU3ltYm9sO1xufTtcblxudmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpIHtcbiAgaWYgKE8gPT09IE9iamVjdFByb3RvdHlwZSkgJGRlZmluZVByb3BlcnR5KE9iamVjdFByb3RvdHlwZVN5bWJvbHMsIFAsIEF0dHJpYnV0ZXMpO1xuICBhbk9iamVjdChPKTtcbiAgdmFyIGtleSA9IHRvUHJpbWl0aXZlKFAsIHRydWUpO1xuICBhbk9iamVjdChBdHRyaWJ1dGVzKTtcbiAgaWYgKGhhcyhBbGxTeW1ib2xzLCBrZXkpKSB7XG4gICAgaWYgKCFBdHRyaWJ1dGVzLmVudW1lcmFibGUpIHtcbiAgICAgIGlmICghaGFzKE8sIEhJRERFTikpIG5hdGl2ZURlZmluZVByb3BlcnR5KE8sIEhJRERFTiwgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKDEsIHt9KSk7XG4gICAgICBPW0hJRERFTl1ba2V5XSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChoYXMoTywgSElEREVOKSAmJiBPW0hJRERFTl1ba2V5XSkgT1tISURERU5dW2tleV0gPSBmYWxzZTtcbiAgICAgIEF0dHJpYnV0ZXMgPSBuYXRpdmVPYmplY3RDcmVhdGUoQXR0cmlidXRlcywgeyBlbnVtZXJhYmxlOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoMCwgZmFsc2UpIH0pO1xuICAgIH0gcmV0dXJuIHNldFN5bWJvbERlc2NyaXB0b3IoTywga2V5LCBBdHRyaWJ1dGVzKTtcbiAgfSByZXR1cm4gbmF0aXZlRGVmaW5lUHJvcGVydHkoTywga2V5LCBBdHRyaWJ1dGVzKTtcbn07XG5cbnZhciAkZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykge1xuICBhbk9iamVjdChPKTtcbiAgdmFyIHByb3BlcnRpZXMgPSB0b0luZGV4ZWRPYmplY3QoUHJvcGVydGllcyk7XG4gIHZhciBrZXlzID0gb2JqZWN0S2V5cyhwcm9wZXJ0aWVzKS5jb25jYXQoJGdldE93blByb3BlcnR5U3ltYm9scyhwcm9wZXJ0aWVzKSk7XG4gICRmb3JFYWNoKGtleXMsIGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIURFU0NSSVBUT1JTIHx8ICRwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHByb3BlcnRpZXMsIGtleSkpICRkZWZpbmVQcm9wZXJ0eShPLCBrZXksIHByb3BlcnRpZXNba2V5XSk7XG4gIH0pO1xuICByZXR1cm4gTztcbn07XG5cbnZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpIHtcbiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IG5hdGl2ZU9iamVjdENyZWF0ZShPKSA6ICRkZWZpbmVQcm9wZXJ0aWVzKG5hdGl2ZU9iamVjdENyZWF0ZShPKSwgUHJvcGVydGllcyk7XG59O1xuXG52YXIgJHByb3BlcnR5SXNFbnVtZXJhYmxlID0gZnVuY3Rpb24gcHJvcGVydHlJc0VudW1lcmFibGUoVikge1xuICB2YXIgUCA9IHRvUHJpbWl0aXZlKFYsIHRydWUpO1xuICB2YXIgZW51bWVyYWJsZSA9IG5hdGl2ZVByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodGhpcywgUCk7XG4gIGlmICh0aGlzID09PSBPYmplY3RQcm90b3R5cGUgJiYgaGFzKEFsbFN5bWJvbHMsIFApICYmICFoYXMoT2JqZWN0UHJvdG90eXBlU3ltYm9scywgUCkpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGVudW1lcmFibGUgfHwgIWhhcyh0aGlzLCBQKSB8fCAhaGFzKEFsbFN5bWJvbHMsIFApIHx8IGhhcyh0aGlzLCBISURERU4pICYmIHRoaXNbSElEREVOXVtQXSA/IGVudW1lcmFibGUgOiB0cnVlO1xufTtcblxudmFyICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkge1xuICB2YXIgaXQgPSB0b0luZGV4ZWRPYmplY3QoTyk7XG4gIHZhciBrZXkgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTtcbiAgaWYgKGl0ID09PSBPYmplY3RQcm90b3R5cGUgJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPYmplY3RQcm90b3R5cGVTeW1ib2xzLCBrZXkpKSByZXR1cm47XG4gIHZhciBkZXNjcmlwdG9yID0gbmF0aXZlR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpO1xuICBpZiAoZGVzY3JpcHRvciAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0pKSB7XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZGVzY3JpcHRvcjtcbn07XG5cbnZhciAkZ2V0T3duUHJvcGVydHlOYW1lcyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoTykge1xuICB2YXIgbmFtZXMgPSBuYXRpdmVHZXRPd25Qcm9wZXJ0eU5hbWVzKHRvSW5kZXhlZE9iamVjdChPKSk7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgJGZvckVhY2gobmFtZXMsIGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIWhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoaGlkZGVuS2V5cywga2V5KSkgcmVzdWx0LnB1c2goa2V5KTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG52YXIgJGdldE93blByb3BlcnR5U3ltYm9scyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5U3ltYm9scyhPKSB7XG4gIHZhciBJU19PQkpFQ1RfUFJPVE9UWVBFID0gTyA9PT0gT2JqZWN0UHJvdG90eXBlO1xuICB2YXIgbmFtZXMgPSBuYXRpdmVHZXRPd25Qcm9wZXJ0eU5hbWVzKElTX09CSkVDVF9QUk9UT1RZUEUgPyBPYmplY3RQcm90b3R5cGVTeW1ib2xzIDogdG9JbmRleGVkT2JqZWN0KE8pKTtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICAkZm9yRWFjaChuYW1lcywgZnVuY3Rpb24gKGtleSkge1xuICAgIGlmIChoYXMoQWxsU3ltYm9scywga2V5KSAmJiAoIUlTX09CSkVDVF9QUk9UT1RZUEUgfHwgaGFzKE9iamVjdFByb3RvdHlwZSwga2V5KSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKEFsbFN5bWJvbHNba2V5XSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIGBTeW1ib2xgIGNvbnN0cnVjdG9yXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1zeW1ib2wtY29uc3RydWN0b3JcbmlmICghTkFUSVZFX1NZTUJPTCkge1xuICAkU3ltYm9sID0gZnVuY3Rpb24gU3ltYm9sKCkge1xuICAgIGlmICh0aGlzIGluc3RhbmNlb2YgJFN5bWJvbCkgdGhyb3cgVHlwZUVycm9yKCdTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3InKTtcbiAgICB2YXIgZGVzY3JpcHRpb24gPSAhYXJndW1lbnRzLmxlbmd0aCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IFN0cmluZyhhcmd1bWVudHNbMF0pO1xuICAgIHZhciB0YWcgPSB1aWQoZGVzY3JpcHRpb24pO1xuICAgIHZhciBzZXR0ZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh0aGlzID09PSBPYmplY3RQcm90b3R5cGUpIHNldHRlci5jYWxsKE9iamVjdFByb3RvdHlwZVN5bWJvbHMsIHZhbHVlKTtcbiAgICAgIGlmIChoYXModGhpcywgSElEREVOKSAmJiBoYXModGhpc1tISURERU5dLCB0YWcpKSB0aGlzW0hJRERFTl1bdGFnXSA9IGZhbHNlO1xuICAgICAgc2V0U3ltYm9sRGVzY3JpcHRvcih0aGlzLCB0YWcsIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvcigxLCB2YWx1ZSkpO1xuICAgIH07XG4gICAgaWYgKERFU0NSSVBUT1JTICYmIFVTRV9TRVRURVIpIHNldFN5bWJvbERlc2NyaXB0b3IoT2JqZWN0UHJvdG90eXBlLCB0YWcsIHsgY29uZmlndXJhYmxlOiB0cnVlLCBzZXQ6IHNldHRlciB9KTtcbiAgICByZXR1cm4gd3JhcCh0YWcsIGRlc2NyaXB0aW9uKTtcbiAgfTtcblxuICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBnZXRJbnRlcm5hbFN0YXRlKHRoaXMpLnRhZztcbiAgfSk7XG5cbiAgcmVkZWZpbmUoJFN5bWJvbCwgJ3dpdGhvdXRTZXR0ZXInLCBmdW5jdGlvbiAoZGVzY3JpcHRpb24pIHtcbiAgICByZXR1cm4gd3JhcCh1aWQoZGVzY3JpcHRpb24pLCBkZXNjcmlwdGlvbik7XG4gIH0pO1xuXG4gIHByb3BlcnR5SXNFbnVtZXJhYmxlTW9kdWxlLmYgPSAkcHJvcGVydHlJc0VudW1lcmFibGU7XG4gIGRlZmluZVByb3BlcnR5TW9kdWxlLmYgPSAkZGVmaW5lUHJvcGVydHk7XG4gIGdldE93blByb3BlcnR5RGVzY3JpcHRvck1vZHVsZS5mID0gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbiAgZ2V0T3duUHJvcGVydHlOYW1lc01vZHVsZS5mID0gZ2V0T3duUHJvcGVydHlOYW1lc0V4dGVybmFsLmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lcztcbiAgZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlLmYgPSAkZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuXG4gIHdyYXBwZWRXZWxsS25vd25TeW1ib2xNb2R1bGUuZiA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuIHdyYXAod2VsbEtub3duU3ltYm9sKG5hbWUpLCBuYW1lKTtcbiAgfTtcblxuICBpZiAoREVTQ1JJUFRPUlMpIHtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1TeW1ib2wtZGVzY3JpcHRpb25cbiAgICBuYXRpdmVEZWZpbmVQcm9wZXJ0eSgkU3ltYm9sW1BST1RPVFlQRV0sICdkZXNjcmlwdGlvbicsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiBnZXRJbnRlcm5hbFN0YXRlKHRoaXMpLmRlc2NyaXB0aW9uO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghSVNfUFVSRSkge1xuICAgICAgcmVkZWZpbmUoT2JqZWN0UHJvdG90eXBlLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHsgdW5zYWZlOiB0cnVlIH0pO1xuICAgIH1cbiAgfVxufVxuXG4kKHsgZ2xvYmFsOiB0cnVlLCB3cmFwOiB0cnVlLCBmb3JjZWQ6ICFOQVRJVkVfU1lNQk9MLCBzaGFtOiAhTkFUSVZFX1NZTUJPTCB9LCB7XG4gIFN5bWJvbDogJFN5bWJvbFxufSk7XG5cbiRmb3JFYWNoKG9iamVjdEtleXMoV2VsbEtub3duU3ltYm9sc1N0b3JlKSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgZGVmaW5lV2VsbEtub3duU3ltYm9sKG5hbWUpO1xufSk7XG5cbiQoeyB0YXJnZXQ6IFNZTUJPTCwgc3RhdDogdHJ1ZSwgZm9yY2VkOiAhTkFUSVZFX1NZTUJPTCB9LCB7XG4gIC8vIGBTeW1ib2wuZm9yYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtc3ltYm9sLmZvclxuICAnZm9yJzogZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBzdHJpbmcgPSBTdHJpbmcoa2V5KTtcbiAgICBpZiAoaGFzKFN0cmluZ1RvU3ltYm9sUmVnaXN0cnksIHN0cmluZykpIHJldHVybiBTdHJpbmdUb1N5bWJvbFJlZ2lzdHJ5W3N0cmluZ107XG4gICAgdmFyIHN5bWJvbCA9ICRTeW1ib2woc3RyaW5nKTtcbiAgICBTdHJpbmdUb1N5bWJvbFJlZ2lzdHJ5W3N0cmluZ10gPSBzeW1ib2w7XG4gICAgU3ltYm9sVG9TdHJpbmdSZWdpc3RyeVtzeW1ib2xdID0gc3RyaW5nO1xuICAgIHJldHVybiBzeW1ib2w7XG4gIH0sXG4gIC8vIGBTeW1ib2wua2V5Rm9yYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtc3ltYm9sLmtleWZvclxuICBrZXlGb3I6IGZ1bmN0aW9uIGtleUZvcihzeW0pIHtcbiAgICBpZiAoIWlzU3ltYm9sKHN5bSkpIHRocm93IFR5cGVFcnJvcihzeW0gKyAnIGlzIG5vdCBhIHN5bWJvbCcpO1xuICAgIGlmIChoYXMoU3ltYm9sVG9TdHJpbmdSZWdpc3RyeSwgc3ltKSkgcmV0dXJuIFN5bWJvbFRvU3RyaW5nUmVnaXN0cnlbc3ltXTtcbiAgfSxcbiAgdXNlU2V0dGVyOiBmdW5jdGlvbiAoKSB7IFVTRV9TRVRURVIgPSB0cnVlOyB9LFxuICB1c2VTaW1wbGU6IGZ1bmN0aW9uICgpIHsgVVNFX1NFVFRFUiA9IGZhbHNlOyB9XG59KTtcblxuJCh7IHRhcmdldDogJ09iamVjdCcsIHN0YXQ6IHRydWUsIGZvcmNlZDogIU5BVElWRV9TWU1CT0wsIHNoYW06ICFERVNDUklQVE9SUyB9LCB7XG4gIC8vIGBPYmplY3QuY3JlYXRlYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LmNyZWF0ZVxuICBjcmVhdGU6ICRjcmVhdGUsXG4gIC8vIGBPYmplY3QuZGVmaW5lUHJvcGVydHlgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QuZGVmaW5lcHJvcGVydHlcbiAgZGVmaW5lUHJvcGVydHk6ICRkZWZpbmVQcm9wZXJ0eSxcbiAgLy8gYE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LmRlZmluZXByb3BlcnRpZXNcbiAgZGVmaW5lUHJvcGVydGllczogJGRlZmluZVByb3BlcnRpZXMsXG4gIC8vIGBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtb2JqZWN0LmdldG93bnByb3BlcnR5ZGVzY3JpcHRvcnNcbiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yXG59KTtcblxuJCh7IHRhcmdldDogJ09iamVjdCcsIHN0YXQ6IHRydWUsIGZvcmNlZDogIU5BVElWRV9TWU1CT0wgfSwge1xuICAvLyBgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXNgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QuZ2V0b3ducHJvcGVydHluYW1lc1xuICBnZXRPd25Qcm9wZXJ0eU5hbWVzOiAkZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgLy8gYE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHNgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1vYmplY3QuZ2V0b3ducHJvcGVydHlzeW1ib2xzXG4gIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9sc1xufSk7XG5cbi8vIENocm9tZSAzOCBhbmQgMzkgYE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHNgIGZhaWxzIG9uIHByaW1pdGl2ZXNcbi8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTM0NDNcbiQoeyB0YXJnZXQ6ICdPYmplY3QnLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IGZhaWxzKGZ1bmN0aW9uICgpIHsgZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlLmYoMSk7IH0pIH0sIHtcbiAgZ2V0T3duUHJvcGVydHlTeW1ib2xzOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaXQpIHtcbiAgICByZXR1cm4gZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlLmYodG9PYmplY3QoaXQpKTtcbiAgfVxufSk7XG5cbi8vIGBKU09OLnN0cmluZ2lmeWAgbWV0aG9kIGJlaGF2aW9yIHdpdGggc3ltYm9sc1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtanNvbi5zdHJpbmdpZnlcbmlmICgkc3RyaW5naWZ5KSB7XG4gIHZhciBGT1JDRURfSlNPTl9TVFJJTkdJRlkgPSAhTkFUSVZFX1NZTUJPTCB8fCBmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN5bWJvbCA9ICRTeW1ib2woKTtcbiAgICAvLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fVxuICAgIHJldHVybiAkc3RyaW5naWZ5KFtzeW1ib2xdKSAhPSAnW251bGxdJ1xuICAgICAgLy8gV2ViS2l0IGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyBudWxsXG4gICAgICB8fCAkc3RyaW5naWZ5KHsgYTogc3ltYm9sIH0pICE9ICd7fSdcbiAgICAgIC8vIFY4IHRocm93cyBvbiBib3hlZCBzeW1ib2xzXG4gICAgICB8fCAkc3RyaW5naWZ5KE9iamVjdChzeW1ib2wpKSAhPSAne30nO1xuICB9KTtcblxuICAkKHsgdGFyZ2V0OiAnSlNPTicsIHN0YXQ6IHRydWUsIGZvcmNlZDogRk9SQ0VEX0pTT05fU1RSSU5HSUZZIH0sIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBzdHJpbmdpZnk6IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCwgcmVwbGFjZXIsIHNwYWNlKSB7XG4gICAgICB2YXIgYXJncyA9IFtpdF07XG4gICAgICB2YXIgaW5kZXggPSAxO1xuICAgICAgdmFyICRyZXBsYWNlcjtcbiAgICAgIHdoaWxlIChhcmd1bWVudHMubGVuZ3RoID4gaW5kZXgpIGFyZ3MucHVzaChhcmd1bWVudHNbaW5kZXgrK10pO1xuICAgICAgJHJlcGxhY2VyID0gcmVwbGFjZXI7XG4gICAgICBpZiAoIWlzT2JqZWN0KHJlcGxhY2VyKSAmJiBpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSkgcmV0dXJuOyAvLyBJRTggcmV0dXJucyBzdHJpbmcgb24gdW5kZWZpbmVkXG4gICAgICBpZiAoIWlzQXJyYXkocmVwbGFjZXIpKSByZXBsYWNlciA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgJHJlcGxhY2VyID09ICdmdW5jdGlvbicpIHZhbHVlID0gJHJlcGxhY2VyLmNhbGwodGhpcywga2V5LCB2YWx1ZSk7XG4gICAgICAgIGlmICghaXNTeW1ib2wodmFsdWUpKSByZXR1cm4gdmFsdWU7XG4gICAgICB9O1xuICAgICAgYXJnc1sxXSA9IHJlcGxhY2VyO1xuICAgICAgcmV0dXJuICRzdHJpbmdpZnkuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gYFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV1gIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtc3ltYm9sLnByb3RvdHlwZS1AQHRvcHJpbWl0aXZlXG5pZiAoISRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdKSB7XG4gIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSgkU3ltYm9sW1BST1RPVFlQRV0sIFRPX1BSSU1JVElWRSwgJFN5bWJvbFtQUk9UT1RZUEVdLnZhbHVlT2YpO1xufVxuLy8gYFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ11gIHByb3BlcnR5XG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1zeW1ib2wucHJvdG90eXBlLUBAdG9zdHJpbmd0YWdcbnNldFRvU3RyaW5nVGFnKCRTeW1ib2wsIFNZTUJPTCk7XG5cbmhpZGRlbktleXNbSElEREVOXSA9IHRydWU7XG4iLCJ2YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgbmF0aXZlR2V0T3duUHJvcGVydHlOYW1lcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcycpLmY7XG5cbnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG52YXIgd2luZG93TmFtZXMgPSB0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHdpbmRvdyAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc1xuICA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdykgOiBbXTtcblxudmFyIGdldFdpbmRvd05hbWVzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5hdGl2ZUdldE93blByb3BlcnR5TmFtZXMoaXQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB3aW5kb3dOYW1lcy5zbGljZSgpO1xuICB9XG59O1xuXG4vLyBmYWxsYmFjayBmb3IgSUUxMSBidWdneSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB3aXRoIGlmcmFtZSBhbmQgd2luZG93XG5tb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCkge1xuICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XSdcbiAgICA/IGdldFdpbmRvd05hbWVzKGl0KVxuICAgIDogbmF0aXZlR2V0T3duUHJvcGVydHlOYW1lcyh0b0luZGV4ZWRPYmplY3QoaXQpKTtcbn07XG4iLCIvLyBgU3ltYm9sLnByb3RvdHlwZS5kZXNjcmlwdGlvbmAgZ2V0dGVyXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1zeW1ib2wucHJvdG90eXBlLmRlc2NyaXB0aW9uXG4ndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBoYXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzJyk7XG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtb2JqZWN0Jyk7XG52YXIgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpLmY7XG52YXIgY29weUNvbnN0cnVjdG9yUHJvcGVydGllcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jb3B5LWNvbnN0cnVjdG9yLXByb3BlcnRpZXMnKTtcblxudmFyIE5hdGl2ZVN5bWJvbCA9IGdsb2JhbC5TeW1ib2w7XG5cbmlmIChERVNDUklQVE9SUyAmJiB0eXBlb2YgTmF0aXZlU3ltYm9sID09ICdmdW5jdGlvbicgJiYgKCEoJ2Rlc2NyaXB0aW9uJyBpbiBOYXRpdmVTeW1ib2wucHJvdG90eXBlKSB8fFxuICAvLyBTYWZhcmkgMTIgYnVnXG4gIE5hdGl2ZVN5bWJvbCgpLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWRcbikpIHtcbiAgdmFyIEVtcHR5U3RyaW5nRGVzY3JpcHRpb25TdG9yZSA9IHt9O1xuICAvLyB3cmFwIFN5bWJvbCBjb25zdHJ1Y3RvciBmb3IgY29ycmVjdCB3b3JrIHdpdGggdW5kZWZpbmVkIGRlc2NyaXB0aW9uXG4gIHZhciBTeW1ib2xXcmFwcGVyID0gZnVuY3Rpb24gU3ltYm9sKCkge1xuICAgIHZhciBkZXNjcmlwdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPCAxIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogU3RyaW5nKGFyZ3VtZW50c1swXSk7XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMgaW5zdGFuY2VvZiBTeW1ib2xXcmFwcGVyXG4gICAgICA/IG5ldyBOYXRpdmVTeW1ib2woZGVzY3JpcHRpb24pXG4gICAgICAvLyBpbiBFZGdlIDEzLCBTdHJpbmcoU3ltYm9sKHVuZGVmaW5lZCkpID09PSAnU3ltYm9sKHVuZGVmaW5lZCknXG4gICAgICA6IGRlc2NyaXB0aW9uID09PSB1bmRlZmluZWQgPyBOYXRpdmVTeW1ib2woKSA6IE5hdGl2ZVN5bWJvbChkZXNjcmlwdGlvbik7XG4gICAgaWYgKGRlc2NyaXB0aW9uID09PSAnJykgRW1wdHlTdHJpbmdEZXNjcmlwdGlvblN0b3JlW3Jlc3VsdF0gPSB0cnVlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIGNvcHlDb25zdHJ1Y3RvclByb3BlcnRpZXMoU3ltYm9sV3JhcHBlciwgTmF0aXZlU3ltYm9sKTtcbiAgdmFyIHN5bWJvbFByb3RvdHlwZSA9IFN5bWJvbFdyYXBwZXIucHJvdG90eXBlID0gTmF0aXZlU3ltYm9sLnByb3RvdHlwZTtcbiAgc3ltYm9sUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ltYm9sV3JhcHBlcjtcblxuICB2YXIgc3ltYm9sVG9TdHJpbmcgPSBzeW1ib2xQcm90b3R5cGUudG9TdHJpbmc7XG4gIHZhciBuYXRpdmUgPSBTdHJpbmcoTmF0aXZlU3ltYm9sKCd0ZXN0JykpID09ICdTeW1ib2wodGVzdCknO1xuICB2YXIgcmVnZXhwID0gL15TeW1ib2xcXCgoLiopXFwpW14pXSskLztcbiAgZGVmaW5lUHJvcGVydHkoc3ltYm9sUHJvdG90eXBlLCAnZGVzY3JpcHRpb24nLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7XG4gICAgICB2YXIgc3ltYm9sID0gaXNPYmplY3QodGhpcykgPyB0aGlzLnZhbHVlT2YoKSA6IHRoaXM7XG4gICAgICB2YXIgc3RyaW5nID0gc3ltYm9sVG9TdHJpbmcuY2FsbChzeW1ib2wpO1xuICAgICAgaWYgKGhhcyhFbXB0eVN0cmluZ0Rlc2NyaXB0aW9uU3RvcmUsIHN5bWJvbCkpIHJldHVybiAnJztcbiAgICAgIHZhciBkZXNjID0gbmF0aXZlID8gc3RyaW5nLnNsaWNlKDcsIC0xKSA6IHN0cmluZy5yZXBsYWNlKHJlZ2V4cCwgJyQxJyk7XG4gICAgICByZXR1cm4gZGVzYyA9PT0gJycgPyB1bmRlZmluZWQgOiBkZXNjO1xuICAgIH1cbiAgfSk7XG5cbiAgJCh7IGdsb2JhbDogdHJ1ZSwgZm9yY2VkOiB0cnVlIH0sIHtcbiAgICBTeW1ib2w6IFN5bWJvbFdyYXBwZXJcbiAgfSk7XG59XG4iLCJ2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS13ZWxsLWtub3duLXN5bWJvbCcpO1xuXG4vLyBgU3ltYm9sLml0ZXJhdG9yYCB3ZWxsLWtub3duIHN5bWJvbFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtc3ltYm9sLml0ZXJhdG9yXG5kZWZpbmVXZWxsS25vd25TeW1ib2woJ2l0ZXJhdG9yJyk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciAkbWFwID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWl0ZXJhdGlvbicpLm1hcDtcbnZhciBhcnJheU1ldGhvZEhhc1NwZWNpZXNTdXBwb3J0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LW1ldGhvZC1oYXMtc3BlY2llcy1zdXBwb3J0Jyk7XG52YXIgYXJyYXlNZXRob2RVc2VzVG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktbWV0aG9kLXVzZXMtdG8tbGVuZ3RoJyk7XG5cbnZhciBIQVNfU1BFQ0lFU19TVVBQT1JUID0gYXJyYXlNZXRob2RIYXNTcGVjaWVzU3VwcG9ydCgnbWFwJyk7XG4vLyBGRjQ5LSBpc3N1ZVxudmFyIFVTRVNfVE9fTEVOR1RIID0gYXJyYXlNZXRob2RVc2VzVG9MZW5ndGgoJ21hcCcpO1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLm1hcGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUubWFwXG4vLyB3aXRoIGFkZGluZyBzdXBwb3J0IG9mIEBAc3BlY2llc1xuJCh7IHRhcmdldDogJ0FycmF5JywgcHJvdG86IHRydWUsIGZvcmNlZDogIUhBU19TUEVDSUVTX1NVUFBPUlQgfHwgIVVTRVNfVE9fTEVOR1RIIH0sIHtcbiAgbWFwOiBmdW5jdGlvbiBtYXAoY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgICByZXR1cm4gJG1hcCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gIH1cbn0pO1xuIiwidmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgVjhfVkVSU0lPTiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbmdpbmUtdjgtdmVyc2lvbicpO1xuXG52YXIgU1BFQ0lFUyA9IHdlbGxLbm93blN5bWJvbCgnc3BlY2llcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChNRVRIT0RfTkFNRSkge1xuICAvLyBXZSBjYW4ndCB1c2UgdGhpcyBmZWF0dXJlIGRldGVjdGlvbiBpbiBWOCBzaW5jZSBpdCBjYXVzZXNcbiAgLy8gZGVvcHRpbWl6YXRpb24gYW5kIHNlcmlvdXMgcGVyZm9ybWFuY2UgZGVncmFkYXRpb25cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzY3N1xuICByZXR1cm4gVjhfVkVSU0lPTiA+PSA1MSB8fCAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcnJheSA9IFtdO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IGFycmF5LmNvbnN0cnVjdG9yID0ge307XG4gICAgY29uc3RydWN0b3JbU1BFQ0lFU10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4geyBmb286IDEgfTtcbiAgICB9O1xuICAgIHJldHVybiBhcnJheVtNRVRIT0RfTkFNRV0oQm9vbGVhbikuZm9vICE9PSAxO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcicpLmY7XG52YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tbGVuZ3RoJyk7XG52YXIgbm90QVJlZ0V4cCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9ub3QtYS1yZWdleHAnKTtcbnZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlcXVpcmUtb2JqZWN0LWNvZXJjaWJsZScpO1xudmFyIGNvcnJlY3RJc1JlZ0V4cExvZ2ljID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NvcnJlY3QtaXMtcmVnZXhwLWxvZ2ljJyk7XG52YXIgSVNfUFVSRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1wdXJlJyk7XG5cbnZhciBuYXRpdmVFbmRzV2l0aCA9ICcnLmVuZHNXaXRoO1xudmFyIG1pbiA9IE1hdGgubWluO1xuXG52YXIgQ09SUkVDVF9JU19SRUdFWFBfTE9HSUMgPSBjb3JyZWN0SXNSZWdFeHBMb2dpYygnZW5kc1dpdGgnKTtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL3B1bGwvNzAyXG52YXIgTUROX1BPTFlGSUxMX0JVRyA9ICFJU19QVVJFICYmICFDT1JSRUNUX0lTX1JFR0VYUF9MT0dJQyAmJiAhIWZ1bmN0aW9uICgpIHtcbiAgdmFyIGRlc2NyaXB0b3IgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoU3RyaW5nLnByb3RvdHlwZSwgJ2VuZHNXaXRoJyk7XG4gIHJldHVybiBkZXNjcmlwdG9yICYmICFkZXNjcmlwdG9yLndyaXRhYmxlO1xufSgpO1xuXG4vLyBgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1zdHJpbmcucHJvdG90eXBlLmVuZHN3aXRoXG4kKHsgdGFyZ2V0OiAnU3RyaW5nJywgcHJvdG86IHRydWUsIGZvcmNlZDogIU1ETl9QT0xZRklMTF9CVUcgJiYgIUNPUlJFQ1RfSVNfUkVHRVhQX0xPR0lDIH0sIHtcbiAgZW5kc1dpdGg6IGZ1bmN0aW9uIGVuZHNXaXRoKHNlYXJjaFN0cmluZyAvKiAsIGVuZFBvc2l0aW9uID0gQGxlbmd0aCAqLykge1xuICAgIHZhciB0aGF0ID0gU3RyaW5nKHJlcXVpcmVPYmplY3RDb2VyY2libGUodGhpcykpO1xuICAgIG5vdEFSZWdFeHAoc2VhcmNoU3RyaW5nKTtcbiAgICB2YXIgZW5kUG9zaXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbGVuID0gdG9MZW5ndGgodGhhdC5sZW5ndGgpO1xuICAgIHZhciBlbmQgPSBlbmRQb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gbGVuIDogbWluKHRvTGVuZ3RoKGVuZFBvc2l0aW9uKSwgbGVuKTtcbiAgICB2YXIgc2VhcmNoID0gU3RyaW5nKHNlYXJjaFN0cmluZyk7XG4gICAgcmV0dXJuIG5hdGl2ZUVuZHNXaXRoXG4gICAgICA/IG5hdGl2ZUVuZHNXaXRoLmNhbGwodGhhdCwgc2VhcmNoLCBlbmQpXG4gICAgICA6IHRoYXQuc2xpY2UoZW5kIC0gc2VhcmNoLmxlbmd0aCwgZW5kKSA9PT0gc2VhcmNoO1xuICB9XG59KTtcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBNQVRDSCA9IHdlbGxLbm93blN5bWJvbCgnbWF0Y2gnKTtcblxuLy8gYElzUmVnRXhwYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWlzcmVnZXhwXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICB2YXIgaXNSZWdFeHA7XG4gIHJldHVybiBpc09iamVjdChpdCkgJiYgKChpc1JlZ0V4cCA9IGl0W01BVENIXSkgIT09IHVuZGVmaW5lZCA/ICEhaXNSZWdFeHAgOiBjbGFzc29mKGl0KSA9PSAnUmVnRXhwJyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNoYXJBdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zdHJpbmctbXVsdGlieXRlJykuY2hhckF0O1xudmFyIEludGVybmFsU3RhdGVNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW50ZXJuYWwtc3RhdGUnKTtcbnZhciBkZWZpbmVJdGVyYXRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZWZpbmUtaXRlcmF0b3InKTtcblxudmFyIFNUUklOR19JVEVSQVRPUiA9ICdTdHJpbmcgSXRlcmF0b3InO1xudmFyIHNldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLnNldDtcbnZhciBnZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5nZXR0ZXJGb3IoU1RSSU5HX0lURVJBVE9SKTtcblxuLy8gYFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl1gIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtc3RyaW5nLnByb3RvdHlwZS1AQGl0ZXJhdG9yXG5kZWZpbmVJdGVyYXRvcihTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbiAoaXRlcmF0ZWQpIHtcbiAgc2V0SW50ZXJuYWxTdGF0ZSh0aGlzLCB7XG4gICAgdHlwZTogU1RSSU5HX0lURVJBVE9SLFxuICAgIHN0cmluZzogU3RyaW5nKGl0ZXJhdGVkKSxcbiAgICBpbmRleDogMFxuICB9KTtcbi8vIGAlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlLm5leHRgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtJXN0cmluZ2l0ZXJhdG9ycHJvdG90eXBlJS5uZXh0XG59LCBmdW5jdGlvbiBuZXh0KCkge1xuICB2YXIgc3RhdGUgPSBnZXRJbnRlcm5hbFN0YXRlKHRoaXMpO1xuICB2YXIgc3RyaW5nID0gc3RhdGUuc3RyaW5nO1xuICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleDtcbiAgdmFyIHBvaW50O1xuICBpZiAoaW5kZXggPj0gc3RyaW5nLmxlbmd0aCkgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICBwb2ludCA9IGNoYXJBdChzdHJpbmcsIGluZGV4KTtcbiAgc3RhdGUuaW5kZXggKz0gcG9pbnQubGVuZ3RoO1xuICByZXR1cm4geyB2YWx1ZTogcG9pbnQsIGRvbmU6IGZhbHNlIH07XG59KTtcbiIsInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW50ZWdlcicpO1xudmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG5cbi8vIGBTdHJpbmcucHJvdG90eXBlLnsgY29kZVBvaW50QXQsIGF0IH1gIG1ldGhvZHMgaW1wbGVtZW50YXRpb25cbnZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoQ09OVkVSVF9UT19TVFJJTkcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgkdGhpcywgcG9zKSB7XG4gICAgdmFyIFMgPSBTdHJpbmcocmVxdWlyZU9iamVjdENvZXJjaWJsZSgkdGhpcykpO1xuICAgIHZhciBwb3NpdGlvbiA9IHRvSW50ZWdlcihwb3MpO1xuICAgIHZhciBzaXplID0gUy5sZW5ndGg7XG4gICAgdmFyIGZpcnN0LCBzZWNvbmQ7XG4gICAgaWYgKHBvc2l0aW9uIDwgMCB8fCBwb3NpdGlvbiA+PSBzaXplKSByZXR1cm4gQ09OVkVSVF9UT19TVFJJTkcgPyAnJyA6IHVuZGVmaW5lZDtcbiAgICBmaXJzdCA9IFMuY2hhckNvZGVBdChwb3NpdGlvbik7XG4gICAgcmV0dXJuIGZpcnN0IDwgMHhEODAwIHx8IGZpcnN0ID4gMHhEQkZGIHx8IHBvc2l0aW9uICsgMSA9PT0gc2l6ZVxuICAgICAgfHwgKHNlY29uZCA9IFMuY2hhckNvZGVBdChwb3NpdGlvbiArIDEpKSA8IDB4REMwMCB8fCBzZWNvbmQgPiAweERGRkZcbiAgICAgICAgPyBDT05WRVJUX1RPX1NUUklORyA/IFMuY2hhckF0KHBvc2l0aW9uKSA6IGZpcnN0XG4gICAgICAgIDogQ09OVkVSVF9UT19TVFJJTkcgPyBTLnNsaWNlKHBvc2l0aW9uLCBwb3NpdGlvbiArIDIpIDogKGZpcnN0IC0gMHhEODAwIDw8IDEwKSArIChzZWNvbmQgLSAweERDMDApICsgMHgxMDAwMDtcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBgU3RyaW5nLnByb3RvdHlwZS5jb2RlUG9pbnRBdGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUuY29kZXBvaW50YXRcbiAgY29kZUF0OiBjcmVhdGVNZXRob2QoZmFsc2UpLFxuICAvLyBgU3RyaW5nLnByb3RvdHlwZS5hdGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXRoaWFzYnluZW5zL1N0cmluZy5wcm90b3R5cGUuYXRcbiAgY2hhckF0OiBjcmVhdGVNZXRob2QodHJ1ZSlcbn07XG4iLCIvLyBpdGVyYWJsZSBET00gY29sbGVjdGlvbnNcbi8vIGZsYWcgLSBgaXRlcmFibGVgIGludGVyZmFjZSAtICdlbnRyaWVzJywgJ2tleXMnLCAndmFsdWVzJywgJ2ZvckVhY2gnIG1ldGhvZHNcbm1vZHVsZS5leHBvcnRzID0ge1xuICBDU1NSdWxlTGlzdDogMCxcbiAgQ1NTU3R5bGVEZWNsYXJhdGlvbjogMCxcbiAgQ1NTVmFsdWVMaXN0OiAwLFxuICBDbGllbnRSZWN0TGlzdDogMCxcbiAgRE9NUmVjdExpc3Q6IDAsXG4gIERPTVN0cmluZ0xpc3Q6IDAsXG4gIERPTVRva2VuTGlzdDogMSxcbiAgRGF0YVRyYW5zZmVySXRlbUxpc3Q6IDAsXG4gIEZpbGVMaXN0OiAwLFxuICBIVE1MQWxsQ29sbGVjdGlvbjogMCxcbiAgSFRNTENvbGxlY3Rpb246IDAsXG4gIEhUTUxGb3JtRWxlbWVudDogMCxcbiAgSFRNTFNlbGVjdEVsZW1lbnQ6IDAsXG4gIE1lZGlhTGlzdDogMCxcbiAgTWltZVR5cGVBcnJheTogMCxcbiAgTmFtZWROb2RlTWFwOiAwLFxuICBOb2RlTGlzdDogMSxcbiAgUGFpbnRSZXF1ZXN0TGlzdDogMCxcbiAgUGx1Z2luOiAwLFxuICBQbHVnaW5BcnJheTogMCxcbiAgU1ZHTGVuZ3RoTGlzdDogMCxcbiAgU1ZHTnVtYmVyTGlzdDogMCxcbiAgU1ZHUGF0aFNlZ0xpc3Q6IDAsXG4gIFNWR1BvaW50TGlzdDogMCxcbiAgU1ZHU3RyaW5nTGlzdDogMCxcbiAgU1ZHVHJhbnNmb3JtTGlzdDogMCxcbiAgU291cmNlQnVmZmVyTGlzdDogMCxcbiAgU3R5bGVTaGVldExpc3Q6IDAsXG4gIFRleHRUcmFja0N1ZUxpc3Q6IDAsXG4gIFRleHRUcmFja0xpc3Q6IDAsXG4gIFRvdWNoTGlzdDogMFxufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpO1xudmFyICRpbmNsdWRlcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1pbmNsdWRlcycpLmluY2x1ZGVzO1xudmFyIGFkZFRvVW5zY29wYWJsZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYWRkLXRvLXVuc2NvcGFibGVzJyk7XG52YXIgYXJyYXlNZXRob2RVc2VzVG9MZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktbWV0aG9kLXVzZXMtdG8tbGVuZ3RoJyk7XG5cbnZhciBVU0VTX1RPX0xFTkdUSCA9IGFycmF5TWV0aG9kVXNlc1RvTGVuZ3RoKCdpbmRleE9mJywgeyBBQ0NFU1NPUlM6IHRydWUsIDE6IDAgfSk7XG5cbi8vIGBBcnJheS5wcm90b3R5cGUuaW5jbHVkZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmluY2x1ZGVzXG4kKHsgdGFyZ2V0OiAnQXJyYXknLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiAhVVNFU19UT19MRU5HVEggfSwge1xuICBpbmNsdWRlczogZnVuY3Rpb24gaW5jbHVkZXMoZWwgLyogLCBmcm9tSW5kZXggPSAwICovKSB7XG4gICAgcmV0dXJuICRpbmNsdWRlcyh0aGlzLCBlbCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICB9XG59KTtcblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLUBAdW5zY29wYWJsZXNcbmFkZFRvVW5zY29wYWJsZXMoJ2luY2x1ZGVzJyk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBleGVjID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC1leGVjJyk7XG5cbiQoeyB0YXJnZXQ6ICdSZWdFeHAnLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiAvLi8uZXhlYyAhPT0gZXhlYyB9LCB7XG4gIGV4ZWM6IGV4ZWNcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHJlZ2V4cEZsYWdzID0gcmVxdWlyZSgnLi9yZWdleHAtZmxhZ3MnKTtcbnZhciBzdGlja3lIZWxwZXJzID0gcmVxdWlyZSgnLi9yZWdleHAtc3RpY2t5LWhlbHBlcnMnKTtcblxudmFyIG5hdGl2ZUV4ZWMgPSBSZWdFeHAucHJvdG90eXBlLmV4ZWM7XG4vLyBUaGlzIGFsd2F5cyByZWZlcnMgdG8gdGhlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiwgYmVjYXVzZSB0aGVcbi8vIFN0cmluZyNyZXBsYWNlIHBvbHlmaWxsIHVzZXMgLi9maXgtcmVnZXhwLXdlbGwta25vd24tc3ltYm9sLWxvZ2ljLmpzLFxuLy8gd2hpY2ggbG9hZHMgdGhpcyBmaWxlIGJlZm9yZSBwYXRjaGluZyB0aGUgbWV0aG9kLlxudmFyIG5hdGl2ZVJlcGxhY2UgPSBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2U7XG5cbnZhciBwYXRjaGVkRXhlYyA9IG5hdGl2ZUV4ZWM7XG5cbnZhciBVUERBVEVTX0xBU1RfSU5ERVhfV1JPTkcgPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgcmUxID0gL2EvO1xuICB2YXIgcmUyID0gL2IqL2c7XG4gIG5hdGl2ZUV4ZWMuY2FsbChyZTEsICdhJyk7XG4gIG5hdGl2ZUV4ZWMuY2FsbChyZTIsICdhJyk7XG4gIHJldHVybiByZTEubGFzdEluZGV4ICE9PSAwIHx8IHJlMi5sYXN0SW5kZXggIT09IDA7XG59KSgpO1xuXG52YXIgVU5TVVBQT1JURURfWSA9IHN0aWNreUhlbHBlcnMuVU5TVVBQT1JURURfWSB8fCBzdGlja3lIZWxwZXJzLkJST0tFTl9DQVJFVDtcblxuLy8gbm9ucGFydGljaXBhdGluZyBjYXB0dXJpbmcgZ3JvdXAsIGNvcGllZCBmcm9tIGVzNS1zaGltJ3MgU3RyaW5nI3NwbGl0IHBhdGNoLlxudmFyIE5QQ0dfSU5DTFVERUQgPSAvKCk/Py8uZXhlYygnJylbMV0gIT09IHVuZGVmaW5lZDtcblxudmFyIFBBVENIID0gVVBEQVRFU19MQVNUX0lOREVYX1dST05HIHx8IE5QQ0dfSU5DTFVERUQgfHwgVU5TVVBQT1JURURfWTtcblxuaWYgKFBBVENIKSB7XG4gIHBhdGNoZWRFeGVjID0gZnVuY3Rpb24gZXhlYyhzdHIpIHtcbiAgICB2YXIgcmUgPSB0aGlzO1xuICAgIHZhciBsYXN0SW5kZXgsIHJlQ29weSwgbWF0Y2gsIGk7XG4gICAgdmFyIHN0aWNreSA9IFVOU1VQUE9SVEVEX1kgJiYgcmUuc3RpY2t5O1xuICAgIHZhciBmbGFncyA9IHJlZ2V4cEZsYWdzLmNhbGwocmUpO1xuICAgIHZhciBzb3VyY2UgPSByZS5zb3VyY2U7XG4gICAgdmFyIGNoYXJzQWRkZWQgPSAwO1xuICAgIHZhciBzdHJDb3B5ID0gc3RyO1xuXG4gICAgaWYgKHN0aWNreSkge1xuICAgICAgZmxhZ3MgPSBmbGFncy5yZXBsYWNlKCd5JywgJycpO1xuICAgICAgaWYgKGZsYWdzLmluZGV4T2YoJ2cnKSA9PT0gLTEpIHtcbiAgICAgICAgZmxhZ3MgKz0gJ2cnO1xuICAgICAgfVxuXG4gICAgICBzdHJDb3B5ID0gU3RyaW5nKHN0cikuc2xpY2UocmUubGFzdEluZGV4KTtcbiAgICAgIC8vIFN1cHBvcnQgYW5jaG9yZWQgc3RpY2t5IGJlaGF2aW9yLlxuICAgICAgaWYgKHJlLmxhc3RJbmRleCA+IDAgJiYgKCFyZS5tdWx0aWxpbmUgfHwgcmUubXVsdGlsaW5lICYmIHN0cltyZS5sYXN0SW5kZXggLSAxXSAhPT0gJ1xcbicpKSB7XG4gICAgICAgIHNvdXJjZSA9ICcoPzogJyArIHNvdXJjZSArICcpJztcbiAgICAgICAgc3RyQ29weSA9ICcgJyArIHN0ckNvcHk7XG4gICAgICAgIGNoYXJzQWRkZWQrKztcbiAgICAgIH1cbiAgICAgIC8vIF4oPyArIHJ4ICsgKSBpcyBuZWVkZWQsIGluIGNvbWJpbmF0aW9uIHdpdGggc29tZSBzdHIgc2xpY2luZywgdG9cbiAgICAgIC8vIHNpbXVsYXRlIHRoZSAneScgZmxhZy5cbiAgICAgIHJlQ29weSA9IG5ldyBSZWdFeHAoJ14oPzonICsgc291cmNlICsgJyknLCBmbGFncyk7XG4gICAgfVxuXG4gICAgaWYgKE5QQ0dfSU5DTFVERUQpIHtcbiAgICAgIHJlQ29weSA9IG5ldyBSZWdFeHAoJ14nICsgc291cmNlICsgJyQoPyFcXFxccyknLCBmbGFncyk7XG4gICAgfVxuICAgIGlmIChVUERBVEVTX0xBU1RfSU5ERVhfV1JPTkcpIGxhc3RJbmRleCA9IHJlLmxhc3RJbmRleDtcblxuICAgIG1hdGNoID0gbmF0aXZlRXhlYy5jYWxsKHN0aWNreSA/IHJlQ29weSA6IHJlLCBzdHJDb3B5KTtcblxuICAgIGlmIChzdGlja3kpIHtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBtYXRjaC5pbnB1dCA9IG1hdGNoLmlucHV0LnNsaWNlKGNoYXJzQWRkZWQpO1xuICAgICAgICBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKGNoYXJzQWRkZWQpO1xuICAgICAgICBtYXRjaC5pbmRleCA9IHJlLmxhc3RJbmRleDtcbiAgICAgICAgcmUubGFzdEluZGV4ICs9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgIH0gZWxzZSByZS5sYXN0SW5kZXggPSAwO1xuICAgIH0gZWxzZSBpZiAoVVBEQVRFU19MQVNUX0lOREVYX1dST05HICYmIG1hdGNoKSB7XG4gICAgICByZS5sYXN0SW5kZXggPSByZS5nbG9iYWwgPyBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCA6IGxhc3RJbmRleDtcbiAgICB9XG4gICAgaWYgKE5QQ0dfSU5DTFVERUQgJiYgbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSkge1xuICAgICAgLy8gRml4IGJyb3dzZXJzIHdob3NlIGBleGVjYCBtZXRob2RzIGRvbid0IGNvbnNpc3RlbnRseSByZXR1cm4gYHVuZGVmaW5lZGBcbiAgICAgIC8vIGZvciBOUENHLCBsaWtlIElFOC4gTk9URTogVGhpcyBkb2Vzbicgd29yayBmb3IgLyguPyk/L1xuICAgICAgbmF0aXZlUmVwbGFjZS5jYWxsKG1hdGNoWzBdLCByZUNvcHksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yIChpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAyOyBpKyspIHtcbiAgICAgICAgICBpZiAoYXJndW1lbnRzW2ldID09PSB1bmRlZmluZWQpIG1hdGNoW2ldID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWF0Y2g7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGF0Y2hlZEV4ZWM7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBmYWlscyA9IHJlcXVpcmUoJy4vZmFpbHMnKTtcblxuLy8gYmFiZWwtbWluaWZ5IHRyYW5zcGlsZXMgUmVnRXhwKCdhJywgJ3knKSAtPiAvYS95IGFuZCBpdCBjYXVzZXMgU3ludGF4RXJyb3IsXG4vLyBzbyB3ZSB1c2UgYW4gaW50ZXJtZWRpYXRlIGZ1bmN0aW9uLlxuZnVuY3Rpb24gUkUocywgZikge1xuICByZXR1cm4gUmVnRXhwKHMsIGYpO1xufVxuXG5leHBvcnRzLlVOU1VQUE9SVEVEX1kgPSBmYWlscyhmdW5jdGlvbiAoKSB7XG4gIC8vIGJhYmVsLW1pbmlmeSB0cmFuc3BpbGVzIFJlZ0V4cCgnYScsICd5JykgLT4gL2EveSBhbmQgaXQgY2F1c2VzIFN5bnRheEVycm9yXG4gIHZhciByZSA9IFJFKCdhJywgJ3knKTtcbiAgcmUubGFzdEluZGV4ID0gMjtcbiAgcmV0dXJuIHJlLmV4ZWMoJ2FiY2QnKSAhPSBudWxsO1xufSk7XG5cbmV4cG9ydHMuQlJPS0VOX0NBUkVUID0gZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD03NzM2ODdcbiAgdmFyIHJlID0gUkUoJ15yJywgJ2d5Jyk7XG4gIHJlLmxhc3RJbmRleCA9IDI7XG4gIHJldHVybiByZS5leGVjKCdzdHInKSAhPSBudWxsO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBub3RBUmVnRXhwID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL25vdC1hLXJlZ2V4cCcpO1xudmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG52YXIgY29ycmVjdElzUmVnRXhwTG9naWMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY29ycmVjdC1pcy1yZWdleHAtbG9naWMnKTtcblxuLy8gYFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtc3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlc1xuJCh7IHRhcmdldDogJ1N0cmluZycsIHByb3RvOiB0cnVlLCBmb3JjZWQ6ICFjb3JyZWN0SXNSZWdFeHBMb2dpYygnaW5jbHVkZXMnKSB9LCB7XG4gIGluY2x1ZGVzOiBmdW5jdGlvbiBpbmNsdWRlcyhzZWFyY2hTdHJpbmcgLyogLCBwb3NpdGlvbiA9IDAgKi8pIHtcbiAgICByZXR1cm4gISF+U3RyaW5nKHJlcXVpcmVPYmplY3RDb2VyY2libGUodGhpcykpXG4gICAgICAuaW5kZXhPZihub3RBUmVnRXhwKHNlYXJjaFN0cmluZyksIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbiAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9